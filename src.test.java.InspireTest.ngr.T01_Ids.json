[{"line":2,"elements":[{"line":3,"name":"","description":"","type":"background","keyword":"Background","steps":[{"name":"def mystorage = Java.type('storage.DataStorage')","result":{"duration":4663265,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":5,"doc_string":{"content_type":"","value":"05:29:52.207 karate.env system property was:","line":5}},{"name":"def db = new mystorage","result":{"duration":2964341,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":6},{"name":"def separator = java.lang.System.getProperty(\"file.separator\")","result":{"duration":8782021,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":7},{"name":"def outputpath = db.outputpath(\"T01_ids\") + separator","result":{"duration":3629350,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":8},{"name":"eval db.ensureDirectory(outputpath)","result":{"duration":4200558,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":9}]},{"line":11,"name":"getbrief list","description":"","id":"getbrief-list","type":"scenario","keyword":"Scenario","steps":[{"name":"url 'http:\/\/nationaalgeoregister.nl\/'","result":{"duration":1372320,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":13},{"name":"configure readTimeout = 240000","result":{"duration":1767225,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":14},{"name":"path 'geonetwork\/srv\/dut\/inspire'","result":{"duration":1273418,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":15},{"name":"param service = 'CSW'","result":{"duration":1218717,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":16},{"name":"param version = '2.0.2'","result":{"duration":1240317,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":17},{"name":"param request = 'GetRecords'","result":{"duration":1231617,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":18},{"name":"param propertyName = 'identifier'","result":{"duration":1243417,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":19},{"name":"param typeNames = 'csw:Record'","result":{"duration":1312818,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":20},{"name":"param elementsetname = \"brief\"","result":{"duration":1197317,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":21},{"name":"param resultType = 'results'","result":{"duration":1256217,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":22},{"name":"param startposition = 1","result":{"duration":1347419,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":23},{"name":"param maxRecords = 1000","result":{"duration":1295118,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":24},{"name":"method get","result":{"duration":20884849632,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":25,"doc_string":{"content_type":"","value":"05:29:52.548 request:\n1 > GET http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire?service=CSW&version=2.0.2&request=GetRecords&propertyName=identifier&typeNames=csw%3ARecord&elementsetname=brief&resultType=results&startposition=1&maxRecords=1000\n1 > Accept-Encoding: gzip,deflate\n1 > Connection: Keep-Alive\n1 > Host: nationaalgeoregister.nl\n1 > User-Agent: Apache-HttpClient\/4.5.12 (Java\/14.0.2)\n\n05:30:13.344 response time in milliseconds: 20794.19\n1 < 500\n1 < Connection: close\n1 < Content-Length: 531\n1 < Content-Type: text\/html; charset=iso-8859-1\n1 < Date: Fri, 15 Jan 2021 05:29:52 GMT\n1 < Server: Apache\n<!DOCTYPE HTML PUBLIC \"-\/\/IETF\/\/DTD HTML 2.0\/\/EN\">\n<html><head>\n<title>500 Internal Server Error<\/title>\n<\/head><body>\n<h1>Internal Server Error<\/h1>\n<p>The server encountered an internal error or\nmisconfiguration and was unable to complete\nyour request.<\/p>\n<p>Please contact the server administrator at \n support@geocat.net to inform them of the time this error occurred,\n and the actions you performed just before this error.<\/p>\n<p>More information about this error may be available\nin the server error log.<\/p>\n<\/body><\/html>\n\n\n05:30:13.357 xml parsing failed, response data type set to string: org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 50; White spaces are required between publicId and systemId.","line":25}},{"name":"status 200","result":{"duration":491704,"error_message":"com.intuit.karate.exception.KarateException: T01_Ids.feature:26 - status code was: 500, expected: 200, response time: 20794, url: http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire?service=CSW&version=2.0.2&request=GetRecords&propertyName=identifier&typeNames=csw%3ARecord&elementsetname=brief&resultType=results&startposition=1&maxRecords=1000, response: <!DOCTYPE HTML PUBLIC \"-\/\/IETF\/\/DTD HTML 2.0\/\/EN\">\n<html><head>\n<title>500 Internal Server Error<\/title>\n<\/head><body>\n<h1>Internal Server Error<\/h1>\n<p>The server encountered an internal error or\nmisconfiguration and was unable to complete\nyour request.<\/p>\n<p>Please contact the server administrator at \n support@geocat.net to inform them of the time this error occurred,\n and the actions you performed just before this error.<\/p>\n<p>More information about this error may be available\nin the server error log.<\/p>\n<\/body><\/html>\n","status":"failed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":26,"doc_string":{"content_type":"","value":"05:30:13.357 status code was: 500, expected: 200, response time: 20794, url: http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire?service=CSW&version=2.0.2&request=GetRecords&propertyName=identifier&typeNames=csw%3ARecord&elementsetname=brief&resultType=results&startposition=1&maxRecords=1000, response: <!DOCTYPE HTML PUBLIC \"-\/\/IETF\/\/DTD HTML 2.0\/\/EN\">\n<html><head>\n<title>500 Internal Server Error<\/title>\n<\/head><body>\n<h1>Internal Server Error<\/h1>\n<p>The server encountered an internal error or\nmisconfiguration and was unable to complete\nyour request.<\/p>\n<p>Please contact the server administrator at \n support@geocat.net to inform them of the time this error occurred,\n and the actions you performed just before this error.<\/p>\n<p>More information about this error may be available\nin the server error log.<\/p>\n<\/body><\/html>","line":26}},{"name":"eval karate.embed(responseBytes,'application\/xml')","result":{"duration":0,"status":"skipped"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":27},{"name":"def briefarray = get response \/GetRecordsResponse\/SearchResults\/BriefRecord[*]\/identifier","result":{"duration":0,"status":"skipped"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":32},{"name":"def list = karate.mapWithKey(briefarray ,'datasetIdentifierCode')","result":{"duration":0,"status":"skipped"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":33},{"name":"eval db.writeln(karate.pretty(list),outputpath + 'ids.json')","result":{"duration":0,"status":"skipped"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":34},{"name":"def servicearray = get response \/GetRecordsResponse\/SearchResults\/BriefRecord[type='service']\/identifier","result":{"duration":0,"status":"skipped"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":37},{"name":"def servicelist = karate.mapWithKey(servicearray,'datasetIdentifierCode')","result":{"duration":0,"status":"skipped"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":38},{"name":"eval db.writeln(karate.pretty(servicelist),outputpath + 'idsService.json')","result":{"duration":0,"status":"skipped"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":39},{"name":"def datasetarray = get response \/GetRecordsResponse\/SearchResults\/BriefRecord[type='dataset']\/identifier","result":{"duration":0,"status":"skipped"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":42},{"name":"def datasetlist = karate.mapWithKey(datasetarray,'datasetIdentifierCode')","result":{"duration":0,"status":"skipped"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":43},{"name":"eval db.writeln(karate.pretty(datasetlist ),outputpath + 'idsDataset.json')","result":{"duration":0,"status":"skipped"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":44}]}],"name":"src\/test\/java\/InspireTest\/ngr\/T01_Ids.feature","description":"getlist of ngr records","id":"getlist-of-ngr-records","keyword":"Feature","uri":"src\/test\/java\/InspireTest\/ngr\/T01_Ids.feature","tags":[{"name":"@step0","line":1}]}]