[{"line":2,"elements":[{"line":4,"name":"","description":"","type":"background","keyword":"Background","steps":[{"name":"url 'https:\/\/inspire.ec.europa.eu\/validator\/v2\/'","result":{"duration":107200,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":5,"doc_string":{"content_type":"","value":"10:37:35.900 karate.env system property was:","line":5}}]},{"line":128,"name":"Conformance Class: Download Service - Pre-defined Atom,  Atom Invasieve Exoten (INSPIRE Geharmoniseerd) https:\/\/geodata.nationaalgeoregister.nl\/rvo\/inspire\/invasieve-exoten\/atom\/v1_0\/index.xml EID11571c92-3940-4f42-a6cd-5e2b1c6f4d93","description":"","id":"conformance-class:-download-service---pre-defined-atom,--atom-invasieve-exoten-(inspire-geharmoniseerd)-https:\/\/geodata.nationaalgeoregister.nl\/rvo\/inspire\/invasieve-exoten\/atom\/v1-0\/index.xml-eid11571c92-3940-4f42-a6cd-5e2b1c6f4d93","type":"scenario","keyword":"Scenario Outline","steps":[{"name":"def testRunRequest =","result":{"duration":12621818,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":10,"doc_string":{"content_type":"","value":"{\n  \"label\": \"Conformance Class: Download Service - Pre-defined Atom,  Atom Invasieve Exoten (INSPIRE Geharmoniseerd)\",\n  \"executableTestSuiteIds\": [\n    \"EID11571c92-3940-4f42-a6cd-5e2b1c6f4d93\"\n  ],\n  \"arguments\": {},\n  \"testObject\": {\n    \"resources\": {\n      \"serviceEndpoint\": \"https:\/\/geodata.nationaalgeoregister.nl\/rvo\/inspire\/invasieve-exoten\/atom\/v1_0\/index.xml\"\n    }\n  }\n}","line":10}},{"name":"path 'TestRuns'","result":{"duration":2095987,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":26},{"name":"request testRunRequest","result":{"duration":33700,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":27},{"name":"method post","result":{"duration":9130337962,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":28},{"name":"assert responseStatus == 200 || responseStatus == 201","result":{"duration":7544360,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":29},{"name":"print response.EtfItemCollection.testRuns.TestRun.id","result":{"duration":17960505,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":30,"doc_string":{"content_type":"","value":"10:37:45.362 [print] EID50dd7cd3-be25-4afe-a8ee-a2926698ef1d","line":30}},{"name":"print response.EtfItemCollection.testRuns.TestRun.status","result":{"duration":6278867,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":31,"doc_string":{"content_type":"","value":"10:37:45.369 [print] UNDEFINED","line":31}},{"name":"print response.EtfItemCollection.testRuns.TestRun.label","result":{"duration":7407861,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":32,"doc_string":{"content_type":"","value":"10:37:45.376 [print] Conformance Class: Download Service - Pre-defined Atom,  Atom Invasieve Exoten (INSPIRE Geharmoniseerd)","line":32}},{"name":"print response.EtfItemCollection.ref","result":{"duration":7138262,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":33,"doc_string":{"content_type":"","value":"10:37:45.383 [print] https:\/\/inspire.ec.europa.eu\/validator\/\/v2\/TestRuns\/50dd7cd3-be25-4afe-a8ee-a2926698ef1d.json","line":33}},{"name":"print response.EtfItemCollection.testRuns.TestRun.logPath","result":{"duration":12873831,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":34,"doc_string":{"content_type":"","value":"10:37:45.397 [print] https:\/\/inspire.ec.europa.eu\/validator\/\/v2\/TestRuns\/EID50dd7cd3-be25-4afe-a8ee-a2926698ef1d\/log","line":34}},{"name":"def statuspath = \"TestRuns\/\" + response.EtfItemCollection.testRuns.TestRun.id","result":{"duration":11301640,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":36},{"name":"def progresspath = \"TestRuns\/\" + response.EtfItemCollection.testRuns.TestRun.id + \"\/progress\"","result":{"duration":3470581,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":37},{"name":"print 'statuspath', statuspath","result":{"duration":6873163,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":38,"doc_string":{"content_type":"","value":"10:37:45.419 [print] statuspath TestRuns\/EID50dd7cd3-be25-4afe-a8ee-a2926698ef1d","line":38}},{"name":"print 'progresspath ', progresspath","result":{"duration":4408476,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":39,"doc_string":{"content_type":"","value":"10:37:45.423 [print] progresspath  TestRuns\/EID50dd7cd3-be25-4afe-a8ee-a2926698ef1d\/progress","line":39}},{"name":"path  progresspath","result":{"duration":19200,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":46},{"name":"method GET","result":{"duration":528710191,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":47},{"name":"retry until response.val == response.max","result":{"duration":33900,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":48},{"name":"print response","result":{"duration":788196,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":49,"doc_string":{"content_type":"","value":"10:37:45.953 [print] {\n  \"val\": \"53\",\n  \"max\": \"54\",\n  \"log\": [\n    \"29.09.2020 10:37:39 - Preparing Test Run Conformance Class: Download Service - Pre-defined Atom,  Atom Invasieve Exoten (INSPIRE Geharmoniseerd) (initiated Tue Sep 29 10:37:39 UTC 2020)\",\n    \"29.09.2020 10:37:39 - Resolving Executable Test Suite dependencies\",\n    \"29.09.2020 10:37:39 - Preparing 1 Test Task:\",\n    \"29.09.2020 10:37:39 -  TestTask 1 (c376b6ce-52ca-4e78-b9c8-11b8f5e40409)\",\n    \"29.09.2020 10:37:39 -  will perform tests on Test Object 'index.xml' by using Executable Test Suite 'Conformance Class: Download Service - Pre-defined Atom (EID: 11571c92-3940-4f42-a6cd-5e2b1c6f4d93, V: 1.0.5 )'\",\n    \"29.09.2020 10:37:39 -  with parameters: \",\n    \"29.09.2020 10:37:39 - etf.testcases = *\",\n    \"29.09.2020 10:37:39 - Test Tasks prepared and ready to be executed. Waiting for the scheduler to start.\",\n    \"29.09.2020 10:37:39 - Setting state to CREATED\",\n    \"29.09.2020 10:37:39 - Changed state from CREATED to INITIALIZING\",\n    \"29.09.2020 10:37:40 - Starting TestRun.50dd7cd3-be25-4afe-a8ee-a2926698ef1d at 2020-09-29T10:37:41Z\",\n    \"29.09.2020 10:37:41 - Changed state from INITIALIZING to INITIALIZED\",\n    \"29.09.2020 10:37:41 - Project Properties: \",\n    \"29.09.2020 10:37:41 - etf.testcases - * \",\n    \"29.09.2020 10:37:41 - serviceEndpoint - https:\/\/geodata.nationaalgeoregister.nl\/rvo\/inspire\/invasieve-exoten\/atom\/v1_0\/index.xml \",\n    \"29.09.2020 10:37:41 - username -  \",\n    \"29.09.2020 10:37:41 - authUser -  \",\n    \"29.09.2020 10:37:41 - authMethod - basic \",\n    \"29.09.2020 10:37:41 - TestRunTask initialized\"\n  ]\n}","line":49}},{"name":"path  progresspath","result":{"duration":18600,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":51},{"name":"method GET","result":{"duration":18617307313,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":52},{"name":"print response","result":{"duration":2645691,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":54,"doc_string":{"content_type":"","value":"10:38:04.573 [print] {\n  \"val\": \"241\",\n  \"max\": \"241\",\n  \"log\": [\n  ]\n}","line":54}},{"name":"path  statuspath","result":{"duration":22300,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":56},{"name":"method GET","result":{"duration":4781755485,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":57},{"name":"print response.EtfItemCollection.testRuns.TestRun.id","result":{"duration":1709395,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":59,"doc_string":{"content_type":"","value":"10:38:09.357 [print] EID50dd7cd3-be25-4afe-a8ee-a2926698ef1d","line":59}},{"name":"print response.EtfItemCollection.testRuns.TestRun.status","result":{"duration":1330396,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":60,"doc_string":{"content_type":"","value":"10:38:09.359 [print] FAILED","line":60}},{"name":"def status = response.EtfItemCollection.testRuns.TestRun.status","result":{"duration":193999,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":61},{"name":"print status","result":{"duration":2840391,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":62,"doc_string":{"content_type":"","value":"10:38:09.363 [print] FAILED","line":62}},{"name":"print response.EtfItemCollection.testRuns.TestRun.label","result":{"duration":1208196,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":63,"doc_string":{"content_type":"","value":"10:38:09.364 [print] Conformance Class: Download Service - Pre-defined Atom,  Atom Invasieve Exoten (INSPIRE Geharmoniseerd)","line":63}},{"name":"print response.EtfItemCollection.ref","result":{"duration":1819794,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":64,"doc_string":{"content_type":"","value":"10:38:09.366 [print] https:\/\/inspire.ec.europa.eu\/validator\/\/v2\/TestRuns\/50dd7cd3-be25-4afe-a8ee-a2926698ef1d.json","line":64}},{"name":"def ref = response.EtfItemCollection.ref","result":{"duration":148399,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":65},{"name":"print ref","result":{"duration":1498295,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":66,"doc_string":{"content_type":"","value":"10:38:09.368 [print] https:\/\/inspire.ec.europa.eu\/validator\/\/v2\/TestRuns\/50dd7cd3-be25-4afe-a8ee-a2926698ef1d.json","line":66}},{"name":"print response.EtfItemCollection.testRuns.TestRun.logPath","result":{"duration":2951690,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":68,"doc_string":{"content_type":"","value":"10:38:09.371 [print] https:\/\/inspire.ec.europa.eu\/validator\/\/v2\/TestRuns\/EID50dd7cd3-be25-4afe-a8ee-a2926698ef1d\/log","line":68}},{"name":"def embedUrl =","result":{"duration":3290688,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":71,"doc_string":{"content_type":"","value":"function(url, hyperlinkText)\n     { var html = '<a href=\\\"' + url + '\\\" >' + hyperlinkText + '<\/a>';\n     karate.embed(html,'text\/html'); }","line":71}},{"name":"def time = java.lang.System.currentTimeMillis()","result":{"duration":19817633,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":77},{"name":"def jsonPath = time + 'Conformance Class: Download Service - Pre-defined Atom,  Atom Invasieve Exoten (INSPIRE Geharmoniseerd).json'","result":{"duration":6565678,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":78},{"name":"def responsecontent = response","result":{"duration":14800,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":79},{"name":"karate.write(responsecontent, jsonPath)","result":{"duration":48881236,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":80},{"name":"def a = embedUrl (ref.substring(0, ref.length - 5) + '.html' ,  status )","result":{"duration":35944079,"status":"passed"},"match":{"location":"karate","arguments":[]},"embeddings":[{"data":"PGEgaHJlZj0iaHR0cHM6Ly9pbnNwaXJlLmVjLmV1cm9wYS5ldS92YWxpZGF0b3IvL3YyL1Rlc3RSdW5zLzUwZGQ3Y2QzLWJlMjUtNGFmZS1hOGVlLWEyOTI2Njk4ZWYxZC5odG1sIiA+RkFJTEVEPC9hPg==","mime_type":"text\/html"}],"keyword":"*","line":81},{"name":"def a = embedUrl (\"..\/..\/\" + jsonPath ,  status )","result":{"duration":8693470,"status":"passed"},"match":{"location":"karate","arguments":[]},"embeddings":[{"data":"PGEgaHJlZj0iLi4vLi4vMTYwMTM3NTg4OTM5NENvbmZvcm1hbmNlIENsYXNzOiBEb3dubG9hZCBTZXJ2aWNlIC0gUHJlLWRlZmluZWQgQXRvbSwgIEF0b20gSW52YXNpZXZlIEV4b3RlbiAoSU5TUElSRSBHZWhhcm1vbmlzZWVyZCkuanNvbiIgPkZBSUxFRDwvYT4=","mime_type":"text\/html"}],"keyword":"*","line":82},{"name":"def json = get[0] response.EtfItemCollection.referencedItems.testTaskResults","result":{"duration":248599,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":86},{"name":"def jsonfailedStep = $json.TestTaskResult.testModuleResults.TestModuleResult[*].testCaseResults.TestCaseResult[*].testStepResults.TestStepResult[?(@.status=='FAILED')]","result":{"duration":18101039,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":87},{"name":"def jsonFailedStepmessages = $jsonfailedStep[*].messages.message.ref","result":{"duration":196999,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":88},{"name":"print jsonFailedStepmessages","result":{"duration":1619294,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":89,"doc_string":{"content_type":"","value":"10:38:09.515 [print] [\n]","line":89}},{"name":"def jsonfailedAssert = $jsonfailedStep[*].testAssertionResults.TestAssertionResult[?(@.status=='FAILED')]","result":{"duration":1864393,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":90},{"name":"def jsonfailedMessages = $jsonfailedAssert[*].messages.message","result":{"duration":161500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":91},{"name":"def tmpref = $jsonfailedMessages[*].ref","result":{"duration":144800,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":92},{"name":"def refs = karate.append( jsonFailedStepmessages, tmpref )","result":{"duration":29065902,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":93},{"name":"def expectedresult = read('classpath:InspireTest\/ETFexpected\/atomerror.json')","result":{"duration":3502288,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":96},{"name":"def Collections = Java.type('java.util.Collections')","result":{"duration":9783367,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":97},{"name":"copy sortedrefs = refs","result":{"duration":121899,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":98},{"name":"Collections.sort(sortedrefs)","result":{"duration":20993529,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":99},{"name":"copy sortedexpectedrefs = $expectedresult[*].ref","result":{"duration":217299,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":100},{"name":"Collections.sort(sortedexpectedrefs)","result":{"duration":5412382,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":101},{"name":"print refs","result":{"duration":394399,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":102,"doc_string":{"content_type":"","value":"10:38:09.588 [print] [\n  \"TR.missingAtLeastOneOpenSearchDescriptionUrl\",\n  \"TR.missingElement\",\n  \"TR.missingElement\",\n  \"TR.missingElement\",\n  \"TR.missingGenericSearchQueriesUrl\"\n]","line":102}},{"name":"print sortedrefs","result":{"duration":222099,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":103,"doc_string":{"content_type":"","value":"10:38:09.588 [print] [\n  \"TR.missingAtLeastOneOpenSearchDescriptionUrl\",\n  \"TR.missingElement\",\n  \"TR.missingElement\",\n  \"TR.missingElement\",\n  \"TR.missingGenericSearchQueriesUrl\"\n]","line":103}},{"name":"print sortedexpectedrefs","result":{"duration":569898,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":104,"doc_string":{"content_type":"","value":"10:38:09.589 [print] [\n  \"TR.missingAtLeastOneOpenSearchDescriptionUrl\",\n  \"TR.missingElement\",\n  \"TR.missingElement\",\n  \"TR.missingElement\",\n  \"TR.missingGenericSearchQueriesUrl\"\n]","line":104}},{"name":"match sortedrefs == sortedexpectedrefs","result":{"duration":134199,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":105},{"name":"print jsonfailedMessages","result":{"duration":2741991,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":107,"doc_string":{"content_type":"","value":"10:38:09.592 [print] [\n  {\n    \"ref\": \"TR.missingAtLeastOneOpenSearchDescriptionUrl\",\n    \"translationArguments\": {\n      \"argument\": [\n        {\n          \"$\": \"os:Url\",\n          \"token\": \"element\"\n        },\n        {\n          \"$\": \"\/os:OpenSearchDescription\/os:Url[@rel='results' and starts-with(@template,'http') and contains(@template,'crs') and contains(@template,'spatial_dataset_identifier_code') and contains(@template,'spatial_dataset_identifier_namespace') and contains(@template,'language')]\",\n          \"token\": \"xpath\"\n        }\n      ]\n    }\n  },\n  {\n    \"ref\": \"TR.missingElement\",\n    \"translationArguments\": {\n      \"argument\": [\n        {\n          \"$\": \"os:Query\",\n          \"token\": \"element\"\n        },\n        {\n          \"$\": \"\/os:OpenSearchDescription\/os:Query[@role='example' and @inspire_dls:crs]\",\n          \"token\": \"xpath\"\n        }\n      ]\n    }\n  },\n  {\n    \"ref\": \"TR.missingElement\",\n    \"translationArguments\": {\n      \"argument\": [\n        {\n          \"$\": \"os:Query\",\n          \"token\": \"element\"\n        },\n        {\n          \"$\": \"\/os:OpenSearchDescription\/os:Query[@role='example' and @inspire_dls:spatial_dataset_identifier_namespace and @inspire_dls:spatial_dataset_identifier_code]\",\n          \"token\": \"xpath\"\n        }\n      ]\n    }\n  },\n  {\n    \"ref\": \"TR.missingElement\",\n    \"translationArguments\": {\n      \"argument\": [\n        {\n          \"$\": \"os:Query\",\n          \"token\": \"element\"\n        },\n        {\n          \"$\": \"\/os:OpenSearchDescription\/os:Query[@role='example' and @inspire_dls:spatial_dataset_identifier_namespace and @inspire_dls:spatial_dataset_identifier_code]\",\n          \"token\": \"xpath\"\n        }\n      ]\n    }\n  },\n  {\n    \"ref\": \"TR.missingGenericSearchQueriesUrl\",\n    \"translationArguments\": {\n      \"argument\": [\n        {\n          \"$\": \"@template\",\n          \"token\": \"element\"\n        },\n        {\n          \"$\": \"\/os:OpenSearchDescription\/os:Url[@rel='results' and @type='text\/html']\/@template\",\n          \"token\": \"xpath\"\n        }\n      ]\n    }\n  }\n]","line":107}},{"name":"def tempdir = java.lang.System.getProperty('user.dir')","result":{"duration":7402675,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":111},{"name":"def separator = java.lang.System.getProperty(\"file.separator\")","result":{"duration":16822543,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":112},{"name":"def outputpath = tempdir + separator + 'output' + separator","result":{"duration":5241882,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":113},{"name":"def mystorage = Java.type('storage.DataStorage')","result":{"duration":2399091,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":114},{"name":"def db = new mystorage","result":{"duration":2707691,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":115},{"name":"def LocalDateTime = Java.type('java.time.LocalDateTime')","result":{"duration":2088193,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":116},{"name":"eval db.writeln('- Test: '+ karate.info.scenarioName+ '\\n  Time: '+ LocalDateTime.now() +'\\n  Errors: ' +  sortedrefs  ,  outputpath + karate.info.featureFileName + '.yaml')","result":{"duration":28292404,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":117}]}],"name":"InspireTest\/ngr\/T03_services\/referentietest.feature","description":"Service test Invasieve exoten","id":"service-test-invasieve-exoten","keyword":"Feature","uri":"InspireTest\/ngr\/T03_services\/referentietest.feature","tags":[{"name":"@step3","line":1}]}]