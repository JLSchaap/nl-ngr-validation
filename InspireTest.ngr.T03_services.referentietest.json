[{"line":2,"elements":[{"line":4,"name":"","description":"","type":"background","keyword":"Background","steps":[{"name":"url 'https:\/\/inspire.ec.europa.eu\/validator\/v2\/'","result":{"duration":4060508,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":5,"doc_string":{"content_type":"","value":"10:39:14.073 karate.env system property was:","line":5}}]},{"line":128,"name":"Conformance Class: Download Service - Pre-defined Atom,  Atom Invasieve Exoten (INSPIRE Geharmoniseerd) https:\/\/geodata.nationaalgeoregister.nl\/rvo\/inspire\/invasieve-exoten\/atom\/v1_0\/index.xml EID11571c92-3940-4f42-a6cd-5e2b1c6f4d93","description":"","id":"conformance-class:-download-service---pre-defined-atom,--atom-invasieve-exoten-(inspire-geharmoniseerd)-https:\/\/geodata.nationaalgeoregister.nl\/rvo\/inspire\/invasieve-exoten\/atom\/v1-0\/index.xml-eid11571c92-3940-4f42-a6cd-5e2b1c6f4d93","type":"scenario","keyword":"Scenario Outline","steps":[{"name":"def testRunRequest =","result":{"duration":2570005,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":10,"doc_string":{"content_type":"","value":"{\n  \"label\": \"Conformance Class: Download Service - Pre-defined Atom,  Atom Invasieve Exoten (INSPIRE Geharmoniseerd)\",\n  \"executableTestSuiteIds\": [\n    \"EID11571c92-3940-4f42-a6cd-5e2b1c6f4d93\"\n  ],\n  \"arguments\": {},\n  \"testObject\": {\n    \"resources\": {\n      \"serviceEndpoint\": \"https:\/\/geodata.nationaalgeoregister.nl\/rvo\/inspire\/invasieve-exoten\/atom\/v1_0\/index.xml\"\n    }\n  }\n}","line":10}},{"name":"path 'TestRuns'","result":{"duration":2803805,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":26},{"name":"request testRunRequest","result":{"duration":36900,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":27},{"name":"method post","result":{"duration":7149751012,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":28},{"name":"assert responseStatus == 200 || responseStatus == 201","result":{"duration":13806022,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":29},{"name":"print response.EtfItemCollection.testRuns.TestRun.id","result":{"duration":22636735,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":30,"doc_string":{"content_type":"","value":"10:39:21.492 [print] EID8bb7f3a6-105c-4730-b1b2-0b0f8baa952c","line":30}},{"name":"print response.EtfItemCollection.testRuns.TestRun.status","result":{"duration":4923108,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":31,"doc_string":{"content_type":"","value":"10:39:21.497 [print] UNDEFINED","line":31}},{"name":"print response.EtfItemCollection.testRuns.TestRun.label","result":{"duration":10282316,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":32,"doc_string":{"content_type":"","value":"10:39:21.508 [print] Conformance Class: Download Service - Pre-defined Atom,  Atom Invasieve Exoten (INSPIRE Geharmoniseerd)","line":32}},{"name":"print response.EtfItemCollection.ref","result":{"duration":7867112,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":33,"doc_string":{"content_type":"","value":"10:39:21.516 [print] https:\/\/inspire.ec.europa.eu\/validator\/\/v2\/TestRuns\/8bb7f3a6-105c-4730-b1b2-0b0f8baa952c.json","line":33}},{"name":"print response.EtfItemCollection.testRuns.TestRun.logPath","result":{"duration":10314816,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":34,"doc_string":{"content_type":"","value":"10:39:21.525 [print] https:\/\/inspire.ec.europa.eu\/validator\/\/v2\/TestRuns\/EID8bb7f3a6-105c-4730-b1b2-0b0f8baa952c\/log","line":34}},{"name":"def statuspath = \"TestRuns\/\" + response.EtfItemCollection.testRuns.TestRun.id","result":{"duration":7798212,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":36},{"name":"def progresspath = \"TestRuns\/\" + response.EtfItemCollection.testRuns.TestRun.id + \"\/progress\"","result":{"duration":9404514,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":37},{"name":"print 'statuspath', statuspath","result":{"duration":2514904,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":38,"doc_string":{"content_type":"","value":"10:39:21.546 [print] statuspath TestRuns\/EID8bb7f3a6-105c-4730-b1b2-0b0f8baa952c","line":38}},{"name":"print 'progresspath ', progresspath","result":{"duration":9461515,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":39,"doc_string":{"content_type":"","value":"10:39:21.556 [print] progresspath  TestRuns\/EID8bb7f3a6-105c-4730-b1b2-0b0f8baa952c\/progress","line":39}},{"name":"path  progresspath","result":{"duration":20900,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":46},{"name":"method GET","result":{"duration":529061816,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":47},{"name":"retry until response.val == response.max","result":{"duration":32000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":48},{"name":"print response","result":{"duration":1557502,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":49,"doc_string":{"content_type":"","value":"10:39:22.086 [print] {\n  \"val\": \"34\",\n  \"max\": \"35\",\n  \"log\": [\n    \"29.09.2020 10:39:17 - Preparing Test Run Conformance Class: Download Service - Pre-defined Atom,  Atom Invasieve Exoten (INSPIRE Geharmoniseerd) (initiated Tue Sep 29 10:39:17 UTC 2020)\",\n    \"29.09.2020 10:39:17 - Resolving Executable Test Suite dependencies\",\n    \"29.09.2020 10:39:17 - Preparing 1 Test Task:\",\n    \"29.09.2020 10:39:17 -  TestTask 1 (655093f8-bbdf-4fe7-af84-8dc28ee80f07)\",\n    \"29.09.2020 10:39:17 -  will perform tests on Test Object 'index.xml' by using Executable Test Suite 'Conformance Class: Download Service - Pre-defined Atom (EID: 11571c92-3940-4f42-a6cd-5e2b1c6f4d93, V: 1.0.5 )'\",\n    \"29.09.2020 10:39:17 -  with parameters: \",\n    \"29.09.2020 10:39:17 - etf.testcases = *\",\n    \"29.09.2020 10:39:17 - Test Tasks prepared and ready to be executed. Waiting for the scheduler to start.\",\n    \"29.09.2020 10:39:17 - Setting state to CREATED\",\n    \"29.09.2020 10:39:17 - Changed state from CREATED to INITIALIZING\",\n    \"29.09.2020 10:39:17 - Starting TestRun.8bb7f3a6-105c-4730-b1b2-0b0f8baa952c at 2020-09-29T10:39:19Z\",\n    \"29.09.2020 10:39:19 - Changed state from INITIALIZING to INITIALIZED\",\n    \"29.09.2020 10:39:19 - Project Properties: \",\n    \"29.09.2020 10:39:19 - etf.testcases - * \",\n    \"29.09.2020 10:39:19 - serviceEndpoint - https:\/\/geodata.nationaalgeoregister.nl\/rvo\/inspire\/invasieve-exoten\/atom\/v1_0\/index.xml \",\n    \"29.09.2020 10:39:19 - username -  \",\n    \"29.09.2020 10:39:19 - authUser -  \",\n    \"29.09.2020 10:39:19 - authMethod - basic \",\n    \"29.09.2020 10:39:19 - TestRunTask initialized\"\n  ]\n}","line":49}},{"name":"path  progresspath","result":{"duration":19400,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":51},{"name":"method GET","result":{"duration":18642009801,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":52},{"name":"print response","result":{"duration":604400,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":54,"doc_string":{"content_type":"","value":"10:39:40.730 [print] {\n  \"val\": \"241\",\n  \"max\": \"241\",\n  \"log\": [\n  ]\n}","line":54}},{"name":"path  statuspath","result":{"duration":14700,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":56},{"name":"method GET","result":{"duration":4442290801,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":57},{"name":"print response.EtfItemCollection.testRuns.TestRun.id","result":{"duration":794600,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":59,"doc_string":{"content_type":"","value":"10:39:45.173 [print] EID8bb7f3a6-105c-4730-b1b2-0b0f8baa952c","line":59}},{"name":"print response.EtfItemCollection.testRuns.TestRun.status","result":{"duration":612200,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":60,"doc_string":{"content_type":"","value":"10:39:45.174 [print] FAILED","line":60}},{"name":"def status = response.EtfItemCollection.testRuns.TestRun.status","result":{"duration":164600,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":61},{"name":"print status","result":{"duration":424501,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":62,"doc_string":{"content_type":"","value":"10:39:45.175 [print] FAILED","line":62}},{"name":"print response.EtfItemCollection.testRuns.TestRun.label","result":{"duration":947601,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":63,"doc_string":{"content_type":"","value":"10:39:45.176 [print] Conformance Class: Download Service - Pre-defined Atom,  Atom Invasieve Exoten (INSPIRE Geharmoniseerd)","line":63}},{"name":"print response.EtfItemCollection.ref","result":{"duration":1391101,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":64,"doc_string":{"content_type":"","value":"10:39:45.177 [print] https:\/\/inspire.ec.europa.eu\/validator\/\/v2\/TestRuns\/8bb7f3a6-105c-4730-b1b2-0b0f8baa952c.json","line":64}},{"name":"def ref = response.EtfItemCollection.ref","result":{"duration":168800,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":65},{"name":"print ref","result":{"duration":702801,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":66,"doc_string":{"content_type":"","value":"10:39:45.178 [print] https:\/\/inspire.ec.europa.eu\/validator\/\/v2\/TestRuns\/8bb7f3a6-105c-4730-b1b2-0b0f8baa952c.json","line":66}},{"name":"print response.EtfItemCollection.testRuns.TestRun.logPath","result":{"duration":1695102,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":68,"doc_string":{"content_type":"","value":"10:39:45.180 [print] https:\/\/inspire.ec.europa.eu\/validator\/\/v2\/TestRuns\/EID8bb7f3a6-105c-4730-b1b2-0b0f8baa952c\/log","line":68}},{"name":"def embedUrl =","result":{"duration":3545903,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":71,"doc_string":{"content_type":"","value":"function(url, hyperlinkText)\n     { var html = '<a href=\\\"' + url + '\\\" >' + hyperlinkText + '<\/a>';\n     karate.embed(html,'text\/html'); }","line":71}},{"name":"def time = java.lang.System.currentTimeMillis()","result":{"duration":10895411,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":77},{"name":"def jsonPath = time + 'Conformance Class: Download Service - Pre-defined Atom,  Atom Invasieve Exoten (INSPIRE Geharmoniseerd).json'","result":{"duration":2802903,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":78},{"name":"def responsecontent = response","result":{"duration":15900,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":79},{"name":"karate.write(responsecontent, jsonPath)","result":{"duration":67579865,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":80},{"name":"def a = embedUrl (ref.substring(0, ref.length - 5) + '.html' ,  status )","result":{"duration":67653166,"status":"passed"},"match":{"location":"karate","arguments":[]},"embeddings":[{"data":"PGEgaHJlZj0iaHR0cHM6Ly9pbnNwaXJlLmVjLmV1cm9wYS5ldS92YWxpZGF0b3IvL3YyL1Rlc3RSdW5zLzhiYjdmM2E2LTEwNWMtNDczMC1iMWIyLTBiMGY4YmFhOTUyYy5odG1sIiA+RkFJTEVEPC9hPg==","mime_type":"text\/html"}],"keyword":"*","line":81},{"name":"def a = embedUrl (\"..\/..\/\" + jsonPath ,  status )","result":{"duration":5799306,"status":"passed"},"match":{"location":"karate","arguments":[]},"embeddings":[{"data":"PGEgaHJlZj0iLi4vLi4vMTYwMTM3NTk4NTE5NUNvbmZvcm1hbmNlIENsYXNzOiBEb3dubG9hZCBTZXJ2aWNlIC0gUHJlLWRlZmluZWQgQXRvbSwgIEF0b20gSW52YXNpZXZlIEV4b3RlbiAoSU5TUElSRSBHZWhhcm1vbmlzZWVyZCkuanNvbiIgPkZBSUxFRDwvYT4=","mime_type":"text\/html"}],"keyword":"*","line":82},{"name":"def json = get[0] response.EtfItemCollection.referencedItems.testTaskResults","result":{"duration":227600,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":86},{"name":"def jsonfailedStep = $json.TestTaskResult.testModuleResults.TestModuleResult[*].testCaseResults.TestCaseResult[*].testStepResults.TestStepResult[?(@.status=='FAILED')]","result":{"duration":18810718,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":87},{"name":"def jsonFailedStepmessages = $jsonfailedStep[*].messages.message.ref","result":{"duration":182401,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":88},{"name":"print jsonFailedStepmessages","result":{"duration":1047301,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":89,"doc_string":{"content_type":"","value":"10:39:45.363 [print] [\n]","line":89}},{"name":"def jsonfailedAssert = $jsonfailedStep[*].testAssertionResults.TestAssertionResult[?(@.status=='FAILED')]","result":{"duration":3139203,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":90},{"name":"def jsonfailedMessages = $jsonfailedAssert[*].messages.message","result":{"duration":164700,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":91},{"name":"def tmpref = $jsonfailedMessages[*].ref","result":{"duration":135000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":92},{"name":"def refs = karate.append( jsonFailedStepmessages, tmpref )","result":{"duration":29215428,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":93},{"name":"def expectedresult = read('classpath:InspireTest\/ETFexpected\/atomerror.json')","result":{"duration":7663007,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":96},{"name":"def Collections = Java.type('java.util.Collections')","result":{"duration":7122807,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":97},{"name":"copy sortedrefs = refs","result":{"duration":87501,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":98},{"name":"Collections.sort(sortedrefs)","result":{"duration":20516819,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":99},{"name":"copy sortedexpectedrefs = $expectedresult[*].ref","result":{"duration":212900,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":100},{"name":"Collections.sort(sortedexpectedrefs)","result":{"duration":15468715,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":101},{"name":"print refs","result":{"duration":319300,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":102,"doc_string":{"content_type":"","value":"10:39:45.448 [print] [\n  \"TR.missingAtLeastOneOpenSearchDescriptionUrl\",\n  \"TR.missingElement\",\n  \"TR.missingElement\",\n  \"TR.missingElement\",\n  \"TR.missingGenericSearchQueriesUrl\"\n]","line":102}},{"name":"print sortedrefs","result":{"duration":4718605,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":103,"doc_string":{"content_type":"","value":"10:39:45.453 [print] [\n  \"TR.missingAtLeastOneOpenSearchDescriptionUrl\",\n  \"TR.missingElement\",\n  \"TR.missingElement\",\n  \"TR.missingElement\",\n  \"TR.missingGenericSearchQueriesUrl\"\n]","line":103}},{"name":"print sortedexpectedrefs","result":{"duration":186300,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":104,"doc_string":{"content_type":"","value":"10:39:45.453 [print] [\n  \"TR.missingAtLeastOneOpenSearchDescriptionUrl\",\n  \"TR.missingElement\",\n  \"TR.missingElement\",\n  \"TR.missingElement\",\n  \"TR.missingGenericSearchQueriesUrl\"\n]","line":104}},{"name":"match sortedrefs == sortedexpectedrefs","result":{"duration":108900,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":105},{"name":"print jsonfailedMessages","result":{"duration":723601,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":107,"doc_string":{"content_type":"","value":"10:39:45.454 [print] [\n  {\n    \"ref\": \"TR.missingAtLeastOneOpenSearchDescriptionUrl\",\n    \"translationArguments\": {\n      \"argument\": [\n        {\n          \"$\": \"os:Url\",\n          \"token\": \"element\"\n        },\n        {\n          \"$\": \"\/os:OpenSearchDescription\/os:Url[@rel='results' and starts-with(@template,'http') and contains(@template,'crs') and contains(@template,'spatial_dataset_identifier_code') and contains(@template,'spatial_dataset_identifier_namespace') and contains(@template,'language')]\",\n          \"token\": \"xpath\"\n        }\n      ]\n    }\n  },\n  {\n    \"ref\": \"TR.missingElement\",\n    \"translationArguments\": {\n      \"argument\": [\n        {\n          \"$\": \"os:Query\",\n          \"token\": \"element\"\n        },\n        {\n          \"$\": \"\/os:OpenSearchDescription\/os:Query[@role='example' and @inspire_dls:crs]\",\n          \"token\": \"xpath\"\n        }\n      ]\n    }\n  },\n  {\n    \"ref\": \"TR.missingElement\",\n    \"translationArguments\": {\n      \"argument\": [\n        {\n          \"$\": \"os:Query\",\n          \"token\": \"element\"\n        },\n        {\n          \"$\": \"\/os:OpenSearchDescription\/os:Query[@role='example' and @inspire_dls:spatial_dataset_identifier_namespace and @inspire_dls:spatial_dataset_identifier_code]\",\n          \"token\": \"xpath\"\n        }\n      ]\n    }\n  },\n  {\n    \"ref\": \"TR.missingElement\",\n    \"translationArguments\": {\n      \"argument\": [\n        {\n          \"$\": \"os:Query\",\n          \"token\": \"element\"\n        },\n        {\n          \"$\": \"\/os:OpenSearchDescription\/os:Query[@role='example' and @inspire_dls:spatial_dataset_identifier_namespace and @inspire_dls:spatial_dataset_identifier_code]\",\n          \"token\": \"xpath\"\n        }\n      ]\n    }\n  },\n  {\n    \"ref\": \"TR.missingGenericSearchQueriesUrl\",\n    \"translationArguments\": {\n      \"argument\": [\n        {\n          \"$\": \"@template\",\n          \"token\": \"element\"\n        },\n        {\n          \"$\": \"\/os:OpenSearchDescription\/os:Url[@rel='results' and @type='text\/html']\/@template\",\n          \"token\": \"xpath\"\n        }\n      ]\n    }\n  }\n]","line":107}},{"name":"def tempdir = java.lang.System.getProperty('user.dir')","result":{"duration":3864704,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":111},{"name":"def separator = java.lang.System.getProperty(\"file.separator\")","result":{"duration":6836406,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":112},{"name":"def outputpath = tempdir + separator + 'output' + separator","result":{"duration":11172510,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":113},{"name":"def mystorage = Java.type('storage.DataStorage')","result":{"duration":8649309,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":114},{"name":"def db = new mystorage","result":{"duration":3802004,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":115},{"name":"def LocalDateTime = Java.type('java.time.LocalDateTime')","result":{"duration":2137202,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":116},{"name":"eval db.writeln('- Test: '+ karate.info.scenarioName+ '\\n  Time: '+ LocalDateTime.now() +'\\n  Errors: ' +  sortedrefs  ,  outputpath + karate.info.featureFileName + '.yaml')","result":{"duration":20070219,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":117}]}],"name":"InspireTest\/ngr\/T03_services\/referentietest.feature","description":"Service test Invasieve exoten","id":"service-test-invasieve-exoten","keyword":"Feature","uri":"InspireTest\/ngr\/T03_services\/referentietest.feature","tags":[{"name":"@step3","line":1}]}]