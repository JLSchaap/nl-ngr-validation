[{"line":2,"elements":[{"line":4,"name":"","description":"","type":"background","keyword":"Background","steps":[{"name":"url 'https:\/\/inspire.ec.europa.eu\/validator\/v2\/'","result":{"duration":64500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":5,"doc_string":{"content_type":"","value":"11:27:26.146 karate.env system property was:","line":5}}]},{"line":128,"name":"Conformance Class: Download Service - Pre-defined Atom,  Atom Invasieve Exoten (INSPIRE Geharmoniseerd) https:\/\/geodata.nationaalgeoregister.nl\/rvo\/inspire\/invasieve-exoten\/atom\/v1_0\/index.xml EID11571c92-3940-4f42-a6cd-5e2b1c6f4d93","description":"","id":"conformance-class:-download-service---pre-defined-atom,--atom-invasieve-exoten-(inspire-geharmoniseerd)-https:\/\/geodata.nationaalgeoregister.nl\/rvo\/inspire\/invasieve-exoten\/atom\/v1-0\/index.xml-eid11571c92-3940-4f42-a6cd-5e2b1c6f4d93","type":"scenario","keyword":"Scenario Outline","steps":[{"name":"def testRunRequest =","result":{"duration":1824910,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":10,"doc_string":{"content_type":"","value":"{\n  \"label\": \"Conformance Class: Download Service - Pre-defined Atom,  Atom Invasieve Exoten (INSPIRE Geharmoniseerd)\",\n  \"executableTestSuiteIds\": [\n    \"EID11571c92-3940-4f42-a6cd-5e2b1c6f4d93\"\n  ],\n  \"arguments\": {},\n  \"testObject\": {\n    \"resources\": {\n      \"serviceEndpoint\": \"https:\/\/geodata.nationaalgeoregister.nl\/rvo\/inspire\/invasieve-exoten\/atom\/v1_0\/index.xml\"\n    }\n  }\n}","line":10}},{"name":"path 'TestRuns'","result":{"duration":2314012,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":26},{"name":"request testRunRequest","result":{"duration":34500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":27},{"name":"method post","result":{"duration":6649631800,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":28},{"name":"assert responseStatus == 200 || responseStatus == 201","result":{"duration":12629954,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":29},{"name":"print response.EtfItemCollection.testRuns.TestRun.id","result":{"duration":22243695,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":30,"doc_string":{"content_type":"","value":"11:27:33.074 [print] EID8a54aa7f-a4cc-4b53-ab42-0dd5aa86ff6b","line":30}},{"name":"print response.EtfItemCollection.testRuns.TestRun.status","result":{"duration":4294418,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":31,"doc_string":{"content_type":"","value":"11:27:33.078 [print] UNDEFINED","line":31}},{"name":"print response.EtfItemCollection.testRuns.TestRun.label","result":{"duration":7521833,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":32,"doc_string":{"content_type":"","value":"11:27:33.086 [print] Conformance Class: Download Service - Pre-defined Atom,  Atom Invasieve Exoten (INSPIRE Geharmoniseerd)","line":32}},{"name":"print response.EtfItemCollection.ref","result":{"duration":3819516,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":33,"doc_string":{"content_type":"","value":"11:27:33.093 [print] https:\/\/inspire.ec.europa.eu\/validator\/\/v2\/TestRuns\/8a54aa7f-a4cc-4b53-ab42-0dd5aa86ff6b.json","line":33}},{"name":"print response.EtfItemCollection.testRuns.TestRun.logPath","result":{"duration":5720225,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":34,"doc_string":{"content_type":"","value":"11:27:33.104 [print] https:\/\/inspire.ec.europa.eu\/validator\/\/v2\/TestRuns\/EID8a54aa7f-a4cc-4b53-ab42-0dd5aa86ff6b\/log","line":34}},{"name":"def statuspath = \"TestRuns\/\" + response.EtfItemCollection.testRuns.TestRun.id","result":{"duration":7320732,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":36},{"name":"def progresspath = \"TestRuns\/\" + response.EtfItemCollection.testRuns.TestRun.id + \"\/progress\"","result":{"duration":3493115,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":37},{"name":"print 'statuspath', statuspath","result":{"duration":8586837,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":38,"doc_string":{"content_type":"","value":"11:27:33.126 [print] statuspath TestRuns\/EID8a54aa7f-a4cc-4b53-ab42-0dd5aa86ff6b","line":38}},{"name":"print 'progresspath ', progresspath","result":{"duration":6098326,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":39,"doc_string":{"content_type":"","value":"11:27:33.132 [print] progresspath  TestRuns\/EID8a54aa7f-a4cc-4b53-ab42-0dd5aa86ff6b\/progress","line":39}},{"name":"path  progresspath","result":{"duration":17100,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":46},{"name":"method GET","result":{"duration":530598185,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":47},{"name":"retry until response.val == response.max","result":{"duration":29800,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":48},{"name":"print response","result":{"duration":741403,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":49,"doc_string":{"content_type":"","value":"11:27:33.665 [print] {\n  \"val\": \"25\",\n  \"max\": \"26\",\n  \"log\": [\n    \"29.09.2020 11:27:29 - Preparing Test Run Conformance Class: Download Service - Pre-defined Atom,  Atom Invasieve Exoten (INSPIRE Geharmoniseerd) (initiated Tue Sep 29 11:27:29 UTC 2020)\",\n    \"29.09.2020 11:27:29 - Resolving Executable Test Suite dependencies\",\n    \"29.09.2020 11:27:29 - Preparing 1 Test Task:\",\n    \"29.09.2020 11:27:29 -  TestTask 1 (b8bbe844-0ccf-4f8a-aef7-da31a485fdee)\",\n    \"29.09.2020 11:27:29 -  will perform tests on Test Object 'index.xml' by using Executable Test Suite 'Conformance Class: Download Service - Pre-defined Atom (EID: 11571c92-3940-4f42-a6cd-5e2b1c6f4d93, V: 1.0.5 )'\",\n    \"29.09.2020 11:27:29 -  with parameters: \",\n    \"29.09.2020 11:27:29 - etf.testcases = *\",\n    \"29.09.2020 11:27:29 - Test Tasks prepared and ready to be executed. Waiting for the scheduler to start.\",\n    \"29.09.2020 11:27:29 - Setting state to CREATED\",\n    \"29.09.2020 11:27:29 - Changed state from CREATED to INITIALIZING\",\n    \"29.09.2020 11:27:29 - Starting TestRun.8a54aa7f-a4cc-4b53-ab42-0dd5aa86ff6b at 2020-09-29T11:27:31Z\",\n    \"29.09.2020 11:27:31 - Changed state from INITIALIZING to INITIALIZED\",\n    \"29.09.2020 11:27:31 - Project Properties: \",\n    \"29.09.2020 11:27:31 - etf.testcases - * \",\n    \"29.09.2020 11:27:31 - serviceEndpoint - https:\/\/geodata.nationaalgeoregister.nl\/rvo\/inspire\/invasieve-exoten\/atom\/v1_0\/index.xml \",\n    \"29.09.2020 11:27:31 - username -  \",\n    \"29.09.2020 11:27:31 - authUser -  \",\n    \"29.09.2020 11:27:31 - authMethod - basic \",\n    \"29.09.2020 11:27:31 - TestRunTask initialized\"\n  ]\n}","line":49}},{"name":"path  progresspath","result":{"duration":21500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":51},{"name":"method GET","result":{"duration":24140163670,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":52},{"name":"print response","result":{"duration":649901,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":54,"doc_string":{"content_type":"","value":"11:27:57.807 [print] {\n  \"val\": \"241\",\n  \"max\": \"241\",\n  \"log\": [\n  ]\n}","line":54}},{"name":"path  statuspath","result":{"duration":15000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":56},{"name":"method GET","result":{"duration":4165407772,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":57},{"name":"print response.EtfItemCollection.testRuns.TestRun.id","result":{"duration":4869408,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":59,"doc_string":{"content_type":"","value":"11:28:01.977 [print] EID8a54aa7f-a4cc-4b53-ab42-0dd5aa86ff6b","line":59}},{"name":"print response.EtfItemCollection.testRuns.TestRun.status","result":{"duration":1420503,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":60,"doc_string":{"content_type":"","value":"11:28:01.979 [print] FAILED","line":60}},{"name":"def status = response.EtfItemCollection.testRuns.TestRun.status","result":{"duration":153700,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":61},{"name":"print status","result":{"duration":969102,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":62,"doc_string":{"content_type":"","value":"11:28:01.980 [print] FAILED","line":62}},{"name":"print response.EtfItemCollection.testRuns.TestRun.label","result":{"duration":1173602,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":63,"doc_string":{"content_type":"","value":"11:28:01.981 [print] Conformance Class: Download Service - Pre-defined Atom,  Atom Invasieve Exoten (INSPIRE Geharmoniseerd)","line":63}},{"name":"print response.EtfItemCollection.ref","result":{"duration":1402903,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":64,"doc_string":{"content_type":"","value":"11:28:01.983 [print] https:\/\/inspire.ec.europa.eu\/validator\/\/v2\/TestRuns\/8a54aa7f-a4cc-4b53-ab42-0dd5aa86ff6b.json","line":64}},{"name":"def ref = response.EtfItemCollection.ref","result":{"duration":132800,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":65},{"name":"print ref","result":{"duration":1773904,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":66,"doc_string":{"content_type":"","value":"11:28:01.985 [print] https:\/\/inspire.ec.europa.eu\/validator\/\/v2\/TestRuns\/8a54aa7f-a4cc-4b53-ab42-0dd5aa86ff6b.json","line":66}},{"name":"print response.EtfItemCollection.testRuns.TestRun.logPath","result":{"duration":731101,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":68,"doc_string":{"content_type":"","value":"11:28:01.986 [print] https:\/\/inspire.ec.europa.eu\/validator\/\/v2\/TestRuns\/EID8a54aa7f-a4cc-4b53-ab42-0dd5aa86ff6b\/log","line":68}},{"name":"def embedUrl =","result":{"duration":4273508,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":71,"doc_string":{"content_type":"","value":"function(url, hyperlinkText)\n     { var html = '<a href=\\\"' + url + '\\\" >' + hyperlinkText + '<\/a>';\n     karate.embed(html,'text\/html'); }","line":71}},{"name":"def time = java.lang.System.currentTimeMillis()","result":{"duration":18665332,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":77},{"name":"def jsonPath = time + 'Conformance Class: Download Service - Pre-defined Atom,  Atom Invasieve Exoten (INSPIRE Geharmoniseerd).json'","result":{"duration":9292216,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":78},{"name":"def responsecontent = response","result":{"duration":15200,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":79},{"name":"karate.write(responsecontent, jsonPath)","result":{"duration":44132176,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":80},{"name":"def a = embedUrl (ref.substring(0, ref.length - 5) + '.html' ,  status )","result":{"duration":28718749,"status":"passed"},"match":{"location":"karate","arguments":[]},"embeddings":[{"data":"PGEgaHJlZj0iaHR0cHM6Ly9pbnNwaXJlLmVjLmV1cm9wYS5ldS92YWxpZGF0b3IvL3YyL1Rlc3RSdW5zLzhhNTRhYTdmLWE0Y2MtNGI1My1hYjQyLTBkZDVhYTg2ZmY2Yi5odG1sIiA+RkFJTEVEPC9hPg==","mime_type":"text\/html"}],"keyword":"*","line":81},{"name":"def a = embedUrl (\"..\/..\/\" + jsonPath ,  status )","result":{"duration":13888524,"status":"passed"},"match":{"location":"karate","arguments":[]},"embeddings":[{"data":"PGEgaHJlZj0iLi4vLi4vMTYwMTM3ODg4MjAwOUNvbmZvcm1hbmNlIENsYXNzOiBEb3dubG9hZCBTZXJ2aWNlIC0gUHJlLWRlZmluZWQgQXRvbSwgIEF0b20gSW52YXNpZXZlIEV4b3RlbiAoSU5TUElSRSBHZWhhcm1vbmlzZWVyZCkuanNvbiIgPkZBSUxFRDwvYT4=","mime_type":"text\/html"}],"keyword":"*","line":82},{"name":"def json = get[0] response.EtfItemCollection.referencedItems.testTaskResults","result":{"duration":221600,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":86},{"name":"def jsonfailedStep = $json.TestTaskResult.testModuleResults.TestModuleResult[*].testCaseResults.TestCaseResult[*].testStepResults.TestStepResult[?(@.status=='FAILED')]","result":{"duration":14012424,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":87},{"name":"def jsonFailedStepmessages = $jsonfailedStep[*].messages.message.ref","result":{"duration":140800,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":88},{"name":"print jsonFailedStepmessages","result":{"duration":322401,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":89,"doc_string":{"content_type":"","value":"11:28:02.120 [print] [\n]","line":89}},{"name":"def jsonfailedAssert = $jsonfailedStep[*].testAssertionResults.TestAssertionResult[?(@.status=='FAILED')]","result":{"duration":1068402,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":90},{"name":"def jsonfailedMessages = $jsonfailedAssert[*].messages.message","result":{"duration":135800,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":91},{"name":"def tmpref = $jsonfailedMessages[*].ref","result":{"duration":425101,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":92},{"name":"def refs = karate.append( jsonFailedStepmessages, tmpref )","result":{"duration":26368145,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":93},{"name":"def expectedresult = read('classpath:InspireTest\/ETFexpected\/atomerror.json')","result":{"duration":9868316,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":96},{"name":"def Collections = Java.type('java.util.Collections')","result":{"duration":4077207,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":97},{"name":"copy sortedrefs = refs","result":{"duration":125900,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":98},{"name":"Collections.sort(sortedrefs)","result":{"duration":16191728,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":99},{"name":"copy sortedexpectedrefs = $expectedresult[*].ref","result":{"duration":138600,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":100},{"name":"Collections.sort(sortedexpectedrefs)","result":{"duration":9508217,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":101},{"name":"print refs","result":{"duration":3766806,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":102,"doc_string":{"content_type":"","value":"11:28:02.193 [print] [\n  \"TR.missingAtLeastOneOpenSearchDescriptionUrl\",\n  \"TR.missingElement\",\n  \"TR.missingElement\",\n  \"TR.missingElement\",\n  \"TR.missingGenericSearchQueriesUrl\"\n]","line":102}},{"name":"print sortedrefs","result":{"duration":1251302,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":103,"doc_string":{"content_type":"","value":"11:28:02.194 [print] [\n  \"TR.missingAtLeastOneOpenSearchDescriptionUrl\",\n  \"TR.missingElement\",\n  \"TR.missingElement\",\n  \"TR.missingElement\",\n  \"TR.missingGenericSearchQueriesUrl\"\n]","line":103}},{"name":"print sortedexpectedrefs","result":{"duration":3057306,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":104,"doc_string":{"content_type":"","value":"11:28:02.197 [print] [\n  \"TR.missingAtLeastOneOpenSearchDescriptionUrl\",\n  \"TR.missingElement\",\n  \"TR.missingElement\",\n  \"TR.missingElement\",\n  \"TR.missingGenericSearchQueriesUrl\"\n]","line":104}},{"name":"match sortedrefs == sortedexpectedrefs","result":{"duration":118300,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":105},{"name":"print jsonfailedMessages","result":{"duration":6723812,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":107,"doc_string":{"content_type":"","value":"11:28:02.204 [print] [\n  {\n    \"ref\": \"TR.missingAtLeastOneOpenSearchDescriptionUrl\",\n    \"translationArguments\": {\n      \"argument\": [\n        {\n          \"$\": \"os:Url\",\n          \"token\": \"element\"\n        },\n        {\n          \"$\": \"\/os:OpenSearchDescription\/os:Url[@rel='results' and starts-with(@template,'http') and contains(@template,'crs') and contains(@template,'spatial_dataset_identifier_code') and contains(@template,'spatial_dataset_identifier_namespace') and contains(@template,'language')]\",\n          \"token\": \"xpath\"\n        }\n      ]\n    }\n  },\n  {\n    \"ref\": \"TR.missingElement\",\n    \"translationArguments\": {\n      \"argument\": [\n        {\n          \"$\": \"os:Query\",\n          \"token\": \"element\"\n        },\n        {\n          \"$\": \"\/os:OpenSearchDescription\/os:Query[@role='example' and @inspire_dls:crs]\",\n          \"token\": \"xpath\"\n        }\n      ]\n    }\n  },\n  {\n    \"ref\": \"TR.missingElement\",\n    \"translationArguments\": {\n      \"argument\": [\n        {\n          \"$\": \"os:Query\",\n          \"token\": \"element\"\n        },\n        {\n          \"$\": \"\/os:OpenSearchDescription\/os:Query[@role='example' and @inspire_dls:spatial_dataset_identifier_namespace and @inspire_dls:spatial_dataset_identifier_code]\",\n          \"token\": \"xpath\"\n        }\n      ]\n    }\n  },\n  {\n    \"ref\": \"TR.missingElement\",\n    \"translationArguments\": {\n      \"argument\": [\n        {\n          \"$\": \"os:Query\",\n          \"token\": \"element\"\n        },\n        {\n          \"$\": \"\/os:OpenSearchDescription\/os:Query[@role='example' and @inspire_dls:spatial_dataset_identifier_namespace and @inspire_dls:spatial_dataset_identifier_code]\",\n          \"token\": \"xpath\"\n        }\n      ]\n    }\n  },\n  {\n    \"ref\": \"TR.missingGenericSearchQueriesUrl\",\n    \"translationArguments\": {\n      \"argument\": [\n        {\n          \"$\": \"@template\",\n          \"token\": \"element\"\n        },\n        {\n          \"$\": \"\/os:OpenSearchDescription\/os:Url[@rel='results' and @type='text\/html']\/@template\",\n          \"token\": \"xpath\"\n        }\n      ]\n    }\n  }\n]","line":107}},{"name":"def tempdir = java.lang.System.getProperty('user.dir')","result":{"duration":2536204,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":111},{"name":"def separator = java.lang.System.getProperty(\"file.separator\")","result":{"duration":2362204,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":112},{"name":"def outputpath = tempdir + separator + 'output' + separator","result":{"duration":13884024,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":113},{"name":"def mystorage = Java.type('storage.DataStorage')","result":{"duration":3589107,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":114},{"name":"def db = new mystorage","result":{"duration":6011110,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":115},{"name":"def LocalDateTime = Java.type('java.time.LocalDateTime')","result":{"duration":4916308,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":116},{"name":"eval db.writeln('- Test: '+ karate.info.scenarioName+ '\\n  Time: '+ LocalDateTime.now() +'\\n  Errors: ' +  sortedrefs  ,  outputpath + karate.info.featureFileName + '.yaml')","result":{"duration":35390460,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":117}]}],"name":"InspireTest\/ngr\/T03_services\/referentietest.feature","description":"Service test Invasieve exoten","id":"service-test-invasieve-exoten","keyword":"Feature","uri":"InspireTest\/ngr\/T03_services\/referentietest.feature","tags":[{"name":"@step3","line":1}]}]