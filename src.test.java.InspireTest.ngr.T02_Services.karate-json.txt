{"failedCount":0,"prefixedPath":"src\/test\/java\/InspireTest\/ngr\/T02_Services.feature","packageQualifiedName":"src.test.java.InspireTest.ngr.T02_Services","loopIndex":-1,"relativePath":"src\/test\/java\/InspireTest\/ngr\/T02_Services.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":142802,"millis":0.142802,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:36.701 karate.env system property was: null \n"},{"result":{"nanos":91402,"millis":0.091402,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":159202,"millis":0.159202,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":168903,"millis":0.168903,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":369705,"millis":0.369705,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":167102,"millis":0.167102,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":4867571,"millis":4.867571,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":163002,"millis":0.163002,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":9280436,"millis":9.280436,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":288804,"millis":0.288804,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":197703,"millis":0.197703,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":77101,"millis":0.077101,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":38001,"millis":0.038001,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":21000,"millis":0.021,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":18200,"millis":0.0182,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":17701,"millis":0.017701,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '95e2c712-1b91-4f24-9453-c56b95227717'"}},{"result":{"nanos":25500,"millis":0.0255,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":20201,"millis":0.020201,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":554591503,"millis":554.591503,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":6400,"millis":0.0064,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":1004214,"millis":1.004214,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '95e2c712-1b91-4f24-9453-c56b95227717'"}},{"result":{"nanos":595109,"millis":0.595109,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":530808,"millis":0.530808,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":483807,"millis":0.483807,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":724711,"millis":0.724711,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":586909,"millis":0.586909,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":111302,"millis":0.111302,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":495007,"millis":0.495007,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":422606,"millis":0.422606,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":424406,"millis":0.424406,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":820612,"millis":0.820612,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":722811,"millis":0.722811,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:37.280 [print] https:\/\/inspire.rivm.nl\/geoserver\/wms? \n"},{"result":{"nanos":456707,"millis":0.456707,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":576709,"millis":0.576709,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:37.281 [print] #notpresent \n"},{"result":{"nanos":455407,"millis":0.455407,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":505607,"millis":0.505607,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:37.282 [print] OGC:WMS \n"},{"result":{"nanos":145003,"millis":0.145003,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":1112316,"millis":1.112316,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:37.283 [print] #notpresent \n"},{"result":{"nanos":398206,"millis":0.398206,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":5616782,"millis":5.616782,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:37.284 [print] RIVM \n"},{"result":{"nanos":439006,"millis":0.439006,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:37.290 [print] http:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/en\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=f2f86edf-ac3a-48e8-9292-0544da2d7645 \n"},{"result":{"nanos":978814,"millis":0.978814,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":10504054,"millis":10.504054,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"95e2c712-1b91-4f24-9453-c56b95227717\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":1672025,"millis":1.672025,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"95e2c712-1b91-4f24-9453-c56b95227717\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":600.495177,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"95e2c712-1b91-4f24-9453-c56b95227717","startTime":1629213696687,"refId":"[1.1:67]","endTime":1629213697303,"exampleData":{"datasetIdentifierCode":"95e2c712-1b91-4f24-9453-c56b95227717"},"exampleIndex":0},{"sectionIndex":0,"stepResults":[{"result":{"nanos":168702,"millis":0.168702,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:36.717 karate.env system property was: null \n"},{"result":{"nanos":79502,"millis":0.079502,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":143502,"millis":0.143502,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":145002,"millis":0.145002,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":311205,"millis":0.311205,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":137402,"millis":0.137402,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":660310,"millis":0.66031,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":121402,"millis":0.121402,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":2751640,"millis":2.75164,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":219103,"millis":0.219103,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":197403,"millis":0.197403,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":59401,"millis":0.059401,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":21916420,"millis":21.91642,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":55401,"millis":0.055401,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":96502,"millis":0.096502,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":31000,"millis":0.031,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'a931e334-b752-4935-8a98-00eddc443789'"}},{"result":{"nanos":19101,"millis":0.019101,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":22800,"millis":0.0228,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":588664701,"millis":588.664701,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":7300,"millis":0.0073,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":832212,"millis":0.832212,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'a931e334-b752-4935-8a98-00eddc443789'"}},{"result":{"nanos":511108,"millis":0.511108,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":479507,"millis":0.479507,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":456807,"millis":0.456807,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":685810,"millis":0.68581,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":603609,"millis":0.603609,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":119401,"millis":0.119401,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":434806,"millis":0.434806,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":393806,"millis":0.393806,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":477107,"millis":0.477107,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":240504,"millis":0.240504,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":761711,"millis":0.761711,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:37.348 [print] https:\\\/\\\/inspire.rivm.nl\\\/geoserver\\\/wfs?request=GetCapabilities \n"},{"result":{"nanos":470207,"millis":0.470207,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":536108,"millis":0.536108,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:37.349 [print] OGC:WFS \n"},{"result":{"nanos":414506,"millis":0.414506,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":500507,"millis":0.500507,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:37.350 [print] INSPIRE Atom \n"},{"result":{"nanos":113102,"millis":0.113102,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":476307,"millis":0.476307,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:37.351 [print] OGC:WFS \n"},{"result":{"nanos":406606,"millis":0.406606,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":568209,"millis":0.568209,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:37.352 [print] Rijksinstituut voor Volksgezondheid en Milieu \n"},{"result":{"nanos":966114,"millis":0.966114,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:37.353 [print] http:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=8a4f5c3b-aced-48fd-afb5-f1f1d0ef21d6#MD_DataIdentification \n"},{"result":{"nanos":423107,"millis":0.423107,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":771411,"millis":0.771411,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"a931e334-b752-4935-8a98-00eddc443789\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":558808,"millis":0.558808,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"a931e334-b752-4935-8a98-00eddc443789\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":628.009179,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"a931e334-b752-4935-8a98-00eddc443789","startTime":1629213696702,"refId":"[1.2:67]","endTime":1629213697355,"exampleData":{"datasetIdentifierCode":"a931e334-b752-4935-8a98-00eddc443789"},"exampleIndex":1},{"sectionIndex":0,"stepResults":[{"result":{"nanos":98802,"millis":0.098802,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:36.721 karate.env system property was: null \n"},{"result":{"nanos":63401,"millis":0.063401,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":131902,"millis":0.131902,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":592009,"millis":0.592009,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":355105,"millis":0.355105,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":155303,"millis":0.155303,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":21573315,"millis":21.573315,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":193403,"millis":0.193403,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":154502,"millis":0.154502,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":237803,"millis":0.237803,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":187402,"millis":0.187402,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":62401,"millis":0.062401,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":50800,"millis":0.0508,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":28400,"millis":0.0284,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":19600,"millis":0.0196,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":17401,"millis":0.017401,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '745968a3-37af-4406-988e-ec595f58c7fe'"}},{"result":{"nanos":16800,"millis":0.0168,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":17600,"millis":0.0176,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":546119679,"millis":546.119679,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5400,"millis":0.0054,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":515108,"millis":0.515108,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '745968a3-37af-4406-988e-ec595f58c7fe'"}},{"result":{"nanos":399006,"millis":0.399006,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":440307,"millis":0.440307,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":396506,"millis":0.396506,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":500407,"millis":0.500407,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":496507,"millis":0.496507,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":98001,"millis":0.098001,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":397806,"millis":0.397806,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":403906,"millis":0.403906,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":394206,"millis":0.394206,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":134502,"millis":0.134502,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":142902,"millis":0.142902,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:37.298 [print] https:\/\/inspire.rivm.nl\/geoserver\/wms? \n"},{"result":{"nanos":1674624,"millis":1.674624,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":496307,"millis":0.496307,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:37.300 [print] #notpresent \n"},{"result":{"nanos":510408,"millis":0.510408,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":451306,"millis":0.451306,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:37.301 [print] OGC:WMS \n"},{"result":{"nanos":128901,"millis":0.128901,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":454806,"millis":0.454806,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:37.301 [print] #notpresent \n"},{"result":{"nanos":389405,"millis":0.389405,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":469107,"millis":0.469107,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:37.302 [print] RIVM \n"},{"result":{"nanos":850513,"millis":0.850513,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:37.303 [print] http:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/en\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=d24ccb35-e9d2-41bf-b231-43083fc0c76d \n"},{"result":{"nanos":383706,"millis":0.383706,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":607809,"millis":0.607809,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"745968a3-37af-4406-988e-ec595f58c7fe\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":460407,"millis":0.460407,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"745968a3-37af-4406-988e-ec595f58c7fe\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":581.277491,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"745968a3-37af-4406-988e-ec595f58c7fe","startTime":1629213696695,"refId":"[1.3:67]","endTime":1629213697305,"exampleData":{"datasetIdentifierCode":"745968a3-37af-4406-988e-ec595f58c7fe"},"exampleIndex":2},{"sectionIndex":0,"stepResults":[{"result":{"nanos":129102,"millis":0.129102,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:36.746 karate.env system property was: null \n"},{"result":{"nanos":123202,"millis":0.123202,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":151203,"millis":0.151203,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":251404,"millis":0.251404,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":400406,"millis":0.400406,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":156803,"millis":0.156803,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":746911,"millis":0.746911,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":110601,"millis":0.110601,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":850212,"millis":0.850212,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":235904,"millis":0.235904,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":182003,"millis":0.182003,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":59701,"millis":0.059701,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":32800,"millis":0.0328,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":20501,"millis":0.020501,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":17200,"millis":0.0172,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":31100,"millis":0.0311,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '081bcfff-5f66-467c-95d0-d88dcf9aa4cf'"}},{"result":{"nanos":18801,"millis":0.018801,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":17700,"millis":0.0177,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":619483951,"millis":619.483951,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":650209,"millis":0.650209,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '081bcfff-5f66-467c-95d0-d88dcf9aa4cf'"}},{"result":{"nanos":449907,"millis":0.449907,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":403606,"millis":0.403606,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":394206,"millis":0.394206,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":541408,"millis":0.541408,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":511308,"millis":0.511308,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":111102,"millis":0.111102,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":396706,"millis":0.396706,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":399106,"millis":0.399106,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":402806,"millis":0.402806,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":559608,"millis":0.559608,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":262903,"millis":0.262903,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:37.385 [print] https:\/\/inspire.rivm.nl\/geoserver\/wms? \n"},{"result":{"nanos":491707,"millis":0.491707,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":194603,"millis":0.194603,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:37.386 [print] #notpresent \n"},{"result":{"nanos":505607,"millis":0.505607,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":185002,"millis":0.185002,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:37.387 [print] OGC:WMS \n"},{"result":{"nanos":199502,"millis":0.199502,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":187102,"millis":0.187102,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:37.387 [print] #notpresent \n"},{"result":{"nanos":466606,"millis":0.466606,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":194102,"millis":0.194102,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:37.388 [print] RIVM \n"},{"result":{"nanos":232803,"millis":0.232803,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:37.388 [print] http:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/en\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=b3f66964-a8c1-456f-9799-9cafca2cb7b1 \n"},{"result":{"nanos":475707,"millis":0.475707,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":701911,"millis":0.701911,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"081bcfff-5f66-467c-95d0-d88dcf9aa4cf\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":451606,"millis":0.451606,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"081bcfff-5f66-467c-95d0-d88dcf9aa4cf\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":632.392938,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"081bcfff-5f66-467c-95d0-d88dcf9aa4cf","startTime":1629213696708,"refId":"[1.4:67]","endTime":1629213697390,"exampleData":{"datasetIdentifierCode":"081bcfff-5f66-467c-95d0-d88dcf9aa4cf"},"exampleIndex":3},{"sectionIndex":0,"stepResults":[{"result":{"nanos":62201,"millis":0.062201,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:37.310 karate.env system property was: null \n"},{"result":{"nanos":73801,"millis":0.073801,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":152702,"millis":0.152702,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":152602,"millis":0.152602,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":311304,"millis":0.311304,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":131502,"millis":0.131502,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":487308,"millis":0.487308,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":102901,"millis":0.102901,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":157603,"millis":0.157603,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":156403,"millis":0.156403,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":581808,"millis":0.581808,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":59301,"millis":0.059301,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":28401,"millis":0.028401,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":19600,"millis":0.0196,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":16901,"millis":0.016901,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":16700,"millis":0.0167,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '7b4a0b26-5885-45cd-a99d-27887cff68e5'"}},{"result":{"nanos":17100,"millis":0.0171,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":37700,"millis":0.0377,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":534139804,"millis":534.139804,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":7000,"millis":0.007,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":583508,"millis":0.583508,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '7b4a0b26-5885-45cd-a99d-27887cff68e5'"}},{"result":{"nanos":460307,"millis":0.460307,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":383506,"millis":0.383506,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":365906,"millis":0.365906,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":1041915,"millis":1.041915,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":428507,"millis":0.428507,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":34200,"millis":0.0342,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":357106,"millis":0.357106,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":319005,"millis":0.319005,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":316504,"millis":0.316504,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":80601,"millis":0.080601,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":1491822,"millis":1.491822,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:37.857 [print] https:\/\/www.broinspireservices.nl\/wms\/ossosgm-a-v1.0?request=GetCapabilities \n"},{"result":{"nanos":842812,"millis":0.842812,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":469606,"millis":0.469606,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:37.858 [print] #notpresent \n"},{"result":{"nanos":294604,"millis":0.294604,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":407806,"millis":0.407806,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:37.859 [print] OGC:WMS \n"},{"result":{"nanos":82802,"millis":0.082802,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":399205,"millis":0.399205,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:37.859 [print] #notpresent \n"},{"result":{"nanos":897913,"millis":0.897913,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":458707,"millis":0.458707,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:37.861 [print] TNO Geologische Dienst Nederland \n"},{"result":{"nanos":847012,"millis":0.847012,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:37.862 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire?SERVICE=CSW&version=2.0.2&REQUEST=GetRecordById&ID=a7fb2234-f7b4-4a03-b282-f10947f42fb1&OUTPUTSCHEMA=http:\/\/www.isotc211.org\/2005\/gmd&ELEMENTSETNAME=full#MD_DataIdentification \n"},{"result":{"nanos":366105,"millis":0.366105,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":927114,"millis":0.927114,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"7b4a0b26-5885-45cd-a99d-27887cff68e5\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":1547322,"millis":1.547322,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"7b4a0b26-5885-45cd-a99d-27887cff68e5\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":550.116537,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"7b4a0b26-5885-45cd-a99d-27887cff68e5","startTime":1629213697310,"refId":"[1.5:67]","endTime":1629213697864,"exampleData":{"datasetIdentifierCode":"7b4a0b26-5885-45cd-a99d-27887cff68e5"},"exampleIndex":4},{"sectionIndex":0,"stepResults":[{"result":{"nanos":71201,"millis":0.071201,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:37.308 karate.env system property was: null \n"},{"result":{"nanos":58601,"millis":0.058601,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":126602,"millis":0.126602,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":139602,"millis":0.139602,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":274004,"millis":0.274004,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":125502,"millis":0.125502,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":440807,"millis":0.440807,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":103501,"millis":0.103501,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":121301,"millis":0.121301,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":226003,"millis":0.226003,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":187703,"millis":0.187703,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":52401,"millis":0.052401,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":33000,"millis":0.033,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":18501,"millis":0.018501,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":17000,"millis":0.017,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":15600,"millis":0.0156,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '224d93f6-0e4e-41fe-8424-1ab11a6c55ed'"}},{"result":{"nanos":2026229,"millis":2.026229,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":51901,"millis":0.051901,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":588245395,"millis":588.245395,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5300,"millis":0.0053,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":529108,"millis":0.529108,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '224d93f6-0e4e-41fe-8424-1ab11a6c55ed'"}},{"result":{"nanos":441607,"millis":0.441607,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":1597623,"millis":1.597623,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":353905,"millis":0.353905,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":426306,"millis":0.426306,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":380406,"millis":0.380406,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":32100,"millis":0.0321,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":278104,"millis":0.278104,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":796311,"millis":0.796311,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":289204,"millis":0.289204,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":344805,"millis":0.344805,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":399406,"millis":0.399406,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:37.912 [print] https:\/\/inspire.rivm.nl\/geoserver\/wfs? \n"},{"result":{"nanos":312004,"millis":0.312004,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":325704,"millis":0.325704,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:37.913 [print] #notpresent \n"},{"result":{"nanos":307604,"millis":0.307604,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":333705,"millis":0.333705,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:37.913 [print] OGC:WFS \n"},{"result":{"nanos":87701,"millis":0.087701,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":299505,"millis":0.299505,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:37.914 [print] #notpresent \n"},{"result":{"nanos":875813,"millis":0.875813,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":332105,"millis":0.332105,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:37.915 [print] RIVM \n"},{"result":{"nanos":511807,"millis":0.511807,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:37.915 [print] http:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/en\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=36a7e8cb-8300-4602-93d2-135943365a6f \n"},{"result":{"nanos":383005,"millis":0.383005,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":9640041,"millis":9.640041,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"224d93f6-0e4e-41fe-8424-1ab11a6c55ed\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":848112,"millis":0.848112,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"224d93f6-0e4e-41fe-8424-1ab11a6c55ed\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":612.466145,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"224d93f6-0e4e-41fe-8424-1ab11a6c55ed","startTime":1629213697307,"refId":"[1.6:67]","endTime":1629213697926,"exampleData":{"datasetIdentifierCode":"224d93f6-0e4e-41fe-8424-1ab11a6c55ed"},"exampleIndex":5},{"sectionIndex":0,"stepResults":[{"result":{"nanos":59200,"millis":0.0592,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:37.358 karate.env system property was: null \n"},{"result":{"nanos":50200,"millis":0.0502,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":133501,"millis":0.133501,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":145102,"millis":0.145102,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":345905,"millis":0.345905,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":131902,"millis":0.131902,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":454307,"millis":0.454307,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":103302,"millis":0.103302,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":126702,"millis":0.126702,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":229703,"millis":0.229703,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":179902,"millis":0.179902,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":55001,"millis":0.055001,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":35401,"millis":0.035401,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":18600,"millis":0.0186,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":16601,"millis":0.016601,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":31700,"millis":0.0317,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'a88b4ed1-49c1-4f91-991e-dc1cc7c575f7'"}},{"result":{"nanos":21301,"millis":0.021301,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":17500,"millis":0.0175,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":569827326,"millis":569.827326,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":6000,"millis":0.006,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":485907,"millis":0.485907,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'a88b4ed1-49c1-4f91-991e-dc1cc7c575f7'"}},{"result":{"nanos":970914,"millis":0.970914,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":394606,"millis":0.394606,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":406606,"millis":0.406606,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":455307,"millis":0.455307,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":954414,"millis":0.954414,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":41401,"millis":0.041401,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":347805,"millis":0.347805,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":324405,"millis":0.324405,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":339105,"millis":0.339105,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":100402,"millis":0.100402,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":2414935,"millis":2.414935,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:37.939 [print] http:\\\/\\\/services.inspire-provincies.nl\\\/ProductionAndIndustrialFacilities\\\/services\\\/view_PF?request=GetCapabilities \n"},{"result":{"nanos":890614,"millis":0.890614,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":594908,"millis":0.594908,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:37.940 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":366405,"millis":0.366405,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":473807,"millis":0.473807,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:37.941 [print] #notpresent \n"},{"result":{"nanos":93102,"millis":0.093102,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":498007,"millis":0.498007,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:37.942 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":451407,"millis":0.451407,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":104702,"millis":0.104702,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:37.942 [print] Interprovinciaal Overleg \n"},{"result":{"nanos":1428520,"millis":1.42852,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:37.944 [print] [\"http:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/nl\\\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=8e986f37-74d7-4b6c-8026-87c960456423&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full#MD_DataIdentification\",\"http:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/nl\\\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=afc450bd-65b3-4e59-b0fb-619869bf6ada&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full#MD_DataIdentification\"] \n"},{"result":{"nanos":451006,"millis":0.451006,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":1142917,"millis":1.142917,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"a88b4ed1-49c1-4f91-991e-dc1cc7c575f7\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":673810,"millis":0.67381,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"a88b4ed1-49c1-4f91-991e-dc1cc7c575f7\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":586.394168,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"a88b4ed1-49c1-4f91-991e-dc1cc7c575f7","startTime":1629213697357,"refId":"[1.7:67]","endTime":1629213697947,"exampleData":{"datasetIdentifierCode":"a88b4ed1-49c1-4f91-991e-dc1cc7c575f7"},"exampleIndex":6},{"sectionIndex":0,"stepResults":[{"result":{"nanos":56101,"millis":0.056101,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:37.393 karate.env system property was: null \n"},{"result":{"nanos":46400,"millis":0.0464,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":160003,"millis":0.160003,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":138102,"millis":0.138102,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":284804,"millis":0.284804,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":126501,"millis":0.126501,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":398105,"millis":0.398105,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":105301,"millis":0.105301,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":156503,"millis":0.156503,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":283504,"millis":0.283504,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":657410,"millis":0.65741,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":59801,"millis":0.059801,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":33600,"millis":0.0336,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":19800,"millis":0.0198,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":19400,"millis":0.0194,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":16601,"millis":0.016601,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '76342a6d-452e-4e21-b5c0-81ff7b1be90e'"}},{"result":{"nanos":15900,"millis":0.0159,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":16500,"millis":0.0165,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":578664955,"millis":578.664955,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":7701,"millis":0.007701,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":541308,"millis":0.541308,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '76342a6d-452e-4e21-b5c0-81ff7b1be90e'"}},{"result":{"nanos":999915,"millis":0.999915,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":393006,"millis":0.393006,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":357405,"millis":0.357405,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":486807,"millis":0.486807,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":391606,"millis":0.391606,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":28301,"millis":0.028301,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":811212,"millis":0.811212,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":281704,"millis":0.281704,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":289505,"millis":0.289505,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":1009615,"millis":1.009615,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":795311,"millis":0.795311,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:37.981 [print] https:\/\/www.broinspireservices.nl\/wfs\/ossobor-a-v1.0?request=GetCapabilities&service=WFS&version=2.0.0 \n"},{"result":{"nanos":357605,"millis":0.357605,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":487007,"millis":0.487007,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:37.982 [print] OGC:WFS \n"},{"result":{"nanos":396206,"millis":0.396206,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":473907,"millis":0.473907,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:37.983 [print] #notpresent \n"},{"result":{"nanos":81601,"millis":0.081601,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":435506,"millis":0.435506,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:37.983 [print] OGC:WFS \n"},{"result":{"nanos":420807,"millis":0.420807,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":513007,"millis":0.513007,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:37.984 [print] TNO Geologische Dienst Nederland \n"},{"result":{"nanos":911313,"millis":0.911313,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:37.985 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire?SERVICE=CSW&version=2.0.2&REQUEST=GetRecordById&ID=9dd9bf30-36e6-45ae-b368-bdef2720bdde&OUTPUTSCHEMA=http:\/\/www.isotc211.org\/2005\/gmd&ELEMENTSETNAME=full#MD_DataIdentification \n"},{"result":{"nanos":364306,"millis":0.364306,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":3434650,"millis":3.43465,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"76342a6d-452e-4e21-b5c0-81ff7b1be90e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":640410,"millis":0.64041,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"76342a6d-452e-4e21-b5c0-81ff7b1be90e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":596.169012,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"76342a6d-452e-4e21-b5c0-81ff7b1be90e","startTime":1629213697392,"refId":"[1.8:67]","endTime":1629213697990,"exampleData":{"datasetIdentifierCode":"76342a6d-452e-4e21-b5c0-81ff7b1be90e"},"exampleIndex":7},{"sectionIndex":0,"stepResults":[{"result":{"nanos":20200,"millis":0.0202,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:37.871 karate.env system property was: null \n"},{"result":{"nanos":35701,"millis":0.035701,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":87101,"millis":0.087101,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":59901,"millis":0.059901,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":231904,"millis":0.231904,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":52901,"millis":0.052901,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":2383335,"millis":2.383335,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":50801,"millis":0.050801,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":415106,"millis":0.415106,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":199103,"millis":0.199103,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":93701,"millis":0.093701,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":24900,"millis":0.0249,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":27801,"millis":0.027801,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":9200,"millis":0.0092,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":325505,"millis":0.325505,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '5dfccef3-9b52-47f2-bb02-66b74aaf3af8'"}},{"result":{"nanos":27500,"millis":0.0275,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":5901,"millis":0.005901,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":546806589,"millis":546.806589,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":6700,"millis":0.0067,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":579508,"millis":0.579508,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '5dfccef3-9b52-47f2-bb02-66b74aaf3af8'"}},{"result":{"nanos":464107,"millis":0.464107,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":405606,"millis":0.405606,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":391005,"millis":0.391005,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":7079803,"millis":7.079803,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":534308,"millis":0.534308,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":35601,"millis":0.035601,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":344905,"millis":0.344905,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":329605,"millis":0.329605,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":327605,"millis":0.327605,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":85502,"millis":0.085502,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":893713,"millis":0.893713,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:38.434 [print] https:\/\/inspire.caris.nl\/geoserver\/auwms\/wms?request=GetCapabilities \n"},{"result":{"nanos":360605,"millis":0.360605,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":366305,"millis":0.366305,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:38.435 [print] OGC:WMS \n"},{"result":{"nanos":341705,"millis":0.341705,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":352406,"millis":0.352406,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:38.435 [print] #notpresent \n"},{"result":{"nanos":60201,"millis":0.060201,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":322005,"millis":0.322005,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:38.436 [print] OGC:WMS \n"},{"result":{"nanos":417906,"millis":0.417906,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":359205,"millis":0.359205,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:38.437 [print] Ministerie van Defensie, Koninklijke Marine, Dienst der Hydrografie \n"},{"result":{"nanos":660809,"millis":0.660809,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:38.437 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=4d514a2b-4a7e-4686-b9ea-87cb3e17ed52&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full#MD_DataIdentification \n"},{"result":{"nanos":397006,"millis":0.397006,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":828812,"millis":0.828812,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"5dfccef3-9b52-47f2-bb02-66b74aaf3af8\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":653009,"millis":0.653009,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"5dfccef3-9b52-47f2-bb02-66b74aaf3af8\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":567.459592,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"5dfccef3-9b52-47f2-bb02-66b74aaf3af8","startTime":1629213697870,"refId":"[1.9:67]","endTime":1629213698439,"exampleData":{"datasetIdentifierCode":"5dfccef3-9b52-47f2-bb02-66b74aaf3af8"},"exampleIndex":8},{"sectionIndex":0,"stepResults":[{"result":{"nanos":20100,"millis":0.0201,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:37.930 karate.env system property was: null \n"},{"result":{"nanos":40901,"millis":0.040901,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":56101,"millis":0.056101,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":63701,"millis":0.063701,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":268304,"millis":0.268304,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":67001,"millis":0.067001,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":453307,"millis":0.453307,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":46900,"millis":0.0469,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":3763355,"millis":3.763355,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":182202,"millis":0.182202,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":82101,"millis":0.082101,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":22700,"millis":0.0227,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":23801,"millis":0.023801,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":281804,"millis":0.281804,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":146203,"millis":0.146203,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'b85d4a0a-c0f7-42f4-9316-b214d205ca38'"}},{"result":{"nanos":9600,"millis":0.0096,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":578519153,"millis":578.519153,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5400,"millis":0.0054,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":544008,"millis":0.544008,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'b85d4a0a-c0f7-42f4-9316-b214d205ca38'"}},{"result":{"nanos":459106,"millis":0.459106,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":431307,"millis":0.431307,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":418606,"millis":0.418606,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":500407,"millis":0.500407,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":469207,"millis":0.469207,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":33801,"millis":0.033801,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":371205,"millis":0.371205,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":411606,"millis":0.411606,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":373605,"millis":0.373605,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":424206,"millis":0.424206,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":443006,"millis":0.443006,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:38.527 [print] http:\/\/inspire.rdw.nl\/www\/download\/rdw-inspire.xml \n"},{"result":{"nanos":394106,"millis":0.394106,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":300204,"millis":0.300204,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:38.527 [print] #notpresent \n"},{"result":{"nanos":573609,"millis":0.573609,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":311905,"millis":0.311905,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:38.528 [print] INSPIRE Atom \n"},{"result":{"nanos":49101,"millis":0.049101,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":216403,"millis":0.216403,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:38.529 [print] #notpresent \n"},{"result":{"nanos":461307,"millis":0.461307,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":523408,"millis":0.523408,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:38.529 [print] RDW \n"},{"result":{"nanos":760611,"millis":0.760611,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:38.530 [print] https:\/\/www.nationaalgeoregister.nl:443\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=fe2f9091-1962-4073-9e3b-3e4aeed488a5#MD_DataIdentification \n"},{"result":{"nanos":372506,"millis":0.372506,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":1628624,"millis":1.628624,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"b85d4a0a-c0f7-42f4-9316-b214d205ca38\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":693110,"millis":0.69311,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"b85d4a0a-c0f7-42f4-9316-b214d205ca38\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":595.227398,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"b85d4a0a-c0f7-42f4-9316-b214d205ca38","startTime":1629213697928,"refId":"[1.10:67]","endTime":1629213698533,"exampleData":{"datasetIdentifierCode":"b85d4a0a-c0f7-42f4-9316-b214d205ca38"},"exampleIndex":9},{"sectionIndex":0,"stepResults":[{"result":{"nanos":24500,"millis":0.0245,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:37.954 karate.env system property was: null \n"},{"result":{"nanos":40001,"millis":0.040001,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":50801,"millis":0.050801,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":60601,"millis":0.060601,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":272204,"millis":0.272204,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":63501,"millis":0.063501,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":414306,"millis":0.414306,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":47001,"millis":0.047001,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":828512,"millis":0.828512,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":160302,"millis":0.160302,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":77801,"millis":0.077801,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":21601,"millis":0.021601,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":30400,"millis":0.0304,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":6201,"millis":0.006201,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":112402,"millis":0.112402,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '5471a93b-cf18-43f5-9ddb-71987857435d'"}},{"result":{"nanos":7100,"millis":0.0071,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":5700,"millis":0.0057,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":591134137,"millis":591.134137,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":380506,"millis":0.380506,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '5471a93b-cf18-43f5-9ddb-71987857435d'"}},{"result":{"nanos":377906,"millis":0.377906,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":366105,"millis":0.366105,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":349206,"millis":0.349206,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":392806,"millis":0.392806,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":374805,"millis":0.374805,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":28201,"millis":0.028201,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":311505,"millis":0.311505,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":291104,"millis":0.291104,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":364906,"millis":0.364906,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":603309,"millis":0.603309,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":678410,"millis":0.67841,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:38.552 [print] https:\/\/www.broinspireservices.nl\/wfs\/oshhgqm-a-v1.0?request=GetCapabilities&service=WFS&version=2.0.0 \n"},{"result":{"nanos":357605,"millis":0.357605,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":441807,"millis":0.441807,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:38.553 [print] #notpresent \n"},{"result":{"nanos":380806,"millis":0.380806,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":5229276,"millis":5.229276,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:38.559 [print] OGC:WFS \n"},{"result":{"nanos":48800,"millis":0.0488,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":98201,"millis":0.098201,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:38.559 [print] #notpresent \n"},{"result":{"nanos":385906,"millis":0.385906,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":2280733,"millis":2.280733,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:38.562 [print] TNO Geologische Dienst Nederland \n"},{"result":{"nanos":555708,"millis":0.555708,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:38.562 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire?SERVICE=CSW&version=2.0.2&REQUEST=GetRecordById&ID=6050578f-0010-4bfa-b013-c8617b80ba62&OUTPUTSCHEMA=http:\/\/www.isotc211.org\/2005\/gmd&ELEMENTSETNAME=full#MD_DataIdentification \n"},{"result":{"nanos":378205,"millis":0.378205,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":661109,"millis":0.661109,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"5471a93b-cf18-43f5-9ddb-71987857435d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":440507,"millis":0.440507,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"5471a93b-cf18-43f5-9ddb-71987857435d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":609.143403,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"5471a93b-cf18-43f5-9ddb-71987857435d","startTime":1629213697951,"refId":"[1.11:67]","endTime":1629213698564,"exampleData":{"datasetIdentifierCode":"5471a93b-cf18-43f5-9ddb-71987857435d"},"exampleIndex":10},{"sectionIndex":0,"stepResults":[{"result":{"nanos":19200,"millis":0.0192,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:37.994 karate.env system property was: null \n"},{"result":{"nanos":37100,"millis":0.0371,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":50301,"millis":0.050301,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":61301,"millis":0.061301,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":235604,"millis":0.235604,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":99201,"millis":0.099201,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":411406,"millis":0.411406,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":44400,"millis":0.0444,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":466907,"millis":0.466907,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":159703,"millis":0.159703,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":86001,"millis":0.086001,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":19401,"millis":0.019401,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19400,"millis":0.0194,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5900,"millis":0.0059,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":82102,"millis":0.082102,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '1a8d5470-8c5e-477a-ab6b-4893b6d21ab6'"}},{"result":{"nanos":5700,"millis":0.0057,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":597761034,"millis":597.761034,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5200,"millis":0.0052,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":397406,"millis":0.397406,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '1a8d5470-8c5e-477a-ab6b-4893b6d21ab6'"}},{"result":{"nanos":389606,"millis":0.389606,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":337605,"millis":0.337605,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":334605,"millis":0.334605,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":409105,"millis":0.409105,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":390405,"millis":0.390405,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":25000,"millis":0.025,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":285904,"millis":0.285904,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":307105,"millis":0.307105,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":290004,"millis":0.290004,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":61000,"millis":0.061,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":114301,"millis":0.114301,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:38.598 [print] https:\/\/www.broinspireservices.nl\/wms\/osgebor-a-v1.0?request=GetCapabilities \n"},{"result":{"nanos":318805,"millis":0.318805,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":197303,"millis":0.197303,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:38.598 [print] #notpresent \n"},{"result":{"nanos":311805,"millis":0.311805,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":895713,"millis":0.895713,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:38.600 [print] OGC:WMS \n"},{"result":{"nanos":43701,"millis":0.043701,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":60901,"millis":0.060901,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:38.600 [print] #notpresent \n"},{"result":{"nanos":600909,"millis":0.600909,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":467507,"millis":0.467507,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:38.601 [print] TNO Geologische Dienst Nederland \n"},{"result":{"nanos":885913,"millis":0.885913,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:38.601 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire?SERVICE=CSW&version=2.0.2&REQUEST=GetRecordById&ID=6c1cf452-8c62-4046-99ab-640a5e184f9c&OUTPUTSCHEMA=http:\/\/www.isotc211.org\/2005\/gmd&ELEMENTSETNAME=full#MD_DataIdentification \n"},{"result":{"nanos":351705,"millis":0.351705,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":1344020,"millis":1.34402,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"1a8d5470-8c5e-477a-ab6b-4893b6d21ab6\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":1452421,"millis":1.452421,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"1a8d5470-8c5e-477a-ab6b-4893b6d21ab6\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":609.85211,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"1a8d5470-8c5e-477a-ab6b-4893b6d21ab6","startTime":1629213697994,"refId":"[1.12:67]","endTime":1629213698605,"exampleData":{"datasetIdentifierCode":"1a8d5470-8c5e-477a-ab6b-4893b6d21ab6"},"exampleIndex":11},{"sectionIndex":0,"stepResults":[{"result":{"nanos":41201,"millis":0.041201,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:38.442 karate.env system property was: null \n"},{"result":{"nanos":77101,"millis":0.077101,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":60301,"millis":0.060301,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":65401,"millis":0.065401,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":249804,"millis":0.249804,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":59101,"millis":0.059101,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":534808,"millis":0.534808,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":58301,"millis":0.058301,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":353205,"millis":0.353205,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":136902,"millis":0.136902,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":81201,"millis":0.081201,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":22300,"millis":0.0223,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19300,"millis":0.0193,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5400,"millis":0.0054,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":61701,"millis":0.061701,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '5be1b57b-2cac-4119-92eb-700346543d47'"}},{"result":{"nanos":6401,"millis":0.006401,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":559520175,"millis":559.520175,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5800,"millis":0.0058,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":511708,"millis":0.511708,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '5be1b57b-2cac-4119-92eb-700346543d47'"}},{"result":{"nanos":374906,"millis":0.374906,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":357505,"millis":0.357505,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":334005,"millis":0.334005,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":405506,"millis":0.405506,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":391005,"millis":0.391005,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":28801,"millis":0.028801,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":300004,"millis":0.300004,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":290304,"millis":0.290304,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":304905,"millis":0.304905,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":68601,"millis":0.068601,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":130902,"millis":0.130902,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:39.008 [print] https:\/\/inspire.caris.nl\/geoserver\/mu\/wfs?request=GetCapabilities&service=WFS&version=2.0.0 \n"},{"result":{"nanos":310304,"millis":0.310304,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":615809,"millis":0.615809,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:39.009 [print] OGC:WFS \n"},{"result":{"nanos":562108,"millis":0.562108,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":98102,"millis":0.098102,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:39.009 [print] #notpresent \n"},{"result":{"nanos":36500,"millis":0.0365,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":285604,"millis":0.285604,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:39.010 [print] OGC:WFS \n"},{"result":{"nanos":589809,"millis":0.589809,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":76701,"millis":0.076701,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:39.011 [print] Ministerie van Defensie, Koninklijke Marine, Dienst der Hydrografie \n"},{"result":{"nanos":72201,"millis":0.072201,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:39.011 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=a5241416-8401-4623-be61-57ef50447a41&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full#MD_DataIdentification \n"},{"result":{"nanos":935614,"millis":0.935614,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":757511,"millis":0.757511,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"5be1b57b-2cac-4119-92eb-700346543d47\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":453207,"millis":0.453207,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"5be1b57b-2cac-4119-92eb-700346543d47\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":569.659625,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"5be1b57b-2cac-4119-92eb-700346543d47","startTime":1629213698442,"refId":"[1.13:67]","endTime":1629213699013,"exampleData":{"datasetIdentifierCode":"5be1b57b-2cac-4119-92eb-700346543d47"},"exampleIndex":12},{"sectionIndex":0,"stepResults":[{"result":{"nanos":23600,"millis":0.0236,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:38.536 karate.env system property was: null \n"},{"result":{"nanos":59201,"millis":0.059201,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":57201,"millis":0.057201,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":57201,"millis":0.057201,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":292705,"millis":0.292705,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":52800,"millis":0.0528,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":443806,"millis":0.443806,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":41701,"millis":0.041701,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":253204,"millis":0.253204,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":122602,"millis":0.122602,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":69301,"millis":0.069301,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":19000,"millis":0.019,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19201,"millis":0.019201,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":82701,"millis":0.082701,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'c99b1291-c51f-49c8-902d-5bd4148cbbde'"}},{"result":{"nanos":6900,"millis":0.0069,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":551685460,"millis":551.68546,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":7800,"millis":0.0078,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":569308,"millis":0.569308,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'c99b1291-c51f-49c8-902d-5bd4148cbbde'"}},{"result":{"nanos":531707,"millis":0.531707,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":448706,"millis":0.448706,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":435007,"millis":0.435007,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":494607,"millis":0.494607,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":416406,"millis":0.416406,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":28100,"millis":0.0281,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":324705,"millis":0.324705,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":320705,"millis":0.320705,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":363105,"millis":0.363105,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":91501,"millis":0.091501,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":463107,"millis":0.463107,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:39.094 [print] http:\\\/\\\/services.inspire-provincies.nl\\\/HabitatsAndBiotopes\\\/services\\\/view_HB?request=GetCapabilities \n"},{"result":{"nanos":374106,"millis":0.374106,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":334805,"millis":0.334805,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:39.095 [print] [\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":357805,"millis":0.357805,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":287505,"millis":0.287505,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:39.096 [print] #notpresent \n"},{"result":{"nanos":41600,"millis":0.0416,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":306804,"millis":0.306804,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:39.096 [print] [\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":395306,"millis":0.395306,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":268004,"millis":0.268004,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:39.096 [print] Interprovinciaal Overleg \n"},{"result":{"nanos":390306,"millis":0.390306,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:39.097 [print] http:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/nl\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=88e2a6fa-b296-4ff4-bc30-fb87e2c1627e&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full#MD_DataIdentification \n"},{"result":{"nanos":430806,"millis":0.430806,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":964714,"millis":0.964714,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"c99b1291-c51f-49c8-902d-5bd4148cbbde\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":499407,"millis":0.499407,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"c99b1291-c51f-49c8-902d-5bd4148cbbde\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":562.447116,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"c99b1291-c51f-49c8-902d-5bd4148cbbde","startTime":1629213698535,"refId":"[1.14:67]","endTime":1629213699099,"exampleData":{"datasetIdentifierCode":"c99b1291-c51f-49c8-902d-5bd4148cbbde"},"exampleIndex":13},{"sectionIndex":0,"stepResults":[{"result":{"nanos":39801,"millis":0.039801,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:38.567 karate.env system property was: null \n"},{"result":{"nanos":37001,"millis":0.037001,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":44401,"millis":0.044401,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":52400,"millis":0.0524,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":216003,"millis":0.216003,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":86701,"millis":0.086701,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":380306,"millis":0.380306,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":39601,"millis":0.039601,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":289304,"millis":0.289304,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":123202,"millis":0.123202,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":69201,"millis":0.069201,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":18600,"millis":0.0186,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":23500,"millis":0.0235,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":7500,"millis":0.0075,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":55301,"millis":0.055301,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '755d488b-7b94-4883-95be-6aa279604f85'"}},{"result":{"nanos":6500,"millis":0.0065,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":5300,"millis":0.0053,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":549215924,"millis":549.215924,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":410106,"millis":0.410106,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '755d488b-7b94-4883-95be-6aa279604f85'"}},{"result":{"nanos":402106,"millis":0.402106,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":375805,"millis":0.375805,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":355805,"millis":0.355805,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":406906,"millis":0.406906,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":400006,"millis":0.400006,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":26700,"millis":0.0267,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":304404,"millis":0.304404,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":322405,"millis":0.322405,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":307805,"millis":0.307805,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":58701,"millis":0.058701,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":123602,"millis":0.123602,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:39.122 [print] https:\/\/inspire.rivm.nl\/geoserver\/wms? \n"},{"result":{"nanos":312504,"millis":0.312504,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":239003,"millis":0.239003,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:39.122 [print] #notpresent \n"},{"result":{"nanos":331005,"millis":0.331005,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":252704,"millis":0.252704,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:39.123 [print] OGC:WMS \n"},{"result":{"nanos":40601,"millis":0.040601,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":217603,"millis":0.217603,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:39.123 [print] #notpresent \n"},{"result":{"nanos":377006,"millis":0.377006,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":248104,"millis":0.248104,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:39.124 [print] RIVM \n"},{"result":{"nanos":487807,"millis":0.487807,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:39.124 [print] http:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/en\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=36a7e8cb-8300-4602-93d2-135943365a6f \n"},{"result":{"nanos":382006,"millis":0.382006,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":999615,"millis":0.999615,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"755d488b-7b94-4883-95be-6aa279604f85\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":648909,"millis":0.648909,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"755d488b-7b94-4883-95be-6aa279604f85\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":558.751464,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"755d488b-7b94-4883-95be-6aa279604f85","startTime":1629213698566,"refId":"[1.15:67]","endTime":1629213699127,"exampleData":{"datasetIdentifierCode":"755d488b-7b94-4883-95be-6aa279604f85"},"exampleIndex":14},{"sectionIndex":0,"stepResults":[{"result":{"nanos":19301,"millis":0.019301,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:38.607 karate.env system property was: null \n"},{"result":{"nanos":33900,"millis":0.0339,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":46001,"millis":0.046001,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":52101,"millis":0.052101,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":205703,"millis":0.205703,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":93402,"millis":0.093402,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":402706,"millis":0.402706,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":40901,"millis":0.040901,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":55701,"millis":0.055701,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":348005,"millis":0.348005,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":74701,"millis":0.074701,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":18800,"millis":0.0188,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18400,"millis":0.0184,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":23800,"millis":0.0238,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":53500,"millis":0.0535,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'a4c5aa6c-6c7f-45d7-9799-011edd83d9c2'"}},{"result":{"nanos":5501,"millis":0.005501,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":555259512,"millis":555.259512,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":6500,"millis":0.0065,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":528108,"millis":0.528108,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'a4c5aa6c-6c7f-45d7-9799-011edd83d9c2'"}},{"result":{"nanos":476607,"millis":0.476607,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":391606,"millis":0.391606,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":380106,"millis":0.380106,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":473507,"millis":0.473507,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":442407,"millis":0.442407,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":32401,"millis":0.032401,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":351105,"millis":0.351105,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":339905,"millis":0.339905,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":341605,"millis":0.341605,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":780112,"millis":0.780112,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":916614,"millis":0.916614,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:39.170 [print] https:\/\/inspire.caris.nl\/gs5\/ProspectingAndMiningPermitArea\/ows?service=WFS&version=2.0.0&request=GetCapabilities \n"},{"result":{"nanos":390006,"millis":0.390006,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":510607,"millis":0.510607,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:39.171 [print] OGC:WFS \n"},{"result":{"nanos":375306,"millis":0.375306,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":510408,"millis":0.510408,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:39.172 [print] #notpresent \n"},{"result":{"nanos":51001,"millis":0.051001,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":463207,"millis":0.463207,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:39.173 [print] OGC:WFS \n"},{"result":{"nanos":347505,"millis":0.347505,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":516808,"millis":0.516808,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:39.174 [print] Ministerie van Defensie, Koninklijke Marine, Dienst der Hydrografie \n"},{"result":{"nanos":854312,"millis":0.854312,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:39.174 [print] https:\/\/www.nationaalgeoregister.nl:443\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=c2225e5d-b46f-4e38-8445-ab10fd40c0dc#MD_DataIdentification \n"},{"result":{"nanos":346405,"millis":0.346405,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":660910,"millis":0.66091,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"a4c5aa6c-6c7f-45d7-9799-011edd83d9c2\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":469107,"millis":0.469107,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"a4c5aa6c-6c7f-45d7-9799-011edd83d9c2\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":567.7168,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"a4c5aa6c-6c7f-45d7-9799-011edd83d9c2","startTime":1629213698607,"refId":"[1.16:67]","endTime":1629213699176,"exampleData":{"datasetIdentifierCode":"a4c5aa6c-6c7f-45d7-9799-011edd83d9c2"},"exampleIndex":15},{"sectionIndex":0,"stepResults":[{"result":{"nanos":17400,"millis":0.0174,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:39.015 karate.env system property was: null \n"},{"result":{"nanos":34400,"millis":0.0344,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":45900,"millis":0.0459,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":54501,"millis":0.054501,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":263104,"millis":0.263104,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":54601,"millis":0.054601,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":396706,"millis":0.396706,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":41501,"millis":0.041501,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":72201,"millis":0.072201,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":117402,"millis":0.117402,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":68401,"millis":0.068401,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":16900,"millis":0.0169,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17501,"millis":0.017501,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":52801,"millis":0.052801,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'f61eec5c-cb91-40b6-ad35-9bca967006cc'"}},{"result":{"nanos":6200,"millis":0.0062,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":577936544,"millis":577.936544,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":6800,"millis":0.0068,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":660910,"millis":0.66091,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'f61eec5c-cb91-40b6-ad35-9bca967006cc'"}},{"result":{"nanos":431706,"millis":0.431706,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":371605,"millis":0.371605,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":650210,"millis":0.65021,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":639409,"millis":0.639409,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":500408,"millis":0.500408,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":103701,"millis":0.103701,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":373405,"millis":0.373405,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":883613,"millis":0.883613,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":365506,"millis":0.365506,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":153402,"millis":0.153402,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":1246419,"millis":1.246419,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:39.601 [print] https:\/\/inspire.rivm.nl\/geoserver\/wms?request=GetCapabilities \n"},{"result":{"nanos":420606,"millis":0.420606,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":520408,"millis":0.520408,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:39.602 [print] OGC:WMS \n"},{"result":{"nanos":393806,"millis":0.393806,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":483007,"millis":0.483007,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:39.603 [print] #notpresent \n"},{"result":{"nanos":100102,"millis":0.100102,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":455307,"millis":0.455307,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:39.604 [print] OGC:WMS \n"},{"result":{"nanos":374905,"millis":0.374905,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":589409,"millis":0.589409,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:39.605 [print] Rijksinstituut voor Volksgezondheid en Milieu \n"},{"result":{"nanos":3958258,"millis":3.958258,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:39.609 [print] http:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=588a4cb1-b442-4ac1-87e4-40401e353166#MD_DataIdentification \n"},{"result":{"nanos":1370920,"millis":1.37092,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":552708,"millis":0.552708,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"f61eec5c-cb91-40b6-ad35-9bca967006cc\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":424506,"millis":0.424506,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"f61eec5c-cb91-40b6-ad35-9bca967006cc\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":595.240799,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"f61eec5c-cb91-40b6-ad35-9bca967006cc","startTime":1629213699015,"refId":"[1.17:67]","endTime":1629213699611,"exampleData":{"datasetIdentifierCode":"f61eec5c-cb91-40b6-ad35-9bca967006cc"},"exampleIndex":16},{"sectionIndex":0,"stepResults":[{"result":{"nanos":18501,"millis":0.018501,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:39.101 karate.env system property was: null \n"},{"result":{"nanos":35700,"millis":0.0357,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":47501,"millis":0.047501,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":57001,"millis":0.057001,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":229004,"millis":0.229004,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":54100,"millis":0.0541,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":403206,"millis":0.403206,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":40100,"millis":0.0401,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":180803,"millis":0.180803,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":106702,"millis":0.106702,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":68001,"millis":0.068001,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":17400,"millis":0.0174,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17801,"millis":0.017801,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":6000,"millis":0.006,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":51101,"millis":0.051101,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '5f0c583a-101e-45ea-b684-a056713cf811'"}},{"result":{"nanos":5300,"millis":0.0053,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":539037576,"millis":539.037576,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":7400,"millis":0.0074,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":576008,"millis":0.576008,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '5f0c583a-101e-45ea-b684-a056713cf811'"}},{"result":{"nanos":428707,"millis":0.428707,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":357305,"millis":0.357305,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":867713,"millis":0.867713,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":522808,"millis":0.522808,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":483107,"millis":0.483107,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":100902,"millis":0.100902,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":355305,"millis":0.355305,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":359506,"millis":0.359506,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":917213,"millis":0.917213,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":960014,"millis":0.960014,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":1080116,"millis":1.080116,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:39.649 [print] https:\/\/inspire.caris.nl\/atom\/maritieme-grenzen-zones-noordzee-baseline-feed.atom \n"},{"result":{"nanos":433006,"millis":0.433006,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":628509,"millis":0.628509,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:39.650 [print] #notpresent \n"},{"result":{"nanos":425806,"millis":0.425806,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":485707,"millis":0.485707,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:39.651 [print] INSPIRE Atom \n"},{"result":{"nanos":97101,"millis":0.097101,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":469307,"millis":0.469307,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:39.652 [print] #notpresent \n"},{"result":{"nanos":367706,"millis":0.367706,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":635009,"millis":0.635009,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:39.653 [print] Ministerie van Defensie, Koninklijke Marine, Dienst der Hydrografie \n"},{"result":{"nanos":937814,"millis":0.937814,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:39.654 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=1249746f-c2a6-4639-98f2-251676b3528e&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full#MD_DataIdentification \n"},{"result":{"nanos":386406,"millis":0.386406,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":585909,"millis":0.585909,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"5f0c583a-101e-45ea-b684-a056713cf811\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":1076616,"millis":1.076616,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"5f0c583a-101e-45ea-b684-a056713cf811\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":553.928997,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"5f0c583a-101e-45ea-b684-a056713cf811","startTime":1629213699101,"refId":"[1.18:67]","endTime":1629213699656,"exampleData":{"datasetIdentifierCode":"5f0c583a-101e-45ea-b684-a056713cf811"},"exampleIndex":17},{"sectionIndex":0,"stepResults":[{"result":{"nanos":18100,"millis":0.0181,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:39.129 karate.env system property was: null \n"},{"result":{"nanos":28901,"millis":0.028901,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":46300,"millis":0.0463,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":55300,"millis":0.0553,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":238104,"millis":0.238104,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":50001,"millis":0.050001,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":387606,"millis":0.387606,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":39900,"millis":0.0399,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":231704,"millis":0.231704,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":112902,"millis":0.112902,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":69101,"millis":0.069101,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":17900,"millis":0.0179,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":16201,"millis":0.016201,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":53301,"millis":0.053301,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'c35c7421-f3ef-4bfb-afcc-ca15d03b8e6f'"}},{"result":{"nanos":7000,"millis":0.007,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":559376873,"millis":559.376873,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5900,"millis":0.0059,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":989114,"millis":0.989114,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'c35c7421-f3ef-4bfb-afcc-ca15d03b8e6f'"}},{"result":{"nanos":356306,"millis":0.356306,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":953814,"millis":0.953814,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":310204,"millis":0.310204,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":533907,"millis":0.533907,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":412106,"millis":0.412106,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":87402,"millis":0.087402,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":300304,"millis":0.300304,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":316504,"millis":0.316504,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":317405,"millis":0.317405,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":642310,"millis":0.64231,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":778811,"millis":0.778811,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:39.697 [print] https:\/\/inspire.caris.nl\/gs5\/ProspectingAndMiningPermitArea\/wms?service=WMS&version=1.3.0&request=GetCapabilities \n"},{"result":{"nanos":860713,"millis":0.860713,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":951814,"millis":0.951814,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:39.698 [print] OGC:WMS \n"},{"result":{"nanos":350005,"millis":0.350005,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":500907,"millis":0.500907,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:39.699 [print] #notpresent \n"},{"result":{"nanos":92801,"millis":0.092801,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":450806,"millis":0.450806,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:39.700 [print] OGC:WMS \n"},{"result":{"nanos":315705,"millis":0.315705,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":566508,"millis":0.566508,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:39.701 [print] Ministerie van Defensie, Koninklijke Marine, Dienst der Hydrografie \n"},{"result":{"nanos":966814,"millis":0.966814,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:39.702 [print] https:\/\/www.nationaalgeoregister.nl:443\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=c2225e5d-b46f-4e38-8445-ab10fd40c0dc#MD_DataIdentification \n"},{"result":{"nanos":326005,"millis":0.326005,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":2412335,"millis":2.412335,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"c35c7421-f3ef-4bfb-afcc-ca15d03b8e6f\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":501608,"millis":0.501608,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"c35c7421-f3ef-4bfb-afcc-ca15d03b8e6f\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":575.063002,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"c35c7421-f3ef-4bfb-afcc-ca15d03b8e6f","startTime":1629213699128,"refId":"[1.19:67]","endTime":1629213699705,"exampleData":{"datasetIdentifierCode":"c35c7421-f3ef-4bfb-afcc-ca15d03b8e6f"},"exampleIndex":18},{"sectionIndex":0,"stepResults":[{"result":{"nanos":19500,"millis":0.0195,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:39.181 karate.env system property was: null \n"},{"result":{"nanos":33701,"millis":0.033701,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":50100,"millis":0.0501,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":56400,"millis":0.0564,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":230703,"millis":0.230703,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":52201,"millis":0.052201,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":384506,"millis":0.384506,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":458306,"millis":0.458306,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":906113,"millis":0.906113,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":115102,"millis":0.115102,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":69601,"millis":0.069601,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":18900,"millis":0.0189,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19101,"millis":0.019101,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":65601,"millis":0.065601,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'fbe544b6-6e6f-43a0-80b9-ced1df78c434'"}},{"result":{"nanos":5200,"millis":0.0052,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":543104335,"millis":543.104335,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":6100,"millis":0.0061,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":467607,"millis":0.467607,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'fbe544b6-6e6f-43a0-80b9-ced1df78c434'"}},{"result":{"nanos":401906,"millis":0.401906,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":867413,"millis":0.867413,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":341205,"millis":0.341205,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":547708,"millis":0.547708,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":450107,"millis":0.450107,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":86202,"millis":0.086202,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":338105,"millis":0.338105,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":845412,"millis":0.845412,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":356506,"millis":0.356506,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":143502,"millis":0.143502,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":681010,"millis":0.68101,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:39.733 [print] https:\\\/\\\/inspire.rivm.nl\\\/geoserver\\\/wfs?request=GetCapabilities \n"},{"result":{"nanos":373806,"millis":0.373806,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":543208,"millis":0.543208,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:39.734 [print] OGC:WFS \n"},{"result":{"nanos":381006,"millis":0.381006,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":482907,"millis":0.482907,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:39.735 [print] INSPIRE Atom \n"},{"result":{"nanos":93401,"millis":0.093401,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":435806,"millis":0.435806,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:39.735 [print] OGC:WFS \n"},{"result":{"nanos":358605,"millis":0.358605,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":551608,"millis":0.551608,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:39.736 [print] Rijksinstituut voor Volksgezondheid en Milieu \n"},{"result":{"nanos":1472121,"millis":1.472121,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:39.738 [print] http:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=ad6caa40-89ab-47e3-85ab-3f8e32024a71#MD_DataIdentification \n"},{"result":{"nanos":361505,"millis":0.361505,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":495607,"millis":0.495607,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"fbe544b6-6e6f-43a0-80b9-ced1df78c434\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":2689439,"millis":2.689439,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"fbe544b6-6e6f-43a0-80b9-ced1df78c434\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":559.374072,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"fbe544b6-6e6f-43a0-80b9-ced1df78c434","startTime":1629213699180,"refId":"[1.20:67]","endTime":1629213699741,"exampleData":{"datasetIdentifierCode":"fbe544b6-6e6f-43a0-80b9-ced1df78c434"},"exampleIndex":19},{"sectionIndex":0,"stepResults":[{"result":{"nanos":55301,"millis":0.055301,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:39.613 karate.env system property was: null \n"},{"result":{"nanos":86401,"millis":0.086401,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":137702,"millis":0.137702,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":171203,"millis":0.171203,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":319905,"millis":0.319905,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":2596738,"millis":2.596738,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":442307,"millis":0.442307,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":858613,"millis":0.858613,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":145602,"millis":0.145602,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":2792241,"millis":2.792241,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":195903,"millis":0.195903,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":72001,"millis":0.072001,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":44601,"millis":0.044601,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":27001,"millis":0.027001,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":18200,"millis":0.0182,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":59901,"millis":0.059901,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '1d3c777a-3527-4aa1-8573-d6aeeff115e5'"}},{"result":{"nanos":31001,"millis":0.031001,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":55501,"millis":0.055501,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":539036975,"millis":539.036975,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":7400,"millis":0.0074,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":542508,"millis":0.542508,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '1d3c777a-3527-4aa1-8573-d6aeeff115e5'"}},{"result":{"nanos":442206,"millis":0.442206,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":831513,"millis":0.831513,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":294304,"millis":0.294304,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":388806,"millis":0.388806,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":373006,"millis":0.373006,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":43600,"millis":0.0436,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":862412,"millis":0.862412,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":315305,"millis":0.315305,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":308005,"millis":0.308005,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":343705,"millis":0.343705,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":293504,"millis":0.293504,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:40.166 [print] https:\/\/www.broinspireservices.nl\/atom\/services.atom \n"},{"result":{"nanos":318704,"millis":0.318704,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":228804,"millis":0.228804,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:40.167 [print] #notpresent \n"},{"result":{"nanos":299904,"millis":0.299904,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":181603,"millis":0.181603,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:40.168 [print] INSPIRE Atom \n"},{"result":{"nanos":48801,"millis":0.048801,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":164803,"millis":0.164803,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:40.168 [print] #notpresent \n"},{"result":{"nanos":824612,"millis":0.824612,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":291904,"millis":0.291904,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:40.169 [print] TNO Geologische Dienst Nederland \n"},{"result":{"nanos":455707,"millis":0.455707,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:40.169 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire?SERVICE=CSW&version=2.0.2&REQUEST=GetRecordById&ID=E7D9F0D6-2B8D-6699-F26E-4A781228F2DD&OUTPUTSCHEMA=http:\/\/www.isotc211.org\/2005\/gmd&ELEMENTSETNAME=full#MD_DataIdentification \n"},{"result":{"nanos":420406,"millis":0.420406,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":731410,"millis":0.73141,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"1d3c777a-3527-4aa1-8573-d6aeeff115e5\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":473207,"millis":0.473207,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"1d3c777a-3527-4aa1-8573-d6aeeff115e5\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":556.633236,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"1d3c777a-3527-4aa1-8573-d6aeeff115e5","startTime":1629213699613,"refId":"[1.21:67]","endTime":1629213700171,"exampleData":{"datasetIdentifierCode":"1d3c777a-3527-4aa1-8573-d6aeeff115e5"},"exampleIndex":20},{"sectionIndex":0,"stepResults":[{"result":{"nanos":60701,"millis":0.060701,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:39.659 karate.env system property was: null \n"},{"result":{"nanos":50100,"millis":0.0501,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":420706,"millis":0.420706,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":179003,"millis":0.179003,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":355005,"millis":0.355005,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":148502,"millis":0.148502,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":404005,"millis":0.404005,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":97401,"millis":0.097401,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":543008,"millis":0.543008,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":246304,"millis":0.246304,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":178103,"millis":0.178103,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":62901,"millis":0.062901,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":35101,"millis":0.035101,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":198303,"millis":0.198303,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":39801,"millis":0.039801,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":19900,"millis":0.0199,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'dd414384-0bcb-4188-86e2-2843e12a579e'"}},{"result":{"nanos":14900,"millis":0.0149,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":14301,"millis":0.014301,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":540332294,"millis":540.332294,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5900,"millis":0.0059,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":1085916,"millis":1.085916,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'dd414384-0bcb-4188-86e2-2843e12a579e'"}},{"result":{"nanos":411406,"millis":0.411406,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":321305,"millis":0.321305,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":297905,"millis":0.297905,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":385805,"millis":0.385805,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":882613,"millis":0.882613,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":26600,"millis":0.0266,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":264304,"millis":0.264304,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":264504,"millis":0.264504,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":286005,"millis":0.286005,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":70501,"millis":0.070501,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":105401,"millis":0.105401,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:40.208 [print] https:\/\/www.broinspireservices.nl\/wfs\/ossosgm-a-v1.0?request=GetCapabilities&service=WFS&version=2.0.0 \n"},{"result":{"nanos":274104,"millis":0.274104,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":108801,"millis":0.108801,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:40.209 [print] #notpresent \n"},{"result":{"nanos":812511,"millis":0.812511,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":117101,"millis":0.117101,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:40.210 [print] OGC:WFS \n"},{"result":{"nanos":38000,"millis":0.038,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":61601,"millis":0.061601,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:40.210 [print] #notpresent \n"},{"result":{"nanos":322005,"millis":0.322005,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":96601,"millis":0.096601,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:40.210 [print] TNO Geologische Dienst Nederland \n"},{"result":{"nanos":50000,"millis":0.05,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:40.210 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire?SERVICE=CSW&version=2.0.2&REQUEST=GetRecordById&ID=a7fb2234-f7b4-4a03-b282-f10947f42fb1&OUTPUTSCHEMA=http:\/\/www.isotc211.org\/2005\/gmd&ELEMENTSETNAME=full#MD_DataIdentification \n"},{"result":{"nanos":332804,"millis":0.332804,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":740710,"millis":0.74071,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"dd414384-0bcb-4188-86e2-2843e12a579e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":431206,"millis":0.431206,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"dd414384-0bcb-4188-86e2-2843e12a579e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":551.193948,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"dd414384-0bcb-4188-86e2-2843e12a579e","startTime":1629213699658,"refId":"[1.22:67]","endTime":1629213700212,"exampleData":{"datasetIdentifierCode":"dd414384-0bcb-4188-86e2-2843e12a579e"},"exampleIndex":21},{"sectionIndex":0,"stepResults":[{"result":{"nanos":53901,"millis":0.053901,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:39.708 karate.env system property was: null \n"},{"result":{"nanos":45200,"millis":0.0452,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":117801,"millis":0.117801,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":137602,"millis":0.137602,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":332805,"millis":0.332805,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":119301,"millis":0.119301,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":1101916,"millis":1.101916,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":99201,"millis":0.099201,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":493907,"millis":0.493907,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":233503,"millis":0.233503,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":161902,"millis":0.161902,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":49301,"millis":0.049301,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":31400,"millis":0.0314,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":16301,"millis":0.016301,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":14500,"millis":0.0145,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":14200,"millis":0.0142,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'e5ef707f-6458-4567-8d2c-d24fe88ab5e9'"}},{"result":{"nanos":13401,"millis":0.013401,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":14000,"millis":0.014,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":533832400,"millis":533.8324,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":382306,"millis":0.382306,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'e5ef707f-6458-4567-8d2c-d24fe88ab5e9'"}},{"result":{"nanos":356305,"millis":0.356305,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":317005,"millis":0.317005,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":812212,"millis":0.812212,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":333705,"millis":0.333705,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":313305,"millis":0.313305,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":25500,"millis":0.0255,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":236003,"millis":0.236003,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":238804,"millis":0.238804,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":757311,"millis":0.757311,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":60201,"millis":0.060201,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":94602,"millis":0.094602,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:40.250 [print] https:\/\/www.gdngeoservices.nl\/inspire\/wms\/zoutvelden_en_productieputten?service=WMS&request=GetCapabilities \n"},{"result":{"nanos":265604,"millis":0.265604,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":100201,"millis":0.100201,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:40.250 [print] #notpresent \n"},{"result":{"nanos":874413,"millis":0.874413,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":440007,"millis":0.440007,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:40.252 [print] OGC:WMS \n"},{"result":{"nanos":43401,"millis":0.043401,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":402606,"millis":0.402606,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:40.252 [print] #notpresent \n"},{"result":{"nanos":328605,"millis":0.328605,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":461107,"millis":0.461107,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:40.253 [print] TNO Geologische Dienst Nederland \n"},{"result":{"nanos":68601,"millis":0.068601,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:40.253 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire?SERVICE=CSW&version=2.0.2&REQUEST=GetRecordById&ID=e3b0da1e-0664-4025-b3f5-a54d74a26450&OUTPUTSCHEMA=http:\/\/www.isotc211.org\/2005\/gmd&ELEMENTSETNAME=full#MD_DataIdentification \n"},{"result":{"nanos":338405,"millis":0.338405,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":1026515,"millis":1.026515,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"e5ef707f-6458-4567-8d2c-d24fe88ab5e9\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":943614,"millis":0.943614,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"e5ef707f-6458-4567-8d2c-d24fe88ab5e9\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":546.10798,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"e5ef707f-6458-4567-8d2c-d24fe88ab5e9","startTime":1629213699707,"refId":"[1.23:67]","endTime":1629213700255,"exampleData":{"datasetIdentifierCode":"e5ef707f-6458-4567-8d2c-d24fe88ab5e9"},"exampleIndex":22},{"sectionIndex":0,"stepResults":[{"result":{"nanos":55401,"millis":0.055401,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:39.744 karate.env system property was: null \n"},{"result":{"nanos":44801,"millis":0.044801,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":120502,"millis":0.120502,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":127702,"millis":0.127702,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":299604,"millis":0.299604,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":175203,"millis":0.175203,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":402506,"millis":0.402506,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":96902,"millis":0.096902,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":574808,"millis":0.574808,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":223803,"millis":0.223803,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":183503,"millis":0.183503,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":50301,"millis":0.050301,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":31100,"millis":0.0311,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":16701,"millis":0.016701,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":14400,"millis":0.0144,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":14200,"millis":0.0142,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '97b49056-8ace-426c-ae3e-bf7efe4c000f'"}},{"result":{"nanos":13701,"millis":0.013701,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":15400,"millis":0.0154,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":546320482,"millis":546.320482,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":6600,"millis":0.0066,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":447006,"millis":0.447006,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '97b49056-8ace-426c-ae3e-bf7efe4c000f'"}},{"result":{"nanos":1036016,"millis":1.036016,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":315904,"millis":0.315904,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":272404,"millis":0.272404,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":357105,"millis":0.357105,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":325805,"millis":0.325805,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":36001,"millis":0.036001,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":750511,"millis":0.750511,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":256704,"millis":0.256704,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":261604,"millis":0.261604,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":516107,"millis":0.516107,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":668509,"millis":0.668509,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:40.299 [print] https:\/\/inspire.caris.nl\/geoserver\/auwms\/wms?request=GetCapabilities \n"},{"result":{"nanos":290604,"millis":0.290604,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":451507,"millis":0.451507,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:40.300 [print] OGC:WMS \n"},{"result":{"nanos":281304,"millis":0.281304,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":480807,"millis":0.480807,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:40.300 [print] #notpresent \n"},{"result":{"nanos":42701,"millis":0.042701,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":423206,"millis":0.423206,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:40.301 [print] OGC:WMS \n"},{"result":{"nanos":860112,"millis":0.860112,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":601209,"millis":0.601209,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:40.302 [print] Ministerie van Defensie, Koninklijke Marine, Dienst der Hydrografie \n"},{"result":{"nanos":1039315,"millis":1.039315,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:40.303 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=1249746f-c2a6-4639-98f2-251676b3528e&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full#MD_DataIdentification \n"},{"result":{"nanos":382905,"millis":0.382905,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":740811,"millis":0.740811,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"97b49056-8ace-426c-ae3e-bf7efe4c000f\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":431506,"millis":0.431506,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"97b49056-8ace-426c-ae3e-bf7efe4c000f\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":560.057283,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"97b49056-8ace-426c-ae3e-bf7efe4c000f","startTime":1629213699743,"refId":"[1.24:67]","endTime":1629213700305,"exampleData":{"datasetIdentifierCode":"97b49056-8ace-426c-ae3e-bf7efe4c000f"},"exampleIndex":23},{"sectionIndex":0,"stepResults":[{"result":{"nanos":24600,"millis":0.0246,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:40.173 karate.env system property was: null \n"},{"result":{"nanos":30301,"millis":0.030301,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":51100,"millis":0.0511,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":61300,"millis":0.0613,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":245003,"millis":0.245003,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":49001,"millis":0.049001,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":378106,"millis":0.378106,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":37500,"millis":0.0375,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":81201,"millis":0.081201,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":153002,"millis":0.153002,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":70701,"millis":0.070701,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":23401,"millis":0.023401,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":24500,"millis":0.0245,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":7700,"millis":0.0077,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":60001,"millis":0.060001,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '3d01c1ca-973c-4652-baa5-39458bb9e181'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":596652518,"millis":596.652518,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":7000,"millis":0.007,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":684210,"millis":0.68421,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '3d01c1ca-973c-4652-baa5-39458bb9e181'"}},{"result":{"nanos":1134316,"millis":1.134316,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":449506,"millis":0.449506,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":421706,"millis":0.421706,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":458006,"millis":0.458006,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":385305,"millis":0.385305,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":27301,"millis":0.027301,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":795312,"millis":0.795312,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":282204,"millis":0.282204,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":304205,"millis":0.304205,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":137502,"millis":0.137502,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":128702,"millis":0.128702,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:40.777 [print] https:\/\/geodata.nationaalgeoregister.nl\/schelpdierenpercelen\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":976014,"millis":0.976014,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":457907,"millis":0.457907,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:40.778 [print] OGC:WMS \n"},{"result":{"nanos":831412,"millis":0.831412,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":434806,"millis":0.434806,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:40.780 [print] #notpresent \n"},{"result":{"nanos":44501,"millis":0.044501,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":395006,"millis":0.395006,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:40.780 [print] OGC:WMS \n"},{"result":{"nanos":391206,"millis":0.391206,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":415906,"millis":0.415906,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:40.781 [print] Beheer PDOK \n"},{"result":{"nanos":55301,"millis":0.055301,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:40.781 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=fe0e1e5f-512f-4bb1-bbf8-4028d3dfa24f#MD_DataIdentification \n"},{"result":{"nanos":859013,"millis":0.859013,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":853113,"millis":0.853113,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"3d01c1ca-973c-4652-baa5-39458bb9e181\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":3432650,"millis":3.43265,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"3d01c1ca-973c-4652-baa5-39458bb9e181\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":612.325145,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"3d01c1ca-973c-4652-baa5-39458bb9e181","startTime":1629213700173,"refId":"[1.25:67]","endTime":1629213700786,"exampleData":{"datasetIdentifierCode":"3d01c1ca-973c-4652-baa5-39458bb9e181"},"exampleIndex":24},{"sectionIndex":0,"stepResults":[{"result":{"nanos":28900,"millis":0.0289,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:40.214 karate.env system property was: null \n"},{"result":{"nanos":38400,"millis":0.0384,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":49201,"millis":0.049201,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":55801,"millis":0.055801,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":252204,"millis":0.252204,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":63101,"millis":0.063101,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":370805,"millis":0.370805,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":37700,"millis":0.0377,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":89502,"millis":0.089502,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":126302,"millis":0.126302,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":78801,"millis":0.078801,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":16400,"millis":0.0164,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":24401,"millis":0.024401,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":8700,"millis":0.0087,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":54101,"millis":0.054101,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'feeae7d3-7485-4a39-895c-ed65e945ced0'"}},{"result":{"nanos":5500,"millis":0.0055,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":6700,"millis":0.0067,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":587116178,"millis":587.116178,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":316204,"millis":0.316204,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'feeae7d3-7485-4a39-895c-ed65e945ced0'"}},{"result":{"nanos":321004,"millis":0.321004,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":304905,"millis":0.304905,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":286604,"millis":0.286604,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":903213,"millis":0.903213,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":322205,"millis":0.322205,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":36600,"millis":0.0366,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":255503,"millis":0.255503,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":248703,"millis":0.248703,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":259604,"millis":0.259604,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":567609,"millis":0.567609,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":665710,"millis":0.66571,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:40.808 [print] https:\/\/www.broinspireservices.nl\/arcgis\/services\/inspire\/inspire_regis_rd\/MapServer\/WMSServer?request=GetCapabilities&service=WMS \n"},{"result":{"nanos":1170717,"millis":1.170717,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":436607,"millis":0.436607,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:40.810 [print] #notpresent \n"},{"result":{"nanos":844412,"millis":0.844412,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":410306,"millis":0.410306,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:40.811 [print] OGC:WMS \n"},{"result":{"nanos":1125216,"millis":1.125216,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":402206,"millis":0.402206,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:40.813 [print] #notpresent \n"},{"result":{"nanos":327405,"millis":0.327405,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":491507,"millis":0.491507,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:40.814 [print] TNO Geologische Dienst Nederland \n"},{"result":{"nanos":835113,"millis":0.835113,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:40.814 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire?SERVICE=CSW&version=2.0.2&REQUEST=GetRecordById&ID=E7D9F0D6-2B8D-6699-F26E-4A781228F2DD&OUTPUTSCHEMA=http:\/\/www.isotc211.org\/2005\/gmd&ELEMENTSETNAME=full#MD_DataIdentification \n"},{"result":{"nanos":319305,"millis":0.319305,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":1379020,"millis":1.37902,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"feeae7d3-7485-4a39-895c-ed65e945ced0\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":698810,"millis":0.69881,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"feeae7d3-7485-4a39-895c-ed65e945ced0\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":601.360285,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"feeae7d3-7485-4a39-895c-ed65e945ced0","startTime":1629213700214,"refId":"[1.26:67]","endTime":1629213700817,"exampleData":{"datasetIdentifierCode":"feeae7d3-7485-4a39-895c-ed65e945ced0"},"exampleIndex":25},{"sectionIndex":0,"stepResults":[{"result":{"nanos":28801,"millis":0.028801,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:40.258 karate.env system property was: null \n"},{"result":{"nanos":30301,"millis":0.030301,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":47500,"millis":0.0475,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":53001,"millis":0.053001,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":199103,"millis":0.199103,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":63301,"millis":0.063301,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":438907,"millis":0.438907,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":39401,"millis":0.039401,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":469307,"millis":0.469307,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":127802,"millis":0.127802,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":68501,"millis":0.068501,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":19300,"millis":0.0193,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":16101,"millis":0.016101,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":6000,"millis":0.006,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":63201,"millis":0.063201,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '73286af2-d0f4-4a62-9455-86ffa45ef279'"}},{"result":{"nanos":5400,"millis":0.0054,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":12700,"millis":0.0127,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":568245702,"millis":568.245702,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":364706,"millis":0.364706,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '73286af2-d0f4-4a62-9455-86ffa45ef279'"}},{"result":{"nanos":364305,"millis":0.364305,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":822912,"millis":0.822912,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":285404,"millis":0.285404,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":336205,"millis":0.336205,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":312805,"millis":0.312805,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":44701,"millis":0.044701,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":243904,"millis":0.243904,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":743911,"millis":0.743911,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":246504,"millis":0.246504,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":563708,"millis":0.563708,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":355605,"millis":0.355605,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:40.833 [print] https:\/\/www.gdngeoservices.nl\/inspire\/wfs\/zoutvelden_en_productieputten?service=WFS&request=GetCapabilities&version=2.0.0 \n"},{"result":{"nanos":301204,"millis":0.301204,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":227404,"millis":0.227404,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:40.834 [print] #notpresent \n"},{"result":{"nanos":276904,"millis":0.276904,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":203503,"millis":0.203503,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:40.834 [print] OGC:WFS \n"},{"result":{"nanos":48301,"millis":0.048301,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":185003,"millis":0.185003,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:40.834 [print] #notpresent \n"},{"result":{"nanos":312705,"millis":0.312705,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":245304,"millis":0.245304,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:40.835 [print] TNO Geologische Dienst Nederland \n"},{"result":{"nanos":928013,"millis":0.928013,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:40.836 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire?SERVICE=CSW&version=2.0.2&REQUEST=GetRecordById&ID=e3b0da1e-0664-4025-b3f5-a54d74a26450&OUTPUTSCHEMA=http:\/\/www.isotc211.org\/2005\/gmd&ELEMENTSETNAME=full#MD_DataIdentification \n"},{"result":{"nanos":307704,"millis":0.307704,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":601509,"millis":0.601509,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"73286af2-d0f4-4a62-9455-86ffa45ef279\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":429607,"millis":0.429607,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"73286af2-d0f4-4a62-9455-86ffa45ef279\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":578.69516,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"73286af2-d0f4-4a62-9455-86ffa45ef279","startTime":1629213700257,"refId":"[1.27:67]","endTime":1629213700837,"exampleData":{"datasetIdentifierCode":"73286af2-d0f4-4a62-9455-86ffa45ef279"},"exampleIndex":26},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16901,"millis":0.016901,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:40.308 karate.env system property was: null \n"},{"result":{"nanos":30500,"millis":0.0305,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":49201,"millis":0.049201,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":52801,"millis":0.052801,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":222903,"millis":0.222903,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":71402,"millis":0.071402,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":425406,"millis":0.425406,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":41401,"millis":0.041401,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":84201,"millis":0.084201,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":384806,"millis":0.384806,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":107702,"millis":0.107702,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":18500,"millis":0.0185,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":30201,"millis":0.030201,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":49901,"millis":0.049901,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '664862cb-d426-4ee4-97ac-14c12b903b54'"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":550213339,"millis":550.213339,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":18200,"millis":0.0182,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":2187832,"millis":2.187832,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '664862cb-d426-4ee4-97ac-14c12b903b54'"}},{"result":{"nanos":2278933,"millis":2.278933,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":366005,"millis":0.366005,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":363306,"millis":0.363306,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":407206,"millis":0.407206,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":885013,"millis":0.885013,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":29900,"millis":0.0299,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":283804,"millis":0.283804,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":280404,"millis":0.280404,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":287804,"millis":0.287804,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":340305,"millis":0.340305,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":353805,"millis":0.353805,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:40.868 [print] https:\/\/www.broinspireservices.nl\/wms\/oshhgqm-a-v1.0?request=GetCapabilities \n"},{"result":{"nanos":306605,"millis":0.306605,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":607809,"millis":0.607809,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:40.869 [print] #notpresent \n"},{"result":{"nanos":858913,"millis":0.858913,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":1141517,"millis":1.141517,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:40.871 [print] OGC:WMS \n"},{"result":{"nanos":42901,"millis":0.042901,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":48501,"millis":0.048501,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:40.871 [print] #notpresent \n"},{"result":{"nanos":1117116,"millis":1.117116,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":375405,"millis":0.375405,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:40.873 [print] TNO Geologische Dienst Nederland \n"},{"result":{"nanos":469707,"millis":0.469707,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:40.873 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire?SERVICE=CSW&version=2.0.2&REQUEST=GetRecordById&ID=6050578f-0010-4bfa-b013-c8617b80ba62&OUTPUTSCHEMA=http:\/\/www.isotc211.org\/2005\/gmd&ELEMENTSETNAME=full#MD_DataIdentification \n"},{"result":{"nanos":393805,"millis":0.393805,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":778711,"millis":0.778711,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"664862cb-d426-4ee4-97ac-14c12b903b54\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":511208,"millis":0.511208,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"664862cb-d426-4ee4-97ac-14c12b903b54\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":566.55288,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"664862cb-d426-4ee4-97ac-14c12b903b54","startTime":1629213700307,"refId":"[1.28:67]","endTime":1629213700875,"exampleData":{"datasetIdentifierCode":"664862cb-d426-4ee4-97ac-14c12b903b54"},"exampleIndex":27},{"sectionIndex":0,"stepResults":[{"result":{"nanos":21001,"millis":0.021001,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:40.788 karate.env system property was: null \n"},{"result":{"nanos":32600,"millis":0.0326,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":49201,"millis":0.049201,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":52401,"millis":0.052401,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":270204,"millis":0.270204,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":50301,"millis":0.050301,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":415106,"millis":0.415106,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":43401,"millis":0.043401,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":415606,"millis":0.415606,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":131402,"millis":0.131402,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":70601,"millis":0.070601,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":18700,"millis":0.0187,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20801,"millis":0.020801,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":66001,"millis":0.066001,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '060d1139-c371-4c1e-9890-55999adfa4f9'"}},{"result":{"nanos":5300,"millis":0.0053,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4001,"millis":0.004001,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":539309379,"millis":539.309379,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5800,"millis":0.0058,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":1095616,"millis":1.095616,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '060d1139-c371-4c1e-9890-55999adfa4f9'"}},{"result":{"nanos":416306,"millis":0.416306,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":346105,"millis":0.346105,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":340905,"millis":0.340905,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":438007,"millis":0.438007,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":938414,"millis":0.938414,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":31300,"millis":0.0313,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":302404,"millis":0.302404,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":299105,"millis":0.299105,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":302004,"millis":0.302004,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":76801,"millis":0.076801,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":177402,"millis":0.177402,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:41.335 [print] https:\/\/inspire.caris.nl\/geoserver\/auwms\/wms?request=GetCapabilities \n"},{"result":{"nanos":315804,"millis":0.315804,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":113502,"millis":0.113502,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:41.336 [print] OGC:WMS \n"},{"result":{"nanos":856313,"millis":0.856313,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":74601,"millis":0.074601,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:41.336 [print] #notpresent \n"},{"result":{"nanos":35001,"millis":0.035001,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":76101,"millis":0.076101,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:41.337 [print] OGC:WMS \n"},{"result":{"nanos":291105,"millis":0.291105,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":145202,"millis":0.145202,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:41.337 [print] Ministerie van Defensie, Koninklijke Marine, Dienst der Hydrografie \n"},{"result":{"nanos":58401,"millis":0.058401,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:41.337 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=a5241416-8401-4623-be61-57ef50447a41&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full#MD_DataIdentification \n"},{"result":{"nanos":316905,"millis":0.316905,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":786911,"millis":0.786911,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"060d1139-c371-4c1e-9890-55999adfa4f9\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":3383850,"millis":3.38385,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"060d1139-c371-4c1e-9890-55999adfa4f9\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":552.209871,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"060d1139-c371-4c1e-9890-55999adfa4f9","startTime":1629213700788,"refId":"[1.29:67]","endTime":1629213701342,"exampleData":{"datasetIdentifierCode":"060d1139-c371-4c1e-9890-55999adfa4f9"},"exampleIndex":28},{"sectionIndex":0,"stepResults":[{"result":{"nanos":19501,"millis":0.019501,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:40.821 karate.env system property was: null \n"},{"result":{"nanos":44500,"millis":0.0445,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":48300,"millis":0.0483,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":62100,"millis":0.0621,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":235303,"millis":0.235303,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":77601,"millis":0.077601,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":405305,"millis":0.405305,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":38400,"millis":0.0384,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":408106,"millis":0.408106,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":121901,"millis":0.121901,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":69802,"millis":0.069802,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":17800,"millis":0.0178,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19400,"millis":0.0194,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4801,"millis":0.004801,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":66401,"millis":0.066401,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'beb6dd70-7834-475f-9acc-954a809dfe87'"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":644527817,"millis":644.527817,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":6200,"millis":0.0062,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":486707,"millis":0.486707,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'beb6dd70-7834-475f-9acc-954a809dfe87'"}},{"result":{"nanos":416806,"millis":0.416806,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":381206,"millis":0.381206,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":367005,"millis":0.367005,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":1017815,"millis":1.017815,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":387705,"millis":0.387705,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":53201,"millis":0.053201,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":301005,"millis":0.301005,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":332805,"millis":0.332805,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":290804,"millis":0.290804,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":723110,"millis":0.72311,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":990315,"millis":0.990315,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:41.474 [print] https:\/\/geodata.nationaalgeoregister.nl\/cbsgebiedsindelingen\/atom\/cbsgebiedsindelingen.xml \n"},{"result":{"nanos":887113,"millis":0.887113,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":552608,"millis":0.552608,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:41.476 [print] INSPIRE Atom \n"},{"result":{"nanos":337105,"millis":0.337105,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":519107,"millis":0.519107,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:41.477 [print] #notpresent \n"},{"result":{"nanos":45600,"millis":0.0456,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":468107,"millis":0.468107,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:41.477 [print] INSPIRE Atom \n"},{"result":{"nanos":423406,"millis":0.423406,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":920613,"millis":0.920613,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:41.478 [print] Beheer PDOK \n"},{"result":{"nanos":956614,"millis":0.956614,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:41.479 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=effe1ab0-073d-437c-af13-df5c5e07d6cd#MD_DataIdentification \n"},{"result":{"nanos":329705,"millis":0.329705,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":824512,"millis":0.824512,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"beb6dd70-7834-475f-9acc-954a809dfe87\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":859613,"millis":0.859613,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"beb6dd70-7834-475f-9acc-954a809dfe87\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":659.059725,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"beb6dd70-7834-475f-9acc-954a809dfe87","startTime":1629213700820,"refId":"[1.30:67]","endTime":1629213701481,"exampleData":{"datasetIdentifierCode":"beb6dd70-7834-475f-9acc-954a809dfe87"},"exampleIndex":29},{"sectionIndex":0,"stepResults":[{"result":{"nanos":19200,"millis":0.0192,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:40.839 karate.env system property was: null \n"},{"result":{"nanos":32501,"millis":0.032501,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":46900,"millis":0.0469,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":54100,"millis":0.0541,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":204703,"millis":0.204703,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":47600,"millis":0.0476,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":385506,"millis":0.385506,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":39201,"millis":0.039201,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":209003,"millis":0.209003,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":135602,"millis":0.135602,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":75002,"millis":0.075002,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":17300,"millis":0.0173,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":16100,"millis":0.0161,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5200,"millis":0.0052,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":53701,"millis":0.053701,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '777f41ee-8269-4bbc-b0e4-f889c62be099'"}},{"result":{"nanos":5200,"millis":0.0052,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":654733866,"millis":654.733866,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":388705,"millis":0.388705,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '777f41ee-8269-4bbc-b0e4-f889c62be099'"}},{"result":{"nanos":908114,"millis":0.908114,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":345505,"millis":0.345505,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":323305,"millis":0.323305,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":401506,"millis":0.401506,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":370606,"millis":0.370606,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":31200,"millis":0.0312,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":795212,"millis":0.795212,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":264804,"millis":0.264804,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":269304,"millis":0.269304,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":68601,"millis":0.068601,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":1150417,"millis":1.150417,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:41.502 [print] https:\/\/inspire.rivm.nl\/geoserver\/wms?request=GetCapabilities \n"},{"result":{"nanos":326004,"millis":0.326004,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":416407,"millis":0.416407,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:41.502 [print] OGC:WMS \n"},{"result":{"nanos":381505,"millis":0.381505,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":435306,"millis":0.435306,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:41.503 [print] #notpresent \n"},{"result":{"nanos":38701,"millis":0.038701,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":366705,"millis":0.366705,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:41.504 [print] OGC:WMS \n"},{"result":{"nanos":917914,"millis":0.917914,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":71001,"millis":0.071001,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:41.505 [print] Rijksinstituut voor Volksgezondheid en Milieu \n"},{"result":{"nanos":890013,"millis":0.890013,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:41.505 [print] http:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=50a2c5e6-c8e7-425d-854e-26f578196bc9#MD_DataIdentification \n"},{"result":{"nanos":362605,"millis":0.362605,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":559608,"millis":0.559608,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"777f41ee-8269-4bbc-b0e4-f889c62be099\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":436306,"millis":0.436306,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"777f41ee-8269-4bbc-b0e4-f889c62be099\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":666.613839,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"777f41ee-8269-4bbc-b0e4-f889c62be099","startTime":1629213700839,"refId":"[1.31:67]","endTime":1629213701508,"exampleData":{"datasetIdentifierCode":"777f41ee-8269-4bbc-b0e4-f889c62be099"},"exampleIndex":30},{"sectionIndex":0,"stepResults":[{"result":{"nanos":18500,"millis":0.0185,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:40.878 karate.env system property was: null \n"},{"result":{"nanos":34900,"millis":0.0349,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":49901,"millis":0.049901,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":57201,"millis":0.057201,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":236404,"millis":0.236404,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":778811,"millis":0.778811,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":471807,"millis":0.471807,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":53501,"millis":0.053501,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":227004,"millis":0.227004,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":136702,"millis":0.136702,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":73501,"millis":0.073501,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":19500,"millis":0.0195,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18200,"millis":0.0182,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4401,"millis":0.004401,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":66301,"millis":0.066301,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '55cf16e8-1c04-462c-b78a-e0d28823dd2e'"}},{"result":{"nanos":6000,"millis":0.006,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":648979982,"millis":648.979982,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":399105,"millis":0.399105,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '55cf16e8-1c04-462c-b78a-e0d28823dd2e'"}},{"result":{"nanos":388005,"millis":0.388005,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":353006,"millis":0.353006,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":837212,"millis":0.837212,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":383806,"millis":0.383806,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":366005,"millis":0.366005,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":26500,"millis":0.0265,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":366806,"millis":0.366806,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":303904,"millis":0.303904,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":837713,"millis":0.837713,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":63901,"millis":0.063901,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":1112616,"millis":1.112616,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:41.538 [print] https:\/\/haleconnect.com\/ows\/services\/org.874.c4108a11-bdbb-4461-8902-423531561a7e_wfs?SERVICE=WFS&Request=GetCapabilities \n"},{"result":{"nanos":315005,"millis":0.315005,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":401206,"millis":0.401206,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:41.539 [print] #notpresent \n"},{"result":{"nanos":339805,"millis":0.339805,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":67501,"millis":0.067501,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:41.540 [print] #notpresent \n"},{"result":{"nanos":40301,"millis":0.040301,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":372805,"millis":0.372805,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:41.541 [print] #notpresent \n"},{"result":{"nanos":390205,"millis":0.390205,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":64100,"millis":0.0641,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:41.541 [print] KNMI \n"},{"result":{"nanos":694410,"millis":0.69441,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:41.542 [print] https:\/\/haleconnect.com\/services\/bsp\/org.874.c4108a11-bdbb-4461-8902-423531561a7e\/md\/dataset\/dataset1#xpointer%28%2F%2Fgmd%3AidentificationInfo%5B1%5D%2Fgmd%3AMD_DataIdentification%29 \n"},{"result":{"nanos":901613,"millis":0.901613,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":742611,"millis":0.742611,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"55cf16e8-1c04-462c-b78a-e0d28823dd2e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":871213,"millis":0.871213,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"55cf16e8-1c04-462c-b78a-e0d28823dd2e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":661.88577,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"55cf16e8-1c04-462c-b78a-e0d28823dd2e","startTime":1629213700877,"refId":"[1.32:67]","endTime":1629213701546,"exampleData":{"datasetIdentifierCode":"55cf16e8-1c04-462c-b78a-e0d28823dd2e"},"exampleIndex":31},{"sectionIndex":0,"stepResults":[{"result":{"nanos":22001,"millis":0.022001,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:41.345 karate.env system property was: null \n"},{"result":{"nanos":38900,"millis":0.0389,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":55200,"millis":0.0552,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":64401,"millis":0.064401,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":335904,"millis":0.335904,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":111501,"millis":0.111501,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":507707,"millis":0.507707,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":52601,"millis":0.052601,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":533408,"millis":0.533408,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":143402,"millis":0.143402,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":77901,"millis":0.077901,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":20700,"millis":0.0207,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19700,"millis":0.0197,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":6201,"millis":0.006201,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":73001,"millis":0.073001,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '7c664a91-1aa2-4923-9d17-6a43e4075f47'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":529296934,"millis":529.296934,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":7700,"millis":0.0077,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":514308,"millis":0.514308,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '7c664a91-1aa2-4923-9d17-6a43e4075f47'"}},{"result":{"nanos":912114,"millis":0.912114,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":329605,"millis":0.329605,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":288004,"millis":0.288004,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":405106,"millis":0.405106,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":333805,"millis":0.333805,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":36701,"millis":0.036701,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":773911,"millis":0.773911,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":253303,"millis":0.253303,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":254404,"millis":0.254404,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":78102,"millis":0.078102,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":1526722,"millis":1.526722,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:41.882 [print] https:\/\/inspire.caris.nl\/atom\/maritieme-grenzen-zones-noordzee-Territoriale-Zee-Noordzee-feed.atom \n"},{"result":{"nanos":305205,"millis":0.305205,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":91401,"millis":0.091401,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:41.883 [print] #notpresent \n"},{"result":{"nanos":298305,"millis":0.298305,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":468507,"millis":0.468507,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:41.884 [print] INSPIRE Atom \n"},{"result":{"nanos":39501,"millis":0.039501,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":58001,"millis":0.058001,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:41.884 [print] #notpresent \n"},{"result":{"nanos":843812,"millis":0.843812,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":71201,"millis":0.071201,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:41.885 [print] Ministerie van Defensie, Koninklijke Marine, Dienst der Hydrografie \n"},{"result":{"nanos":49001,"millis":0.049001,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:41.885 [print] https:\/\/www.nationaalgeoregister.nl:443\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=bb11be63-bd38-4632-bf54-df44c423a529#MD_DataIdentification \n"},{"result":{"nanos":321305,"millis":0.321305,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":913013,"millis":0.913013,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"7c664a91-1aa2-4923-9d17-6a43e4075f47\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":483507,"millis":0.483507,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"7c664a91-1aa2-4923-9d17-6a43e4075f47\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":541.030206,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"7c664a91-1aa2-4923-9d17-6a43e4075f47","startTime":1629213701344,"refId":"[1.33:67]","endTime":1629213701887,"exampleData":{"datasetIdentifierCode":"7c664a91-1aa2-4923-9d17-6a43e4075f47"},"exampleIndex":32},{"sectionIndex":0,"stepResults":[{"result":{"nanos":19300,"millis":0.0193,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:41.484 karate.env system property was: null \n"},{"result":{"nanos":56401,"millis":0.056401,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":67801,"millis":0.067801,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":61701,"millis":0.061701,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":762412,"millis":0.762412,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":50501,"millis":0.050501,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":426806,"millis":0.426806,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":42101,"millis":0.042101,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":428206,"millis":0.428206,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":164703,"millis":0.164703,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":88501,"millis":0.088501,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":18401,"millis":0.018401,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18200,"millis":0.0182,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5400,"millis":0.0054,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":65901,"millis":0.065901,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'f0eb64f9-8888-42e1-9550-bf91c32da4bc'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":551894245,"millis":551.894245,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":6700,"millis":0.0067,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":581609,"millis":0.581609,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'f0eb64f9-8888-42e1-9550-bf91c32da4bc'"}},{"result":{"nanos":976714,"millis":0.976714,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":399206,"millis":0.399206,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":359305,"millis":0.359305,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":428806,"millis":0.428806,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":422806,"millis":0.422806,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":27301,"millis":0.027301,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":848512,"millis":0.848512,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":323505,"millis":0.323505,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":292404,"millis":0.292404,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":67101,"millis":0.067101,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":751611,"millis":0.751611,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:42.045 [print] https:\/\/inspire.rivm.nl\/geoserver\/wms?request=GetCapabilities \n"},{"result":{"nanos":327304,"millis":0.327304,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":286104,"millis":0.286104,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:42.046 [print] OGC:WMS \n"},{"result":{"nanos":290404,"millis":0.290404,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":293205,"millis":0.293205,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:42.046 [print] #notpresent \n"},{"result":{"nanos":54000,"millis":0.054,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":181502,"millis":0.181502,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:42.047 [print] OGC:WMS \n"},{"result":{"nanos":356005,"millis":0.356005,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":326505,"millis":0.326505,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:42.048 [print] Rijksinstituut voor Volksgezondheid en Milieu \n"},{"result":{"nanos":44500,"millis":0.0445,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:42.048 [print] http:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=e1e99000-ec47-4e9f-84a5-adad24fef0dc#MD_DataIdentification \n"},{"result":{"nanos":779911,"millis":0.779911,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":839212,"millis":0.839212,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"f0eb64f9-8888-42e1-9550-bf91c32da4bc\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":462807,"millis":0.462807,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"f0eb64f9-8888-42e1-9550-bf91c32da4bc\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":563.911319,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"f0eb64f9-8888-42e1-9550-bf91c32da4bc","startTime":1629213701483,"refId":"[1.34:67]","endTime":1629213702050,"exampleData":{"datasetIdentifierCode":"f0eb64f9-8888-42e1-9550-bf91c32da4bc"},"exampleIndex":33},{"sectionIndex":0,"stepResults":[{"result":{"nanos":19701,"millis":0.019701,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:41.516 karate.env system property was: null \n"},{"result":{"nanos":35700,"millis":0.0357,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":66801,"millis":0.066801,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":57501,"millis":0.057501,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":258804,"millis":0.258804,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":54401,"millis":0.054401,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":421306,"millis":0.421306,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":43000,"millis":0.043,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":53201,"millis":0.053201,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":511208,"millis":0.511208,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":76701,"millis":0.076701,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":18801,"millis":0.018801,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18500,"millis":0.0185,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5400,"millis":0.0054,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":75501,"millis":0.075501,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'dda53ebc-bee7-4765-8f1f-6ac59b0aec39'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":630177164,"millis":630.177164,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":9900,"millis":0.0099,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":490507,"millis":0.490507,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'dda53ebc-bee7-4765-8f1f-6ac59b0aec39'"}},{"result":{"nanos":379905,"millis":0.379905,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":324705,"millis":0.324705,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":292904,"millis":0.292904,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":1051515,"millis":1.051515,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":436806,"millis":0.436806,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":42200,"millis":0.0422,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":300005,"millis":0.300005,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":484507,"millis":0.484507,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":312205,"millis":0.312205,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":83801,"millis":0.083801,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":1217718,"millis":1.217718,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:42.160 [print] https:\/\/www.broinspireservices.nl\/wms\/ossobor-a-v1.0?request=GetCapabilities \n"},{"result":{"nanos":368405,"millis":0.368405,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":487607,"millis":0.487607,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:42.161 [print] #notpresent \n"},{"result":{"nanos":298904,"millis":0.298904,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":267004,"millis":0.267004,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:42.161 [print] OGC:WMS \n"},{"result":{"nanos":40601,"millis":0.040601,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":278304,"millis":0.278304,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:42.161 [print] #notpresent \n"},{"result":{"nanos":382506,"millis":0.382506,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":368805,"millis":0.368805,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:42.162 [print] TNO Geologische Dienst Nederland \n"},{"result":{"nanos":483607,"millis":0.483607,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:42.163 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire?SERVICE=CSW&version=2.0.2&REQUEST=GetRecordById&ID=9dd9bf30-36e6-45ae-b368-bdef2720bdde&OUTPUTSCHEMA=http:\/\/www.isotc211.org\/2005\/gmd&ELEMENTSETNAME=full#MD_DataIdentification \n"},{"result":{"nanos":357905,"millis":0.357905,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":784611,"millis":0.784611,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"dda53ebc-bee7-4765-8f1f-6ac59b0aec39\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":545407,"millis":0.545407,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"dda53ebc-bee7-4765-8f1f-6ac59b0aec39\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":641.997034,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"dda53ebc-bee7-4765-8f1f-6ac59b0aec39","startTime":1629213701514,"refId":"[1.35:67]","endTime":1629213702165,"exampleData":{"datasetIdentifierCode":"dda53ebc-bee7-4765-8f1f-6ac59b0aec39"},"exampleIndex":34},{"sectionIndex":0,"stepResults":[{"result":{"nanos":18700,"millis":0.0187,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:41.552 karate.env system property was: null \n"},{"result":{"nanos":32101,"millis":0.032101,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":47901,"millis":0.047901,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":74401,"millis":0.074401,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":218303,"millis":0.218303,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":48801,"millis":0.048801,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":392606,"millis":0.392606,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":37201,"millis":0.037201,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":50701,"millis":0.050701,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":4001958,"millis":4.001958,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":78002,"millis":0.078002,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":19600,"millis":0.0196,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":16700,"millis":0.0167,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4501,"millis":0.004501,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":62701,"millis":0.062701,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '03c39474-aef9-4169-95da-9890af440b14'"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3700,"millis":0.0037,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":617632476,"millis":617.632476,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":346905,"millis":0.346905,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '03c39474-aef9-4169-95da-9890af440b14'"}},{"result":{"nanos":865512,"millis":0.865512,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":290404,"millis":0.290404,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":301204,"millis":0.301204,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":337205,"millis":0.337205,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":328405,"millis":0.328405,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":41701,"millis":0.041701,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":754911,"millis":0.754911,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":295604,"millis":0.295604,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":260003,"millis":0.260003,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":94601,"millis":0.094601,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":90101,"millis":0.090101,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:42.182 [print] https:\/\/inspire.rivm.nl\/geoserver\/wfs? \n"},{"result":{"nanos":827011,"millis":0.827011,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":121001,"millis":0.121001,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:42.183 [print] #notpresent \n"},{"result":{"nanos":646009,"millis":0.646009,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":92101,"millis":0.092101,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:42.184 [print] OGC:WFS \n"},{"result":{"nanos":353005,"millis":0.353005,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":106001,"millis":0.106001,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:42.184 [print] #notpresent \n"},{"result":{"nanos":1141416,"millis":1.141416,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":125302,"millis":0.125302,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:42.186 [print] RIVM \n"},{"result":{"nanos":344305,"millis":0.344305,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:42.186 [print] http:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/en\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=08b27bf0-e34a-4b30-9eac-5edadfb6a288 \n"},{"result":{"nanos":1069015,"millis":1.069015,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":587008,"millis":0.587008,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"03c39474-aef9-4169-95da-9890af440b14\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":459707,"millis":0.459707,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"03c39474-aef9-4169-95da-9890af440b14\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":632.63269,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"03c39474-aef9-4169-95da-9890af440b14","startTime":1629213701552,"refId":"[1.36:67]","endTime":1629213702188,"exampleData":{"datasetIdentifierCode":"03c39474-aef9-4169-95da-9890af440b14"},"exampleIndex":35},{"sectionIndex":0,"stepResults":[{"result":{"nanos":27100,"millis":0.0271,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:41.889 karate.env system property was: null \n"},{"result":{"nanos":57501,"millis":0.057501,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":54001,"millis":0.054001,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":64501,"millis":0.064501,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":271304,"millis":0.271304,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":54300,"millis":0.0543,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":379306,"millis":0.379306,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":44901,"millis":0.044901,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":56101,"millis":0.056101,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":579908,"millis":0.579908,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":91201,"millis":0.091201,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":21300,"millis":0.0213,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20600,"millis":0.0206,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":6301,"millis":0.006301,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":105801,"millis":0.105801,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '0606e8cb-fa51-402c-a3be-19fd724b0a10'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":570451124,"millis":570.451124,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":7300,"millis":0.0073,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":1067816,"millis":1.067816,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '0606e8cb-fa51-402c-a3be-19fd724b0a10'"}},{"result":{"nanos":430206,"millis":0.430206,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":371706,"millis":0.371706,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":383005,"millis":0.383005,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":455906,"millis":0.455906,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":930914,"millis":0.930914,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":31201,"millis":0.031201,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":307704,"millis":0.307704,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":312305,"millis":0.312305,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":312505,"millis":0.312505,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":78501,"millis":0.078501,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":107902,"millis":0.107902,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:42.476 [print] https:\/\/inspire.rivm.nl\/geoserver\/wfs? \n"},{"result":{"nanos":990214,"millis":0.990214,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":160203,"millis":0.160203,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:42.477 [print] #notpresent \n"},{"result":{"nanos":986614,"millis":0.986614,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":89702,"millis":0.089702,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:42.478 [print] OGC:WFS \n"},{"result":{"nanos":38200,"millis":0.0382,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":46300,"millis":0.0463,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:42.479 [print] #notpresent \n"},{"result":{"nanos":693310,"millis":0.69331,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":68101,"millis":0.068101,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:42.479 [print] RIVM \n"},{"result":{"nanos":30900,"millis":0.0309,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:42.479 [print] http:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/en\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=f2f86edf-ac3a-48e8-9292-0544da2d7645 \n"},{"result":{"nanos":584509,"millis":0.584509,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":769411,"millis":0.769411,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"0606e8cb-fa51-402c-a3be-19fd724b0a10\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":454107,"millis":0.454107,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"0606e8cb-fa51-402c-a3be-19fd724b0a10\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":582.006792,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"0606e8cb-fa51-402c-a3be-19fd724b0a10","startTime":1629213701889,"refId":"[1.37:67]","endTime":1629213702481,"exampleData":{"datasetIdentifierCode":"0606e8cb-fa51-402c-a3be-19fd724b0a10"},"exampleIndex":36},{"sectionIndex":0,"stepResults":[{"result":{"nanos":18000,"millis":0.018,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:42.052 karate.env system property was: null \n"},{"result":{"nanos":30100,"millis":0.0301,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":46200,"millis":0.0462,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":49201,"millis":0.049201,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":224003,"millis":0.224003,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":47200,"millis":0.0472,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":387606,"millis":0.387606,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":38101,"millis":0.038101,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":47601,"millis":0.047601,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":523007,"millis":0.523007,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":88202,"millis":0.088202,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":72101,"millis":0.072101,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17100,"millis":0.0171,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":57000,"millis":0.057,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '364c5d7a-d6ec-11ea-87d0-0242ac130003'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":586435444,"millis":586.435444,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":8600,"millis":0.0086,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":560308,"millis":0.560308,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '364c5d7a-d6ec-11ea-87d0-0242ac130003'"}},{"result":{"nanos":975214,"millis":0.975214,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":360705,"millis":0.360705,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":354705,"millis":0.354705,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":438607,"millis":0.438607,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":650209,"millis":0.650209,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":34400,"millis":0.0344,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":852713,"millis":0.852713,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":305604,"millis":0.305604,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":302205,"millis":0.302205,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":75201,"millis":0.075201,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":112002,"millis":0.112002,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:42.649 [print] #notpresent \n"},{"result":{"nanos":1610223,"millis":1.610223,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":103102,"millis":0.103102,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:42.651 [print] #notpresent \n"},{"result":{"nanos":2640838,"millis":2.640838,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":501908,"millis":0.501908,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:42.654 [print] #notpresent \n"},{"result":{"nanos":42301,"millis":0.042301,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":394205,"millis":0.394205,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:42.654 [print] #notpresent \n"},{"result":{"nanos":839812,"millis":0.839812,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":450306,"millis":0.450306,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:42.656 [print] TNO Geologische Dienst Nederland \n"},{"result":{"nanos":813912,"millis":0.813912,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:42.657 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire?SERVICE=CSW&version=2.0.2&REQUEST=GetRecordById&ID=2a379cc6-d16e-11ea-87d0-0242ac130003&OUTPUTSCHEMA=http:\/\/www.isotc211.org\/2005\/gmd&ELEMENTSETNAME=full#MD_DataIdentification \n"},{"result":{"nanos":305605,"millis":0.305605,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":710510,"millis":0.71051,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"364c5d7a-d6ec-11ea-87d0-0242ac130003\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":446306,"millis":0.446306,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"364c5d7a-d6ec-11ea-87d0-0242ac130003\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":601.988067,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"364c5d7a-d6ec-11ea-87d0-0242ac130003","startTime":1629213702052,"refId":"[1.38:67]","endTime":1629213702658,"exampleData":{"datasetIdentifierCode":"364c5d7a-d6ec-11ea-87d0-0242ac130003"},"exampleIndex":37},{"sectionIndex":0,"stepResults":[{"result":{"nanos":64301,"millis":0.064301,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:42.167 karate.env system property was: null \n"},{"result":{"nanos":34700,"millis":0.0347,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":386706,"millis":0.386706,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":74401,"millis":0.074401,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":487207,"millis":0.487207,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":56001,"millis":0.056001,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":394806,"millis":0.394806,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":42301,"millis":0.042301,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":42601,"millis":0.042601,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":126702,"millis":0.126702,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":93101,"millis":0.093101,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":17500,"millis":0.0175,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":860812,"millis":0.860812,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":9600,"millis":0.0096,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":68001,"millis":0.068001,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '46873d16-6835-48c4-b47f-134ab0cb31fa'"}},{"result":{"nanos":5400,"millis":0.0054,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3600,"millis":0.0036,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":545278652,"millis":545.278652,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":7300,"millis":0.0073,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":618908,"millis":0.618908,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '46873d16-6835-48c4-b47f-134ab0cb31fa'"}},{"result":{"nanos":403206,"millis":0.403206,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":330105,"millis":0.330105,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":841612,"millis":0.841612,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":407006,"millis":0.407006,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":368905,"millis":0.368905,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":27300,"millis":0.0273,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":283904,"millis":0.283904,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":271703,"millis":0.271703,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":823712,"millis":0.823712,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":82901,"millis":0.082901,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":139802,"millis":0.139802,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:42.720 [print] https:\\\/\\\/inspire.rivm.nl\\\/geoserver\\\/wfs?request=GetCapabilities \n"},{"result":{"nanos":291004,"millis":0.291004,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":456306,"millis":0.456306,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:42.721 [print] OGC:WFS \n"},{"result":{"nanos":542408,"millis":0.542408,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":77901,"millis":0.077901,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:42.722 [print] INSPIRE Atom \n"},{"result":{"nanos":29900,"millis":0.0299,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":36301,"millis":0.036301,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:42.722 [print] OGC:WFS \n"},{"result":{"nanos":660809,"millis":0.660809,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":69401,"millis":0.069401,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:42.723 [print] Rijksinstituut voor Volksgezondheid en Milieu \n"},{"result":{"nanos":31700,"millis":0.0317,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:42.723 [print] http:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=50a2c5e6-c8e7-425d-854e-26f578196bc9#MD_DataIdentification \n"},{"result":{"nanos":590509,"millis":0.590509,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":1275118,"millis":1.275118,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"46873d16-6835-48c4-b47f-134ab0cb31fa\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":485207,"millis":0.485207,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"46873d16-6835-48c4-b47f-134ab0cb31fa\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":557.20372,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"46873d16-6835-48c4-b47f-134ab0cb31fa","startTime":1629213702167,"refId":"[1.39:67]","endTime":1629213702725,"exampleData":{"datasetIdentifierCode":"46873d16-6835-48c4-b47f-134ab0cb31fa"},"exampleIndex":38},{"sectionIndex":0,"stepResults":[{"result":{"nanos":17600,"millis":0.0176,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:42.190 karate.env system property was: null \n"},{"result":{"nanos":27201,"millis":0.027201,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":49100,"millis":0.0491,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":49101,"millis":0.049101,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":216203,"millis":0.216203,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":46500,"millis":0.0465,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":411306,"millis":0.411306,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":41401,"millis":0.041401,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":61701,"millis":0.061701,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":138502,"millis":0.138502,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":70401,"millis":0.070401,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":16501,"millis":0.016501,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17900,"millis":0.0179,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5500,"millis":0.0055,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":52801,"millis":0.052801,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'a6098c24-4caf-4528-954c-672b9ec6cf78'"}},{"result":{"nanos":5700,"millis":0.0057,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":587128554,"millis":587.128554,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":6100,"millis":0.0061,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":1056015,"millis":1.056015,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'a6098c24-4caf-4528-954c-672b9ec6cf78'"}},{"result":{"nanos":1187717,"millis":1.187717,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":452206,"millis":0.452206,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":428906,"millis":0.428906,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":1043915,"millis":1.043915,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":470907,"millis":0.470907,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":31900,"millis":0.0319,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":345805,"millis":0.345805,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":341105,"millis":0.341105,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":328905,"millis":0.328905,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":78201,"millis":0.078201,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":131002,"millis":0.131002,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:42.785 [print] https:\/\/inspire.rivm.nl\/geoserver\/wms?request=GetCapabilities \n"},{"result":{"nanos":827012,"millis":0.827012,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":96302,"millis":0.096302,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:42.786 [print] OGC:WMS \n"},{"result":{"nanos":291904,"millis":0.291904,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":87001,"millis":0.087001,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:42.786 [print] #notpresent \n"},{"result":{"nanos":29900,"millis":0.0299,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":37201,"millis":0.037201,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:42.787 [print] OGC:WMS \n"},{"result":{"nanos":377605,"millis":0.377605,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":59001,"millis":0.059001,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:42.787 [print] Rijksinstituut voor Volksgezondheid en Milieu \n"},{"result":{"nanos":29701,"millis":0.029701,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:42.787 [print] http:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=32a21114-8694-40ce-ab76-9dcd885c7861#MD_DataIdentification \n"},{"result":{"nanos":357805,"millis":0.357805,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":701310,"millis":0.70131,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"a6098c24-4caf-4528-954c-672b9ec6cf78\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":441306,"millis":0.441306,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"a6098c24-4caf-4528-954c-672b9ec6cf78\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":597.603704,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"a6098c24-4caf-4528-954c-672b9ec6cf78","startTime":1629213702190,"refId":"[1.40:67]","endTime":1629213702789,"exampleData":{"datasetIdentifierCode":"a6098c24-4caf-4528-954c-672b9ec6cf78"},"exampleIndex":39},{"sectionIndex":0,"stepResults":[{"result":{"nanos":17001,"millis":0.017001,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:42.483 karate.env system property was: null \n"},{"result":{"nanos":30800,"millis":0.0308,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":52101,"millis":0.052101,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":63401,"millis":0.063401,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":222403,"millis":0.222403,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":52300,"millis":0.0523,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":895213,"millis":0.895213,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":41000,"millis":0.041,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":47301,"millis":0.047301,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":115302,"millis":0.115302,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":174902,"millis":0.174902,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":17201,"millis":0.017201,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17500,"millis":0.0175,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5700,"millis":0.0057,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":58501,"millis":0.058501,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '2dd6c9df-bb47-40eb-af39-2d17f09b9bb9'"}},{"result":{"nanos":4701,"millis":0.004701,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3700,"millis":0.0037,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":652457295,"millis":652.457295,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":6900,"millis":0.0069,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":476207,"millis":0.476207,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '2dd6c9df-bb47-40eb-af39-2d17f09b9bb9'"}},{"result":{"nanos":378105,"millis":0.378105,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":848012,"millis":0.848012,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":275704,"millis":0.275704,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":404306,"millis":0.404306,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":341005,"millis":0.341005,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":25700,"millis":0.0257,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":231703,"millis":0.231703,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":758911,"millis":0.758911,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":307005,"millis":0.307005,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":90101,"millis":0.090101,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":119502,"millis":0.119502,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:43.142 [print] https:\/\/www.gdngeoservices.nl\/inspire\/wms\/oppervlaktegeologie?service=WMS&request=GetCapabilities \n"},{"result":{"nanos":250604,"millis":0.250604,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":67301,"millis":0.067301,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:43.143 [print] #notpresent \n"},{"result":{"nanos":255004,"millis":0.255004,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":56801,"millis":0.056801,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:43.143 [print] OGC:WMS \n"},{"result":{"nanos":27000,"millis":0.027,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":27201,"millis":0.027201,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:43.143 [print] #notpresent \n"},{"result":{"nanos":292404,"millis":0.292404,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":57201,"millis":0.057201,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:43.144 [print] TNO Geologische Dienst Nederland \n"},{"result":{"nanos":25401,"millis":0.025401,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:43.144 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire?SERVICE=CSW&version=2.0.2&REQUEST=GetRecordById&ID=80630ee7-3a15-4ea0-bdc0-a8aebfa2f204&OUTPUTSCHEMA=http:\/\/www.isotc211.org\/2005\/gmd&ELEMENTSETNAME=full#MD_DataIdentification \n"},{"result":{"nanos":787311,"millis":0.787311,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":724811,"millis":0.724811,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"2dd6c9df-bb47-40eb-af39-2d17f09b9bb9\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":485707,"millis":0.485707,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"2dd6c9df-bb47-40eb-af39-2d17f09b9bb9\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":661.600429,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"2dd6c9df-bb47-40eb-af39-2d17f09b9bb9","startTime":1629213702483,"refId":"[1.41:67]","endTime":1629213703146,"exampleData":{"datasetIdentifierCode":"2dd6c9df-bb47-40eb-af39-2d17f09b9bb9"},"exampleIndex":40},{"sectionIndex":0,"stepResults":[{"result":{"nanos":18800,"millis":0.0188,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:42.661 karate.env system property was: null \n"},{"result":{"nanos":27700,"millis":0.0277,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":47301,"millis":0.047301,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":53301,"millis":0.053301,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":223403,"millis":0.223403,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":51000,"millis":0.051,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":360006,"millis":0.360006,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":37400,"millis":0.0374,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":49901,"millis":0.049901,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":120202,"millis":0.120202,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":152702,"millis":0.152702,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":16301,"millis":0.016301,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19200,"millis":0.0192,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5500,"millis":0.0055,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5500,"millis":0.0055,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":727910,"millis":0.72791,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '88a337a9-bed3-4d79-80fa-ff4b45990d7d'"}},{"result":{"nanos":40401,"millis":0.040401,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":10900,"millis":0.0109,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":546862375,"millis":546.862375,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":7600,"millis":0.0076,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":474207,"millis":0.474207,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '88a337a9-bed3-4d79-80fa-ff4b45990d7d'"}},{"result":{"nanos":405805,"millis":0.405805,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":329204,"millis":0.329204,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":321804,"millis":0.321804,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":22175920,"millis":22.17592,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":829012,"millis":0.829012,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":560609,"millis":0.560609,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":499707,"millis":0.499707,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":401106,"millis":0.401106,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":522908,"millis":0.522908,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":442006,"millis":0.442006,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":422006,"millis":0.422006,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:43.238 [print] https:\/\/service.pdok.nl\/cbs\/wb2020\/atom\/v1_0\/index.xml \n"},{"result":{"nanos":532408,"millis":0.532408,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":328305,"millis":0.328305,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:43.239 [print] INSPIRE Atom \n"},{"result":{"nanos":363605,"millis":0.363605,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":263904,"millis":0.263904,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:43.240 [print] #notpresent \n"},{"result":{"nanos":92502,"millis":0.092502,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":254803,"millis":0.254803,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:43.240 [print] INSPIRE Atom \n"},{"result":{"nanos":371405,"millis":0.371405,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":246304,"millis":0.246304,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:43.241 [print] Beheer PDOK \n"},{"result":{"nanos":456006,"millis":0.456006,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:43.241 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=f1859b4d-93be-4fc8-9e91-0ecc2fa0f3b3#MD_DataIdentification \n"},{"result":{"nanos":549307,"millis":0.549307,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":569608,"millis":0.569608,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"88a337a9-bed3-4d79-80fa-ff4b45990d7d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":472507,"millis":0.472507,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"88a337a9-bed3-4d79-80fa-ff4b45990d7d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":580.722361,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"88a337a9-bed3-4d79-80fa-ff4b45990d7d","startTime":1629213702661,"refId":"[1.42:67]","endTime":1629213703243,"exampleData":{"datasetIdentifierCode":"88a337a9-bed3-4d79-80fa-ff4b45990d7d"},"exampleIndex":41},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15900,"millis":0.0159,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:42.727 karate.env system property was: null \n"},{"result":{"nanos":30601,"millis":0.030601,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":49401,"millis":0.049401,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":69301,"millis":0.069301,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":250003,"millis":0.250003,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":79501,"millis":0.079501,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":374905,"millis":0.374905,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":37000,"millis":0.037,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":50101,"millis":0.050101,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":111702,"millis":0.111702,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":65601,"millis":0.065601,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":14700,"millis":0.0147,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19400,"millis":0.0194,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5501,"millis":0.005501,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":50801,"millis":0.050801,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '0d2ca03b-fb7b-466a-bb93-e2bfb596e394'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":561834590,"millis":561.83459,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":533907,"millis":0.533907,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '0d2ca03b-fb7b-466a-bb93-e2bfb596e394'"}},{"result":{"nanos":437806,"millis":0.437806,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":403006,"millis":0.403006,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":374906,"millis":0.374906,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":428106,"millis":0.428106,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":573408,"millis":0.573408,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":101301,"millis":0.101301,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":404706,"millis":0.404706,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":378506,"millis":0.378506,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":355105,"millis":0.355105,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":119702,"millis":0.119702,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":137002,"millis":0.137002,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:43.295 [print] https:\/\/inspire.caris.nl\/gs5\/pssa_nl\/ows?service=WFS&version=2.0.0&request=GetCapabilities \n"},{"result":{"nanos":448306,"millis":0.448306,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":193802,"millis":0.193802,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:43.296 [print] OGC:WFS \n"},{"result":{"nanos":439506,"millis":0.439506,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":127702,"millis":0.127702,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:43.296 [print] #notpresent \n"},{"result":{"nanos":77501,"millis":0.077501,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":2108731,"millis":2.108731,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:43.299 [print] OGC:WFS \n"},{"result":{"nanos":431006,"millis":0.431006,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":182303,"millis":0.182303,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:43.299 [print] Ministerie van Defensie, Koninklijke Marine, Dienst der Hydrografie \n"},{"result":{"nanos":153302,"millis":0.153302,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:43.299 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=f1d27179-36eb-4376-8048-f51d2eb23a09&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full#MD_DataIdentification \n"},{"result":{"nanos":403405,"millis":0.403405,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":684210,"millis":0.68421,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"0d2ca03b-fb7b-466a-bb93-e2bfb596e394\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":437306,"millis":0.437306,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"0d2ca03b-fb7b-466a-bb93-e2bfb596e394\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":573.010849,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"0d2ca03b-fb7b-466a-bb93-e2bfb596e394","startTime":1629213702727,"refId":"[1.43:67]","endTime":1629213703301,"exampleData":{"datasetIdentifierCode":"0d2ca03b-fb7b-466a-bb93-e2bfb596e394"},"exampleIndex":42},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16800,"millis":0.0168,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:42.791 karate.env system property was: null \n"},{"result":{"nanos":26900,"millis":0.0269,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":49001,"millis":0.049001,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":50601,"millis":0.050601,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":761811,"millis":0.761811,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":44501,"millis":0.044501,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":357405,"millis":0.357405,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":38701,"millis":0.038701,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":47701,"millis":0.047701,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":118101,"millis":0.118101,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":62300,"millis":0.0623,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":15900,"millis":0.0159,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18300,"millis":0.0183,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5301,"millis":0.005301,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":62501,"millis":0.062501,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '22bedc12-e9cb-4419-8e51-dfb375d46d01'"}},{"result":{"nanos":5800,"millis":0.0058,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3400,"millis":0.0034,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":598747622,"millis":598.747622,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":6300,"millis":0.0063,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":839412,"millis":0.839412,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '22bedc12-e9cb-4419-8e51-dfb375d46d01'"}},{"result":{"nanos":635709,"millis":0.635709,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":550608,"millis":0.550608,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":484207,"millis":0.484207,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":588509,"millis":0.588509,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":731810,"millis":0.73181,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":259804,"millis":0.259804,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":536408,"millis":0.536408,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":447506,"millis":0.447506,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":634309,"millis":0.634309,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":159302,"millis":0.159302,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":184402,"millis":0.184402,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:43.398 [print] http:\/\/services.inspire-provincies.nl\/NaturalRiskZones\/services\/view_NZ?request=GetCapabilities \n"},{"result":{"nanos":548208,"millis":0.548208,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":153102,"millis":0.153102,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:43.398 [print] OGC:WMS \n"},{"result":{"nanos":420506,"millis":0.420506,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":132802,"millis":0.132802,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:43.399 [print] #notpresent \n"},{"result":{"nanos":95002,"millis":0.095002,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":101501,"millis":0.101501,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:43.399 [print] OGC:WMS \n"},{"result":{"nanos":519207,"millis":0.519207,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":161603,"millis":0.161603,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:43.400 [print] Interprovinciaal Overleg \n"},{"result":{"nanos":153002,"millis":0.153002,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:43.400 [print] [\"http:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/nl\\\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=88f76a94-ee4d-4e0c-9fde-91b692403e39&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full#MD_DataIdentification\",\"http:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/nl\\\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=08af1182-91fe-4d21-aa21-ee002953c3cc&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full#MD_DataIdentification\",\"http:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/nl\\\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=d91126e0-e37b-11e4-b571-0800200c9a66&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full#MD_DataIdentification\",\"http:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/nl\\\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=667ebfb0-e37c-11e4-b571-0800200c9a66&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full#MD_DataIdentification\"] \n"},{"result":{"nanos":2284033,"millis":2.284033,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":762911,"millis":0.762911,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"22bedc12-e9cb-4419-8e51-dfb375d46d01\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":1674724,"millis":1.674724,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"22bedc12-e9cb-4419-8e51-dfb375d46d01\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":613.502133,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"22bedc12-e9cb-4419-8e51-dfb375d46d01","startTime":1629213702790,"refId":"[1.44:67]","endTime":1629213703405,"exampleData":{"datasetIdentifierCode":"22bedc12-e9cb-4419-8e51-dfb375d46d01"},"exampleIndex":43},{"sectionIndex":0,"stepResults":[{"result":{"nanos":17500,"millis":0.0175,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:43.150 karate.env system property was: null \n"},{"result":{"nanos":67701,"millis":0.067701,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":80002,"millis":0.080002,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":76801,"millis":0.076801,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":230203,"millis":0.230203,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":43300,"millis":0.0433,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":372906,"millis":0.372906,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":66001,"millis":0.066001,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":67301,"millis":0.067301,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":795811,"millis":0.795811,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":165802,"millis":0.165802,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":22601,"millis":0.022601,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19300,"millis":0.0193,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":73801,"millis":0.073801,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'd796fd8d-b1e0-465c-a55b-1e9fe885fc3d'"}},{"result":{"nanos":7900,"millis":0.0079,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":571316426,"millis":571.316426,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":9800,"millis":0.0098,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":773811,"millis":0.773811,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'd796fd8d-b1e0-465c-a55b-1e9fe885fc3d'"}},{"result":{"nanos":552908,"millis":0.552908,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":413806,"millis":0.413806,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":416006,"millis":0.416006,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":496507,"millis":0.496507,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":662610,"millis":0.66261,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":120802,"millis":0.120802,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":447107,"millis":0.447107,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":458106,"millis":0.458106,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":475207,"millis":0.475207,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":665109,"millis":0.665109,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":651909,"millis":0.651909,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:43.730 [print] https:\/\/www.broinspireservices.nl\/wms\/osgegmw-a-v1.0?request=GetCapabilities \n"},{"result":{"nanos":523708,"millis":0.523708,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":524508,"millis":0.524508,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:43.731 [print] #notpresent \n"},{"result":{"nanos":503607,"millis":0.503607,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":438807,"millis":0.438807,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:43.732 [print] OGC:WMS \n"},{"result":{"nanos":112601,"millis":0.112601,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":346505,"millis":0.346505,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:43.733 [print] #notpresent \n"},{"result":{"nanos":437106,"millis":0.437106,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":402506,"millis":0.402506,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:43.734 [print] TNO Geologische Dienst Nederland \n"},{"result":{"nanos":556708,"millis":0.556708,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:43.734 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire?SERVICE=CSW&version=2.0.2&REQUEST=GetRecordById&ID=f99e915a-75e5-4c36-97f2-61eff692d85b&OUTPUTSCHEMA=http:\/\/www.isotc211.org\/2005\/gmd&ELEMENTSETNAME=full#MD_DataIdentification \n"},{"result":{"nanos":372806,"millis":0.372806,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":591909,"millis":0.591909,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"d796fd8d-b1e0-465c-a55b-1e9fe885fc3d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":783011,"millis":0.783011,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"d796fd8d-b1e0-465c-a55b-1e9fe885fc3d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":585.174926,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"d796fd8d-b1e0-465c-a55b-1e9fe885fc3d","startTime":1629213703150,"refId":"[1.45:67]","endTime":1629213703736,"exampleData":{"datasetIdentifierCode":"d796fd8d-b1e0-465c-a55b-1e9fe885fc3d"},"exampleIndex":44},{"sectionIndex":0,"stepResults":[{"result":{"nanos":54201,"millis":0.054201,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:43.246 karate.env system property was: null \n"},{"result":{"nanos":41601,"millis":0.041601,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":116202,"millis":0.116202,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":118501,"millis":0.118501,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":310304,"millis":0.310304,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":115202,"millis":0.115202,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":389806,"millis":0.389806,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":108001,"millis":0.108001,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":284004,"millis":0.284004,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":230903,"millis":0.230903,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":157403,"millis":0.157403,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":48001,"millis":0.048001,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":29700,"millis":0.0297,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":15700,"millis":0.0157,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":13800,"millis":0.0138,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":13900,"millis":0.0139,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'fa3ecd49-4571-4eb3-84f3-2865f42934b2'"}},{"result":{"nanos":13201,"millis":0.013201,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":13800,"millis":0.0138,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":564922435,"millis":564.922435,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":8700,"millis":0.0087,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":533308,"millis":0.533308,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'fa3ecd49-4571-4eb3-84f3-2865f42934b2'"}},{"result":{"nanos":462207,"millis":0.462207,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":348305,"millis":0.348305,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":327905,"millis":0.327905,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":404806,"millis":0.404806,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":356105,"millis":0.356105,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":34400,"millis":0.0344,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":286704,"millis":0.286704,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":275804,"millis":0.275804,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":295704,"millis":0.295704,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":83801,"millis":0.083801,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":785811,"millis":0.785811,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:43.818 [print] https:\/\/www.gdngeoservices.nl\/inspire\/wfs\/olie_en_gasvelden?service=WFS&request=GetCapabilities&version=2.0.0 \n"},{"result":{"nanos":317005,"millis":0.317005,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":210303,"millis":0.210303,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:43.818 [print] #notpresent \n"},{"result":{"nanos":305304,"millis":0.305304,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":217803,"millis":0.217803,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:43.819 [print] OGC:WFS \n"},{"result":{"nanos":33700,"millis":0.0337,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":262203,"millis":0.262203,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:43.819 [print] #notpresent \n"},{"result":{"nanos":343204,"millis":0.343204,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":309804,"millis":0.309804,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:43.820 [print] TNO Geologische Dienst Nederland \n"},{"result":{"nanos":476107,"millis":0.476107,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:43.820 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire?SERVICE=CSW&version=2.0.2&REQUEST=GetRecordById&ID=b61a773c-ecad-4e60-93e9-0a4caac0b52f&OUTPUTSCHEMA=http:\/\/www.isotc211.org\/2005\/gmd&ELEMENTSETNAME=full#MD_DataIdentification \n"},{"result":{"nanos":333205,"millis":0.333205,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":723111,"millis":0.723111,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"fa3ecd49-4571-4eb3-84f3-2865f42934b2\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":447506,"millis":0.447506,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"fa3ecd49-4571-4eb3-84f3-2865f42934b2\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":575.17948,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"fa3ecd49-4571-4eb3-84f3-2865f42934b2","startTime":1629213703245,"refId":"[1.46:67]","endTime":1629213703822,"exampleData":{"datasetIdentifierCode":"fa3ecd49-4571-4eb3-84f3-2865f42934b2"},"exampleIndex":45},{"sectionIndex":0,"stepResults":[{"result":{"nanos":57201,"millis":0.057201,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:43.305 karate.env system property was: null \n"},{"result":{"nanos":42401,"millis":0.042401,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":123002,"millis":0.123002,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":121401,"millis":0.121401,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":307904,"millis":0.307904,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":120302,"millis":0.120302,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":400106,"millis":0.400106,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":95501,"millis":0.095501,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":114101,"millis":0.114101,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":315405,"millis":0.315405,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":167903,"millis":0.167903,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":55601,"millis":0.055601,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":34600,"millis":0.0346,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":16801,"millis":0.016801,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":15300,"millis":0.0153,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":14800,"millis":0.0148,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '6d86c14f-cccf-41e9-a58e-ead9d52ae35d'"}},{"result":{"nanos":147602,"millis":0.147602,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":28800,"millis":0.0288,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":541983605,"millis":541.983605,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":6500,"millis":0.0065,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":486807,"millis":0.486807,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '6d86c14f-cccf-41e9-a58e-ead9d52ae35d'"}},{"result":{"nanos":455106,"millis":0.455106,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":434706,"millis":0.434706,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":411106,"millis":0.411106,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":480007,"millis":0.480007,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":452806,"millis":0.452806,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":30101,"millis":0.030101,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":351105,"millis":0.351105,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":365505,"millis":0.365505,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":354405,"millis":0.354405,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":71901,"millis":0.071901,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":475707,"millis":0.475707,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:43.854 [print] http:\/\/data.waterkwaliteitsportaal.nl\/inspire\/vs\/AM \n"},{"result":{"nanos":380606,"millis":0.380606,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":81501,"millis":0.081501,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:43.855 [print] #notpresent \n"},{"result":{"nanos":346005,"millis":0.346005,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":63601,"millis":0.063601,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:43.855 [print] OGC:WMS \n"},{"result":{"nanos":28501,"millis":0.028501,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":54601,"millis":0.054601,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:43.855 [print] #notpresent \n"},{"result":{"nanos":365705,"millis":0.365705,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":302704,"millis":0.302704,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:43.856 [print] Informatiehuis Water \n"},{"result":{"nanos":614108,"millis":0.614108,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:43.857 [print] http:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/nl\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=110f9ec6-4464-462e-9765-83d90cefbeab&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full \n"},{"result":{"nanos":365205,"millis":0.365205,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":626509,"millis":0.626509,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"6d86c14f-cccf-41e9-a58e-ead9d52ae35d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":561808,"millis":0.561808,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"6d86c14f-cccf-41e9-a58e-ead9d52ae35d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":552.328952,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"6d86c14f-cccf-41e9-a58e-ead9d52ae35d","startTime":1629213703304,"refId":"[1.47:67]","endTime":1629213703858,"exampleData":{"datasetIdentifierCode":"6d86c14f-cccf-41e9-a58e-ead9d52ae35d"},"exampleIndex":46},{"sectionIndex":0,"stepResults":[{"result":{"nanos":95301,"millis":0.095301,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:43.410 karate.env system property was: null \n"},{"result":{"nanos":56701,"millis":0.056701,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":704111,"millis":0.704111,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":180902,"millis":0.180902,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":1134016,"millis":1.134016,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":448907,"millis":0.448907,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":435906,"millis":0.435906,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":145402,"millis":0.145402,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":133702,"millis":0.133702,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":238703,"millis":0.238703,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":172603,"millis":0.172603,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":54101,"millis":0.054101,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":38001,"millis":0.038001,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":17500,"millis":0.0175,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":16500,"millis":0.0165,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":15901,"millis":0.015901,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '7dc30aed-0940-4e69-b34c-9f24b34078eb'"}},{"result":{"nanos":16200,"millis":0.0162,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":15200,"millis":0.0152,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":564436928,"millis":564.436928,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":7200,"millis":0.0072,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":556808,"millis":0.556808,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '7dc30aed-0940-4e69-b34c-9f24b34078eb'"}},{"result":{"nanos":456607,"millis":0.456607,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":361805,"millis":0.361805,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":358705,"millis":0.358705,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":429107,"millis":0.429107,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":426406,"millis":0.426406,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":38401,"millis":0.038401,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":316704,"millis":0.316704,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":319504,"millis":0.319504,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":311804,"millis":0.311804,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":79601,"millis":0.079601,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":137702,"millis":0.137702,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:43.983 [print] https:\/\/inspire.rivm.nl\/geoserver\/wms? \n"},{"result":{"nanos":840712,"millis":0.840712,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":97301,"millis":0.097301,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:43.984 [print] #notpresent \n"},{"result":{"nanos":567108,"millis":0.567108,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":84301,"millis":0.084301,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:43.984 [print] OGC:WMS \n"},{"result":{"nanos":28401,"millis":0.028401,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":57901,"millis":0.057901,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:43.984 [print] #notpresent \n"},{"result":{"nanos":671909,"millis":0.671909,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":74401,"millis":0.074401,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:43.985 [print] RIVM \n"},{"result":{"nanos":53801,"millis":0.053801,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:43.985 [print] http:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/en\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=f8d840bc-18df-4449-b797-b9adcb81d3ec \n"},{"result":{"nanos":371205,"millis":0.371205,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":1308619,"millis":1.308619,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"7dc30aed-0940-4e69-b34c-9f24b34078eb\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":474907,"millis":0.474907,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"7dc30aed-0940-4e69-b34c-9f24b34078eb\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":576.787505,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"7dc30aed-0940-4e69-b34c-9f24b34078eb","startTime":1629213703409,"refId":"[1.48:67]","endTime":1629213703987,"exampleData":{"datasetIdentifierCode":"7dc30aed-0940-4e69-b34c-9f24b34078eb"},"exampleIndex":47},{"sectionIndex":0,"stepResults":[{"result":{"nanos":67601,"millis":0.067601,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:43.739 karate.env system property was: null \n"},{"result":{"nanos":51000,"millis":0.051,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":137902,"millis":0.137902,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":138902,"millis":0.138902,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":371805,"millis":0.371805,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":142402,"millis":0.142402,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":427206,"millis":0.427206,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":843612,"millis":0.843612,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":503708,"millis":0.503708,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":272604,"millis":0.272604,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":171202,"millis":0.171202,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":51001,"millis":0.051001,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":36401,"millis":0.036401,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":54901,"millis":0.054901,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":17600,"millis":0.0176,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":14800,"millis":0.0148,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '1e01d173-96f4-40b1-8236-c6a9cfdac252'"}},{"result":{"nanos":13600,"millis":0.0136,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":13400,"millis":0.0134,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":551230737,"millis":551.230737,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5800,"millis":0.0058,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":546808,"millis":0.546808,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '1e01d173-96f4-40b1-8236-c6a9cfdac252'"}},{"result":{"nanos":446207,"millis":0.446207,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":354505,"millis":0.354505,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":348205,"millis":0.348205,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":430507,"millis":0.430507,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":459507,"millis":0.459507,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":28500,"millis":0.0285,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":331405,"millis":0.331405,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":321905,"millis":0.321905,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":310205,"millis":0.310205,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":71301,"millis":0.071301,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":99401,"millis":0.099401,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:44.299 [print] https:\/\/haleconnect.com\/ows\/services\/org.874.512633c0-2899-4f9d-b2d1-1bd51cb2315a_wfs?SERVICE=WFS&Request=GetCapabilities \n"},{"result":{"nanos":309704,"millis":0.309704,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":106202,"millis":0.106202,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:44.299 [print] #notpresent \n"},{"result":{"nanos":451406,"millis":0.451406,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":170102,"millis":0.170102,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:44.300 [print] #notpresent \n"},{"result":{"nanos":35201,"millis":0.035201,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":65001,"millis":0.065001,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:44.300 [print] #notpresent \n"},{"result":{"nanos":982714,"millis":0.982714,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":264004,"millis":0.264004,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:44.301 [print] KNMI \n"},{"result":{"nanos":729711,"millis":0.729711,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:44.302 [print] https:\/\/haleconnect.com\/services\/bsp\/org.874.512633c0-2899-4f9d-b2d1-1bd51cb2315a\/md\/dataset\/dataset1#xpointer%28%2F%2Fgmd%3AidentificationInfo%5B1%5D%2Fgmd%3AMD_DataIdentification%29 \n"},{"result":{"nanos":448607,"millis":0.448607,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":709910,"millis":0.70991,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"1e01d173-96f4-40b1-8236-c6a9cfdac252\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":3852556,"millis":3.852556,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"1e01d173-96f4-40b1-8236-c6a9cfdac252\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":566.439758,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"1e01d173-96f4-40b1-8236-c6a9cfdac252","startTime":1629213703739,"refId":"[1.49:67]","endTime":1629213704307,"exampleData":{"datasetIdentifierCode":"1e01d173-96f4-40b1-8236-c6a9cfdac252"},"exampleIndex":48},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16601,"millis":0.016601,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:43.824 karate.env system property was: null \n"},{"result":{"nanos":30000,"millis":0.03,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":52201,"millis":0.052201,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":49801,"millis":0.049801,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":272304,"millis":0.272304,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":42701,"millis":0.042701,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":395006,"millis":0.395006,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":38600,"millis":0.0386,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":49501,"millis":0.049501,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":371806,"millis":0.371806,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":73001,"millis":0.073001,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":19500,"millis":0.0195,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19200,"millis":0.0192,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":6000,"millis":0.006,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5400,"millis":0.0054,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":61501,"millis":0.061501,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'eec0708d-bab6-41c2-aa5b-9c435a1a177e'"}},{"result":{"nanos":6500,"millis":0.0065,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":559318554,"millis":559.318554,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5900,"millis":0.0059,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":522807,"millis":0.522807,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'eec0708d-bab6-41c2-aa5b-9c435a1a177e'"}},{"result":{"nanos":396206,"millis":0.396206,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":345005,"millis":0.345005,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":347405,"millis":0.347405,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":440706,"millis":0.440706,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":386506,"millis":0.386506,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":25000,"millis":0.025,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":308905,"millis":0.308905,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":306505,"millis":0.306505,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":320104,"millis":0.320104,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":745210,"millis":0.74521,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":711511,"millis":0.711511,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:44.391 [print] https:\/\/haleconnect.com\/services\/bsp\/org.874.7e01e60c-8887-425c-af9b-e2cf6af9181b\/service\/atom\/id_predefined_dataset \n"},{"result":{"nanos":332905,"millis":0.332905,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":430606,"millis":0.430606,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:44.391 [print] #notpresent \n"},{"result":{"nanos":325105,"millis":0.325105,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":450407,"millis":0.450407,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:44.392 [print] #notpresent \n"},{"result":{"nanos":37400,"millis":0.0374,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":407105,"millis":0.407105,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:44.393 [print] #notpresent \n"},{"result":{"nanos":368305,"millis":0.368305,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":485607,"millis":0.485607,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:44.394 [print] Koninklijk Nederlands Meteorologisch Instituut (KNMI) \n"},{"result":{"nanos":690010,"millis":0.69001,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:44.394 [print] https:\/\/haleconnect.com\/services\/bsp\/org.874.7e01e60c-8887-425c-af9b-e2cf6af9181b\/md\/dataset\/dataset1#xpointer%28%2F%2Fgmd%3AidentificationInfo%5B1%5D%2Fgmd%3AMD_DataIdentification%29 \n"},{"result":{"nanos":362406,"millis":0.362406,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":698410,"millis":0.69841,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"eec0708d-bab6-41c2-aa5b-9c435a1a177e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":464307,"millis":0.464307,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"eec0708d-bab6-41c2-aa5b-9c435a1a177e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":570.74732,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"eec0708d-bab6-41c2-aa5b-9c435a1a177e","startTime":1629213703824,"refId":"[1.50:67]","endTime":1629213704396,"exampleData":{"datasetIdentifierCode":"eec0708d-bab6-41c2-aa5b-9c435a1a177e"},"exampleIndex":49},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16800,"millis":0.0168,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:43.861 karate.env system property was: null \n"},{"result":{"nanos":27500,"millis":0.0275,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":49401,"millis":0.049401,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":46501,"millis":0.046501,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":218503,"millis":0.218503,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":65601,"millis":0.065601,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":359805,"millis":0.359805,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":36100,"millis":0.0361,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":177703,"millis":0.177703,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":107201,"millis":0.107201,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":59400,"millis":0.0594,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":16500,"millis":0.0165,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19000,"millis":0.019,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":69901,"millis":0.069901,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'b4b59b2c-156d-412e-b8f0-c0779402de80'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":565271240,"millis":565.27124,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":6300,"millis":0.0063,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":512308,"millis":0.512308,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'b4b59b2c-156d-412e-b8f0-c0779402de80'"}},{"result":{"nanos":481907,"millis":0.481907,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":442706,"millis":0.442706,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":458006,"millis":0.458006,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":497808,"millis":0.497808,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":473107,"millis":0.473107,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":29200,"millis":0.0292,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":362606,"millis":0.362606,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":365705,"millis":0.365705,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":367206,"millis":0.367206,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":935913,"millis":0.935913,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":995514,"millis":0.995514,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:44.434 [print] https:\/\/haleconnect.com\/ows\/services\/org.874.cb9ca55e-f4e7-4bd8-a02e-75d528e22118_wms\/org.874.c7d1b83d-8237-44c4-9e07-420eb63dcf84?SERVICE=WMS&Request=GetCapabilities \n"},{"result":{"nanos":406606,"millis":0.406606,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":543508,"millis":0.543508,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:44.435 [print] #notpresent \n"},{"result":{"nanos":411005,"millis":0.411005,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":490507,"millis":0.490507,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:44.436 [print] #notpresent \n"},{"result":{"nanos":46501,"millis":0.046501,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":462506,"millis":0.462506,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:44.436 [print] #notpresent \n"},{"result":{"nanos":547108,"millis":0.547108,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":466706,"millis":0.466706,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:44.437 [print] Koninklijk Nederlands Meteorologisch Instituut (KNMI) \n"},{"result":{"nanos":720910,"millis":0.72091,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:44.438 [print] https:\/\/haleconnect.com\/services\/bsp\/org.874.c7d1b83d-8237-44c4-9e07-420eb63dcf84\/md\/dataset\/dataset1#xpointer%28%2F%2Fgmd%3AidentificationInfo%5B1%5D%2Fgmd%3AMD_DataIdentification%29 \n"},{"result":{"nanos":380806,"millis":0.380806,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":587008,"millis":0.587008,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"b4b59b2c-156d-412e-b8f0-c0779402de80\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":881612,"millis":0.881612,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"b4b59b2c-156d-412e-b8f0-c0779402de80\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":578.432625,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"b4b59b2c-156d-412e-b8f0-c0779402de80","startTime":1629213703860,"refId":"[1.51:67]","endTime":1629213704440,"exampleData":{"datasetIdentifierCode":"b4b59b2c-156d-412e-b8f0-c0779402de80"},"exampleIndex":50},{"sectionIndex":0,"stepResults":[{"result":{"nanos":21100,"millis":0.0211,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:43.990 karate.env system property was: null \n"},{"result":{"nanos":30800,"millis":0.0308,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":49200,"millis":0.0492,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":50601,"millis":0.050601,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":255604,"millis":0.255604,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":44901,"millis":0.044901,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":369805,"millis":0.369805,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":36801,"millis":0.036801,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":49001,"millis":0.049001,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":111901,"millis":0.111901,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":357005,"millis":0.357005,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":21900,"millis":0.0219,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":21901,"millis":0.021901,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5200,"millis":0.0052,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":75201,"millis":0.075201,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'a149d97f-0d55-462e-9956-5b47bea00a8d'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4601,"millis":0.004601,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":592245028,"millis":592.245028,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":7200,"millis":0.0072,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":589909,"millis":0.589909,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'a149d97f-0d55-462e-9956-5b47bea00a8d'"}},{"result":{"nanos":504207,"millis":0.504207,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":470206,"millis":0.470206,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":447606,"millis":0.447606,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":522508,"millis":0.522508,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":489007,"millis":0.489007,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":28601,"millis":0.028601,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":378405,"millis":0.378405,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":436506,"millis":0.436506,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":384706,"millis":0.384706,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":535108,"millis":0.535108,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":435406,"millis":0.435406,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:44.589 [print] https:\/\/haleconnect.com\/ows\/services\/org.874.cb9ca55e-f4e7-4bd8-a02e-75d528e22118_wms\/org.874.9934d92c-25d3-4fb8-9269-cf1ddbf9def0?SERVICE=WMS&Request=GetCapabilities \n"},{"result":{"nanos":330805,"millis":0.330805,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":266704,"millis":0.266704,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:44.590 [print] #notpresent \n"},{"result":{"nanos":331605,"millis":0.331605,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":263504,"millis":0.263504,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:44.591 [print] #notpresent \n"},{"result":{"nanos":35701,"millis":0.035701,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":197503,"millis":0.197503,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:44.591 [print] #notpresent \n"},{"result":{"nanos":398406,"millis":0.398406,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":289504,"millis":0.289504,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:44.592 [print] Koninklijk Nederlands Meteorologisch Instituut (KNMI) \n"},{"result":{"nanos":355005,"millis":0.355005,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:44.592 [print] https:\/\/haleconnect.com\/services\/bsp\/org.874.9934d92c-25d3-4fb8-9269-cf1ddbf9def0\/md\/dataset\/dataset1#xpointer%28%2F%2Fgmd%3AidentificationInfo%5B1%5D%2Fgmd%3AMD_DataIdentification%29 \n"},{"result":{"nanos":437407,"millis":0.437407,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":1427220,"millis":1.42722,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"a149d97f-0d55-462e-9956-5b47bea00a8d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":457306,"millis":0.457306,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"a149d97f-0d55-462e-9956-5b47bea00a8d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":603.780195,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"a149d97f-0d55-462e-9956-5b47bea00a8d","startTime":1629213703989,"refId":"[1.52:67]","endTime":1629213704594,"exampleData":{"datasetIdentifierCode":"a149d97f-0d55-462e-9956-5b47bea00a8d"},"exampleIndex":51},{"sectionIndex":0,"stepResults":[{"result":{"nanos":18300,"millis":0.0183,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:44.309 karate.env system property was: null \n"},{"result":{"nanos":31701,"millis":0.031701,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":50401,"millis":0.050401,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":49000,"millis":0.049,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":431906,"millis":0.431906,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":50101,"millis":0.050101,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":5220975,"millis":5.220975,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":52601,"millis":0.052601,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":80601,"millis":0.080601,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":428106,"millis":0.428106,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":92401,"millis":0.092401,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":19501,"millis":0.019501,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18700,"millis":0.0187,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5200,"millis":0.0052,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":85402,"millis":0.085402,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '49a53bc1-dd76-417f-b9af-066901ddfec0'"}},{"result":{"nanos":5200,"millis":0.0052,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":536129020,"millis":536.12902,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":32000,"millis":0.032,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":543508,"millis":0.543508,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '49a53bc1-dd76-417f-b9af-066901ddfec0'"}},{"result":{"nanos":473207,"millis":0.473207,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":394906,"millis":0.394906,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":372006,"millis":0.372006,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":401406,"millis":0.401406,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":351605,"millis":0.351605,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":25101,"millis":0.025101,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":292504,"millis":0.292504,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":294804,"millis":0.294804,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":307904,"millis":0.307904,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":67701,"millis":0.067701,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":158103,"millis":0.158103,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:44.856 [print] https:\/\/inspire.caris.nl\/server\/services\/ows\/download\/feature\/amplitude-getij_IDS?request=GetCapabilities&service=WFS&version=2.0.0 \n"},{"result":{"nanos":306104,"millis":0.306104,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":105702,"millis":0.105702,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:44.857 [print] OGC:WCS \n"},{"result":{"nanos":385806,"millis":0.385806,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":107602,"millis":0.107602,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:44.857 [print] #notpresent \n"},{"result":{"nanos":30700,"millis":0.0307,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":48101,"millis":0.048101,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:44.857 [print] OGC:WCS \n"},{"result":{"nanos":455507,"millis":0.455507,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":101501,"millis":0.101501,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:44.858 [print] Ministerie van Defensie, Koninklijke Marine, Dienst der Hydrografie \n"},{"result":{"nanos":43301,"millis":0.043301,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:44.858 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=be6551de-a709-4c6d-a5e2-f63f0cf038ba&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full#MD_DataIdentification \n"},{"result":{"nanos":332705,"millis":0.332705,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":772911,"millis":0.772911,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"49a53bc1-dd76-417f-b9af-066901ddfec0\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":459707,"millis":0.459707,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"49a53bc1-dd76-417f-b9af-066901ddfec0\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":549.642518,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"49a53bc1-dd76-417f-b9af-066901ddfec0","startTime":1629213704309,"refId":"[1.53:67]","endTime":1629213704860,"exampleData":{"datasetIdentifierCode":"49a53bc1-dd76-417f-b9af-066901ddfec0"},"exampleIndex":52},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16701,"millis":0.016701,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:44.398 karate.env system property was: null \n"},{"result":{"nanos":30100,"millis":0.0301,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":48101,"millis":0.048101,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":48301,"millis":0.048301,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":219903,"millis":0.219903,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":41301,"millis":0.041301,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":1000214,"millis":1.000214,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":56800,"millis":0.0568,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":403906,"millis":0.403906,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":117301,"millis":0.117301,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":63201,"millis":0.063201,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":17601,"millis":0.017601,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17500,"millis":0.0175,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5500,"millis":0.0055,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":183303,"millis":0.183303,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '914a6e0c-2aae-42f8-8425-2a047c245dab'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3801,"millis":0.003801,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":540272079,"millis":540.272079,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":37800,"millis":0.0378,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":553608,"millis":0.553608,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '914a6e0c-2aae-42f8-8425-2a047c245dab'"}},{"result":{"nanos":499807,"millis":0.499807,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":434906,"millis":0.434906,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":414506,"millis":0.414506,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":491407,"millis":0.491407,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":456407,"millis":0.456407,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":30400,"millis":0.0304,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":369606,"millis":0.369606,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":347705,"millis":0.347705,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":387406,"millis":0.387406,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":122902,"millis":0.122902,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":123102,"millis":0.123102,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:44.946 [print] https:\/\/haleconnect.com\/ows\/services\/org.874.7e01e60c-8887-425c-af9b-e2cf6af9181b_wfs?SERVICE=WFS&Request=GetCapabilities \n"},{"result":{"nanos":370605,"millis":0.370605,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":99501,"millis":0.099501,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:44.946 [print] #notpresent \n"},{"result":{"nanos":310805,"millis":0.310805,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":96801,"millis":0.096801,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:44.947 [print] #notpresent \n"},{"result":{"nanos":58601,"millis":0.058601,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":53601,"millis":0.053601,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:44.947 [print] #notpresent \n"},{"result":{"nanos":366006,"millis":0.366006,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":80001,"millis":0.080001,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:44.947 [print] Koninklijk Nederlands Meteorologisch Instituut (KNMI) \n"},{"result":{"nanos":40901,"millis":0.040901,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:44.947 [print] https:\/\/haleconnect.com\/services\/bsp\/org.874.7e01e60c-8887-425c-af9b-e2cf6af9181b\/md\/dataset\/dataset1#xpointer%28%2F%2Fgmd%3AidentificationInfo%5B1%5D%2Fgmd%3AMD_DataIdentification%29 \n"},{"result":{"nanos":354505,"millis":0.354505,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":1521922,"millis":1.521922,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"914a6e0c-2aae-42f8-8425-2a047c245dab\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":478007,"millis":0.478007,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"914a6e0c-2aae-42f8-8425-2a047c245dab\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":550.655431,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"914a6e0c-2aae-42f8-8425-2a047c245dab","startTime":1629213704398,"refId":"[1.54:67]","endTime":1629213704950,"exampleData":{"datasetIdentifierCode":"914a6e0c-2aae-42f8-8425-2a047c245dab"},"exampleIndex":53},{"sectionIndex":0,"stepResults":[{"result":{"nanos":17601,"millis":0.017601,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:44.442 karate.env system property was: null \n"},{"result":{"nanos":29500,"millis":0.0295,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":47701,"millis":0.047701,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":46601,"millis":0.046601,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":209803,"millis":0.209803,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":40801,"millis":0.040801,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":458206,"millis":0.458206,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":37100,"millis":0.0371,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":402206,"millis":0.402206,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":124202,"millis":0.124202,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":61701,"millis":0.061701,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":17600,"millis":0.0176,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17900,"millis":0.0179,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5700,"millis":0.0057,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5200,"millis":0.0052,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":65601,"millis":0.065601,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '56093b94-7517-456d-a0d4-338aba3d8c74'"}},{"result":{"nanos":7901,"millis":0.007901,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":545056448,"millis":545.056448,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":520607,"millis":0.520607,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '56093b94-7517-456d-a0d4-338aba3d8c74'"}},{"result":{"nanos":464906,"millis":0.464906,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":414206,"millis":0.414206,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":404806,"millis":0.404806,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":470707,"millis":0.470707,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":459007,"millis":0.459007,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":27900,"millis":0.0279,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":359406,"millis":0.359406,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":364405,"millis":0.364405,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":405506,"millis":0.405506,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":456507,"millis":0.456507,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":446107,"millis":0.446107,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:44.995 [print] https:\/\/haleconnect.com\/ows\/services\/org.874.cb9ca55e-f4e7-4bd8-a02e-75d528e22118_wfs\/org.874.0cd1d698-2439-4ebd-ae2c-71dd98d9b3d1?SERVICE=WFS&Request=GetCapabilities \n"},{"result":{"nanos":385205,"millis":0.385205,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":1367619,"millis":1.367619,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:44.996 [print] #notpresent \n"},{"result":{"nanos":357905,"millis":0.357905,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":488107,"millis":0.488107,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:44.997 [print] #notpresent \n"},{"result":{"nanos":38001,"millis":0.038001,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":191803,"millis":0.191803,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:44.997 [print] #notpresent \n"},{"result":{"nanos":365705,"millis":0.365705,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":661010,"millis":0.66101,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:44.998 [print] Koninklijk Nederlands Meteorologisch Instituut (KNMI) \n"},{"result":{"nanos":730511,"millis":0.730511,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:44.999 [print] https:\/\/haleconnect.com\/services\/bsp\/org.874.0cd1d698-2439-4ebd-ae2c-71dd98d9b3d1\/md\/dataset\/dataset1#xpointer%28%2F%2Fgmd%3AidentificationInfo%5B1%5D%2Fgmd%3AMD_DataIdentification%29 \n"},{"result":{"nanos":363205,"millis":0.363205,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":5301877,"millis":5.301877,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"56093b94-7517-456d-a0d4-338aba3d8c74\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":488907,"millis":0.488907,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"56093b94-7517-456d-a0d4-338aba3d8c74\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":562.194997,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"56093b94-7517-456d-a0d4-338aba3d8c74","startTime":1629213704442,"refId":"[1.55:67]","endTime":1629213705005,"exampleData":{"datasetIdentifierCode":"56093b94-7517-456d-a0d4-338aba3d8c74"},"exampleIndex":54},{"sectionIndex":0,"stepResults":[{"result":{"nanos":17500,"millis":0.0175,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:44.598 karate.env system property was: null \n"},{"result":{"nanos":27000,"millis":0.027,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":48401,"millis":0.048401,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":44901,"millis":0.044901,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":212303,"millis":0.212303,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":39001,"millis":0.039001,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":417706,"millis":0.417706,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":37901,"millis":0.037901,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":225803,"millis":0.225803,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":120202,"millis":0.120202,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":60501,"millis":0.060501,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":32901,"millis":0.032901,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17600,"millis":0.0176,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5400,"millis":0.0054,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":79402,"millis":0.079402,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'c1fb5983-5642-4334-962a-a341cef8c8ff'"}},{"result":{"nanos":8800,"millis":0.0088,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":555584600,"millis":555.5846,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":552908,"millis":0.552908,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'c1fb5983-5642-4334-962a-a341cef8c8ff'"}},{"result":{"nanos":464707,"millis":0.464707,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":412006,"millis":0.412006,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":396106,"millis":0.396106,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":517008,"millis":0.517008,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":463206,"millis":0.463206,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":28600,"millis":0.0286,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":401006,"millis":0.401006,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":364605,"millis":0.364605,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":356805,"millis":0.356805,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":70601,"millis":0.070601,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":1421821,"millis":1.421821,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:45.161 [print] https:\/\/haleconnect.com\/ows\/services\/org.874.cb9ca55e-f4e7-4bd8-a02e-75d528e22118_wms\/org.874.0cd1d698-2439-4ebd-ae2c-71dd98d9b3d1?SERVICE=WMS&Request=GetCapabilities \n"},{"result":{"nanos":366905,"millis":0.366905,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":79501,"millis":0.079501,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:45.161 [print] #notpresent \n"},{"result":{"nanos":428106,"millis":0.428106,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":69801,"millis":0.069801,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:45.162 [print] #notpresent \n"},{"result":{"nanos":28801,"millis":0.028801,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":56000,"millis":0.056,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:45.162 [print] #notpresent \n"},{"result":{"nanos":524907,"millis":0.524907,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":67200,"millis":0.0672,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:45.162 [print] Koninklijk Nederlands Meteorologisch Instituut (KNMI) \n"},{"result":{"nanos":59300,"millis":0.0593,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:45.162 [print] https:\/\/haleconnect.com\/services\/bsp\/org.874.0cd1d698-2439-4ebd-ae2c-71dd98d9b3d1\/md\/dataset\/dataset1#xpointer%28%2F%2Fgmd%3AidentificationInfo%5B1%5D%2Fgmd%3AMD_DataIdentification%29 \n"},{"result":{"nanos":458106,"millis":0.458106,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":754111,"millis":0.754111,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"c1fb5983-5642-4334-962a-a341cef8c8ff\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":1743925,"millis":1.743925,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"c1fb5983-5642-4334-962a-a341cef8c8ff\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":567.079164,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"c1fb5983-5642-4334-962a-a341cef8c8ff","startTime":1629213704597,"refId":"[1.56:67]","endTime":1629213705165,"exampleData":{"datasetIdentifierCode":"c1fb5983-5642-4334-962a-a341cef8c8ff"},"exampleIndex":55},{"sectionIndex":0,"stepResults":[{"result":{"nanos":17101,"millis":0.017101,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:44.862 karate.env system property was: null \n"},{"result":{"nanos":28000,"millis":0.028,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":49201,"millis":0.049201,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":50501,"millis":0.050501,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":223903,"millis":0.223903,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":51301,"millis":0.051301,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":362306,"millis":0.362306,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":71901,"millis":0.071901,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":64101,"millis":0.064101,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":112702,"millis":0.112702,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":4846369,"millis":4.846369,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":24000,"millis":0.024,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19800,"millis":0.0198,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":70901,"millis":0.070901,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '97312a37-4ebf-4526-94e6-b29e90c2944a'"}},{"result":{"nanos":6300,"millis":0.0063,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":538846259,"millis":538.846259,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5500,"millis":0.0055,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":554208,"millis":0.554208,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '97312a37-4ebf-4526-94e6-b29e90c2944a'"}},{"result":{"nanos":493708,"millis":0.493708,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":440406,"millis":0.440406,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":420806,"millis":0.420806,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":528607,"millis":0.528607,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":484207,"millis":0.484207,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":29200,"millis":0.0292,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":370006,"millis":0.370006,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":368205,"millis":0.368205,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":368406,"millis":0.368406,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":74501,"millis":0.074501,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":794612,"millis":0.794612,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:45.412 [print] https:\/\/haleconnect.com\/ows\/services\/org.874.cb9ca55e-f4e7-4bd8-a02e-75d528e22118_wfs\/org.874.42282e73-5afb-424d-993a-9e0a0cd3eeca?SERVICE=WFS&Request=GetCapabilities \n"},{"result":{"nanos":397806,"millis":0.397806,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":319204,"millis":0.319204,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:45.413 [print] #notpresent \n"},{"result":{"nanos":479006,"millis":0.479006,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":295004,"millis":0.295004,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:45.414 [print] #notpresent \n"},{"result":{"nanos":38201,"millis":0.038201,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":238103,"millis":0.238103,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:45.414 [print] #notpresent \n"},{"result":{"nanos":442507,"millis":0.442507,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":380306,"millis":0.380306,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:45.415 [print] Koninklijk Nederlands Meteorologisch Instituut (KNMI) \n"},{"result":{"nanos":486407,"millis":0.486407,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:45.415 [print] https:\/\/haleconnect.com\/services\/bsp\/org.874.42282e73-5afb-424d-993a-9e0a0cd3eeca\/md\/dataset\/dataset1#xpointer%28%2F%2Fgmd%3AidentificationInfo%5B1%5D%2Fgmd%3AMD_DataIdentification%29 \n"},{"result":{"nanos":359505,"millis":0.359505,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":718811,"millis":0.718811,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"97312a37-4ebf-4526-94e6-b29e90c2944a\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":394505,"millis":0.394505,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"97312a37-4ebf-4526-94e6-b29e90c2944a\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":554.340383,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"97312a37-4ebf-4526-94e6-b29e90c2944a","startTime":1629213704861,"refId":"[1.57:67]","endTime":1629213705417,"exampleData":{"datasetIdentifierCode":"97312a37-4ebf-4526-94e6-b29e90c2944a"},"exampleIndex":56},{"sectionIndex":0,"stepResults":[{"result":{"nanos":17101,"millis":0.017101,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:44.952 karate.env system property was: null \n"},{"result":{"nanos":28800,"millis":0.0288,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":50401,"millis":0.050401,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":47601,"millis":0.047601,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":447406,"millis":0.447406,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":58100,"millis":0.0581,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":370505,"millis":0.370505,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":33300,"millis":0.0333,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":77401,"millis":0.077401,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":305204,"millis":0.305204,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":66801,"millis":0.066801,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":17700,"millis":0.0177,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18300,"millis":0.0183,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":48500,"millis":0.0485,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'ac3ee940-4f98-427c-a2d9-58696005d9c2'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":532318365,"millis":532.318365,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5200,"millis":0.0052,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":510707,"millis":0.510707,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'ac3ee940-4f98-427c-a2d9-58696005d9c2'"}},{"result":{"nanos":402206,"millis":0.402206,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":351705,"millis":0.351705,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":341305,"millis":0.341305,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":446506,"millis":0.446506,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":389206,"millis":0.389206,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":23300,"millis":0.0233,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":319904,"millis":0.319904,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":308705,"millis":0.308705,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":303204,"millis":0.303204,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":73601,"millis":0.073601,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":722310,"millis":0.72231,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:45.490 [print] https:\/\/haleconnect.com\/ows\/services\/org.874.cb9ca55e-f4e7-4bd8-a02e-75d528e22118_wfs\/org.874.bbb462ca-d8a0-4582-a9f6-9707e3e953a3?SERVICE=WFS&Request=GetCapabilities \n"},{"result":{"nanos":334405,"millis":0.334405,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":206003,"millis":0.206003,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:45.491 [print] #notpresent \n"},{"result":{"nanos":329404,"millis":0.329404,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":181603,"millis":0.181603,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:45.492 [print] #notpresent \n"},{"result":{"nanos":31301,"millis":0.031301,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":152402,"millis":0.152402,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:45.492 [print] #notpresent \n"},{"result":{"nanos":373206,"millis":0.373206,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":218603,"millis":0.218603,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:45.492 [print] Koninklijk Nederlands Meteorologisch Instituut (KNMI) \n"},{"result":{"nanos":311305,"millis":0.311305,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:45.492 [print] https:\/\/haleconnect.com\/services\/bsp\/org.874.bbb462ca-d8a0-4582-a9f6-9707e3e953a3\/md\/dataset\/dataset1#xpointer%28%2F%2Fgmd%3AidentificationInfo%5B1%5D%2Fgmd%3AMD_DataIdentification%29 \n"},{"result":{"nanos":361805,"millis":0.361805,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":719711,"millis":0.719711,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"ac3ee940-4f98-427c-a2d9-58696005d9c2\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":481407,"millis":0.481407,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"ac3ee940-4f98-427c-a2d9-58696005d9c2\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":541.822499,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"ac3ee940-4f98-427c-a2d9-58696005d9c2","startTime":1629213704951,"refId":"[1.58:67]","endTime":1629213705494,"exampleData":{"datasetIdentifierCode":"ac3ee940-4f98-427c-a2d9-58696005d9c2"},"exampleIndex":57},{"sectionIndex":0,"stepResults":[{"result":{"nanos":17700,"millis":0.0177,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:45.008 karate.env system property was: null \n"},{"result":{"nanos":29101,"millis":0.029101,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":48200,"millis":0.0482,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":48400,"millis":0.0484,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":221304,"millis":0.221304,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":40600,"millis":0.0406,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":383906,"millis":0.383906,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":35801,"millis":0.035801,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":420506,"millis":0.420506,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":128802,"millis":0.128802,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":62101,"millis":0.062101,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":17800,"millis":0.0178,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19901,"millis":0.019901,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":64201,"millis":0.064201,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'efb5222c-112a-4c57-9bbf-f2af918cb9b5'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3700,"millis":0.0037,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":529632926,"millis":529.632926,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":431707,"millis":0.431707,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'efb5222c-112a-4c57-9bbf-f2af918cb9b5'"}},{"result":{"nanos":374305,"millis":0.374305,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":352906,"millis":0.352906,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":329104,"millis":0.329104,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":417806,"millis":0.417806,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":358605,"millis":0.358605,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":23901,"millis":0.023901,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":276704,"millis":0.276704,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":314304,"millis":0.314304,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":303004,"millis":0.303004,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":57501,"millis":0.057501,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":134602,"millis":0.134602,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:45.543 [print] https:\/\/inspire.caris.nl\/atom\/maritieme-grenzen-zones-noordzee-aansluitende-zone-feed.atom \n"},{"result":{"nanos":309605,"millis":0.309605,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":65901,"millis":0.065901,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:45.543 [print] #notpresent \n"},{"result":{"nanos":288504,"millis":0.288504,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":65301,"millis":0.065301,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:45.544 [print] INSPIRE Atom \n"},{"result":{"nanos":26501,"millis":0.026501,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":56001,"millis":0.056001,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:45.544 [print] #notpresent \n"},{"result":{"nanos":336105,"millis":0.336105,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":63601,"millis":0.063601,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:45.544 [print] Ministerie van Defensie, Koninklijke Marine, Dienst der Hydrografie \n"},{"result":{"nanos":52701,"millis":0.052701,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:45.544 [print] https:\/\/www.nationaalgeoregister.nl:443\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=4cda487b-c467-490c-a843-6563fec016be#MD_DataIdentification \n"},{"result":{"nanos":325804,"millis":0.325804,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":548307,"millis":0.548307,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"efb5222c-112a-4c57-9bbf-f2af918cb9b5\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":396205,"millis":0.396205,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"efb5222c-112a-4c57-9bbf-f2af918cb9b5\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":537.103634,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"efb5222c-112a-4c57-9bbf-f2af918cb9b5","startTime":1629213705007,"refId":"[1.59:67]","endTime":1629213705546,"exampleData":{"datasetIdentifierCode":"efb5222c-112a-4c57-9bbf-f2af918cb9b5"},"exampleIndex":58},{"sectionIndex":0,"stepResults":[{"result":{"nanos":18200,"millis":0.0182,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:45.168 karate.env system property was: null \n"},{"result":{"nanos":30100,"millis":0.0301,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":54900,"millis":0.0549,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":51100,"millis":0.0511,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":229104,"millis":0.229104,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":46801,"millis":0.046801,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":403105,"millis":0.403105,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":38400,"millis":0.0384,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":458807,"millis":0.458807,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":114102,"millis":0.114102,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":77201,"millis":0.077201,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":18500,"millis":0.0185,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":22700,"millis":0.0227,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":63901,"millis":0.063901,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '9fd2324b-9e02-4eab-bd4a-8e2be4fcd545'"}},{"result":{"nanos":5600,"millis":0.0056,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3500,"millis":0.0035,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":543817830,"millis":543.81783,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":514207,"millis":0.514207,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '9fd2324b-9e02-4eab-bd4a-8e2be4fcd545'"}},{"result":{"nanos":416806,"millis":0.416806,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":382706,"millis":0.382706,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":356005,"millis":0.356005,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":657710,"millis":0.65771,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":428106,"millis":0.428106,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":28301,"millis":0.028301,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":397205,"millis":0.397205,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":362005,"millis":0.362005,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":329705,"millis":0.329705,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":89501,"millis":0.089501,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":130901,"millis":0.130901,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:45.718 [print] https:\/\/inspire.rivm.nl\/geoserver\/airq\/wfs? \n"},{"result":{"nanos":328304,"millis":0.328304,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":119301,"millis":0.119301,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:45.719 [print] #notpresent \n"},{"result":{"nanos":398305,"millis":0.398305,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":106802,"millis":0.106802,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:45.719 [print] OGC:WFS \n"},{"result":{"nanos":32801,"millis":0.032801,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":52100,"millis":0.0521,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:45.719 [print] #notpresent \n"},{"result":{"nanos":401405,"millis":0.401405,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":101801,"millis":0.101801,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:45.720 [print] RIVM \n"},{"result":{"nanos":77701,"millis":0.077701,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:45.720 [print] http:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/en\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=2cc2c30c-91b8-412a-a060-e84d25272581 \n"},{"result":{"nanos":413205,"millis":0.413205,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":649209,"millis":0.649209,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"9fd2324b-9e02-4eab-bd4a-8e2be4fcd545\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":458107,"millis":0.458107,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"9fd2324b-9e02-4eab-bd4a-8e2be4fcd545\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":552.70065,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"9fd2324b-9e02-4eab-bd4a-8e2be4fcd545","startTime":1629213705167,"refId":"[1.60:67]","endTime":1629213705721,"exampleData":{"datasetIdentifierCode":"9fd2324b-9e02-4eab-bd4a-8e2be4fcd545"},"exampleIndex":59},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16901,"millis":0.016901,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:45.419 karate.env system property was: null \n"},{"result":{"nanos":33300,"millis":0.0333,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":48801,"millis":0.048801,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":47201,"millis":0.047201,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":227303,"millis":0.227303,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":53501,"millis":0.053501,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":377706,"millis":0.377706,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":30600,"millis":0.0306,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":240004,"millis":0.240004,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":117502,"millis":0.117502,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":61701,"millis":0.061701,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":16200,"millis":0.0162,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19400,"millis":0.0194,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5200,"millis":0.0052,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":48701,"millis":0.048701,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '5d3fc8f8-5cb4-42e2-8f9b-62c147f36cc5'"}},{"result":{"nanos":6100,"millis":0.0061,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":5400,"millis":0.0054,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":531027046,"millis":531.027046,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":6500,"millis":0.0065,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":625309,"millis":0.625309,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '5d3fc8f8-5cb4-42e2-8f9b-62c147f36cc5'"}},{"result":{"nanos":503607,"millis":0.503607,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":473407,"millis":0.473407,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":413806,"millis":0.413806,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":510308,"millis":0.510308,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":380805,"millis":0.380805,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":33100,"millis":0.0331,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":300505,"millis":0.300505,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":297904,"millis":0.297904,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":357105,"millis":0.357105,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":100701,"millis":0.100701,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":495707,"millis":0.495707,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:45.956 [print] https:\\\/\\\/inspire.rivm.nl\\\/geoserver\\\/wfs?request=GetCapabilities \n"},{"result":{"nanos":358005,"millis":0.358005,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":103201,"millis":0.103201,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:45.957 [print] OGC:WFS \n"},{"result":{"nanos":344005,"millis":0.344005,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":181102,"millis":0.181102,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:45.957 [print] INSPIRE Atom \n"},{"result":{"nanos":32501,"millis":0.032501,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":159602,"millis":0.159602,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:45.958 [print] OGC:WFS \n"},{"result":{"nanos":367106,"millis":0.367106,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":207103,"millis":0.207103,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:45.958 [print] Rijksinstituut voor Volksgezondheid en Milieu \n"},{"result":{"nanos":47501,"millis":0.047501,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:45.958 [print] http:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=e1e99000-ec47-4e9f-84a5-adad24fef0dc#MD_DataIdentification \n"},{"result":{"nanos":362206,"millis":0.362206,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":684710,"millis":0.68471,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"5d3fc8f8-5cb4-42e2-8f9b-62c147f36cc5\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":477307,"millis":0.477307,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"5d3fc8f8-5cb4-42e2-8f9b-62c147f36cc5\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":540.21068,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"5d3fc8f8-5cb4-42e2-8f9b-62c147f36cc5","startTime":1629213705419,"refId":"[1.61:67]","endTime":1629213705960,"exampleData":{"datasetIdentifierCode":"5d3fc8f8-5cb4-42e2-8f9b-62c147f36cc5"},"exampleIndex":60},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16700,"millis":0.0167,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:45.496 karate.env system property was: null \n"},{"result":{"nanos":29401,"millis":0.029401,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":47400,"millis":0.0474,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":48400,"millis":0.0484,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":247004,"millis":0.247004,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":42301,"millis":0.042301,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":382105,"millis":0.382105,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":35800,"millis":0.0358,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":51001,"millis":0.051001,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":114401,"millis":0.114401,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":59201,"millis":0.059201,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":16201,"millis":0.016201,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18700,"millis":0.0187,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5500,"millis":0.0055,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":49401,"millis":0.049401,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '7d533012-21ad-4a5b-a97e-a76988270273'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":544549141,"millis":544.549141,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5400,"millis":0.0054,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":594508,"millis":0.594508,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '7d533012-21ad-4a5b-a97e-a76988270273'"}},{"result":{"nanos":484107,"millis":0.484107,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":421106,"millis":0.421106,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":408706,"millis":0.408706,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":548008,"millis":0.548008,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":565508,"millis":0.565508,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":32900,"millis":0.0329,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":358505,"millis":0.358505,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":348105,"millis":0.348105,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":291504,"millis":0.291504,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":338105,"millis":0.338105,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":352205,"millis":0.352205,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:46.048 [print] https:\/\/haleconnect.com\/services\/bsp\/org.874.512633c0-2899-4f9d-b2d1-1bd51cb2315a\/service\/atom\/id_predefined_dataset \n"},{"result":{"nanos":319504,"millis":0.319504,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":240204,"millis":0.240204,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:46.048 [print] #notpresent \n"},{"result":{"nanos":382006,"millis":0.382006,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":199303,"millis":0.199303,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:46.049 [print] #notpresent \n"},{"result":{"nanos":32500,"millis":0.0325,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":152303,"millis":0.152303,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:46.049 [print] #notpresent \n"},{"result":{"nanos":398905,"millis":0.398905,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":191302,"millis":0.191302,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:46.050 [print] KNMI \n"},{"result":{"nanos":318504,"millis":0.318504,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:46.050 [print] https:\/\/haleconnect.com\/services\/bsp\/org.874.512633c0-2899-4f9d-b2d1-1bd51cb2315a\/md\/dataset\/dataset1#xpointer%28%2F%2Fgmd%3AidentificationInfo%5B1%5D%2Fgmd%3AMD_DataIdentification%29 \n"},{"result":{"nanos":353005,"millis":0.353005,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":1335119,"millis":1.335119,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"7d533012-21ad-4a5b-a97e-a76988270273\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":2543537,"millis":2.543537,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"7d533012-21ad-4a5b-a97e-a76988270273\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":556.940516,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"7d533012-21ad-4a5b-a97e-a76988270273","startTime":1629213705496,"refId":"[1.62:67]","endTime":1629213706054,"exampleData":{"datasetIdentifierCode":"7d533012-21ad-4a5b-a97e-a76988270273"},"exampleIndex":61},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16700,"millis":0.0167,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:45.547 karate.env system property was: null \n"},{"result":{"nanos":27701,"millis":0.027701,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":45901,"millis":0.045901,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":76501,"millis":0.076501,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":215303,"millis":0.215303,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":42801,"millis":0.042801,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":362805,"millis":0.362805,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":34801,"millis":0.034801,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":75001,"millis":0.075001,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":109402,"millis":0.109402,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":377905,"millis":0.377905,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":47101,"millis":0.047101,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18201,"millis":0.018201,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":6500,"millis":0.0065,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5200,"millis":0.0052,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":46401,"millis":0.046401,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'f59357eb-185f-42a5-b465-90bfa6e3e416'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":543670829,"millis":543.670829,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":564108,"millis":0.564108,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'f59357eb-185f-42a5-b465-90bfa6e3e416'"}},{"result":{"nanos":427106,"millis":0.427106,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":352305,"millis":0.352305,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":373106,"millis":0.373106,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":442606,"millis":0.442606,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":402806,"millis":0.402806,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":35001,"millis":0.035001,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":314204,"millis":0.314204,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":307104,"millis":0.307104,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":328805,"millis":0.328805,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":103202,"millis":0.103202,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":420106,"millis":0.420106,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:46.097 [print] https:\\\/\\\/inspire.rivm.nl\\\/geoserver\\\/wfs?request=GetCapabilities \n"},{"result":{"nanos":329505,"millis":0.329505,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":245804,"millis":0.245804,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:46.098 [print] OGC:WFS \n"},{"result":{"nanos":327904,"millis":0.327904,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":197902,"millis":0.197902,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:46.098 [print] INSPIRE Atom \n"},{"result":{"nanos":33900,"millis":0.0339,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":153202,"millis":0.153202,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:46.099 [print] OGC:WFS \n"},{"result":{"nanos":405205,"millis":0.405205,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":233103,"millis":0.233103,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:46.099 [print] Rijksinstituut voor Volksgezondheid en Milieu \n"},{"result":{"nanos":360205,"millis":0.360205,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:46.100 [print] http:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=32a21114-8694-40ce-ab76-9dcd885c7861#MD_DataIdentification \n"},{"result":{"nanos":400706,"millis":0.400706,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":675810,"millis":0.67581,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"f59357eb-185f-42a5-b465-90bfa6e3e416\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":838812,"millis":0.838812,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"f59357eb-185f-42a5-b465-90bfa6e3e416\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":553.46487,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"f59357eb-185f-42a5-b465-90bfa6e3e416","startTime":1629213705547,"refId":"[1.63:67]","endTime":1629213706102,"exampleData":{"datasetIdentifierCode":"f59357eb-185f-42a5-b465-90bfa6e3e416"},"exampleIndex":62},{"sectionIndex":0,"stepResults":[{"result":{"nanos":18700,"millis":0.0187,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:45.724 karate.env system property was: null \n"},{"result":{"nanos":32001,"millis":0.032001,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":53201,"millis":0.053201,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":98101,"millis":0.098101,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":236504,"millis":0.236504,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":47801,"millis":0.047801,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":445706,"millis":0.445706,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":42400,"millis":0.0424,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":85501,"millis":0.085501,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":132802,"millis":0.132802,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":68101,"millis":0.068101,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":51601,"millis":0.051601,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":138102,"millis":0.138102,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":6500,"millis":0.0065,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5400,"millis":0.0054,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":56301,"millis":0.056301,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '87a382da-c6dc-403c-a006-2379eb6daaa6'"}},{"result":{"nanos":5400,"millis":0.0054,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":523195534,"millis":523.195534,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":6400,"millis":0.0064,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":519907,"millis":0.519907,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '87a382da-c6dc-403c-a006-2379eb6daaa6'"}},{"result":{"nanos":417006,"millis":0.417006,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":352805,"millis":0.352805,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":352205,"millis":0.352205,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":431407,"millis":0.431407,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":394406,"millis":0.394406,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":27200,"millis":0.0272,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":319705,"millis":0.319705,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":314505,"millis":0.314505,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":311004,"millis":0.311004,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":2888641,"millis":2.888641,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":400606,"millis":0.400606,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:46.256 [print] https:\/\/inspire.caris.nl\/gs5\/pssa_nl\/ows?service=WMS&version=1.3.0&request=GetCapabilities \n"},{"result":{"nanos":497307,"millis":0.497307,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":266404,"millis":0.266404,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:46.257 [print] OGC:WMS \n"},{"result":{"nanos":384405,"millis":0.384405,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":228803,"millis":0.228803,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:46.258 [print] #notpresent \n"},{"result":{"nanos":37201,"millis":0.037201,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":162102,"millis":0.162102,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:46.258 [print] OGC:WMS \n"},{"result":{"nanos":395106,"millis":0.395106,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":257404,"millis":0.257404,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:46.259 [print] Ministerie van Defensie, Koninklijke Marine, Dienst der Hydrografie \n"},{"result":{"nanos":409306,"millis":0.409306,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:46.259 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=f1d27179-36eb-4376-8048-f51d2eb23a09&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full#MD_DataIdentification \n"},{"result":{"nanos":376906,"millis":0.376906,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":707810,"millis":0.70781,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"87a382da-c6dc-403c-a006-2379eb6daaa6\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":5790584,"millis":5.790584,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"87a382da-c6dc-403c-a006-2379eb6daaa6\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":540.973491,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"87a382da-c6dc-403c-a006-2379eb6daaa6","startTime":1629213705723,"refId":"[1.64:67]","endTime":1629213706266,"exampleData":{"datasetIdentifierCode":"87a382da-c6dc-403c-a006-2379eb6daaa6"},"exampleIndex":63},{"sectionIndex":0,"stepResults":[{"result":{"nanos":24100,"millis":0.0241,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:45.963 karate.env system property was: null \n"},{"result":{"nanos":30400,"millis":0.0304,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":56601,"millis":0.056601,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":49501,"millis":0.049501,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":287104,"millis":0.287104,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":48401,"millis":0.048401,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":405206,"millis":0.405206,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":55801,"millis":0.055801,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":265004,"millis":0.265004,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":143802,"millis":0.143802,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":63701,"millis":0.063701,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":19900,"millis":0.0199,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19200,"millis":0.0192,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4201,"millis":0.004201,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":617008,"millis":0.617008,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'b7880739-a701-4cc0-bb32-2bba61fa8924'"}},{"result":{"nanos":17600,"millis":0.0176,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":534938203,"millis":534.938203,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":6201,"millis":0.006201,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":595408,"millis":0.595408,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'b7880739-a701-4cc0-bb32-2bba61fa8924'"}},{"result":{"nanos":537507,"millis":0.537507,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":422606,"millis":0.422606,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":412606,"millis":0.412606,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":585309,"millis":0.585309,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":457006,"millis":0.457006,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":29200,"millis":0.0292,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":344005,"millis":0.344005,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":336105,"millis":0.336105,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":337805,"millis":0.337805,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":75401,"millis":0.075401,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":406206,"millis":0.406206,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:46.505 [print] https:\/\/www.gdngeoservices.nl\/inspire\/wms\/aardwarmte?service=WMS&request=GetCapabilities \n"},{"result":{"nanos":466007,"millis":0.466007,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":85101,"millis":0.085101,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:46.506 [print] #notpresent \n"},{"result":{"nanos":314905,"millis":0.314905,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":69101,"millis":0.069101,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:46.506 [print] OGC:WMS \n"},{"result":{"nanos":28000,"millis":0.028,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":36500,"millis":0.0365,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:46.506 [print] #notpresent \n"},{"result":{"nanos":382006,"millis":0.382006,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":116902,"millis":0.116902,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:46.507 [print] TNO Geologische Dienst Nederland \n"},{"result":{"nanos":38600,"millis":0.0386,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:46.507 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire?SERVICE=CSW&version=2.0.2&REQUEST=GetRecordById&ID=11a292bd-9022-4a9f-b1bf-02f5c89ad74a&OUTPUTSCHEMA=http:\/\/www.isotc211.org\/2005\/gmd&ELEMENTSETNAME=full#MD_DataIdentification \n"},{"result":{"nanos":371406,"millis":0.371406,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":762811,"millis":0.762811,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"b7880739-a701-4cc0-bb32-2bba61fa8924\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":440507,"millis":0.440507,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"b7880739-a701-4cc0-bb32-2bba61fa8924\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":544.712344,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"b7880739-a701-4cc0-bb32-2bba61fa8924","startTime":1629213705962,"refId":"[1.65:67]","endTime":1629213706508,"exampleData":{"datasetIdentifierCode":"b7880739-a701-4cc0-bb32-2bba61fa8924"},"exampleIndex":64},{"sectionIndex":0,"stepResults":[{"result":{"nanos":19500,"millis":0.0195,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:46.057 karate.env system property was: null \n"},{"result":{"nanos":32801,"millis":0.032801,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":53401,"millis":0.053401,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":50401,"millis":0.050401,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":257004,"millis":0.257004,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":43800,"millis":0.0438,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":406106,"millis":0.406106,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":33901,"millis":0.033901,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":184803,"millis":0.184803,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":132002,"millis":0.132002,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":62101,"millis":0.062101,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":16800,"millis":0.0168,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":33601,"millis":0.033601,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5400,"millis":0.0054,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":91701,"millis":0.091701,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '923a666c-ee4f-496c-8c85-94d5f81e1f30'"}},{"result":{"nanos":6300,"millis":0.0063,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":518817471,"millis":518.817471,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":6400,"millis":0.0064,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":515208,"millis":0.515208,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '923a666c-ee4f-496c-8c85-94d5f81e1f30'"}},{"result":{"nanos":452107,"millis":0.452107,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":387105,"millis":0.387105,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":393705,"millis":0.393705,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":460607,"millis":0.460607,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":428607,"millis":0.428607,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":30600,"millis":0.0306,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":322105,"millis":0.322105,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":335805,"millis":0.335805,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":333705,"millis":0.333705,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":74301,"millis":0.074301,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":1272418,"millis":1.272418,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:46.582 [print] https:\/\/inspire.caris.nl\/gs5\/am\/wfs?service=WFS&request=GetCapabilities&service=WFS&version=2.0.0 \n"},{"result":{"nanos":376406,"millis":0.376406,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":546608,"millis":0.546608,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:46.584 [print] OGC:WFS \n"},{"result":{"nanos":366705,"millis":0.366705,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":521908,"millis":0.521908,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:46.585 [print] #notpresent \n"},{"result":{"nanos":45101,"millis":0.045101,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":487707,"millis":0.487707,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:46.585 [print] OGC:WFS \n"},{"result":{"nanos":429606,"millis":0.429606,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":678109,"millis":0.678109,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:46.586 [print] Ministerie van Defensie, Koninklijke Marine, Dienst der Hydrografie \n"},{"result":{"nanos":669709,"millis":0.669709,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:46.587 [print] https:\/\/www.nationaalgeoregister.nl:443\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=4617f0e0-6af4-4ac0-9044-31df9d03071c#MD_DataIdentification \n"},{"result":{"nanos":342804,"millis":0.342804,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":714010,"millis":0.71401,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"923a666c-ee4f-496c-8c85-94d5f81e1f30\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":410706,"millis":0.410706,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"923a666c-ee4f-496c-8c85-94d5f81e1f30\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":530.858345,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"923a666c-ee4f-496c-8c85-94d5f81e1f30","startTime":1629213706057,"refId":"[1.66:67]","endTime":1629213706589,"exampleData":{"datasetIdentifierCode":"923a666c-ee4f-496c-8c85-94d5f81e1f30"},"exampleIndex":65},{"sectionIndex":0,"stepResults":[{"result":{"nanos":21901,"millis":0.021901,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:46.105 karate.env system property was: null \n"},{"result":{"nanos":856312,"millis":0.856312,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":69101,"millis":0.069101,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":52300,"millis":0.0523,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":240904,"millis":0.240904,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":52601,"millis":0.052601,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":393506,"millis":0.393506,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":58401,"millis":0.058401,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":177602,"millis":0.177602,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":136902,"millis":0.136902,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":59100,"millis":0.0591,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":27500,"millis":0.0275,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19600,"millis":0.0196,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":79901,"millis":0.079901,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '17ad94f6-4961-448b-a6f5-5368b7870409'"}},{"result":{"nanos":5200,"millis":0.0052,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":527722499,"millis":527.722499,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":458407,"millis":0.458407,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '17ad94f6-4961-448b-a6f5-5368b7870409'"}},{"result":{"nanos":366505,"millis":0.366505,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":323905,"millis":0.323905,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":406506,"millis":0.406506,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":381906,"millis":0.381906,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":861812,"millis":0.861812,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":25701,"millis":0.025701,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":238203,"millis":0.238203,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":238203,"millis":0.238203,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":235304,"millis":0.235304,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":63601,"millis":0.063601,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":1107516,"millis":1.107516,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:46.640 [print] https:\/\/inspire.caris.nl\/geoserver3\/bathy_wcs\/wms?request=GetCapabilities \n"},{"result":{"nanos":328305,"millis":0.328305,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":434706,"millis":0.434706,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:46.640 [print] OGC:WMS \n"},{"result":{"nanos":805512,"millis":0.805512,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":66301,"millis":0.066301,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:46.641 [print] #notpresent \n"},{"result":{"nanos":41501,"millis":0.041501,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":400906,"millis":0.400906,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:46.642 [print] OGC:WMS \n"},{"result":{"nanos":323605,"millis":0.323605,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":497307,"millis":0.497307,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:46.643 [print] Ministerie van Defensie, Koninklijke Marine, Dienst der Hydrografie \n"},{"result":{"nanos":613009,"millis":0.613009,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:46.643 [print] http:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/xml.metadata.get?uuid=a322184d-6285-4856-bb78-f450b30ffc0e#MD_DataIdentification \n"},{"result":{"nanos":341205,"millis":0.341205,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":632809,"millis":0.632809,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"17ad94f6-4961-448b-a6f5-5368b7870409\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":461406,"millis":0.461406,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"17ad94f6-4961-448b-a6f5-5368b7870409\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":539.645671,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"17ad94f6-4961-448b-a6f5-5368b7870409","startTime":1629213706103,"refId":"[1.67:67]","endTime":1629213706645,"exampleData":{"datasetIdentifierCode":"17ad94f6-4961-448b-a6f5-5368b7870409"},"exampleIndex":66},{"sectionIndex":0,"stepResults":[{"result":{"nanos":32500,"millis":0.0325,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:46.270 karate.env system property was: null \n"},{"result":{"nanos":43601,"millis":0.043601,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":59601,"millis":0.059601,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":56201,"millis":0.056201,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":306105,"millis":0.306105,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":53401,"millis":0.053401,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":907113,"millis":0.907113,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":57401,"millis":0.057401,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":251604,"millis":0.251604,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":153402,"millis":0.153402,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":68401,"millis":0.068401,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":19301,"millis":0.019301,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":21100,"millis":0.0211,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5701,"millis":0.005701,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":128402,"millis":0.128402,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '5255c080-5f4e-4f7a-8a2c-6ac9d0103288'"}},{"result":{"nanos":6900,"millis":0.0069,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":522685826,"millis":522.685826,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5900,"millis":0.0059,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":546608,"millis":0.546608,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '5255c080-5f4e-4f7a-8a2c-6ac9d0103288'"}},{"result":{"nanos":453607,"millis":0.453607,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":392006,"millis":0.392006,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":927513,"millis":0.927513,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":450506,"millis":0.450506,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":396106,"millis":0.396106,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":28801,"millis":0.028801,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":287704,"millis":0.287704,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":285304,"millis":0.285304,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":826912,"millis":0.826912,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":76501,"millis":0.076501,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":112101,"millis":0.112101,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:46.800 [print] https:\/\/inspire.rivm.nl\/geoserver\/wfs? \n"},{"result":{"nanos":734110,"millis":0.73411,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":84501,"millis":0.084501,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:46.801 [print] #notpresent \n"},{"result":{"nanos":585308,"millis":0.585308,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":77701,"millis":0.077701,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:46.801 [print] OGC:WFS \n"},{"result":{"nanos":220803,"millis":0.220803,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":47401,"millis":0.047401,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:46.802 [print] #notpresent \n"},{"result":{"nanos":542308,"millis":0.542308,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":69901,"millis":0.069901,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:46.802 [print] RIVM \n"},{"result":{"nanos":242004,"millis":0.242004,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:46.803 [print] http:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/en\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=f8d840bc-18df-4449-b797-b9adcb81d3ec \n"},{"result":{"nanos":1338619,"millis":1.338619,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":737211,"millis":0.737211,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"5255c080-5f4e-4f7a-8a2c-6ac9d0103288\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":459007,"millis":0.459007,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"5255c080-5f4e-4f7a-8a2c-6ac9d0103288\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":534.794503,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"5255c080-5f4e-4f7a-8a2c-6ac9d0103288","startTime":1629213706268,"refId":"[1.68:67]","endTime":1629213706805,"exampleData":{"datasetIdentifierCode":"5255c080-5f4e-4f7a-8a2c-6ac9d0103288"},"exampleIndex":67},{"sectionIndex":0,"stepResults":[{"result":{"nanos":24800,"millis":0.0248,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:46.510 karate.env system property was: null \n"},{"result":{"nanos":36001,"millis":0.036001,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":53001,"millis":0.053001,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":49901,"millis":0.049901,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":231203,"millis":0.231203,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":43101,"millis":0.043101,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":460907,"millis":0.460907,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":36000,"millis":0.036,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":49900,"millis":0.0499,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":119702,"millis":0.119702,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":63301,"millis":0.063301,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":24801,"millis":0.024801,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":30200,"millis":0.0302,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":44401,"millis":0.044401,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":55601,"millis":0.055601,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '94ed09fe-1753-4861-8c62-d66251b7cde3'"}},{"result":{"nanos":6200,"millis":0.0062,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":539321065,"millis":539.321065,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":6600,"millis":0.0066,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":582809,"millis":0.582809,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '94ed09fe-1753-4861-8c62-d66251b7cde3'"}},{"result":{"nanos":1026915,"millis":1.026915,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":440706,"millis":0.440706,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":404705,"millis":0.404705,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":468406,"millis":0.468406,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":418106,"millis":0.418106,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":30201,"millis":0.030201,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":321405,"millis":0.321405,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":359705,"millis":0.359705,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":330905,"millis":0.330905,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":73601,"millis":0.073601,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":161903,"millis":0.161903,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:47.057 [print] https:\/\/haleconnect.com\/ows\/services\/org.874.cb9ca55e-f4e7-4bd8-a02e-75d528e22118_wms\/org.874.42282e73-5afb-424d-993a-9e0a0cd3eeca?SERVICE=WMS&Request=GetCapabilities \n"},{"result":{"nanos":278404,"millis":0.278404,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":103302,"millis":0.103302,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:47.057 [print] #notpresent \n"},{"result":{"nanos":292204,"millis":0.292204,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":89501,"millis":0.089501,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:47.058 [print] #notpresent \n"},{"result":{"nanos":27300,"millis":0.0273,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":45301,"millis":0.045301,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:47.058 [print] #notpresent \n"},{"result":{"nanos":394106,"millis":0.394106,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":76101,"millis":0.076101,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:47.058 [print] Koninklijk Nederlands Meteorologisch Instituut (KNMI) \n"},{"result":{"nanos":41601,"millis":0.041601,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:47.058 [print] https:\/\/haleconnect.com\/services\/bsp\/org.874.42282e73-5afb-424d-993a-9e0a0cd3eeca\/md\/dataset\/dataset1#xpointer%28%2F%2Fgmd%3AidentificationInfo%5B1%5D%2Fgmd%3AMD_DataIdentification%29 \n"},{"result":{"nanos":369105,"millis":0.369105,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":653610,"millis":0.65361,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"94ed09fe-1753-4861-8c62-d66251b7cde3\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":423806,"millis":0.423806,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"94ed09fe-1753-4861-8c62-d66251b7cde3\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":548.080393,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"94ed09fe-1753-4861-8c62-d66251b7cde3","startTime":1629213706510,"refId":"[1.69:67]","endTime":1629213707060,"exampleData":{"datasetIdentifierCode":"94ed09fe-1753-4861-8c62-d66251b7cde3"},"exampleIndex":68},{"sectionIndex":0,"stepResults":[{"result":{"nanos":17000,"millis":0.017,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:46.591 karate.env system property was: null \n"},{"result":{"nanos":38901,"millis":0.038901,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":46801,"millis":0.046801,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":45900,"millis":0.0459,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":223603,"millis":0.223603,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":38201,"millis":0.038201,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":362205,"millis":0.362205,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":31501,"millis":0.031501,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":43400,"millis":0.0434,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":538608,"millis":0.538608,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":70201,"millis":0.070201,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":18501,"millis":0.018501,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19100,"millis":0.0191,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":65200,"millis":0.0652,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'bd14098b-44e6-47e5-959d-f40dda65da5a'"}},{"result":{"nanos":5300,"millis":0.0053,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":536671828,"millis":536.671828,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5600,"millis":0.0056,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":578408,"millis":0.578408,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'bd14098b-44e6-47e5-959d-f40dda65da5a'"}},{"result":{"nanos":536208,"millis":0.536208,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":452707,"millis":0.452707,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":448906,"millis":0.448906,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":548707,"millis":0.548707,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":514907,"millis":0.514907,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":28601,"millis":0.028601,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":363605,"millis":0.363605,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":351605,"millis":0.351605,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":351805,"millis":0.351805,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":86601,"millis":0.086601,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":154303,"millis":0.154303,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:47.135 [print] https:\/\/inspire.rivm.nl\/geoserver\/wms?request=GetCapabilities \n"},{"result":{"nanos":372905,"millis":0.372905,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":107002,"millis":0.107002,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:47.135 [print] OGC:WMS \n"},{"result":{"nanos":363405,"millis":0.363405,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":114101,"millis":0.114101,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:47.136 [print] #notpresent \n"},{"result":{"nanos":34101,"millis":0.034101,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":54601,"millis":0.054601,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:47.136 [print] OGC:WMS \n"},{"result":{"nanos":543808,"millis":0.543808,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":84901,"millis":0.084901,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:47.137 [print] Rijksinstituut voor Volksgezondheid en Milieu \n"},{"result":{"nanos":70801,"millis":0.070801,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:47.137 [print] http:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=d9baa847-4652-4588-abe1-0b050f40f27f#MD_DataIdentification \n"},{"result":{"nanos":476706,"millis":0.476706,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":690510,"millis":0.69051,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"bd14098b-44e6-47e5-959d-f40dda65da5a\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":463707,"millis":0.463707,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"bd14098b-44e6-47e5-959d-f40dda65da5a\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":546.048161,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"bd14098b-44e6-47e5-959d-f40dda65da5a","startTime":1629213706591,"refId":"[1.70:67]","endTime":1629213707139,"exampleData":{"datasetIdentifierCode":"bd14098b-44e6-47e5-959d-f40dda65da5a"},"exampleIndex":69},{"sectionIndex":0,"stepResults":[{"result":{"nanos":19901,"millis":0.019901,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:46.648 karate.env system property was: null \n"},{"result":{"nanos":28100,"millis":0.0281,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":50001,"millis":0.050001,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":46101,"millis":0.046101,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":283304,"millis":0.283304,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":43201,"millis":0.043201,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":389606,"millis":0.389606,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":32300,"millis":0.0323,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":60701,"millis":0.060701,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":131101,"millis":0.131101,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":68701,"millis":0.068701,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":18400,"millis":0.0184,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17800,"millis":0.0178,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":8200,"millis":0.0082,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":60901,"millis":0.060901,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'd467c2cc-4026-b80a-d4e1a9d2bf79'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":528841215,"millis":528.841215,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5600,"millis":0.0056,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":522907,"millis":0.522907,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'd467c2cc-4026-b80a-d4e1a9d2bf79'"}},{"result":{"nanos":463406,"millis":0.463406,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":409005,"millis":0.409005,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":435606,"millis":0.435606,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":486407,"millis":0.486407,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":455507,"millis":0.455507,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":24700,"millis":0.0247,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":329704,"millis":0.329704,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":315904,"millis":0.315904,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":377006,"millis":0.377006,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":69001,"millis":0.069001,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":1251318,"millis":1.251318,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:47.185 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/nl\\\/rws\\\/hy-n\\\/wfs?request=GetCapabilities&service=WFS \n"},{"result":{"nanos":397506,"millis":0.397506,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":332205,"millis":0.332205,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:47.185 [print] [\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":403306,"millis":0.403306,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":72601,"millis":0.072601,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:47.186 [print] #notpresent \n"},{"result":{"nanos":36701,"millis":0.036701,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":211703,"millis":0.211703,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:47.186 [print] [\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":479607,"millis":0.479607,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":66201,"millis":0.066201,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:47.187 [print] Beheer PDOK \n"},{"result":{"nanos":571109,"millis":0.571109,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:47.188 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=eu-f297898-2640-44c2-bbe9-c0480da83794#MD_DataIdentification \n"},{"result":{"nanos":415806,"millis":0.415806,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":633709,"millis":0.633709,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"d467c2cc-4026-b80a-d4e1a9d2bf79\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":410106,"millis":0.410106,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"d467c2cc-4026-b80a-d4e1a9d2bf79\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":539.289364,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"d467c2cc-4026-b80a-d4e1a9d2bf79","startTime":1629213706647,"refId":"[1.71:67]","endTime":1629213707189,"exampleData":{"datasetIdentifierCode":"d467c2cc-4026-b80a-d4e1a9d2bf79"},"exampleIndex":70},{"sectionIndex":0,"stepResults":[{"result":{"nanos":27501,"millis":0.027501,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:46.807 karate.env system property was: null \n"},{"result":{"nanos":30000,"millis":0.03,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":46900,"millis":0.0469,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":45601,"millis":0.045601,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":258604,"millis":0.258604,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":56401,"millis":0.056401,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":357205,"millis":0.357205,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":29301,"millis":0.029301,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":44000,"millis":0.044,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":114802,"millis":0.114802,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":142002,"millis":0.142002,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":16001,"millis":0.016001,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19200,"millis":0.0192,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5600,"millis":0.0056,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":53501,"millis":0.053501,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '72f30ca1-3b80-4020-b9ed-301b1a88df39'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":532259764,"millis":532.259764,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5600,"millis":0.0056,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":565108,"millis":0.565108,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '72f30ca1-3b80-4020-b9ed-301b1a88df39'"}},{"result":{"nanos":535007,"millis":0.535007,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":437307,"millis":0.437307,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":432206,"millis":0.432206,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":460707,"millis":0.460707,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":395606,"millis":0.395606,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":30601,"millis":0.030601,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":315404,"millis":0.315404,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":295804,"millis":0.295804,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":329905,"millis":0.329905,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":64901,"millis":0.064901,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":123402,"millis":0.123402,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:47.346 [print] https:\\\/\\\/inspire.rivm.nl\\\/geoserver\\\/wfs?request=GetCapabilities \n"},{"result":{"nanos":556808,"millis":0.556808,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":259004,"millis":0.259004,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:47.346 [print] OGC:WFS \n"},{"result":{"nanos":319505,"millis":0.319505,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":72101,"millis":0.072101,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:47.347 [print] INSPIRE Atom \n"},{"result":{"nanos":26501,"millis":0.026501,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":56000,"millis":0.056,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:47.347 [print] OGC:WFS \n"},{"result":{"nanos":383505,"millis":0.383505,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":65801,"millis":0.065801,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:47.347 [print] Rijksinstituut voor Volksgezondheid en Milieu \n"},{"result":{"nanos":52801,"millis":0.052801,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:47.347 [print] http:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=588a4cb1-b442-4ac1-87e4-40401e353166#MD_DataIdentification \n"},{"result":{"nanos":505907,"millis":0.505907,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":684610,"millis":0.68461,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"72f30ca1-3b80-4020-b9ed-301b1a88df39\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":415806,"millis":0.415806,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"72f30ca1-3b80-4020-b9ed-301b1a88df39\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":540.91049,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"72f30ca1-3b80-4020-b9ed-301b1a88df39","startTime":1629213706807,"refId":"[1.72:67]","endTime":1629213707349,"exampleData":{"datasetIdentifierCode":"72f30ca1-3b80-4020-b9ed-301b1a88df39"},"exampleIndex":71},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16500,"millis":0.0165,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:47.062 karate.env system property was: null \n"},{"result":{"nanos":28301,"millis":0.028301,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":48900,"millis":0.0489,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":65400,"millis":0.0654,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":244203,"millis":0.244203,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":43801,"millis":0.043801,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":395206,"millis":0.395206,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":32400,"millis":0.0324,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":241103,"millis":0.241103,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":130802,"millis":0.130802,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":64801,"millis":0.064801,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":16801,"millis":0.016801,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19200,"millis":0.0192,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5800,"millis":0.0058,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":63400,"millis":0.0634,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'd0b60508-5bf5-4360-b34a-875f10a9a711'"}},{"result":{"nanos":5900,"millis":0.0059,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":555580200,"millis":555.5802,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":504207,"millis":0.504207,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'd0b60508-5bf5-4360-b34a-875f10a9a711'"}},{"result":{"nanos":382806,"millis":0.382806,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":320304,"millis":0.320304,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":348305,"millis":0.348305,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":818112,"millis":0.818112,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":422306,"millis":0.422306,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":28201,"millis":0.028201,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":289604,"millis":0.289604,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":282204,"millis":0.282204,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":280104,"millis":0.280104,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":5820584,"millis":5.820584,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":192203,"millis":0.192203,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:47.629 [print] https:\/\/service.pdok.nl\/kadaster\/lc\/atom\/v1_0\/index.xml \n"},{"result":{"nanos":309904,"millis":0.309904,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":123602,"millis":0.123602,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:47.630 [print] INSPIRE Atom \n"},{"result":{"nanos":300305,"millis":0.300305,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":100301,"millis":0.100301,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:47.630 [print] #notpresent \n"},{"result":{"nanos":32100,"millis":0.0321,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":59801,"millis":0.059801,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:47.630 [print] INSPIRE Atom \n"},{"result":{"nanos":351005,"millis":0.351005,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":89902,"millis":0.089902,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:47.631 [print] Beheer PDOK \n"},{"result":{"nanos":45700,"millis":0.0457,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:47.631 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=1689d1b7-ef22-417a-becd-d8d9a8a90a10#MD_DataIdentification \n"},{"result":{"nanos":324104,"millis":0.324104,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":671610,"millis":0.67161,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"d0b60508-5bf5-4360-b34a-875f10a9a711\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":472107,"millis":0.472107,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"d0b60508-5bf5-4360-b34a-875f10a9a711\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":569.584999,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"d0b60508-5bf5-4360-b34a-875f10a9a711","startTime":1629213707062,"refId":"[1.73:67]","endTime":1629213707632,"exampleData":{"datasetIdentifierCode":"d0b60508-5bf5-4360-b34a-875f10a9a711"},"exampleIndex":72},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15600,"millis":0.0156,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:47.140 karate.env system property was: null \n"},{"result":{"nanos":26701,"millis":0.026701,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":46100,"millis":0.0461,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":43501,"millis":0.043501,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":251904,"millis":0.251904,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":40501,"millis":0.040501,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":398505,"millis":0.398505,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":34000,"millis":0.034,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":75501,"millis":0.075501,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":113102,"millis":0.113102,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":58601,"millis":0.058601,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":14600,"millis":0.0146,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18801,"millis":0.018801,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":51401,"millis":0.051401,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '68a7e4c1-0073-4a1a-a6df-084d2badf45a'"}},{"result":{"nanos":6200,"millis":0.0062,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":532361666,"millis":532.361666,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":509107,"millis":0.509107,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '68a7e4c1-0073-4a1a-a6df-084d2badf45a'"}},{"result":{"nanos":440107,"millis":0.440107,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":440206,"millis":0.440206,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":372605,"millis":0.372605,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":432506,"millis":0.432506,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":420106,"millis":0.420106,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":66001,"millis":0.066001,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":368506,"millis":0.368506,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":358105,"millis":0.358105,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":301505,"millis":0.301505,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":646509,"millis":0.646509,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":644910,"millis":0.64491,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:47.680 [print] https:\/\/service.pdok.nl\/cbs\/wb2019\/atom\/v1_0\/index.xml \n"},{"result":{"nanos":350505,"millis":0.350505,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":452707,"millis":0.452707,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:47.680 [print] INSPIRE Atom \n"},{"result":{"nanos":329905,"millis":0.329905,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":470507,"millis":0.470507,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:47.681 [print] #notpresent \n"},{"result":{"nanos":39000,"millis":0.039,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":404705,"millis":0.404705,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:47.682 [print] INSPIRE Atom \n"},{"result":{"nanos":332804,"millis":0.332804,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":397605,"millis":0.397605,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:47.683 [print] Beheer PDOK \n"},{"result":{"nanos":809811,"millis":0.809811,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:47.683 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=5c37d29a-006d-4136-8989-adfc35a1d4a7#MD_DataIdentification \n"},{"result":{"nanos":331305,"millis":0.331305,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":2995844,"millis":2.995844,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"68a7e4c1-0073-4a1a-a6df-084d2badf45a\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":1042215,"millis":1.042215,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"68a7e4c1-0073-4a1a-a6df-084d2badf45a\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":546.53287,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"68a7e4c1-0073-4a1a-a6df-084d2badf45a","startTime":1629213707140,"refId":"[1.74:67]","endTime":1629213707688,"exampleData":{"datasetIdentifierCode":"68a7e4c1-0073-4a1a-a6df-084d2badf45a"},"exampleIndex":73},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15800,"millis":0.0158,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:47.191 karate.env system property was: null \n"},{"result":{"nanos":28301,"millis":0.028301,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":50101,"millis":0.050101,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":54800,"millis":0.0548,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":213403,"millis":0.213403,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":36900,"millis":0.0369,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":353906,"millis":0.353906,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":29800,"millis":0.0298,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":46801,"millis":0.046801,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":271304,"millis":0.271304,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":350305,"millis":0.350305,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":19801,"millis":0.019801,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":21100,"millis":0.0211,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":92101,"millis":0.092101,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'b4485d59-a945-4940-a2f5-3ce7de6a947b'"}},{"result":{"nanos":6400,"millis":0.0064,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":529382522,"millis":529.382522,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":485607,"millis":0.485607,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'b4485d59-a945-4940-a2f5-3ce7de6a947b'"}},{"result":{"nanos":446207,"millis":0.446207,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":431506,"millis":0.431506,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":406506,"millis":0.406506,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":528708,"millis":0.528708,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":486307,"millis":0.486307,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":29101,"millis":0.029101,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":332405,"millis":0.332405,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":322705,"millis":0.322705,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":323405,"millis":0.323405,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":494507,"millis":0.494507,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":613909,"millis":0.613909,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:47.728 [print] https:\/\/inspire.rivm.nl\/geoserver\/wfs? \n"},{"result":{"nanos":536908,"millis":0.536908,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":504207,"millis":0.504207,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:47.729 [print] #notpresent \n"},{"result":{"nanos":373905,"millis":0.373905,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":476007,"millis":0.476007,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:47.730 [print] OGC:WFS \n"},{"result":{"nanos":41101,"millis":0.041101,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":512708,"millis":0.512708,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:47.730 [print] #notpresent \n"},{"result":{"nanos":423506,"millis":0.423506,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":380406,"millis":0.380406,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:47.731 [print] RIVM \n"},{"result":{"nanos":755811,"millis":0.755811,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:47.732 [print] http:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/en\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=b3f66964-a8c1-456f-9799-9cafca2cb7b1 \n"},{"result":{"nanos":363805,"millis":0.363805,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":587109,"millis":0.587109,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"b4485d59-a945-4940-a2f5-3ce7de6a947b\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":394406,"millis":0.394406,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"b4485d59-a945-4940-a2f5-3ce7de6a947b\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":541.242297,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"b4485d59-a945-4940-a2f5-3ce7de6a947b","startTime":1629213707191,"refId":"[1.75:67]","endTime":1629213707733,"exampleData":{"datasetIdentifierCode":"b4485d59-a945-4940-a2f5-3ce7de6a947b"},"exampleIndex":74},{"sectionIndex":0,"stepResults":[{"result":{"nanos":17300,"millis":0.0173,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:47.351 karate.env system property was: null \n"},{"result":{"nanos":26901,"millis":0.026901,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":57201,"millis":0.057201,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":48801,"millis":0.048801,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":229203,"millis":0.229203,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":38701,"millis":0.038701,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":383505,"millis":0.383505,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":29800,"millis":0.0298,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":45201,"millis":0.045201,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":120302,"millis":0.120302,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":62401,"millis":0.062401,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":14800,"millis":0.0148,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17800,"millis":0.0178,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5300,"millis":0.0053,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5200,"millis":0.0052,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":54101,"millis":0.054101,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'b5ee6914-04bd-4c7e-a180-242371ae40d9'"}},{"result":{"nanos":6300,"millis":0.0063,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":534692099,"millis":534.692099,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":585208,"millis":0.585208,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'b5ee6914-04bd-4c7e-a180-242371ae40d9'"}},{"result":{"nanos":509807,"millis":0.509807,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":471607,"millis":0.471607,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":459907,"millis":0.459907,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":531208,"millis":0.531208,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":473807,"millis":0.473807,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":30301,"millis":0.030301,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":385905,"millis":0.385905,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":459106,"millis":0.459106,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":386905,"millis":0.386905,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":75201,"millis":0.075201,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":373805,"millis":0.373805,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:47.892 [print] https:\/\/inspire.rivm.nl\/atom\/index.xml \n"},{"result":{"nanos":617009,"millis":0.617009,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":228104,"millis":0.228104,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:47.893 [print] #notpresent \n"},{"result":{"nanos":329005,"millis":0.329005,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":208103,"millis":0.208103,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:47.894 [print] INSPIRE Atom \n"},{"result":{"nanos":31200,"millis":0.0312,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":43501,"millis":0.043501,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:47.894 [print] #notpresent \n"},{"result":{"nanos":613009,"millis":0.613009,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":253004,"millis":0.253004,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:47.894 [print] Rijksinstituut voor Volksgezondheid en Milieu \n"},{"result":{"nanos":95501,"millis":0.095501,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:47.895 [print] [\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=50a2c5e6-c8e7-425d-854e-26f578196bc9#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=08b27bf0-e34a-4b30-9eac-5edadfb6a288#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=8b0b02a0-1e1b-4cda-bcfe-6fa0f738e38f#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=f2f86edf-ac3a-48e8-9292-0544da2d7645#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=ad6caa40-89ab-47e3-85ab-3f8e32024a71#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=f8d840bc-18df-4449-b797-b9adcb81d3ec#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=d3c9efd6-fca7-49d6-92bb-5f507abece90#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=32a21114-8694-40ce-ab76-9dcd885c7861#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=d24ccb35-e9d2-41bf-b231-43083fc0c76d#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=36a7e8cb-8300-4602-93d2-135943365a6f#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=b3f66964-a8c1-456f-9799-9cafca2cb7b1#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=e1e99000-ec47-4e9f-84a5-adad24fef0dc#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=8a4f5c3b-aced-48fd-afb5-f1f1d0ef21d6#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=d9baa847-4652-4588-abe1-0b050f40f27f#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=2cc2c30c-91b8-412a-a060-e84d25272581#MD_DataIdentification\"] \n"},{"result":{"nanos":5360277,"millis":5.360277,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":784811,"millis":0.784811,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"b5ee6914-04bd-4c7e-a180-242371ae40d9\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":573309,"millis":0.573309,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"b5ee6914-04bd-4c7e-a180-242371ae40d9\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":549.744216,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"b5ee6914-04bd-4c7e-a180-242371ae40d9","startTime":1629213707351,"refId":"[1.76:67]","endTime":1629213707902,"exampleData":{"datasetIdentifierCode":"b5ee6914-04bd-4c7e-a180-242371ae40d9"},"exampleIndex":75},{"sectionIndex":0,"stepResults":[{"result":{"nanos":20800,"millis":0.0208,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:47.638 karate.env system property was: null \n"},{"result":{"nanos":36201,"millis":0.036201,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":51701,"millis":0.051701,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":53801,"millis":0.053801,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":253603,"millis":0.253603,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":42100,"millis":0.0421,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":397406,"millis":0.397406,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":35201,"millis":0.035201,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":575308,"millis":0.575308,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":143402,"millis":0.143402,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":93301,"millis":0.093301,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":20200,"millis":0.0202,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":21801,"millis":0.021801,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5700,"millis":0.0057,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":113602,"millis":0.113602,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'ca71572f-a498-4ca6-aa60-d4c4c4d59e2e'"}},{"result":{"nanos":10900,"millis":0.0109,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":5400,"millis":0.0054,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":527378894,"millis":527.378894,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":6700,"millis":0.0067,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":747211,"millis":0.747211,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'ca71572f-a498-4ca6-aa60-d4c4c4d59e2e'"}},{"result":{"nanos":485307,"millis":0.485307,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":359005,"millis":0.359005,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":361805,"millis":0.361805,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":572609,"millis":0.572609,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":472407,"millis":0.472407,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":123802,"millis":0.123802,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":340405,"millis":0.340405,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":341205,"millis":0.341205,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":342105,"millis":0.342105,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":419006,"millis":0.419006,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":455807,"millis":0.455807,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:48.173 [print] https:\/\/inspire.caris.nl\/geoserver\/gnwms\/wms?request=GetCapabilities \n"},{"result":{"nanos":386106,"millis":0.386106,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":333605,"millis":0.333605,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:48.173 [print] OGC:WMS \n"},{"result":{"nanos":413606,"millis":0.413606,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":318205,"millis":0.318205,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:48.174 [print] #notpresent \n"},{"result":{"nanos":150102,"millis":0.150102,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":270404,"millis":0.270404,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:48.174 [print] OGC:WMS \n"},{"result":{"nanos":351605,"millis":0.351605,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":339105,"millis":0.339105,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:48.175 [print] Ministerie van Defensie, Koninklijke Marine, Dienst der Hydrografie \n"},{"result":{"nanos":519108,"millis":0.519108,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:48.176 [print] https:\/\/www.nationaalgeoregister.nl:443\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=34e95842-4e4e-46de-9198-79e8cd4d30dc#MD_DataIdentification \n"},{"result":{"nanos":390806,"millis":0.390806,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":513207,"millis":0.513207,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"ca71572f-a498-4ca6-aa60-d4c4c4d59e2e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":415806,"millis":0.415806,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"ca71572f-a498-4ca6-aa60-d4c4c4d59e2e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":538.69346,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"ca71572f-a498-4ca6-aa60-d4c4c4d59e2e","startTime":1629213707634,"refId":"[1.77:67]","endTime":1629213708177,"exampleData":{"datasetIdentifierCode":"ca71572f-a498-4ca6-aa60-d4c4c4d59e2e"},"exampleIndex":76},{"sectionIndex":0,"stepResults":[{"result":{"nanos":18401,"millis":0.018401,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:47.697 karate.env system property was: null \n"},{"result":{"nanos":29300,"millis":0.0293,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":47901,"millis":0.047901,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":48001,"millis":0.048001,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":265304,"millis":0.265304,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":40100,"millis":0.0401,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":399805,"millis":0.399805,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":31601,"millis":0.031601,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":614409,"millis":0.614409,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":133702,"millis":0.133702,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":61701,"millis":0.061701,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":17500,"millis":0.0175,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18800,"millis":0.0188,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3700,"millis":0.0037,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":72801,"millis":0.072801,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '91041d33-54f8-40f1-8965-a867ba00cab8'"}},{"result":{"nanos":5600,"millis":0.0056,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":549722415,"millis":549.722415,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5300,"millis":0.0053,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":688910,"millis":0.68891,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '91041d33-54f8-40f1-8965-a867ba00cab8'"}},{"result":{"nanos":447907,"millis":0.447907,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":369705,"millis":0.369705,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":360805,"millis":0.360805,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":582108,"millis":0.582108,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":455606,"millis":0.455606,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":80001,"millis":0.080001,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":378305,"millis":0.378305,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":338705,"millis":0.338705,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":343705,"millis":0.343705,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":629909,"millis":0.629909,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":722510,"millis":0.72251,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:48.254 [print] https:\/\/inspire.caris.nl\/geoserver2\/gn\/wfs?request=GetCapabilities&service=WFS&version=2.0.0 \n"},{"result":{"nanos":361106,"millis":0.361106,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":476607,"millis":0.476607,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:48.255 [print] OGC:WFS \n"},{"result":{"nanos":405906,"millis":0.405906,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":462607,"millis":0.462607,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:48.256 [print] #notpresent \n"},{"result":{"nanos":89501,"millis":0.089501,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":434806,"millis":0.434806,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:48.256 [print] OGC:WFS \n"},{"result":{"nanos":342805,"millis":0.342805,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":700810,"millis":0.70081,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:48.258 [print] Ministerie van Defensie, Koninklijke Marine, Dienst der Hydrografie \n"},{"result":{"nanos":706210,"millis":0.70621,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:48.258 [print] http:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/xml.metadata.get?uuid=34e95842-4e4e-46de-9198-79e8cd4d30dc#MD_DataIdentification \n"},{"result":{"nanos":341105,"millis":0.341105,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":461606,"millis":0.461606,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"91041d33-54f8-40f1-8965-a867ba00cab8\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":363806,"millis":0.363806,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"91041d33-54f8-40f1-8965-a867ba00cab8\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":562.090292,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"91041d33-54f8-40f1-8965-a867ba00cab8","startTime":1629213707692,"refId":"[1.78:67]","endTime":1629213708259,"exampleData":{"datasetIdentifierCode":"91041d33-54f8-40f1-8965-a867ba00cab8"},"exampleIndex":77},{"sectionIndex":0,"stepResults":[{"result":{"nanos":17300,"millis":0.0173,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:47.737 karate.env system property was: null \n"},{"result":{"nanos":30300,"millis":0.0303,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":48801,"millis":0.048801,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":49401,"millis":0.049401,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":236303,"millis":0.236303,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":42801,"millis":0.042801,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":393106,"millis":0.393106,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":30800,"millis":0.0308,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":404706,"millis":0.404706,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":134701,"millis":0.134701,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":69801,"millis":0.069801,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":16600,"millis":0.0166,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17100,"millis":0.0171,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":58201,"millis":0.058201,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'a7e4bc31-60c1-4b78-bef1-eed768ceafa0'"}},{"result":{"nanos":6000,"millis":0.006,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":558411341,"millis":558.411341,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":589209,"millis":0.589209,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'a7e4bc31-60c1-4b78-bef1-eed768ceafa0'"}},{"result":{"nanos":541308,"millis":0.541308,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":451207,"millis":0.451207,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":446806,"millis":0.446806,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":641909,"millis":0.641909,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":577208,"millis":0.577208,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":89101,"millis":0.089101,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":471807,"millis":0.471807,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":453507,"millis":0.453507,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":446106,"millis":0.446106,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":740710,"millis":0.74071,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":765411,"millis":0.765411,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:48.304 [print] https:\/\/haleconnect.com\/services\/bsp\/org.874.c4108a11-bdbb-4461-8902-423531561a7e\/service\/atom\/id_predefined_dataset \n"},{"result":{"nanos":409206,"millis":0.409206,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":124602,"millis":0.124602,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:48.304 [print] #notpresent \n"},{"result":{"nanos":416306,"millis":0.416306,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":483207,"millis":0.483207,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:48.306 [print] #notpresent \n"},{"result":{"nanos":87502,"millis":0.087502,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":475707,"millis":0.475707,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:48.306 [print] #notpresent \n"},{"result":{"nanos":403906,"millis":0.403906,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":474707,"millis":0.474707,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:48.307 [print] KNMI \n"},{"result":{"nanos":848812,"millis":0.848812,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:48.307 [print] https:\/\/haleconnect.com\/services\/bsp\/org.874.c4108a11-bdbb-4461-8902-423531561a7e\/md\/dataset\/dataset1#xpointer%28%2F%2Fgmd%3AidentificationInfo%5B1%5D%2Fgmd%3AMD_DataIdentification%29 \n"},{"result":{"nanos":397806,"millis":0.397806,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":436106,"millis":0.436106,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"a7e4bc31-60c1-4b78-bef1-eed768ceafa0\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":352205,"millis":0.352205,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"a7e4bc31-60c1-4b78-bef1-eed768ceafa0\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":571.110423,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"a7e4bc31-60c1-4b78-bef1-eed768ceafa0","startTime":1629213707736,"refId":"[1.79:67]","endTime":1629213708309,"exampleData":{"datasetIdentifierCode":"a7e4bc31-60c1-4b78-bef1-eed768ceafa0"},"exampleIndex":78},{"sectionIndex":0,"stepResults":[{"result":{"nanos":17300,"millis":0.0173,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:47.907 karate.env system property was: null \n"},{"result":{"nanos":30601,"millis":0.030601,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":50201,"millis":0.050201,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":44501,"millis":0.044501,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":275104,"millis":0.275104,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":39800,"millis":0.0398,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":366406,"millis":0.366406,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":31000,"millis":0.031,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":43501,"millis":0.043501,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":113402,"millis":0.113402,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":392506,"millis":0.392506,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":19900,"millis":0.0199,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18301,"millis":0.018301,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":13700,"millis":0.0137,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":53501,"millis":0.053501,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '23aa5150-fcc7-46ea-ae63-a7f198d8bc18'"}},{"result":{"nanos":5800,"millis":0.0058,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":562888406,"millis":562.888406,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5500,"millis":0.0055,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":674609,"millis":0.674609,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '23aa5150-fcc7-46ea-ae63-a7f198d8bc18'"}},{"result":{"nanos":517807,"millis":0.517807,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":411706,"millis":0.411706,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":386006,"millis":0.386006,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":611109,"millis":0.611109,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":530308,"millis":0.530308,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":91501,"millis":0.091501,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":382805,"millis":0.382805,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":397406,"millis":0.397406,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":402306,"millis":0.402306,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":668010,"millis":0.66801,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":762111,"millis":0.762111,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:48.478 [print] https:\/\/inspire.rivm.nl\/geoserver\/airq\/wms? \n"},{"result":{"nanos":422006,"millis":0.422006,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":793311,"millis":0.793311,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:48.479 [print] #notpresent \n"},{"result":{"nanos":431507,"millis":0.431507,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":905213,"millis":0.905213,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:48.481 [print] OGC:WMS \n"},{"result":{"nanos":112602,"millis":0.112602,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":521607,"millis":0.521607,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:48.481 [print] #notpresent \n"},{"result":{"nanos":956013,"millis":0.956013,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":516207,"millis":0.516207,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:48.483 [print] RIVM \n"},{"result":{"nanos":136402,"millis":0.136402,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:48.483 [print] http:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/en\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=2cc2c30c-91b8-412a-a060-e84d25272581 \n"},{"result":{"nanos":736411,"millis":0.736411,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":517008,"millis":0.517008,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"23aa5150-fcc7-46ea-ae63-a7f198d8bc18\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":680710,"millis":0.68071,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"23aa5150-fcc7-46ea-ae63-a7f198d8bc18\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":576.983111,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"23aa5150-fcc7-46ea-ae63-a7f198d8bc18","startTime":1629213707907,"refId":"[1.80:67]","endTime":1629213708485,"exampleData":{"datasetIdentifierCode":"23aa5150-fcc7-46ea-ae63-a7f198d8bc18"},"exampleIndex":79},{"sectionIndex":0,"stepResults":[{"result":{"nanos":55601,"millis":0.055601,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:48.180 karate.env system property was: null \n"},{"result":{"nanos":41201,"millis":0.041201,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":184003,"millis":0.184003,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":132702,"millis":0.132702,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":318805,"millis":0.318805,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":111701,"millis":0.111701,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":442906,"millis":0.442906,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":85201,"millis":0.085201,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":278404,"millis":0.278404,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":191702,"millis":0.191702,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":139802,"millis":0.139802,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":44900,"millis":0.0449,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":31100,"millis":0.0311,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":14000,"millis":0.014,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":13201,"millis":0.013201,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":13500,"millis":0.0135,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '42da491e-d8b9-47ba-af65-acb15ea8a055'"}},{"result":{"nanos":12000,"millis":0.012,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":12201,"millis":0.012201,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":548491998,"millis":548.491998,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5600,"millis":0.0056,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":540708,"millis":0.540708,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '42da491e-d8b9-47ba-af65-acb15ea8a055'"}},{"result":{"nanos":468207,"millis":0.468207,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":390406,"millis":0.390406,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":387406,"millis":0.387406,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":492307,"millis":0.492307,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":429806,"millis":0.429806,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":26600,"millis":0.0266,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":315705,"millis":0.315705,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":310404,"millis":0.310404,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":320204,"millis":0.320204,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":71201,"millis":0.071201,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":105301,"millis":0.105301,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:48.735 [print] https:\/\/www.broinspireservices.nl\/wms\/osamepl-a-v1.0?request=GetCapabilities \n"},{"result":{"nanos":337405,"millis":0.337405,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":70801,"millis":0.070801,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:48.735 [print] #notpresent \n"},{"result":{"nanos":328204,"millis":0.328204,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":84702,"millis":0.084702,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:48.736 [print] OGC:WMS \n"},{"result":{"nanos":30600,"millis":0.0306,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":30801,"millis":0.030801,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:48.736 [print] #notpresent \n"},{"result":{"nanos":403406,"millis":0.403406,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":70801,"millis":0.070801,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:48.736 [print]  \n"},{"result":{"nanos":29601,"millis":0.029601,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:48.736 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire?SERVICE=CSW&version=2.0.2&REQUEST=GetRecordById&ID=24de356e-ec4d-4a18-9903-6401d222b77c&OUTPUTSCHEMA=http:\/\/www.isotc211.org\/2005\/gmd&ELEMENTSETNAME=full#MD_DataIdentification \n"},{"result":{"nanos":403906,"millis":0.403906,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":806011,"millis":0.806011,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"42da491e-d8b9-47ba-af65-acb15ea8a055\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":453106,"millis":0.453106,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"42da491e-d8b9-47ba-af65-acb15ea8a055\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":557.528127,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"42da491e-d8b9-47ba-af65-acb15ea8a055","startTime":1629213708179,"refId":"[1.81:67]","endTime":1629213708738,"exampleData":{"datasetIdentifierCode":"42da491e-d8b9-47ba-af65-acb15ea8a055"},"exampleIndex":80},{"sectionIndex":0,"stepResults":[{"result":{"nanos":48601,"millis":0.048601,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:48.262 karate.env system property was: null \n"},{"result":{"nanos":39300,"millis":0.0393,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":115801,"millis":0.115801,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":113802,"millis":0.113802,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":285004,"millis":0.285004,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":101201,"millis":0.101201,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":385106,"millis":0.385106,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":78801,"millis":0.078801,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":454007,"millis":0.454007,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":209503,"millis":0.209503,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":167002,"millis":0.167002,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":44600,"millis":0.0446,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":30701,"millis":0.030701,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":15900,"millis":0.0159,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":12700,"millis":0.0127,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":20400,"millis":0.0204,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '742cb4fc-62cb-4db1-86ce-9f0fd9e1a65b'"}},{"result":{"nanos":12100,"millis":0.0121,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":12700,"millis":0.0127,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":537372737,"millis":537.372737,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":475507,"millis":0.475507,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '742cb4fc-62cb-4db1-86ce-9f0fd9e1a65b'"}},{"result":{"nanos":430206,"millis":0.430206,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":405406,"millis":0.405406,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":393406,"millis":0.393406,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":446907,"millis":0.446907,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":414806,"millis":0.414806,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":25600,"millis":0.0256,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":344305,"millis":0.344305,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":330305,"millis":0.330305,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":323504,"millis":0.323504,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":61201,"millis":0.061201,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":86501,"millis":0.086501,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:48.806 [print] https:\/\/haleconnect.com\/ows\/services\/org.874.cb9ca55e-f4e7-4bd8-a02e-75d528e22118_wms\/org.874.bbb462ca-d8a0-4582-a9f6-9707e3e953a3?SERVICE=WMS&Request=GetCapabilities \n"},{"result":{"nanos":334405,"millis":0.334405,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":68501,"millis":0.068501,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:48.807 [print] #notpresent \n"},{"result":{"nanos":331905,"millis":0.331905,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":56401,"millis":0.056401,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:48.807 [print] #notpresent \n"},{"result":{"nanos":25001,"millis":0.025001,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":25700,"millis":0.0257,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:48.807 [print] #notpresent \n"},{"result":{"nanos":422006,"millis":0.422006,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":61701,"millis":0.061701,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:48.808 [print] Koninklijk Nederlands Meteorologisch Instituut (KNMI) \n"},{"result":{"nanos":30401,"millis":0.030401,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:48.808 [print] https:\/\/haleconnect.com\/services\/bsp\/org.874.bbb462ca-d8a0-4582-a9f6-9707e3e953a3\/md\/dataset\/dataset1#xpointer%28%2F%2Fgmd%3AidentificationInfo%5B1%5D%2Fgmd%3AMD_DataIdentification%29 \n"},{"result":{"nanos":406606,"millis":0.406606,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":548308,"millis":0.548308,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"742cb4fc-62cb-4db1-86ce-9f0fd9e1a65b\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":366605,"millis":0.366605,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"742cb4fc-62cb-4db1-86ce-9f0fd9e1a65b\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":545.93906,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"742cb4fc-62cb-4db1-86ce-9f0fd9e1a65b","startTime":1629213708261,"refId":"[1.82:67]","endTime":1629213708809,"exampleData":{"datasetIdentifierCode":"742cb4fc-62cb-4db1-86ce-9f0fd9e1a65b"},"exampleIndex":81},{"sectionIndex":0,"stepResults":[{"result":{"nanos":48100,"millis":0.0481,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:48.312 karate.env system property was: null \n"},{"result":{"nanos":38501,"millis":0.038501,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":115402,"millis":0.115402,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":105701,"millis":0.105701,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":278404,"millis":0.278404,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":102201,"millis":0.102201,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":402906,"millis":0.402906,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":82802,"millis":0.082802,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":102101,"millis":0.102101,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":439007,"millis":0.439007,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":151602,"millis":0.151602,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":43201,"millis":0.043201,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":26800,"millis":0.0268,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":13501,"millis":0.013501,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":12100,"millis":0.0121,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":12900,"millis":0.0129,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '6b608d4e-5628-4d59-97fc-0322c57357b2'"}},{"result":{"nanos":40501,"millis":0.040501,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":15800,"millis":0.0158,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":548727802,"millis":548.727802,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":552508,"millis":0.552508,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '6b608d4e-5628-4d59-97fc-0322c57357b2'"}},{"result":{"nanos":418206,"millis":0.418206,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":385706,"millis":0.385706,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":351705,"millis":0.351705,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":468707,"millis":0.468707,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":400506,"millis":0.400506,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":24400,"millis":0.0244,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":297205,"millis":0.297205,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":313604,"millis":0.313604,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":289904,"millis":0.289904,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":68101,"millis":0.068101,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":97401,"millis":0.097401,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:48.867 [print] https:\/\/geodata.nationaalgeoregister.nl\/schelpdierenpercelen\/wfs?request=GetCapabilities&service=wfs \n"},{"result":{"nanos":311504,"millis":0.311504,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":70601,"millis":0.070601,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:48.868 [print] OGC:WFS \n"},{"result":{"nanos":1027915,"millis":1.027915,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":76201,"millis":0.076201,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:48.869 [print] #notpresent \n"},{"result":{"nanos":27100,"millis":0.0271,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":42401,"millis":0.042401,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:48.869 [print] OGC:WFS \n"},{"result":{"nanos":658009,"millis":0.658009,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":76701,"millis":0.076701,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:48.869 [print] Beheer PDOK \n"},{"result":{"nanos":35100,"millis":0.0351,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:48.870 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=fe0e1e5f-512f-4bb1-bbf8-4028d3dfa24f#MD_DataIdentification \n"},{"result":{"nanos":371706,"millis":0.371706,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":615109,"millis":0.615109,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"6b608d4e-5628-4d59-97fc-0322c57357b2\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":404706,"millis":0.404706,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"6b608d4e-5628-4d59-97fc-0322c57357b2\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":558.149338,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"6b608d4e-5628-4d59-97fc-0322c57357b2","startTime":1629213708311,"refId":"[1.83:67]","endTime":1629213708871,"exampleData":{"datasetIdentifierCode":"6b608d4e-5628-4d59-97fc-0322c57357b2"},"exampleIndex":82},{"sectionIndex":0,"stepResults":[{"result":{"nanos":55101,"millis":0.055101,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:48.489 karate.env system property was: null \n"},{"result":{"nanos":47201,"millis":0.047201,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":128002,"millis":0.128002,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":119402,"millis":0.119402,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":320404,"millis":0.320404,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":117601,"millis":0.117601,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":403406,"millis":0.403406,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":89802,"millis":0.089802,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":109201,"millis":0.109201,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":228703,"millis":0.228703,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":159203,"millis":0.159203,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":49701,"millis":0.049701,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":30700,"millis":0.0307,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":14901,"millis":0.014901,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":13900,"millis":0.0139,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":13800,"millis":0.0138,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'deb81ebe-c7a7-42ba-bc21-f07cd348c3e8'"}},{"result":{"nanos":12901,"millis":0.012901,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":13800,"millis":0.0138,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":565544943,"millis":565.544943,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5400,"millis":0.0054,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":580808,"millis":0.580808,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'deb81ebe-c7a7-42ba-bc21-f07cd348c3e8'"}},{"result":{"nanos":428006,"millis":0.428006,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":383905,"millis":0.383905,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":376206,"millis":0.376206,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":445406,"millis":0.445406,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":409205,"millis":0.409205,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":23700,"millis":0.0237,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":308205,"millis":0.308205,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":304404,"millis":0.304404,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":300405,"millis":0.300405,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":2569437,"millis":2.569437,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":478307,"millis":0.478307,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:49.064 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw-inspire?request=GetCapabilities&Service=CSW&Version=2.0.1 \n"},{"result":{"nanos":382206,"millis":0.382206,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":248404,"millis":0.248404,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:49.065 [print] OGC:CSW \n"},{"result":{"nanos":353005,"millis":0.353005,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":255504,"millis":0.255504,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:49.065 [print] #notpresent \n"},{"result":{"nanos":37401,"millis":0.037401,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":67901,"millis":0.067901,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:49.065 [print] OGC:CSW \n"},{"result":{"nanos":439106,"millis":0.439106,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":234804,"millis":0.234804,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:49.066 [print] Beheer PDOK \n"},{"result":{"nanos":64501,"millis":0.064501,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:49.066 [print] #notpresent \n"},{"result":{"nanos":547308,"millis":0.547308,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":693010,"millis":0.69301,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"deb81ebe-c7a7-42ba-bc21-f07cd348c3e8\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":441207,"millis":0.441207,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"deb81ebe-c7a7-42ba-bc21-f07cd348c3e8\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":577.850423,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"deb81ebe-c7a7-42ba-bc21-f07cd348c3e8","startTime":1629213708487,"refId":"[1.84:67]","endTime":1629213709068,"exampleData":{"datasetIdentifierCode":"deb81ebe-c7a7-42ba-bc21-f07cd348c3e8"},"exampleIndex":83},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16201,"millis":0.016201,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:48.740 karate.env system property was: null \n"},{"result":{"nanos":25800,"millis":0.0258,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":45601,"millis":0.045601,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":41901,"millis":0.041901,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":227603,"millis":0.227603,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":38301,"millis":0.038301,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":377905,"millis":0.377905,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":33500,"millis":0.0335,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":74001,"millis":0.074001,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":106602,"millis":0.106602,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":86501,"millis":0.086501,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":15901,"millis":0.015901,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19300,"millis":0.0193,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":47601,"millis":0.047601,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '68505be5-45c4-4889-a82a-125043bbdc44'"}},{"result":{"nanos":5500,"millis":0.0055,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":540730687,"millis":540.730687,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5400,"millis":0.0054,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":517908,"millis":0.517908,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '68505be5-45c4-4889-a82a-125043bbdc44'"}},{"result":{"nanos":396806,"millis":0.396806,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":372605,"millis":0.372605,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":325204,"millis":0.325204,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":450307,"millis":0.450307,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":385206,"millis":0.385206,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":34200,"millis":0.0342,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":308005,"millis":0.308005,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":279504,"millis":0.279504,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":279604,"millis":0.279604,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":72702,"millis":0.072702,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":411506,"millis":0.411506,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:49.286 [print] https:\/\/www.broinspireservices.nl\/wfs\/osgebor-a-v1.0?request=GetCapabilities&service=WFS&version=2.0.0 \n"},{"result":{"nanos":307804,"millis":0.307804,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":291205,"millis":0.291205,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:49.287 [print] #notpresent \n"},{"result":{"nanos":511207,"millis":0.511207,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":63001,"millis":0.063001,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:49.288 [print] OGC:WFS \n"},{"result":{"nanos":26901,"millis":0.026901,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":25100,"millis":0.0251,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:49.288 [print] #notpresent \n"},{"result":{"nanos":574408,"millis":0.574408,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":64901,"millis":0.064901,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:49.289 [print] TNO Geologische Dienst Nederland \n"},{"result":{"nanos":263604,"millis":0.263604,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:49.289 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire?SERVICE=CSW&version=2.0.2&REQUEST=GetRecordById&ID=6c1cf452-8c62-4046-99ab-640a5e184f9c&OUTPUTSCHEMA=http:\/\/www.isotc211.org\/2005\/gmd&ELEMENTSETNAME=full#MD_DataIdentification \n"},{"result":{"nanos":460106,"millis":0.460106,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":687310,"millis":0.68731,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"68505be5-45c4-4889-a82a-125043bbdc44\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":458506,"millis":0.458506,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"68505be5-45c4-4889-a82a-125043bbdc44\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":549.478115,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"68505be5-45c4-4889-a82a-125043bbdc44","startTime":1629213708740,"refId":"[1.85:67]","endTime":1629213709290,"exampleData":{"datasetIdentifierCode":"68505be5-45c4-4889-a82a-125043bbdc44"},"exampleIndex":84},{"sectionIndex":0,"stepResults":[{"result":{"nanos":18300,"millis":0.0183,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:48.811 karate.env system property was: null \n"},{"result":{"nanos":29601,"millis":0.029601,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":47401,"millis":0.047401,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":46300,"millis":0.0463,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":228103,"millis":0.228103,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":43101,"millis":0.043101,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":421406,"millis":0.421406,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":33901,"millis":0.033901,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":46100,"millis":0.0461,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":110101,"millis":0.110101,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":61001,"millis":0.061001,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":14400,"millis":0.0144,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18300,"millis":0.0183,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":6100,"millis":0.0061,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":47201,"millis":0.047201,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '3094a1c4-3dd6-4e8e-9929-4a63dd66992e'"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":536719128,"millis":536.719128,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":3100,"millis":0.0031,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":425306,"millis":0.425306,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '3094a1c4-3dd6-4e8e-9929-4a63dd66992e'"}},{"result":{"nanos":478007,"millis":0.478007,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":400606,"millis":0.400606,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":390606,"millis":0.390606,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":411206,"millis":0.411206,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":456407,"millis":0.456407,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":25500,"millis":0.0255,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":301405,"millis":0.301405,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":305104,"millis":0.305104,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":324605,"millis":0.324605,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":69701,"millis":0.069701,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":87802,"millis":0.087802,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:49.353 [print] http:\\\/\\\/services.inspire-provincies.nl\\\/ProductionAndIndustrialFacilities\\\/services\\\/download_PF?request=GetCapabilities \n"},{"result":{"nanos":787811,"millis":0.787811,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":80202,"millis":0.080202,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:49.354 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":490407,"millis":0.490407,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":63501,"millis":0.063501,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:49.355 [print] #notpresent \n"},{"result":{"nanos":174903,"millis":0.174903,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":44500,"millis":0.0445,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:49.355 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":581809,"millis":0.581809,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":72101,"millis":0.072101,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:49.355 [print] Interprovinciaal Overleg \n"},{"result":{"nanos":150702,"millis":0.150702,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:49.356 [print] [\"http:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/nl\\\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=8e986f37-74d7-4b6c-8026-87c960456423&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full#MD_DataIdentification\",\"http:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/nl\\\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=afc450bd-65b3-4e59-b0fb-619869bf6ada&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full#MD_DataIdentification\"] \n"},{"result":{"nanos":414106,"millis":0.414106,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":1355119,"millis":1.355119,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"3094a1c4-3dd6-4e8e-9929-4a63dd66992e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":374906,"millis":0.374906,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"3094a1c4-3dd6-4e8e-9929-4a63dd66992e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":546.174166,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"3094a1c4-3dd6-4e8e-9929-4a63dd66992e","startTime":1629213708811,"refId":"[1.86:67]","endTime":1629213709358,"exampleData":{"datasetIdentifierCode":"3094a1c4-3dd6-4e8e-9929-4a63dd66992e"},"exampleIndex":85},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16000,"millis":0.016,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:48.873 karate.env system property was: null \n"},{"result":{"nanos":31900,"millis":0.0319,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":47201,"millis":0.047201,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":50001,"millis":0.050001,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":228904,"millis":0.228904,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":38300,"millis":0.0383,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":401306,"millis":0.401306,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":31401,"millis":0.031401,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":44801,"millis":0.044801,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":113901,"millis":0.113901,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":56501,"millis":0.056501,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13401,"millis":0.013401,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17100,"millis":0.0171,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":48101,"millis":0.048101,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '6de8b875-c4c2-4469-ac80-0782bb67f285'"}},{"result":{"nanos":5300,"millis":0.0053,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":545655058,"millis":545.655058,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5600,"millis":0.0056,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":648510,"millis":0.64851,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '6de8b875-c4c2-4469-ac80-0782bb67f285'"}},{"result":{"nanos":584408,"millis":0.584408,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":493707,"millis":0.493707,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":449007,"millis":0.449007,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":499307,"millis":0.499307,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":486807,"millis":0.486807,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":28200,"millis":0.0282,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":340805,"millis":0.340805,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":369605,"millis":0.369605,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":354005,"millis":0.354005,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":66101,"millis":0.066101,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":100501,"millis":0.100501,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:49.425 [print] https:\/\/geodata.nationaalgeoregister.nl\/inspire\/au\/wms?request=GetCapabilities&service=WMS \n"},{"result":{"nanos":407906,"millis":0.407906,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":93702,"millis":0.093702,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:49.425 [print] #notpresent \n"},{"result":{"nanos":331205,"millis":0.331205,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":63001,"millis":0.063001,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:49.426 [print] OGC:WMS \n"},{"result":{"nanos":25100,"millis":0.0251,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":26801,"millis":0.026801,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:49.426 [print] #notpresent \n"},{"result":{"nanos":639009,"millis":0.639009,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":68001,"millis":0.068001,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:49.426 [print] Beheer PDOK \n"},{"result":{"nanos":31301,"millis":0.031301,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:49.427 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=7dd1fd45-ace5-41e0-93a6-64e3be231717#MD_DataIdentification \n"},{"result":{"nanos":601209,"millis":0.601209,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":744310,"millis":0.74431,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"6de8b875-c4c2-4469-ac80-0782bb67f285\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":373005,"millis":0.373005,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"6de8b875-c4c2-4469-ac80-0782bb67f285\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":554.644589,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"6de8b875-c4c2-4469-ac80-0782bb67f285","startTime":1629213708873,"refId":"[1.87:67]","endTime":1629213709428,"exampleData":{"datasetIdentifierCode":"6de8b875-c4c2-4469-ac80-0782bb67f285"},"exampleIndex":86},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16300,"millis":0.0163,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:49.070 karate.env system property was: null \n"},{"result":{"nanos":27801,"millis":0.027801,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":48301,"millis":0.048301,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":45200,"millis":0.0452,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":226903,"millis":0.226903,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":38801,"millis":0.038801,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":364005,"millis":0.364005,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":30400,"millis":0.0304,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":72101,"millis":0.072101,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":281804,"millis":0.281804,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":65901,"millis":0.065901,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":17000,"millis":0.017,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18200,"millis":0.0182,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5600,"millis":0.0056,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":50301,"millis":0.050301,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '5523cfd7-a72c-409e-a0c7-89b858aafa64'"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":522611226,"millis":522.611226,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5800,"millis":0.0058,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":576908,"millis":0.576908,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '5523cfd7-a72c-409e-a0c7-89b858aafa64'"}},{"result":{"nanos":439807,"millis":0.439807,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":375205,"millis":0.375205,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":363206,"millis":0.363206,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":439106,"millis":0.439106,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":425206,"millis":0.425206,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":41400,"millis":0.0414,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":347305,"millis":0.347305,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":332204,"millis":0.332204,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":304304,"millis":0.304304,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":992315,"millis":0.992315,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":896313,"millis":0.896313,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:49.600 [print] https:\/\/service.pdok.nl\/bzk\/bro-environmental-monitoring-facilities\/wms\/v1_0?request=GetCapabilities&service=WMS \n"},{"result":{"nanos":298704,"millis":0.298704,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":453906,"millis":0.453906,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:49.601 [print] OGC:WMS \n"},{"result":{"nanos":374906,"millis":0.374906,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":453306,"millis":0.453306,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:49.602 [print] #notpresent \n"},{"result":{"nanos":37600,"millis":0.0376,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":404306,"millis":0.404306,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:49.602 [print] OGC:WMS \n"},{"result":{"nanos":339605,"millis":0.339605,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":448007,"millis":0.448007,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:49.603 [print] Beheer PDOK \n"},{"result":{"nanos":1346719,"millis":1.346719,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:49.605 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=dff9c760-1380-11eb-adc1-0242ac120002#MD_DataIdentification \n"},{"result":{"nanos":351105,"millis":0.351105,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":670609,"millis":0.670609,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"5523cfd7-a72c-409e-a0c7-89b858aafa64\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":415306,"millis":0.415306,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"5523cfd7-a72c-409e-a0c7-89b858aafa64\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":535.067302,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"5523cfd7-a72c-409e-a0c7-89b858aafa64","startTime":1629213709070,"refId":"[1.88:67]","endTime":1629213709606,"exampleData":{"datasetIdentifierCode":"5523cfd7-a72c-409e-a0c7-89b858aafa64"},"exampleIndex":87},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16200,"millis":0.0162,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:49.292 karate.env system property was: null \n"},{"result":{"nanos":27601,"millis":0.027601,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":49101,"millis":0.049101,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":46300,"millis":0.0463,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":239703,"millis":0.239703,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":53001,"millis":0.053001,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":357705,"millis":0.357705,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":30601,"millis":0.030601,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":51501,"millis":0.051501,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":271704,"millis":0.271704,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":73701,"millis":0.073701,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":16800,"millis":0.0168,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":36200,"millis":0.0362,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5800,"millis":0.0058,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3600,"millis":0.0036,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":109802,"millis":0.109802,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '7ab53b91-9df1-4c39-ba0e-06ec80ce512b'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":554300582,"millis":554.300582,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5500,"millis":0.0055,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":618709,"millis":0.618709,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '7ab53b91-9df1-4c39-ba0e-06ec80ce512b'"}},{"result":{"nanos":511107,"millis":0.511107,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":446906,"millis":0.446906,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":424006,"millis":0.424006,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":521107,"millis":0.521107,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":457207,"millis":0.457207,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":26901,"millis":0.026901,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":340505,"millis":0.340505,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":336605,"millis":0.336605,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":336205,"millis":0.336205,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":71601,"millis":0.071601,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":489807,"millis":0.489807,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:49.853 [print] https:\/\/geodata.nationaalgeoregister.nl\/inspire\/ps-cdda\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":515107,"millis":0.515107,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":80101,"millis":0.080101,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:49.854 [print] OGC:WMS \n"},{"result":{"nanos":583408,"millis":0.583408,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":76701,"millis":0.076701,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:49.855 [print] #notpresent \n"},{"result":{"nanos":287905,"millis":0.287905,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":50800,"millis":0.0508,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:49.855 [print] OGC:WMS \n"},{"result":{"nanos":579008,"millis":0.579008,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":78001,"millis":0.078001,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:49.856 [print] Beheer PDOK \n"},{"result":{"nanos":175503,"millis":0.175503,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:49.856 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=3387ef8a-9237-453a-aa4e-585d1e193550#MD_DataIdentification \n"},{"result":{"nanos":495207,"millis":0.495207,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":613108,"millis":0.613108,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"7ab53b91-9df1-4c39-ba0e-06ec80ce512b\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":450906,"millis":0.450906,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"7ab53b91-9df1-4c39-ba0e-06ec80ce512b\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":564.271123,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"7ab53b91-9df1-4c39-ba0e-06ec80ce512b","startTime":1629213709292,"refId":"[1.89:67]","endTime":1629213709858,"exampleData":{"datasetIdentifierCode":"7ab53b91-9df1-4c39-ba0e-06ec80ce512b"},"exampleIndex":88},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16001,"millis":0.016001,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:49.360 karate.env system property was: null \n"},{"result":{"nanos":25900,"millis":0.0259,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":44601,"millis":0.044601,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":44801,"millis":0.044801,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":214003,"millis":0.214003,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":36501,"millis":0.036501,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":360405,"millis":0.360405,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":30900,"millis":0.0309,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":49500,"millis":0.0495,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":308705,"millis":0.308705,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":72601,"millis":0.072601,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":16000,"millis":0.016,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19100,"millis":0.0191,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5900,"millis":0.0059,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":45401,"millis":0.045401,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '26e2e9f4-be88-4c8c-bdef-94edfa93bde9'"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":541511998,"millis":541.511998,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":518408,"millis":0.518408,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '26e2e9f4-be88-4c8c-bdef-94edfa93bde9'"}},{"result":{"nanos":412306,"millis":0.412306,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":370006,"millis":0.370006,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":350005,"millis":0.350005,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":445607,"millis":0.445607,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":392006,"millis":0.392006,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":34500,"millis":0.0345,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":306705,"millis":0.306705,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":299804,"millis":0.299804,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":271204,"millis":0.271204,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":64501,"millis":0.064501,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":362405,"millis":0.362405,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:49.907 [print] https:\/\/service.pdok.nl\/bzk\/bro-hydrogeology\/wms\/v1_0?request=GetCapabilities&service=WMS \n"},{"result":{"nanos":571608,"millis":0.571608,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":75001,"millis":0.075001,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:49.908 [print] OGC:WMS \n"},{"result":{"nanos":267203,"millis":0.267203,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":76101,"millis":0.076101,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:49.908 [print] #notpresent \n"},{"result":{"nanos":223803,"millis":0.223803,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":50301,"millis":0.050301,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:49.909 [print] OGC:WMS \n"},{"result":{"nanos":517508,"millis":0.517508,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":86101,"millis":0.086101,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:49.909 [print] Beheer PDOK \n"},{"result":{"nanos":250904,"millis":0.250904,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:49.910 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=dff9c760-1380-11eb-adc1-0242ac120002#MD_DataIdentification \n"},{"result":{"nanos":827012,"millis":0.827012,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":602909,"millis":0.602909,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"26e2e9f4-be88-4c8c-bdef-94edfa93bde9\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":376705,"millis":0.376705,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"26e2e9f4-be88-4c8c-bdef-94edfa93bde9\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":550.57293,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"26e2e9f4-be88-4c8c-bdef-94edfa93bde9","startTime":1629213709360,"refId":"[1.90:67]","endTime":1629213709911,"exampleData":{"datasetIdentifierCode":"26e2e9f4-be88-4c8c-bdef-94edfa93bde9"},"exampleIndex":89},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16100,"millis":0.0161,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:49.430 karate.env system property was: null \n"},{"result":{"nanos":27600,"millis":0.0276,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":49501,"millis":0.049501,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":53901,"millis":0.053901,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":228203,"millis":0.228203,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":42601,"millis":0.042601,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":357205,"millis":0.357205,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":29001,"millis":0.029001,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":43800,"millis":0.0438,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":243003,"millis":0.243003,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":66801,"millis":0.066801,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":15801,"millis":0.015801,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19700,"millis":0.0197,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5500,"millis":0.0055,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":15300,"millis":0.0153,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":53000,"millis":0.053,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '89b35a6c-c099-456b-8eaf-2b83c7a35c74'"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":538682457,"millis":538.682457,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":3901,"millis":0.003901,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":498607,"millis":0.498607,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '89b35a6c-c099-456b-8eaf-2b83c7a35c74'"}},{"result":{"nanos":429506,"millis":0.429506,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":367605,"millis":0.367605,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":355605,"millis":0.355605,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":427607,"millis":0.427607,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":449306,"millis":0.449306,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":24400,"millis":0.0244,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":291304,"millis":0.291304,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":288804,"millis":0.288804,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":297904,"millis":0.297904,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":75401,"millis":0.075401,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":100601,"millis":0.100601,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:49.975 [print] https:\/\/geodata.nationaalgeoregister.nl\/inspire\/ps-rvo-np\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":317605,"millis":0.317605,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":68401,"millis":0.068401,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:49.975 [print] OGC:WMS \n"},{"result":{"nanos":304205,"millis":0.304205,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":60901,"millis":0.060901,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:49.975 [print] #notpresent \n"},{"result":{"nanos":23500,"millis":0.0235,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":26501,"millis":0.026501,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:49.976 [print] OGC:WMS \n"},{"result":{"nanos":379305,"millis":0.379305,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":67301,"millis":0.067301,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:49.976 [print] Beheer PDOK \n"},{"result":{"nanos":27601,"millis":0.027601,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:49.976 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=247a1d15-0a67-40ce-85be-1403c08f15a8#MD_DataIdentification \n"},{"result":{"nanos":384406,"millis":0.384406,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":632609,"millis":0.632609,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"89b35a6c-c099-456b-8eaf-2b83c7a35c74\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":4640667,"millis":4.640667,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"89b35a6c-c099-456b-8eaf-2b83c7a35c74\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":550.502727,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"89b35a6c-c099-456b-8eaf-2b83c7a35c74","startTime":1629213709430,"refId":"[1.91:67]","endTime":1629213709982,"exampleData":{"datasetIdentifierCode":"89b35a6c-c099-456b-8eaf-2b83c7a35c74"},"exampleIndex":90},{"sectionIndex":0,"stepResults":[{"result":{"nanos":18200,"millis":0.0182,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:49.608 karate.env system property was: null \n"},{"result":{"nanos":28301,"millis":0.028301,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":45800,"millis":0.0458,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":43801,"millis":0.043801,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":482407,"millis":0.482407,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":44901,"millis":0.044901,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":403706,"millis":0.403706,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":32901,"millis":0.032901,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":448206,"millis":0.448206,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":130702,"millis":0.130702,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":78201,"millis":0.078201,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":17600,"millis":0.0176,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19500,"millis":0.0195,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":65001,"millis":0.065001,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '275b64ab-34c2-41f8-8904-97812c7f716e'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":5200,"millis":0.0052,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":527237903,"millis":527.237903,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5500,"millis":0.0055,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":479707,"millis":0.479707,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '275b64ab-34c2-41f8-8904-97812c7f716e'"}},{"result":{"nanos":416306,"millis":0.416306,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":347505,"millis":0.347505,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":344405,"millis":0.344405,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":450906,"millis":0.450906,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":384806,"millis":0.384806,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":24000,"millis":0.024,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":287404,"millis":0.287404,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":282104,"millis":0.282104,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":292004,"millis":0.292004,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":427906,"millis":0.427906,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":446306,"millis":0.446306,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:50.142 [print] https:\/\/geodata.nationaalgeoregister.nl\/inspire\/ps-rvo-wl\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":316404,"millis":0.316404,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":316805,"millis":0.316805,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:50.143 [print] OGC:WMS \n"},{"result":{"nanos":296004,"millis":0.296004,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":340404,"millis":0.340404,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:50.143 [print] #notpresent \n"},{"result":{"nanos":32800,"millis":0.0328,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":282504,"millis":0.282504,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:50.144 [print] OGC:WMS \n"},{"result":{"nanos":378906,"millis":0.378906,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":325405,"millis":0.325405,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:50.144 [print] Beheer PDOK \n"},{"result":{"nanos":696810,"millis":0.69681,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:50.145 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=19165027-a13a-4c19-9013-ec1fd191019d#MD_DataIdentification \n"},{"result":{"nanos":375906,"millis":0.375906,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":622509,"millis":0.622509,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"275b64ab-34c2-41f8-8904-97812c7f716e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":424406,"millis":0.424406,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"275b64ab-34c2-41f8-8904-97812c7f716e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":537.714052,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"275b64ab-34c2-41f8-8904-97812c7f716e","startTime":1629213709608,"refId":"[1.92:67]","endTime":1629213710147,"exampleData":{"datasetIdentifierCode":"275b64ab-34c2-41f8-8904-97812c7f716e"},"exampleIndex":91},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15901,"millis":0.015901,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:49.860 karate.env system property was: null \n"},{"result":{"nanos":25800,"millis":0.0258,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":47101,"millis":0.047101,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":69101,"millis":0.069101,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":216403,"millis":0.216403,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":35601,"millis":0.035601,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":356805,"millis":0.356805,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":31001,"millis":0.031001,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":41301,"millis":0.041301,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":308904,"millis":0.308904,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":98502,"millis":0.098502,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":17300,"millis":0.0173,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19201,"millis":0.019201,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":44101,"millis":0.044101,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'bc0b75c6-3eef-49de-aca2-8483024903c1'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":533575711,"millis":533.575711,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":551207,"millis":0.551207,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'bc0b75c6-3eef-49de-aca2-8483024903c1'"}},{"result":{"nanos":441906,"millis":0.441906,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":411506,"millis":0.411506,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":373705,"millis":0.373705,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":493907,"millis":0.493907,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":458806,"millis":0.458806,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":25501,"millis":0.025501,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":310304,"millis":0.310304,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":299504,"millis":0.299504,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":323104,"millis":0.323104,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":705710,"millis":0.70571,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":178002,"millis":0.178002,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:50.400 [print] https:\/\/geodata.nationaalgeoregister.nl\/inspire\/ps-rvo-wl\/wfs?request=GetCapabilities&service=wfs \n"},{"result":{"nanos":714610,"millis":0.71461,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":151602,"millis":0.151602,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:50.401 [print] OGC:WFS \n"},{"result":{"nanos":590708,"millis":0.590708,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":115401,"millis":0.115401,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:50.402 [print] #notpresent \n"},{"result":{"nanos":32101,"millis":0.032101,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":49601,"millis":0.049601,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:50.402 [print] OGC:WFS \n"},{"result":{"nanos":717810,"millis":0.71781,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":105802,"millis":0.105802,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:50.402 [print] Beheer PDOK \n"},{"result":{"nanos":49001,"millis":0.049001,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:50.403 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=19165027-a13a-4c19-9013-ec1fd191019d#MD_DataIdentification \n"},{"result":{"nanos":394706,"millis":0.394706,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":1141916,"millis":1.141916,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"bc0b75c6-3eef-49de-aca2-8483024903c1\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":398105,"millis":0.398105,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"bc0b75c6-3eef-49de-aca2-8483024903c1\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":543.959658,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"bc0b75c6-3eef-49de-aca2-8483024903c1","startTime":1629213709859,"refId":"[1.93:67]","endTime":1629213710405,"exampleData":{"datasetIdentifierCode":"bc0b75c6-3eef-49de-aca2-8483024903c1"},"exampleIndex":92},{"sectionIndex":0,"stepResults":[{"result":{"nanos":17700,"millis":0.0177,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:49.913 karate.env system property was: null \n"},{"result":{"nanos":26201,"millis":0.026201,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":48001,"millis":0.048001,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":46000,"millis":0.046,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":223904,"millis":0.223904,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":38100,"millis":0.0381,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":356505,"millis":0.356505,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":28500,"millis":0.0285,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":45201,"millis":0.045201,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":309305,"millis":0.309305,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":83601,"millis":0.083601,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":16200,"millis":0.0162,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18601,"millis":0.018601,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":46301,"millis":0.046301,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'a7aeddf2-3b37-4668-9c75-de93d9326276'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":547060709,"millis":547.060709,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5800,"millis":0.0058,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":560608,"millis":0.560608,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'a7aeddf2-3b37-4668-9c75-de93d9326276'"}},{"result":{"nanos":456006,"millis":0.456006,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":410106,"millis":0.410106,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":372206,"millis":0.372206,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":524608,"millis":0.524608,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":425506,"millis":0.425506,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":24700,"millis":0.0247,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":334504,"millis":0.334504,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":327304,"millis":0.327304,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":302204,"millis":0.302204,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":66201,"millis":0.066201,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":334005,"millis":0.334005,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:50.467 [print] https:\/\/geodata.nationaalgeoregister.nl\/inspire\/ps-natura2000\/wms?request=Getcapabilities&service=wms \n"},{"result":{"nanos":475607,"millis":0.475607,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":99502,"millis":0.099502,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:50.467 [print] OGC:WMS \n"},{"result":{"nanos":429406,"millis":0.429406,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":71401,"millis":0.071401,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:50.468 [print] #notpresent \n"},{"result":{"nanos":1592823,"millis":1.592823,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":622909,"millis":0.622909,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:50.470 [print] OGC:WMS \n"},{"result":{"nanos":458107,"millis":0.458107,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":1191817,"millis":1.191817,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:50.472 [print] Beheer PDOK \n"},{"result":{"nanos":794212,"millis":0.794212,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:50.472 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/en\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=280ed37a-b8d2-4ac5-8567-04d84fad3a41#MD_DataIdentification \n"},{"result":{"nanos":404006,"millis":0.404006,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":692810,"millis":0.69281,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"a7aeddf2-3b37-4668-9c75-de93d9326276\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":378006,"millis":0.378006,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"a7aeddf2-3b37-4668-9c75-de93d9326276\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":559.736593,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"a7aeddf2-3b37-4668-9c75-de93d9326276","startTime":1629213709913,"refId":"[1.94:67]","endTime":1629213710474,"exampleData":{"datasetIdentifierCode":"a7aeddf2-3b37-4668-9c75-de93d9326276"},"exampleIndex":93},{"sectionIndex":0,"stepResults":[{"result":{"nanos":17400,"millis":0.0174,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:49.984 karate.env system property was: null \n"},{"result":{"nanos":26901,"millis":0.026901,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":46400,"millis":0.0464,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":51801,"millis":0.051801,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":226904,"millis":0.226904,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":40400,"millis":0.0404,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":376906,"millis":0.376906,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":31501,"millis":0.031501,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":427706,"millis":0.427706,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":122002,"millis":0.122002,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":56001,"millis":0.056001,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":16200,"millis":0.0162,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":21801,"millis":0.021801,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5400,"millis":0.0054,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":74401,"millis":0.074401,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'b023459a-9f0e-4d53-8059-a794119abbed'"}},{"result":{"nanos":5300,"millis":0.0053,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":538888994,"millis":538.888994,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":3500,"millis":0.0035,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":530108,"millis":0.530108,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'b023459a-9f0e-4d53-8059-a794119abbed'"}},{"result":{"nanos":504408,"millis":0.504408,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":478907,"millis":0.478907,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":398706,"millis":0.398706,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":407906,"millis":0.407906,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":405706,"millis":0.405706,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":21600,"millis":0.0216,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":291505,"millis":0.291505,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":299204,"millis":0.299204,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":304205,"millis":0.304205,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":58601,"millis":0.058601,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":1197417,"millis":1.197417,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:50.530 [print] https:\/\/geodata.nationaalgeoregister.nl\/inspire\/ps-cdda\/wfs?request=GetCapabilities&service=wfs \n"},{"result":{"nanos":348905,"millis":0.348905,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":398805,"millis":0.398805,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:50.531 [print] OGC:WFS \n"},{"result":{"nanos":317804,"millis":0.317804,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":411506,"millis":0.411506,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:50.532 [print] #notpresent \n"},{"result":{"nanos":33600,"millis":0.0336,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":47501,"millis":0.047501,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:50.532 [print] OGC:WFS \n"},{"result":{"nanos":408606,"millis":0.408606,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":194103,"millis":0.194103,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:50.532 [print] Beheer PDOK \n"},{"result":{"nanos":413606,"millis":0.413606,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:50.533 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=3387ef8a-9237-453a-aa4e-585d1e193550#MD_DataIdentification \n"},{"result":{"nanos":411106,"millis":0.411106,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":533708,"millis":0.533708,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"b023459a-9f0e-4d53-8059-a794119abbed\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":378705,"millis":0.378705,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"b023459a-9f0e-4d53-8059-a794119abbed\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":549.244646,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"b023459a-9f0e-4d53-8059-a794119abbed","startTime":1629213709983,"refId":"[1.95:67]","endTime":1629213710534,"exampleData":{"datasetIdentifierCode":"b023459a-9f0e-4d53-8059-a794119abbed"},"exampleIndex":94},{"sectionIndex":0,"stepResults":[{"result":{"nanos":29901,"millis":0.029901,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:50.149 karate.env system property was: null \n"},{"result":{"nanos":39900,"millis":0.0399,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":50001,"millis":0.050001,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":44101,"millis":0.044101,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":310604,"millis":0.310604,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":40600,"millis":0.0406,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":356905,"millis":0.356905,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":29300,"millis":0.0293,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":179803,"millis":0.179803,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":132302,"millis":0.132302,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":136602,"millis":0.136602,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":16100,"millis":0.0161,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18201,"millis":0.018201,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":45601,"millis":0.045601,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'bfe4f5c6-b6d2-4a63-a7b7-961dd9c9fcaa'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":529414657,"millis":529.414657,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5200,"millis":0.0052,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":463807,"millis":0.463807,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'bfe4f5c6-b6d2-4a63-a7b7-961dd9c9fcaa'"}},{"result":{"nanos":355005,"millis":0.355005,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":304505,"millis":0.304505,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":314704,"millis":0.314704,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":361305,"millis":0.361305,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":328305,"millis":0.328305,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":23900,"millis":0.0239,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":272604,"millis":0.272604,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":258404,"millis":0.258404,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":274204,"millis":0.274204,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":62800,"millis":0.0628,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":449206,"millis":0.449206,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:50.684 [print] https:\/\/service.pdok.nl\/kadaster\/lc\/wms\/v1_0?request=GetCapabilities&service=WMS \n"},{"result":{"nanos":293404,"millis":0.293404,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":220903,"millis":0.220903,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:50.684 [print] OGC:WMS \n"},{"result":{"nanos":290804,"millis":0.290804,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":65201,"millis":0.065201,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:50.684 [print] #notpresent \n"},{"result":{"nanos":161102,"millis":0.161102,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":160503,"millis":0.160503,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:50.685 [print] OGC:WMS \n"},{"result":{"nanos":321204,"millis":0.321204,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":118402,"millis":0.118402,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:50.685 [print] Beheer PDOK \n"},{"result":{"nanos":46901,"millis":0.046901,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:50.685 [print] https:\/\/ngr.acceptatie.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=1689d1b7-ef22-417a-becd-d8d9a8a90a10#MD_DataIdentification \n"},{"result":{"nanos":322005,"millis":0.322005,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":644909,"millis":0.644909,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"bfe4f5c6-b6d2-4a63-a7b7-961dd9c9fcaa\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":420106,"millis":0.420106,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"bfe4f5c6-b6d2-4a63-a7b7-961dd9c9fcaa\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":537.402071,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"bfe4f5c6-b6d2-4a63-a7b7-961dd9c9fcaa","startTime":1629213710148,"refId":"[1.96:67]","endTime":1629213710687,"exampleData":{"datasetIdentifierCode":"bfe4f5c6-b6d2-4a63-a7b7-961dd9c9fcaa"},"exampleIndex":95},{"sectionIndex":0,"stepResults":[{"result":{"nanos":17300,"millis":0.0173,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:50.406 karate.env system property was: null \n"},{"result":{"nanos":25700,"millis":0.0257,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":48301,"millis":0.048301,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":44000,"millis":0.044,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":227203,"millis":0.227203,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":39401,"millis":0.039401,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":355205,"millis":0.355205,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":28900,"millis":0.0289,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":78801,"millis":0.078801,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":362705,"millis":0.362705,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":89102,"millis":0.089102,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":17000,"millis":0.017,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18700,"millis":0.0187,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4401,"millis":0.004401,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":50501,"millis":0.050501,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'f1e26638-3b45-4dd5-9ad0-f7d3654700f1'"}},{"result":{"nanos":5200,"millis":0.0052,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":564287261,"millis":564.287261,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5300,"millis":0.0053,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":554308,"millis":0.554308,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'f1e26638-3b45-4dd5-9ad0-f7d3654700f1'"}},{"result":{"nanos":432107,"millis":0.432107,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":384805,"millis":0.384805,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":325604,"millis":0.325604,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":395605,"millis":0.395605,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":359606,"millis":0.359606,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":44101,"millis":0.044101,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":286004,"millis":0.286004,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":291304,"millis":0.291304,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":296105,"millis":0.296105,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":69801,"millis":0.069801,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":109302,"millis":0.109302,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:50.977 [print] https:\/\/geodata.nationaalgeoregister.nl\/cbsvierkanten500mv2\/wfs?request=GetCapabilities&service=WFS \n"},{"result":{"nanos":701910,"millis":0.70191,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":125902,"millis":0.125902,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:50.977 [print] OGC:WFS \n"},{"result":{"nanos":381206,"millis":0.381206,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":96201,"millis":0.096201,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:50.978 [print] #notpresent \n"},{"result":{"nanos":33701,"millis":0.033701,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":65501,"millis":0.065501,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:50.978 [print] OGC:WFS \n"},{"result":{"nanos":435106,"millis":0.435106,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":93001,"millis":0.093001,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:50.979 [print] Beheer PDOK \n"},{"result":{"nanos":46401,"millis":0.046401,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:50.979 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=f605a24f-60cd-4c40-94c8-2186aba3ddd0#MD_DataIdentification \n"},{"result":{"nanos":682910,"millis":0.68291,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":663010,"millis":0.66301,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"f1e26638-3b45-4dd5-9ad0-f7d3654700f1\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":426406,"millis":0.426406,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"f1e26638-3b45-4dd5-9ad0-f7d3654700f1\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":573.013288,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"f1e26638-3b45-4dd5-9ad0-f7d3654700f1","startTime":1629213710406,"refId":"[1.97:67]","endTime":1629213710981,"exampleData":{"datasetIdentifierCode":"f1e26638-3b45-4dd5-9ad0-f7d3654700f1"},"exampleIndex":96},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16500,"millis":0.0165,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:50.476 karate.env system property was: null \n"},{"result":{"nanos":27900,"millis":0.0279,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":47201,"millis":0.047201,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":42401,"millis":0.042401,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":231303,"millis":0.231303,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":37001,"millis":0.037001,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":375606,"millis":0.375606,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":29800,"millis":0.0298,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":414506,"millis":0.414506,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":116602,"millis":0.116602,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":55001,"millis":0.055001,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":17100,"millis":0.0171,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17900,"millis":0.0179,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":45701,"millis":0.045701,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'a2fdecfc-de33-4ce3-b935-4c9ac18c5a36'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":549036740,"millis":549.03674,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":485207,"millis":0.485207,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'a2fdecfc-de33-4ce3-b935-4c9ac18c5a36'"}},{"result":{"nanos":443807,"millis":0.443807,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":366805,"millis":0.366805,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":362505,"millis":0.362505,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":460807,"millis":0.460807,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":404606,"millis":0.404606,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":27200,"millis":0.0272,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":306905,"millis":0.306905,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":298604,"millis":0.298604,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":300704,"millis":0.300704,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":68801,"millis":0.068801,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":95802,"millis":0.095802,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:51.031 [print] https:\/\/geodata.nationaalgeoregister.nl\/cbsvierkanten500mv2\/wms\/?request=GetCapabilities&service=WMS \n"},{"result":{"nanos":319605,"millis":0.319605,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":110001,"millis":0.110001,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:51.031 [print] OGC:WMS \n"},{"result":{"nanos":315104,"millis":0.315104,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":97602,"millis":0.097602,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:51.032 [print] #notpresent \n"},{"result":{"nanos":30900,"millis":0.0309,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":50000,"millis":0.05,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:51.032 [print] OGC:WMS \n"},{"result":{"nanos":376406,"millis":0.376406,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":85301,"millis":0.085301,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:51.032 [print] Beheer PDOK \n"},{"result":{"nanos":50701,"millis":0.050701,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:51.033 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=f605a24f-60cd-4c40-94c8-2186aba3ddd0#MD_DataIdentification \n"},{"result":{"nanos":378306,"millis":0.378306,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":622909,"millis":0.622909,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"a2fdecfc-de33-4ce3-b935-4c9ac18c5a36\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":404706,"millis":0.404706,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"a2fdecfc-de33-4ce3-b935-4c9ac18c5a36\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":556.996856,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"a2fdecfc-de33-4ce3-b935-4c9ac18c5a36","startTime":1629213710476,"refId":"[1.98:67]","endTime":1629213711034,"exampleData":{"datasetIdentifierCode":"a2fdecfc-de33-4ce3-b935-4c9ac18c5a36"},"exampleIndex":97},{"sectionIndex":0,"stepResults":[{"result":{"nanos":71001,"millis":0.071001,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:50.536 karate.env system property was: null \n"},{"result":{"nanos":30900,"millis":0.0309,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":50701,"millis":0.050701,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":43601,"millis":0.043601,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":262004,"millis":0.262004,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":50000,"millis":0.05,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":450406,"millis":0.450406,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":32301,"millis":0.032301,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":178503,"millis":0.178503,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":106601,"millis":0.106601,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":54701,"millis":0.054701,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":15000,"millis":0.015,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":16400,"millis":0.0164,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":45601,"millis":0.045601,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'abf1f9f0-1b85-40e8-86ec-86bee6003b4e'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3700,"millis":0.0037,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":550608664,"millis":550.608664,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5800,"millis":0.0058,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":481407,"millis":0.481407,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'abf1f9f0-1b85-40e8-86ec-86bee6003b4e'"}},{"result":{"nanos":450306,"millis":0.450306,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":371105,"millis":0.371105,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":372706,"millis":0.372706,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":421106,"millis":0.421106,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":393106,"millis":0.393106,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":36000,"millis":0.036,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":323104,"millis":0.323104,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":296504,"millis":0.296504,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":351605,"millis":0.351605,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":135802,"millis":0.135802,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":126902,"millis":0.126902,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:51.092 [print] https:\/\/geodata.nationaalgeoregister.nl\/cbsvierkanten100mv2\/wms\/?request=GetCapabilities&service=WMS \n"},{"result":{"nanos":324204,"millis":0.324204,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":918414,"millis":0.918414,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:51.094 [print] OGC:WMS \n"},{"result":{"nanos":339005,"millis":0.339005,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":110302,"millis":0.110302,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:51.094 [print] #notpresent \n"},{"result":{"nanos":35200,"millis":0.0352,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":54201,"millis":0.054201,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:51.094 [print] OGC:WMS \n"},{"result":{"nanos":396606,"millis":0.396606,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":106902,"millis":0.106902,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:51.095 [print] Beheer PDOK \n"},{"result":{"nanos":55001,"millis":0.055001,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:51.095 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=1462bbce-ccd3-4362-83d8-4535ca8f44eb#MD_DataIdentification \n"},{"result":{"nanos":385606,"millis":0.385606,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":663910,"millis":0.66391,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"abf1f9f0-1b85-40e8-86ec-86bee6003b4e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":410306,"millis":0.410306,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"abf1f9f0-1b85-40e8-86ec-86bee6003b4e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":559.598694,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"abf1f9f0-1b85-40e8-86ec-86bee6003b4e","startTime":1629213710536,"refId":"[1.99:67]","endTime":1629213711096,"exampleData":{"datasetIdentifierCode":"abf1f9f0-1b85-40e8-86ec-86bee6003b4e"},"exampleIndex":98},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16001,"millis":0.016001,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:50.689 karate.env system property was: null \n"},{"result":{"nanos":27000,"millis":0.027,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":69901,"millis":0.069901,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":48101,"millis":0.048101,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":267404,"millis":0.267404,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":50001,"millis":0.050001,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":409006,"millis":0.409006,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":32801,"millis":0.032801,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":175202,"millis":0.175202,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":138402,"millis":0.138402,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":61901,"millis":0.061901,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":23400,"millis":0.0234,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19801,"millis":0.019801,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5200,"millis":0.0052,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":52201,"millis":0.052201,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '488c1e6d-363e-4476-b2ff-17756ac9b35f'"}},{"result":{"nanos":5700,"millis":0.0057,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":5300,"millis":0.0053,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":562552037,"millis":562.552037,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":7300,"millis":0.0073,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":523008,"millis":0.523008,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '488c1e6d-363e-4476-b2ff-17756ac9b35f'"}},{"result":{"nanos":440507,"millis":0.440507,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":365205,"millis":0.365205,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":335705,"millis":0.335705,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":425306,"millis":0.425306,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":383905,"millis":0.383905,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":25900,"millis":0.0259,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":289904,"millis":0.289904,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":295704,"millis":0.295704,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":282204,"millis":0.282204,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":956314,"millis":0.956314,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":1277219,"millis":1.277219,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:51.259 [print] https:\/\/geodata.nationaalgeoregister.nl\/cbsgebiedsindelingen\/wms?request=GetCapabilities&service=WMS \n"},{"result":{"nanos":359705,"millis":0.359705,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":465006,"millis":0.465006,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:51.260 [print] OGC:WMS \n"},{"result":{"nanos":333004,"millis":0.333004,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":64100,"millis":0.0641,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:51.260 [print] #notpresent \n"},{"result":{"nanos":186202,"millis":0.186202,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":214504,"millis":0.214504,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:51.261 [print] OGC:WMS \n"},{"result":{"nanos":423506,"millis":0.423506,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":205403,"millis":0.205403,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:51.261 [print] Beheer PDOK \n"},{"result":{"nanos":657610,"millis":0.65761,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:51.262 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=effe1ab0-073d-437c-af13-df5c5e07d6cd#MD_DataIdentification \n"},{"result":{"nanos":388006,"millis":0.388006,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":648609,"millis":0.648609,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"488c1e6d-363e-4476-b2ff-17756ac9b35f\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":418406,"millis":0.418406,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"488c1e6d-363e-4476-b2ff-17756ac9b35f\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":573.936001,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"488c1e6d-363e-4476-b2ff-17756ac9b35f","startTime":1629213710689,"refId":"[1.100:67]","endTime":1629213711264,"exampleData":{"datasetIdentifierCode":"488c1e6d-363e-4476-b2ff-17756ac9b35f"},"exampleIndex":99},{"sectionIndex":0,"stepResults":[{"result":{"nanos":17100,"millis":0.0171,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:50.983 karate.env system property was: null \n"},{"result":{"nanos":30501,"millis":0.030501,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":49800,"millis":0.0498,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":46201,"millis":0.046201,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":253504,"millis":0.253504,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":72201,"millis":0.072201,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":434406,"millis":0.434406,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":33801,"millis":0.033801,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":73701,"millis":0.073701,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":114002,"millis":0.114002,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":74201,"millis":0.074201,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":15700,"millis":0.0157,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":34401,"millis":0.034401,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":6500,"millis":0.0065,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":7801,"millis":0.007801,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":53600,"millis":0.0536,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'e08079df-6c19-486e-916e-5c9948cfafea'"}},{"result":{"nanos":6500,"millis":0.0065,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":5400,"millis":0.0054,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":530011066,"millis":530.011066,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5900,"millis":0.0059,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":616309,"millis":0.616309,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'e08079df-6c19-486e-916e-5c9948cfafea'"}},{"result":{"nanos":573008,"millis":0.573008,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":438007,"millis":0.438007,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":431306,"millis":0.431306,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":534608,"millis":0.534608,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":476507,"millis":0.476507,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":24801,"millis":0.024801,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":355405,"millis":0.355405,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":382506,"millis":0.382506,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":358705,"millis":0.358705,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":1779226,"millis":1.779226,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":3760955,"millis":3.760955,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:51.525 [print] https:\/\/geodata.nationaalgeoregister.nl\/inspire\/su-vector\/wfs?&request=GetCapabilities&service=WFS \n"},{"result":{"nanos":462807,"millis":0.462807,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":543008,"millis":0.543008,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:51.525 [print] #notpresent \n"},{"result":{"nanos":385906,"millis":0.385906,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":157902,"millis":0.157902,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:51.526 [print] OGC:WFS \n"},{"result":{"nanos":38601,"millis":0.038601,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":424206,"millis":0.424206,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:51.527 [print] #notpresent \n"},{"result":{"nanos":490507,"millis":0.490507,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":608808,"millis":0.608808,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:51.528 [print] Beheer PDOK \n"},{"result":{"nanos":140802,"millis":0.140802,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:51.528 [print] https:\/\/www.nationaalgeoregister.nl:443\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=10d1153e-778f-4995-9b6c-7c69b196cccb#MD_DataIdentification \n"},{"result":{"nanos":1221718,"millis":1.221718,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":655409,"millis":0.655409,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"e08079df-6c19-486e-916e-5c9948cfafea\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":436906,"millis":0.436906,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"e08079df-6c19-486e-916e-5c9948cfafea\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":546.644209,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"e08079df-6c19-486e-916e-5c9948cfafea","startTime":1629213710983,"refId":"[1.101:67]","endTime":1629213711531,"exampleData":{"datasetIdentifierCode":"e08079df-6c19-486e-916e-5c9948cfafea"},"exampleIndex":100},{"sectionIndex":0,"stepResults":[{"result":{"nanos":21101,"millis":0.021101,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:51.036 karate.env system property was: null \n"},{"result":{"nanos":34200,"millis":0.0342,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":53301,"millis":0.053301,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":50801,"millis":0.050801,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":211703,"millis":0.211703,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":36300,"millis":0.0363,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":379506,"millis":0.379506,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":31700,"millis":0.0317,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":44601,"millis":0.044601,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":113902,"millis":0.113902,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":53001,"millis":0.053001,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13700,"millis":0.0137,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19300,"millis":0.0193,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":19101,"millis":0.019101,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5500,"millis":0.0055,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":46701,"millis":0.046701,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '88a93a3b-d522-4c5d-9b0f-c6c39a118442'"}},{"result":{"nanos":5500,"millis":0.0055,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":539243599,"millis":539.243599,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":3100,"millis":0.0031,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":506507,"millis":0.506507,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '88a93a3b-d522-4c5d-9b0f-c6c39a118442'"}},{"result":{"nanos":451507,"millis":0.451507,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":424106,"millis":0.424106,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":410106,"millis":0.410106,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":466006,"millis":0.466006,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":441906,"millis":0.441906,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":24200,"millis":0.0242,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":337404,"millis":0.337404,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":351905,"millis":0.351905,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":330505,"millis":0.330505,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":57201,"millis":0.057201,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":80301,"millis":0.080301,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:51.581 [print] https:\/\/geodata.nationaalgeoregister.nl\/inspire\/su-vector\/wms?&request=GetCapabilities&service=WMS \n"},{"result":{"nanos":701310,"millis":0.70131,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":177002,"millis":0.177002,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:51.582 [print] #notpresent \n"},{"result":{"nanos":510408,"millis":0.510408,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":69701,"millis":0.069701,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:51.583 [print] OGC:WMS \n"},{"result":{"nanos":28301,"millis":0.028301,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":58001,"millis":0.058001,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:51.583 [print] #notpresent \n"},{"result":{"nanos":584108,"millis":0.584108,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":62201,"millis":0.062201,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:51.583 [print] Beheer PDOK \n"},{"result":{"nanos":54401,"millis":0.054401,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:51.583 [print] https:\/\/www.nationaalgeoregister.nl:443\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=10d1153e-778f-4995-9b6c-7c69b196cccb#MD_DataIdentification \n"},{"result":{"nanos":430307,"millis":0.430307,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":596309,"millis":0.596309,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"88a93a3b-d522-4c5d-9b0f-c6c39a118442\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":451806,"millis":0.451806,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"88a93a3b-d522-4c5d-9b0f-c6c39a118442\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":547.995926,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"88a93a3b-d522-4c5d-9b0f-c6c39a118442","startTime":1629213711036,"refId":"[1.102:67]","endTime":1629213711585,"exampleData":{"datasetIdentifierCode":"88a93a3b-d522-4c5d-9b0f-c6c39a118442"},"exampleIndex":101},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16501,"millis":0.016501,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:51.099 karate.env system property was: null \n"},{"result":{"nanos":28800,"millis":0.0288,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":47601,"millis":0.047601,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":43901,"millis":0.043901,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":196903,"millis":0.196903,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":37100,"millis":0.0371,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":360806,"millis":0.360806,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":27900,"millis":0.0279,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":204803,"millis":0.204803,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":118302,"millis":0.118302,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":55801,"millis":0.055801,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":15300,"millis":0.0153,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":31100,"millis":0.0311,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":9400,"millis":0.0094,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":51301,"millis":0.051301,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'db1e010a-96f8-453e-b63c-9c27d6273157'"}},{"result":{"nanos":5900,"millis":0.0059,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4401,"millis":0.004401,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":551230172,"millis":551.230172,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5700,"millis":0.0057,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":640309,"millis":0.640309,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'db1e010a-96f8-453e-b63c-9c27d6273157'"}},{"result":{"nanos":575408,"millis":0.575408,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":532008,"millis":0.532008,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":490807,"millis":0.490807,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":562308,"millis":0.562308,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":527907,"millis":0.527907,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":25200,"millis":0.0252,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":379506,"millis":0.379506,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":375805,"millis":0.375805,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":393006,"millis":0.393006,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":69801,"millis":0.069801,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":746710,"millis":0.74671,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:51.657 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/bestandbodemgebruik2015\\\/wms?service=WMS&request=GetCapabilities \n"},{"result":{"nanos":443306,"millis":0.443306,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":366906,"millis":0.366906,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:51.658 [print] [\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":340105,"millis":0.340105,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":290404,"millis":0.290404,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:51.659 [print] #notpresent \n"},{"result":{"nanos":29501,"millis":0.029501,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":277104,"millis":0.277104,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:51.659 [print] [\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":440606,"millis":0.440606,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":303905,"millis":0.303905,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:51.660 [print] Beheer PDOK \n"},{"result":{"nanos":611109,"millis":0.611109,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:51.660 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=2d3dd6d2-2d2b-4b5f-9e30-86e19ed77a56#MD_DataIdentification \n"},{"result":{"nanos":412906,"millis":0.412906,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":631109,"millis":0.631109,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"db1e010a-96f8-453e-b63c-9c27d6273157\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":363805,"millis":0.363805,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"db1e010a-96f8-453e-b63c-9c27d6273157\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":562.325233,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"db1e010a-96f8-453e-b63c-9c27d6273157","startTime":1629213711098,"refId":"[1.103:67]","endTime":1629213711662,"exampleData":{"datasetIdentifierCode":"db1e010a-96f8-453e-b63c-9c27d6273157"},"exampleIndex":102},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16500,"millis":0.0165,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:51.266 karate.env system property was: null \n"},{"result":{"nanos":26600,"millis":0.0266,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":49201,"millis":0.049201,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":46101,"millis":0.046101,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":223603,"millis":0.223603,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":41000,"millis":0.041,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":387406,"millis":0.387406,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":30700,"millis":0.0307,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":48000,"millis":0.048,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":122202,"millis":0.122202,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":63701,"millis":0.063701,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":14900,"millis":0.0149,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20301,"millis":0.020301,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":55601,"millis":0.055601,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '127125c8-20c2-451a-a1c8-f9aad8ae5c5e'"}},{"result":{"nanos":7000,"millis":0.007,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":544602777,"millis":544.602777,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":6900,"millis":0.0069,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":574608,"millis":0.574608,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '127125c8-20c2-451a-a1c8-f9aad8ae5c5e'"}},{"result":{"nanos":544208,"millis":0.544208,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":471606,"millis":0.471606,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":453906,"millis":0.453906,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":531308,"millis":0.531308,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":491807,"millis":0.491807,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":25201,"millis":0.025201,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":364505,"millis":0.364505,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":367006,"millis":0.367006,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":385406,"millis":0.385406,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":68501,"millis":0.068501,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":148302,"millis":0.148302,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:51.817 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/wijkenbuurten2016\\\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":781012,"millis":0.781012,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":118401,"millis":0.118401,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:51.818 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":376505,"millis":0.376505,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":90102,"millis":0.090102,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:51.818 [print] #notpresent \n"},{"result":{"nanos":29900,"millis":0.0299,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":48701,"millis":0.048701,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:51.818 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":483907,"millis":0.483907,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":68701,"millis":0.068701,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:51.819 [print] Beheer PDOK \n"},{"result":{"nanos":67001,"millis":0.067001,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:51.819 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=6cde2ce7-3ecd-4785-b7b8-d62c3381efe9#MD_DataIdentification \n"},{"result":{"nanos":467206,"millis":0.467206,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":598108,"millis":0.598108,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"127125c8-20c2-451a-a1c8-f9aad8ae5c5e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":408306,"millis":0.408306,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"127125c8-20c2-451a-a1c8-f9aad8ae5c5e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":553.740607,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"127125c8-20c2-451a-a1c8-f9aad8ae5c5e","startTime":1629213711266,"refId":"[1.104:67]","endTime":1629213711821,"exampleData":{"datasetIdentifierCode":"127125c8-20c2-451a-a1c8-f9aad8ae5c5e"},"exampleIndex":103},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16501,"millis":0.016501,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:51.533 karate.env system property was: null \n"},{"result":{"nanos":28400,"millis":0.0284,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":50201,"millis":0.050201,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":47801,"millis":0.047801,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":243904,"millis":0.243904,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":40200,"millis":0.0402,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":387406,"millis":0.387406,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":31901,"millis":0.031901,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":78801,"millis":0.078801,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":494407,"millis":0.494407,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":66601,"millis":0.066601,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":15500,"millis":0.0155,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":27500,"millis":0.0275,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5500,"millis":0.0055,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":52901,"millis":0.052901,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'a035801a-3256-4a36-9f81-02421aacee17'"}},{"result":{"nanos":5200,"millis":0.0052,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4901,"millis":0.004901,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":657600211,"millis":657.600211,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":480707,"millis":0.480707,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'a035801a-3256-4a36-9f81-02421aacee17'"}},{"result":{"nanos":441406,"millis":0.441406,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":344705,"millis":0.344705,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":307305,"millis":0.307305,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":391906,"millis":0.391906,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":325404,"millis":0.325404,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":23600,"millis":0.0236,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":259904,"millis":0.259904,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":260404,"millis":0.260404,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":262004,"millis":0.262004,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":123502,"millis":0.123502,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":130002,"millis":0.130002,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:52.196 [print] https:\/\/geodata.nationaalgeoregister.nl\/wijkenbuurten2018\/wms?request=GetCapabilities&service=WMS \n"},{"result":{"nanos":291204,"millis":0.291204,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":103202,"millis":0.103202,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:52.197 [print] OGC:WMS \n"},{"result":{"nanos":297704,"millis":0.297704,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":78001,"millis":0.078001,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:52.197 [print] #notpresent \n"},{"result":{"nanos":25700,"millis":0.0257,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":64101,"millis":0.064101,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:52.197 [print] OGC:WMS \n"},{"result":{"nanos":354005,"millis":0.354005,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":84301,"millis":0.084301,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:52.198 [print] Beheer PDOK \n"},{"result":{"nanos":39401,"millis":0.039401,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:52.198 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=ffefc3dc-dc8f-4589-ae22-a60bebcdf5cb#MD_DataIdentification \n"},{"result":{"nanos":335405,"millis":0.335405,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":603108,"millis":0.603108,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"a035801a-3256-4a36-9f81-02421aacee17\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":378105,"millis":0.378105,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"a035801a-3256-4a36-9f81-02421aacee17\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":665.211222,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"a035801a-3256-4a36-9f81-02421aacee17","startTime":1629213711533,"refId":"[1.105:67]","endTime":1629213712199,"exampleData":{"datasetIdentifierCode":"a035801a-3256-4a36-9f81-02421aacee17"},"exampleIndex":104},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16300,"millis":0.0163,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:51.587 karate.env system property was: null \n"},{"result":{"nanos":26900,"millis":0.0269,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":46901,"millis":0.046901,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":44500,"millis":0.0445,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":208003,"millis":0.208003,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":39000,"millis":0.039,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":371805,"millis":0.371805,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":31401,"millis":0.031401,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":251903,"millis":0.251903,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":120901,"millis":0.120901,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":60301,"millis":0.060301,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":16001,"millis":0.016001,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18400,"millis":0.0184,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":6400,"millis":0.0064,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":7000,"millis":0.007,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":54700,"millis":0.0547,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '3ac5737f-55ed-455d-8350-44af11b67fc3'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":666618641,"millis":666.618641,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":509007,"millis":0.509007,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '3ac5737f-55ed-455d-8350-44af11b67fc3'"}},{"result":{"nanos":420006,"millis":0.420006,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":351205,"millis":0.351205,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":381906,"millis":0.381906,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":419906,"millis":0.419906,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":382006,"millis":0.382006,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":26700,"millis":0.0267,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":288904,"millis":0.288904,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":277004,"millis":0.277004,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":290304,"millis":0.290304,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":782811,"millis":0.782811,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":756011,"millis":0.756011,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:52.261 [print] https:\/\/geodata.nationaalgeoregister.nl\/wijkenbuurten2019\/wms?request=GetCapabilities&service=WMS \n"},{"result":{"nanos":298105,"millis":0.298105,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":474807,"millis":0.474807,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:52.262 [print] OGC:WMS \n"},{"result":{"nanos":305204,"millis":0.305204,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":448706,"millis":0.448706,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:52.262 [print] #notpresent \n"},{"result":{"nanos":33600,"millis":0.0336,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":365405,"millis":0.365405,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:52.263 [print] OGC:WMS \n"},{"result":{"nanos":325004,"millis":0.325004,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":419407,"millis":0.419407,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:52.264 [print] Beheer PDOK \n"},{"result":{"nanos":811011,"millis":0.811011,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:52.264 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=5c37d29a-006d-4136-8989-adfc35a1d4a7#MD_DataIdentification \n"},{"result":{"nanos":310504,"millis":0.310504,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":632710,"millis":0.63271,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"3ac5737f-55ed-455d-8350-44af11b67fc3\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":384205,"millis":0.384205,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"3ac5737f-55ed-455d-8350-44af11b67fc3\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":677.647195,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"3ac5737f-55ed-455d-8350-44af11b67fc3","startTime":1629213711587,"refId":"[1.106:67]","endTime":1629213712266,"exampleData":{"datasetIdentifierCode":"3ac5737f-55ed-455d-8350-44af11b67fc3"},"exampleIndex":105},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15200,"millis":0.0152,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:51.664 karate.env system property was: null \n"},{"result":{"nanos":27401,"millis":0.027401,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":43401,"millis":0.043401,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":42100,"millis":0.0421,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":203003,"millis":0.203003,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":36401,"millis":0.036401,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":1337519,"millis":1.337519,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":42200,"millis":0.0422,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":82102,"millis":0.082102,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":465007,"millis":0.465007,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":71101,"millis":0.071101,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":17501,"millis":0.017501,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19400,"millis":0.0194,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":6100,"millis":0.0061,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":50901,"millis":0.050901,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'feabca04-e3fd-4802-96f2-583d328e30ad'"}},{"result":{"nanos":5400,"millis":0.0054,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":631024426,"millis":631.024426,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5600,"millis":0.0056,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":472007,"millis":0.472007,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'feabca04-e3fd-4802-96f2-583d328e30ad'"}},{"result":{"nanos":400906,"millis":0.400906,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":362605,"millis":0.362605,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":347105,"millis":0.347105,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":406106,"millis":0.406106,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":361805,"millis":0.361805,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":22101,"millis":0.022101,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":245803,"millis":0.245803,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":253903,"millis":0.253903,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":255104,"millis":0.255104,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":640609,"millis":0.640609,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":755911,"millis":0.755911,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:52.302 [print] https:\/\/geodata.nationaalgeoregister.nl\/wijkenbuurten2018\/wfs?request=GetCapabilities&service=WFS \n"},{"result":{"nanos":301104,"millis":0.301104,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":481707,"millis":0.481707,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:52.303 [print] OGC:WFS \n"},{"result":{"nanos":319104,"millis":0.319104,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":412706,"millis":0.412706,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:52.304 [print] #notpresent \n"},{"result":{"nanos":33900,"millis":0.0339,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":356605,"millis":0.356605,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:52.304 [print] OGC:WFS \n"},{"result":{"nanos":326304,"millis":0.326304,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":425807,"millis":0.425807,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:52.305 [print] Beheer PDOK \n"},{"result":{"nanos":841612,"millis":0.841612,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:52.306 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=ffefc3dc-dc8f-4589-ae22-a60bebcdf5cb#MD_DataIdentification \n"},{"result":{"nanos":316705,"millis":0.316705,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":592208,"millis":0.592208,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"feabca04-e3fd-4802-96f2-583d328e30ad\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":357505,"millis":0.357505,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"feabca04-e3fd-4802-96f2-583d328e30ad\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":642.792695,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"feabca04-e3fd-4802-96f2-583d328e30ad","startTime":1629213711663,"refId":"[1.107:67]","endTime":1629213712307,"exampleData":{"datasetIdentifierCode":"feabca04-e3fd-4802-96f2-583d328e30ad"},"exampleIndex":106},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16100,"millis":0.0161,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:51.823 karate.env system property was: null \n"},{"result":{"nanos":28000,"millis":0.028,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":51201,"millis":0.051201,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":45301,"millis":0.045301,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":225103,"millis":0.225103,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":38901,"millis":0.038901,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":387305,"millis":0.387305,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":30800,"millis":0.0308,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":47301,"millis":0.047301,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":115102,"millis":0.115102,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":57801,"millis":0.057801,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":14000,"millis":0.014,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18100,"millis":0.0181,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5400,"millis":0.0054,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5200,"millis":0.0052,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":52301,"millis":0.052301,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '5be14ec9-9bb3-4395-a061-e7e78d04a527'"}},{"result":{"nanos":5200,"millis":0.0052,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":548102227,"millis":548.102227,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":7400,"millis":0.0074,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":644109,"millis":0.644109,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '5be14ec9-9bb3-4395-a061-e7e78d04a527'"}},{"result":{"nanos":564108,"millis":0.564108,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":467807,"millis":0.467807,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":458407,"millis":0.458407,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":527108,"millis":0.527108,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":499207,"millis":0.499207,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":27701,"millis":0.027701,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":362505,"millis":0.362505,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":352505,"millis":0.352505,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":353405,"millis":0.353405,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":776811,"millis":0.776811,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":860412,"millis":0.860412,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:52.378 [print] https:\/\/geodata.nationaalgeoregister.nl\/inspire\/bu\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":402806,"millis":0.402806,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":518008,"millis":0.518008,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:52.379 [print] OGC:WMS \n"},{"result":{"nanos":403306,"millis":0.403306,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":501107,"millis":0.501107,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:52.380 [print] #notpresent \n"},{"result":{"nanos":41100,"millis":0.0411,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":450007,"millis":0.450007,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:52.381 [print] OGC:WMS \n"},{"result":{"nanos":515708,"millis":0.515708,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":451806,"millis":0.451806,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:52.382 [print] Beheer PDOK \n"},{"result":{"nanos":830712,"millis":0.830712,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:52.383 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=b4ae622c-6201-49d8-bd2e-f7fce9206a1e#MD_DataIdentification \n"},{"result":{"nanos":407406,"millis":0.407406,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":615709,"millis":0.615709,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"5be14ec9-9bb3-4395-a061-e7e78d04a527\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":4342963,"millis":4.342963,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"5be14ec9-9bb3-4395-a061-e7e78d04a527\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":564.632266,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"5be14ec9-9bb3-4395-a061-e7e78d04a527","startTime":1629213711822,"refId":"[1.108:67]","endTime":1629213712388,"exampleData":{"datasetIdentifierCode":"5be14ec9-9bb3-4395-a061-e7e78d04a527"},"exampleIndex":107},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14500,"millis":0.0145,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:52.201 karate.env system property was: null \n"},{"result":{"nanos":27601,"millis":0.027601,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":40800,"millis":0.0408,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":42101,"millis":0.042101,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":228803,"millis":0.228803,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":37000,"millis":0.037,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":363106,"millis":0.363106,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":28600,"millis":0.0286,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":71001,"millis":0.071001,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":117402,"millis":0.117402,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":58101,"millis":0.058101,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":14300,"millis":0.0143,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":22900,"millis":0.0229,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":14500,"millis":0.0145,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":77902,"millis":0.077902,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'a1ed8a00-da07-472e-9627-99175d437c94'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3500,"millis":0.0035,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":532664704,"millis":532.664704,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5700,"millis":0.0057,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":822212,"millis":0.822212,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'a1ed8a00-da07-472e-9627-99175d437c94'"}},{"result":{"nanos":561808,"millis":0.561808,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":473207,"millis":0.473207,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":418207,"millis":0.418207,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":3662453,"millis":3.662453,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":733911,"millis":0.733911,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":98701,"millis":0.098701,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":446707,"millis":0.446707,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":487007,"millis":0.487007,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":448606,"millis":0.448606,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":1013715,"millis":1.013715,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":1239418,"millis":1.239418,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:52.745 [print] https:\/\/geodata.nationaalgeoregister.nl\/ienw\/geluidskaartschipholetmaal\/v2\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":509108,"millis":0.509108,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":773611,"millis":0.773611,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:52.748 [print] OGC:WMS \n"},{"result":{"nanos":460207,"millis":0.460207,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":554508,"millis":0.554508,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:52.749 [print] #notpresent \n"},{"result":{"nanos":95201,"millis":0.095201,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":523108,"millis":0.523108,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:52.749 [print] OGC:WMS \n"},{"result":{"nanos":477407,"millis":0.477407,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":512107,"millis":0.512107,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:52.750 [print] Beheer PDOK \n"},{"result":{"nanos":1097215,"millis":1.097215,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:52.750 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=83dab947-387b-49df-8ad2-32bb10d46d38#MD_DataIdentification \n"},{"result":{"nanos":448106,"millis":0.448106,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":543408,"millis":0.543408,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"a1ed8a00-da07-472e-9627-99175d437c94\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":500908,"millis":0.500908,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"a1ed8a00-da07-472e-9627-99175d437c94\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":550.742667,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"a1ed8a00-da07-472e-9627-99175d437c94","startTime":1629213712201,"refId":"[1.109:67]","endTime":1629213712753,"exampleData":{"datasetIdentifierCode":"a1ed8a00-da07-472e-9627-99175d437c94"},"exampleIndex":108},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16300,"millis":0.0163,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:52.268 karate.env system property was: null \n"},{"result":{"nanos":27601,"millis":0.027601,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":47500,"millis":0.0475,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":42601,"millis":0.042601,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":214003,"millis":0.214003,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":36901,"millis":0.036901,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":667010,"millis":0.66701,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":35500,"millis":0.0355,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":397905,"millis":0.397905,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":118602,"millis":0.118602,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":56301,"millis":0.056301,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":17301,"millis":0.017301,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":31300,"millis":0.0313,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5300,"millis":0.0053,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":397006,"millis":0.397006,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":103502,"millis":0.103502,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'c474b492-da63-4a33-9bdd-b3709ce2cd6c'"}},{"result":{"nanos":6700,"millis":0.0067,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":538933095,"millis":538.933095,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":6201,"millis":0.006201,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":687410,"millis":0.68741,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'c474b492-da63-4a33-9bdd-b3709ce2cd6c'"}},{"result":{"nanos":529108,"millis":0.529108,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":433606,"millis":0.433606,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":414206,"millis":0.414206,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":684810,"millis":0.68481,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":575108,"millis":0.575108,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":83901,"millis":0.083901,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":410006,"millis":0.410006,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":407306,"millis":0.407306,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":431006,"millis":0.431006,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":193003,"millis":0.193003,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":226404,"millis":0.226404,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:52.815 [print] https:\/\/geodata.nationaalgeoregister.nl\/ienw\/geluidskaartschipholnacht\/v2\/wms?request=GetCapabilities \n"},{"result":{"nanos":460707,"millis":0.460707,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":370405,"millis":0.370405,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:52.816 [print] #notpresent \n"},{"result":{"nanos":575508,"millis":0.575508,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":158802,"millis":0.158802,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:52.817 [print] OGC:WMS \n"},{"result":{"nanos":84001,"millis":0.084001,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":117802,"millis":0.117802,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:52.817 [print] #notpresent \n"},{"result":{"nanos":738311,"millis":0.738311,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":258103,"millis":0.258103,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:52.818 [print] Beheer PDOK \n"},{"result":{"nanos":240403,"millis":0.240403,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:52.818 [print] https:\/\/www.nationaalgeoregister.nl:443\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=58d39928-f502-48c9-a8c1-03244dc181bf#MD_DataIdentification \n"},{"result":{"nanos":926713,"millis":0.926713,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":536508,"millis":0.536508,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"c474b492-da63-4a33-9bdd-b3709ce2cd6c\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":381306,"millis":0.381306,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"c474b492-da63-4a33-9bdd-b3709ce2cd6c\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":551.089672,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"c474b492-da63-4a33-9bdd-b3709ce2cd6c","startTime":1629213712267,"refId":"[1.110:67]","endTime":1629213712820,"exampleData":{"datasetIdentifierCode":"c474b492-da63-4a33-9bdd-b3709ce2cd6c"},"exampleIndex":109},{"sectionIndex":0,"stepResults":[{"result":{"nanos":17000,"millis":0.017,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:52.310 karate.env system property was: null \n"},{"result":{"nanos":30901,"millis":0.030901,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":46100,"millis":0.0461,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":43000,"millis":0.043,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":204003,"millis":0.204003,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":37501,"millis":0.037501,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":357405,"millis":0.357405,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":28201,"millis":0.028201,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":409006,"millis":0.409006,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":122802,"millis":0.122802,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":55101,"millis":0.055101,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":16300,"millis":0.0163,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19400,"millis":0.0194,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":48701,"millis":0.048701,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '7827b68f-647e-46cc-a02a-cac48eaa5dda'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":249903,"millis":0.249903,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":577721355,"millis":577.721355,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":844312,"millis":0.844312,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '7827b68f-647e-46cc-a02a-cac48eaa5dda'"}},{"result":{"nanos":533908,"millis":0.533908,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":486007,"millis":0.486007,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":388705,"millis":0.388705,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":617109,"millis":0.617109,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":523007,"millis":0.523007,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":77201,"millis":0.077201,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":366105,"millis":0.366105,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":378806,"millis":0.378806,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":387805,"millis":0.387805,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":369405,"millis":0.369405,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":392906,"millis":0.392906,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:52.896 [print] https:\/\/geodata.nationaalgeoregister.nl\/ienw\/geluidskaartschipholnacht\/v2\/wfs?request=GetCapabilities&service=wfs \n"},{"result":{"nanos":400406,"millis":0.400406,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":267004,"millis":0.267004,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:52.897 [print] OGC:WFS \n"},{"result":{"nanos":388606,"millis":0.388606,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":279704,"millis":0.279704,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:52.897 [print] #notpresent \n"},{"result":{"nanos":78501,"millis":0.078501,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":224804,"millis":0.224804,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:52.898 [print] OGC:WFS \n"},{"result":{"nanos":429906,"millis":0.429906,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":258104,"millis":0.258104,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:52.898 [print] Beheer PDOK \n"},{"result":{"nanos":493307,"millis":0.493307,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:52.899 [print] https:\/\/www.nationaalgeoregister.nl:443\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=58d39928-f502-48c9-a8c1-03244dc181bf#MD_DataIdentification \n"},{"result":{"nanos":410206,"millis":0.410206,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":423507,"millis":0.423507,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"7827b68f-647e-46cc-a02a-cac48eaa5dda\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":329705,"millis":0.329705,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"7827b68f-647e-46cc-a02a-cac48eaa5dda\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":588.775415,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"7827b68f-647e-46cc-a02a-cac48eaa5dda","startTime":1629213712310,"refId":"[1.111:67]","endTime":1629213712900,"exampleData":{"datasetIdentifierCode":"7827b68f-647e-46cc-a02a-cac48eaa5dda"},"exampleIndex":110},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16400,"millis":0.0164,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:52.390 karate.env system property was: null \n"},{"result":{"nanos":30200,"millis":0.0302,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":43400,"millis":0.0434,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":47601,"millis":0.047601,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":223103,"millis":0.223103,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":38000,"millis":0.038,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":348605,"millis":0.348605,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":27301,"millis":0.027301,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":406906,"millis":0.406906,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":140702,"millis":0.140702,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":61601,"millis":0.061601,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":16401,"millis":0.016401,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":43900,"millis":0.0439,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":8000,"millis":0.008,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":84601,"millis":0.084601,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '9c4862c3-0bab-49c3-bc2f-ac5486826766'"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":613124168,"millis":613.124168,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5700,"millis":0.0057,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":1958728,"millis":1.958728,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '9c4862c3-0bab-49c3-bc2f-ac5486826766'"}},{"result":{"nanos":2333233,"millis":2.333233,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":2264232,"millis":2.264232,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":2420736,"millis":2.420736,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":2493236,"millis":2.493236,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":2426335,"millis":2.426335,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":107502,"millis":0.107502,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":1525522,"millis":1.525522,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":1509222,"millis":1.509222,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":1642124,"millis":1.642124,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":325305,"millis":0.325305,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":164403,"millis":0.164403,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:53.025 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/habitatrichtlijnverspreidingsoorten\\\/v2\\\/wfs?request=GetCapabilities \n"},{"result":{"nanos":1669624,"millis":1.669624,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":160902,"millis":0.160902,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:53.027 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":1546522,"millis":1.546522,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":118502,"millis":0.118502,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:53.028 [print] #notpresent \n"},{"result":{"nanos":73601,"millis":0.073601,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":132602,"millis":0.132602,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:53.028 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":2301534,"millis":2.301534,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":126302,"millis":0.126302,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:53.031 [print] Beheer PDOK \n"},{"result":{"nanos":102101,"millis":0.102101,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:53.031 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=28c4780a-1a44-4376-b283-14a50a481729#MD_DataIdentification \n"},{"result":{"nanos":2292334,"millis":2.292334,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":467707,"millis":0.467707,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"9c4862c3-0bab-49c3-bc2f-ac5486826766\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":327704,"millis":0.327704,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"9c4862c3-0bab-49c3-bc2f-ac5486826766\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":643.170802,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"9c4862c3-0bab-49c3-bc2f-ac5486826766","startTime":1629213712390,"refId":"[1.112:67]","endTime":1629213713034,"exampleData":{"datasetIdentifierCode":"9c4862c3-0bab-49c3-bc2f-ac5486826766"},"exampleIndex":111},{"sectionIndex":0,"stepResults":[{"result":{"nanos":50501,"millis":0.050501,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:52.756 karate.env system property was: null \n"},{"result":{"nanos":41701,"millis":0.041701,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":158702,"millis":0.158702,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":115902,"millis":0.115902,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":305605,"millis":0.305605,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":109901,"millis":0.109901,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":392205,"millis":0.392205,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":80101,"millis":0.080101,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":142302,"millis":0.142302,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":410806,"millis":0.410806,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":148202,"millis":0.148202,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":42801,"millis":0.042801,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":68501,"millis":0.068501,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":21600,"millis":0.0216,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":13901,"millis":0.013901,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":18000,"millis":0.018,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '9c5351c8-d8f4-41c2-9642-42a63496a6fe'"}},{"result":{"nanos":13201,"millis":0.013201,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":12300,"millis":0.0123,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":549824252,"millis":549.824252,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":6900,"millis":0.0069,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":1506722,"millis":1.506722,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '9c5351c8-d8f4-41c2-9642-42a63496a6fe'"}},{"result":{"nanos":1840227,"millis":1.840227,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":1805826,"millis":1.805826,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":1724025,"millis":1.724025,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":1780826,"millis":1.780826,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":1755125,"millis":1.755125,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":29901,"millis":0.029901,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":942314,"millis":0.942314,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":891613,"millis":0.891613,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":1031115,"millis":1.031115,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":202103,"millis":0.202103,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":117202,"millis":0.117202,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:53.322 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/habitatrichtlijnverspreidingsgebiedtypen\\\/wms?request=GetCapabilities&service=WMS \n"},{"result":{"nanos":989814,"millis":0.989814,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":121701,"millis":0.121701,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:53.324 [print] #notpresent \n"},{"result":{"nanos":974814,"millis":0.974814,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":101401,"millis":0.101401,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:53.325 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":30500,"millis":0.0305,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":44301,"millis":0.044301,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:53.325 [print] #notpresent \n"},{"result":{"nanos":1410220,"millis":1.41022,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":106702,"millis":0.106702,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:53.326 [print] Beheer PDOK \n"},{"result":{"nanos":41801,"millis":0.041801,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:53.326 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/en\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=03671a9e-6aaf-464d-be99-9aad25cef9e3 \n"},{"result":{"nanos":1377620,"millis":1.37762,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":599609,"millis":0.599609,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"9c5351c8-d8f4-41c2-9642-42a63496a6fe\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":346005,"millis":0.346005,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"9c5351c8-d8f4-41c2-9642-42a63496a6fe\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":571.748871,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"9c5351c8-d8f4-41c2-9642-42a63496a6fe","startTime":1629213712755,"refId":"[1.113:67]","endTime":1629213713329,"exampleData":{"datasetIdentifierCode":"9c5351c8-d8f4-41c2-9642-42a63496a6fe"},"exampleIndex":112},{"sectionIndex":0,"stepResults":[{"result":{"nanos":49701,"millis":0.049701,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:52.823 karate.env system property was: null \n"},{"result":{"nanos":61201,"millis":0.061201,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":135302,"millis":0.135302,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":127602,"millis":0.127602,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":318405,"millis":0.318405,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":105801,"millis":0.105801,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":390805,"millis":0.390805,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":77701,"millis":0.077701,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":135102,"millis":0.135102,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":424306,"millis":0.424306,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":142702,"millis":0.142702,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":44800,"millis":0.0448,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":29401,"millis":0.029401,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":14600,"millis":0.0146,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":12800,"millis":0.0128,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":15500,"millis":0.0155,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '1ce74355-763a-481d-b9d7-aaafbf0d7d53'"}},{"result":{"nanos":12700,"millis":0.0127,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":12400,"millis":0.0124,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":569769241,"millis":569.769241,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5400,"millis":0.0054,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":848912,"millis":0.848912,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '1ce74355-763a-481d-b9d7-aaafbf0d7d53'"}},{"result":{"nanos":1008515,"millis":1.008515,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":935014,"millis":0.935014,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":933613,"millis":0.933613,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":1046715,"millis":1.046715,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":1283619,"millis":1.283619,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":31900,"millis":0.0319,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":724610,"millis":0.72461,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":636610,"millis":0.63661,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":826412,"millis":0.826412,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":298504,"millis":0.298504,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":114402,"millis":0.114402,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:53.404 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/habitatrichtlijnverspreidingsoorten\\\/v2\\\/wms?request=GetCapabilities&service=WMS \n"},{"result":{"nanos":772111,"millis":0.772111,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":2165331,"millis":2.165331,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:53.408 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":715410,"millis":0.71541,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":66801,"millis":0.066801,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:53.409 [print] #notpresent \n"},{"result":{"nanos":26101,"millis":0.026101,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":1855027,"millis":1.855027,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:53.411 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":944913,"millis":0.944913,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":65801,"millis":0.065801,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:53.412 [print] Beheer PDOK \n"},{"result":{"nanos":40500,"millis":0.0405,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:53.412 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=28c4780a-1a44-4376-b283-14a50a481729#MD_DataIdentification \n"},{"result":{"nanos":2000429,"millis":2.000429,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":583708,"millis":0.583708,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"1ce74355-763a-481d-b9d7-aaafbf0d7d53\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":367106,"millis":0.367106,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"1ce74355-763a-481d-b9d7-aaafbf0d7d53\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":590.177534,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"1ce74355-763a-481d-b9d7-aaafbf0d7d53","startTime":1629213712822,"refId":"[1.114:67]","endTime":1629213713415,"exampleData":{"datasetIdentifierCode":"1ce74355-763a-481d-b9d7-aaafbf0d7d53"},"exampleIndex":113},{"sectionIndex":0,"stepResults":[{"result":{"nanos":46501,"millis":0.046501,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:52.902 karate.env system property was: null \n"},{"result":{"nanos":37701,"millis":0.037701,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":108101,"millis":0.108101,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":100401,"millis":0.100401,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":261604,"millis":0.261604,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":95702,"millis":0.095702,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":355505,"millis":0.355505,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":72801,"millis":0.072801,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":92202,"millis":0.092202,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":174802,"millis":0.174802,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":136302,"millis":0.136302,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":39300,"millis":0.0393,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":28201,"millis":0.028201,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":13700,"millis":0.0137,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":11500,"millis":0.0115,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":14301,"millis":0.014301,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '62dc32f1-853c-416a-876b-6e083554f1b6'"}},{"result":{"nanos":11800,"millis":0.0118,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":11400,"millis":0.0114,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":539375601,"millis":539.375601,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":3600,"millis":0.0036,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":488907,"millis":0.488907,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '62dc32f1-853c-416a-876b-6e083554f1b6'"}},{"result":{"nanos":487107,"millis":0.487107,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":486407,"millis":0.486407,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":439306,"millis":0.439306,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":480507,"millis":0.480507,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":462207,"millis":0.462207,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":26301,"millis":0.026301,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":335505,"millis":0.335505,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":395506,"millis":0.395506,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":395906,"millis":0.395906,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":359005,"millis":0.359005,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":417206,"millis":0.417206,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:53.449 [print] https:\/\/geodata.nationaalgeoregister.nl\/ienw\/geluidskaartspoorwegenetmaal\/v1\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":400506,"millis":0.400506,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":274603,"millis":0.274603,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:53.450 [print] OGC:WMS \n"},{"result":{"nanos":371505,"millis":0.371505,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":269504,"millis":0.269504,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:53.450 [print] #notpresent \n"},{"result":{"nanos":34701,"millis":0.034701,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":194303,"millis":0.194303,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:53.451 [print] OGC:WMS \n"},{"result":{"nanos":470907,"millis":0.470907,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":250604,"millis":0.250604,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:53.451 [print] Beheer PDOK \n"},{"result":{"nanos":436106,"millis":0.436106,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:53.452 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=c3c004ad-5387-4b00-a225-9afbcaa5d31b#MD_DataIdentification \n"},{"result":{"nanos":410006,"millis":0.410006,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":455606,"millis":0.455606,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"62dc32f1-853c-416a-876b-6e083554f1b6\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":330405,"millis":0.330405,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"62dc32f1-853c-416a-876b-6e083554f1b6\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":549.663651,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"62dc32f1-853c-416a-876b-6e083554f1b6","startTime":1629213712902,"refId":"[1.115:67]","endTime":1629213713453,"exampleData":{"datasetIdentifierCode":"62dc32f1-853c-416a-876b-6e083554f1b6"},"exampleIndex":114},{"sectionIndex":0,"stepResults":[{"result":{"nanos":46601,"millis":0.046601,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:53.037 karate.env system property was: null \n"},{"result":{"nanos":34800,"millis":0.0348,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":112802,"millis":0.112802,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":99002,"millis":0.099002,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":285604,"millis":0.285604,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":99501,"millis":0.099501,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":368505,"millis":0.368505,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":75001,"millis":0.075001,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":121802,"millis":0.121802,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":172903,"millis":0.172903,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":128302,"millis":0.128302,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":38600,"millis":0.0386,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":28900,"millis":0.0289,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":13800,"millis":0.0138,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":12601,"millis":0.012601,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":11900,"millis":0.0119,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '80e015fa-f0e1-487e-a7e8-84a5ba7c4e7a'"}},{"result":{"nanos":11500,"millis":0.0115,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":11100,"millis":0.0111,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":533044209,"millis":533.044209,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5600,"millis":0.0056,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":585508,"millis":0.585508,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '80e015fa-f0e1-487e-a7e8-84a5ba7c4e7a'"}},{"result":{"nanos":535907,"millis":0.535907,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":508407,"millis":0.508407,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":464407,"millis":0.464407,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":453107,"millis":0.453107,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":431406,"millis":0.431406,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":21601,"millis":0.021601,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":308504,"millis":0.308504,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":333405,"millis":0.333405,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":369206,"millis":0.369206,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":63601,"millis":0.063601,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":565308,"millis":0.565308,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:53.576 [print] https:\/\/geodata.nationaalgeoregister.nl\/ienw\/geluidskaartschipholetmaal\/v2\/wfs?request=GetCapabilities&service=wfs \n"},{"result":{"nanos":354505,"millis":0.354505,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":208003,"millis":0.208003,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:53.577 [print] OGC:WFS \n"},{"result":{"nanos":356705,"millis":0.356705,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":62301,"millis":0.062301,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:53.578 [print] #notpresent \n"},{"result":{"nanos":23401,"millis":0.023401,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":52900,"millis":0.0529,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:53.578 [print] OGC:WFS \n"},{"result":{"nanos":486407,"millis":0.486407,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":56901,"millis":0.056901,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:53.578 [print] Beheer PDOK \n"},{"result":{"nanos":47300,"millis":0.0473,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:53.578 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=83dab947-387b-49df-8ad2-32bb10d46d38#MD_DataIdentification \n"},{"result":{"nanos":415106,"millis":0.415106,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":541708,"millis":0.541708,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"80e015fa-f0e1-487e-a7e8-84a5ba7c4e7a\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":346005,"millis":0.346005,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"80e015fa-f0e1-487e-a7e8-84a5ba7c4e7a\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":542.314642,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"80e015fa-f0e1-487e-a7e8-84a5ba7c4e7a","startTime":1629213713036,"refId":"[1.116:67]","endTime":1629213713580,"exampleData":{"datasetIdentifierCode":"80e015fa-f0e1-487e-a7e8-84a5ba7c4e7a"},"exampleIndex":115},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14601,"millis":0.014601,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:53.331 karate.env system property was: null \n"},{"result":{"nanos":29400,"millis":0.0294,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":45101,"millis":0.045101,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":43101,"millis":0.043101,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":210003,"millis":0.210003,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":34301,"millis":0.034301,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":350905,"millis":0.350905,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":27700,"millis":0.0277,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":69501,"millis":0.069501,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":113901,"millis":0.113901,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":53101,"millis":0.053101,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13900,"millis":0.0139,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17101,"millis":0.017101,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5200,"millis":0.0052,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":44801,"millis":0.044801,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '6a129fd1-0988-4b8a-975a-6ff134b6754a'"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":528598646,"millis":528.598646,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5800,"millis":0.0058,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":616209,"millis":0.616209,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '6a129fd1-0988-4b8a-975a-6ff134b6754a'"}},{"result":{"nanos":521307,"millis":0.521307,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":466407,"millis":0.466407,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":445007,"millis":0.445007,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":506707,"millis":0.506707,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":480907,"millis":0.480907,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":26300,"millis":0.0263,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":360605,"millis":0.360605,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":357005,"millis":0.357005,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":349705,"millis":0.349705,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":67501,"millis":0.067501,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":745411,"millis":0.745411,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:53.866 [print] https:\/\/geodata.nationaalgeoregister.nl\/ienw\/geluidskaartspoorwegennacht\/v1\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":480807,"millis":0.480807,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":78101,"millis":0.078101,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:53.866 [print] OGC:WMS \n"},{"result":{"nanos":467607,"millis":0.467607,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":69501,"millis":0.069501,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:53.867 [print] #notpresent \n"},{"result":{"nanos":37301,"millis":0.037301,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":309704,"millis":0.309704,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:53.868 [print] OGC:WMS \n"},{"result":{"nanos":481707,"millis":0.481707,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":71601,"millis":0.071601,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:53.868 [print] Beheer PDOK \n"},{"result":{"nanos":582308,"millis":0.582308,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:53.869 [print] https:\/\/www.nationaalgeoregister.nl:443\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=002d9127-c16d-4b8d-9f5e-102a8c8e36c4#MD_DataIdentification \n"},{"result":{"nanos":419106,"millis":0.419106,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":600209,"millis":0.600209,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"6a129fd1-0988-4b8a-975a-6ff134b6754a\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":383706,"millis":0.383706,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"6a129fd1-0988-4b8a-975a-6ff134b6754a\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":538.615292,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"6a129fd1-0988-4b8a-975a-6ff134b6754a","startTime":1629213713330,"refId":"[1.117:67]","endTime":1629213713871,"exampleData":{"datasetIdentifierCode":"6a129fd1-0988-4b8a-975a-6ff134b6754a"},"exampleIndex":116},{"sectionIndex":0,"stepResults":[{"result":{"nanos":17600,"millis":0.0176,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:53.417 karate.env system property was: null \n"},{"result":{"nanos":29800,"millis":0.0298,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":47400,"millis":0.0474,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":46101,"millis":0.046101,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":229704,"millis":0.229704,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":37100,"millis":0.0371,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":375506,"millis":0.375506,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":30900,"millis":0.0309,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":49701,"millis":0.049701,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":545908,"millis":0.545908,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":86202,"millis":0.086202,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":17400,"millis":0.0174,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19900,"millis":0.0199,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5600,"millis":0.0056,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":55601,"millis":0.055601,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'e264c1e4-90fe-4968-bbf2-7019f6095348'"}},{"result":{"nanos":5200,"millis":0.0052,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":544183671,"millis":544.183671,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5500,"millis":0.0055,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":582108,"millis":0.582108,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'e264c1e4-90fe-4968-bbf2-7019f6095348'"}},{"result":{"nanos":516807,"millis":0.516807,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":542408,"millis":0.542408,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":492307,"millis":0.492307,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":533308,"millis":0.533308,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":480007,"millis":0.480007,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":26900,"millis":0.0269,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":364105,"millis":0.364105,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":352305,"millis":0.352305,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":423807,"millis":0.423807,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":86201,"millis":0.086201,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":894413,"millis":0.894413,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:53.968 [print] https:\/\/geodata.nationaalgeoregister.nl\/ienw\/geluidskaartspoorwegenetmaal\/v1\/wfs?request=GetCapabilities&service=WFS \n"},{"result":{"nanos":379805,"millis":0.379805,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":109002,"millis":0.109002,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:53.970 [print] OGC:WFS \n"},{"result":{"nanos":339105,"millis":0.339105,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":62801,"millis":0.062801,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:53.970 [print] #notpresent \n"},{"result":{"nanos":26101,"millis":0.026101,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":50900,"millis":0.0509,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:53.970 [print] OGC:WFS \n"},{"result":{"nanos":436806,"millis":0.436806,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":64701,"millis":0.064701,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:53.971 [print] Beheer PDOK \n"},{"result":{"nanos":52501,"millis":0.052501,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:53.971 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=c3c004ad-5387-4b00-a225-9afbcaa5d31b#MD_DataIdentification \n"},{"result":{"nanos":419806,"millis":0.419806,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":556808,"millis":0.556808,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"e264c1e4-90fe-4968-bbf2-7019f6095348\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":363805,"millis":0.363805,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"e264c1e4-90fe-4968-bbf2-7019f6095348\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":553.955411,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"e264c1e4-90fe-4968-bbf2-7019f6095348","startTime":1629213713417,"refId":"[1.118:67]","endTime":1629213713972,"exampleData":{"datasetIdentifierCode":"e264c1e4-90fe-4968-bbf2-7019f6095348"},"exampleIndex":117},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15500,"millis":0.0155,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:53.455 karate.env system property was: null \n"},{"result":{"nanos":25601,"millis":0.025601,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":46401,"millis":0.046401,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":48101,"millis":0.048101,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":216203,"millis":0.216203,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":35700,"millis":0.0357,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":362805,"millis":0.362805,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":26000,"millis":0.026,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":44901,"millis":0.044901,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":249204,"millis":0.249204,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":61601,"millis":0.061601,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":14600,"millis":0.0146,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":21101,"millis":0.021101,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5600,"millis":0.0056,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":42901,"millis":0.042901,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '2b9da196-422e-4b0e-a5ba-ba41ade308e9'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":590295338,"millis":590.295338,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5600,"millis":0.0056,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":1361520,"millis":1.36152,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '2b9da196-422e-4b0e-a5ba-ba41ade308e9'"}},{"result":{"nanos":1781926,"millis":1.781926,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":1606424,"millis":1.606424,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":1508522,"millis":1.508522,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":1527322,"millis":1.527322,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":1528222,"millis":1.528222,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":25300,"millis":0.0253,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":991914,"millis":0.991914,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":965014,"millis":0.965014,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":1099416,"millis":1.099416,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":196103,"millis":0.196103,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":112902,"millis":0.112902,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:54.060 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/habitatrichtlijnverspreidingtypen\\\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":1180117,"millis":1.180117,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":144202,"millis":0.144202,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:54.061 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":1026115,"millis":1.026115,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":86202,"millis":0.086202,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:54.062 [print] #notpresent \n"},{"result":{"nanos":27800,"millis":0.0278,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":47901,"millis":0.047901,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:54.063 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":1499622,"millis":1.499622,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":95301,"millis":0.095301,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:54.064 [print] Beheer PDOK \n"},{"result":{"nanos":82101,"millis":0.082101,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:54.064 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=977e0e94-7aa9-4784-b2da-eaec44adb61b#MD_DataIdentification \n"},{"result":{"nanos":1683924,"millis":1.683924,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":581408,"millis":0.581408,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"2b9da196-422e-4b0e-a5ba-ba41ade308e9\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":374206,"millis":0.374206,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"2b9da196-422e-4b0e-a5ba-ba41ade308e9\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":611.064641,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"2b9da196-422e-4b0e-a5ba-ba41ade308e9","startTime":1629213713455,"refId":"[1.119:67]","endTime":1629213714067,"exampleData":{"datasetIdentifierCode":"2b9da196-422e-4b0e-a5ba-ba41ade308e9"},"exampleIndex":118},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14400,"millis":0.0144,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:53.582 karate.env system property was: null \n"},{"result":{"nanos":26300,"millis":0.0263,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":45400,"millis":0.0454,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":43601,"millis":0.043601,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":210703,"millis":0.210703,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":35501,"millis":0.035501,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":359105,"millis":0.359105,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":25501,"millis":0.025501,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":72401,"millis":0.072401,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":109502,"millis":0.109502,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":86301,"millis":0.086301,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":14100,"millis":0.0141,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18701,"millis":0.018701,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":43801,"millis":0.043801,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '74620aa8-4fa2-414d-8350-50d93e500da8'"}},{"result":{"nanos":6000,"millis":0.006,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3500,"millis":0.0035,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":557767167,"millis":557.767167,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5500,"millis":0.0055,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":555708,"millis":0.555708,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '74620aa8-4fa2-414d-8350-50d93e500da8'"}},{"result":{"nanos":460707,"millis":0.460707,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":433806,"millis":0.433806,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":397405,"millis":0.397405,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":467207,"millis":0.467207,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":431407,"millis":0.431407,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":31400,"millis":0.0314,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":316405,"millis":0.316405,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":317305,"millis":0.317305,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":338805,"millis":0.338805,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":90001,"millis":0.090001,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":150402,"millis":0.150402,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:54.145 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/rwsgeluidskaarten\\\/wfs?service=WFS&request=GetCapabilities \n"},{"result":{"nanos":385005,"millis":0.385005,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":94401,"millis":0.094401,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:54.145 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":333205,"millis":0.333205,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":91902,"millis":0.091902,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:54.146 [print] #notpresent \n"},{"result":{"nanos":27900,"millis":0.0279,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":46101,"millis":0.046101,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:54.146 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":538608,"millis":0.538608,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":91701,"millis":0.091701,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:54.147 [print] Beheer PDOK \n"},{"result":{"nanos":57800,"millis":0.0578,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:54.147 [print] [\"http:\\\/\\\/nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementsetname=full&id=50eef6be-619d-4e16-9b92-48971109b636\",\"http:\\\/\\\/nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementsetname=full&id=8de2f5eb-b09f-4f6d-8397-8878a1b86238\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=9b583730-e750-485a-9c0c-39bf9be72cf8\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=a57cb859-c4fe-444c-adc6-be14cb2bbf36\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=9b583730-e750-485a-9c0c-39bf9be72cf9\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=a57cb859-c4fe-444c-adc6-be14cb2bbf38\"] \n"},{"result":{"nanos":579408,"millis":0.579408,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":612509,"millis":0.612509,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"74620aa8-4fa2-414d-8350-50d93e500da8\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":429306,"millis":0.429306,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"74620aa8-4fa2-414d-8350-50d93e500da8\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":566.175488,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"74620aa8-4fa2-414d-8350-50d93e500da8","startTime":1629213713581,"refId":"[1.120:67]","endTime":1629213714148,"exampleData":{"datasetIdentifierCode":"74620aa8-4fa2-414d-8350-50d93e500da8"},"exampleIndex":119},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16800,"millis":0.0168,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:53.873 karate.env system property was: null \n"},{"result":{"nanos":27000,"millis":0.027,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":48201,"millis":0.048201,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":76401,"millis":0.076401,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":223103,"millis":0.223103,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":38301,"millis":0.038301,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":375206,"millis":0.375206,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":29400,"millis":0.0294,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":46501,"millis":0.046501,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":115402,"millis":0.115402,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":59001,"millis":0.059001,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":93101,"millis":0.093101,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19601,"millis":0.019601,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":49901,"millis":0.049901,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '9940c446-6fd4-4ab3-a4de-7d0ee028a8d1'"}},{"result":{"nanos":5800,"millis":0.0058,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":522811062,"millis":522.811062,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5600,"millis":0.0056,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":626209,"millis":0.626209,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '9940c446-6fd4-4ab3-a4de-7d0ee028a8d1'"}},{"result":{"nanos":621909,"millis":0.621909,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":581209,"millis":0.581209,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":530508,"millis":0.530508,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":507607,"millis":0.507607,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":464407,"millis":0.464407,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":22200,"millis":0.0222,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":339804,"millis":0.339804,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":348705,"millis":0.348705,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":363105,"millis":0.363105,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":106102,"millis":0.106102,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":223603,"millis":0.223603,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:54.402 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/ecotopen\\\/wfs?request=GetCapabilities&service=wfs \n"},{"result":{"nanos":937014,"millis":0.937014,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":510107,"millis":0.510107,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:54.404 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":386805,"millis":0.386805,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":69501,"millis":0.069501,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:54.404 [print] #notpresent \n"},{"result":{"nanos":81301,"millis":0.081301,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":419906,"millis":0.419906,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:54.405 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":499407,"millis":0.499407,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":455107,"millis":0.455107,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:54.406 [print] Beheer PDOK \n"},{"result":{"nanos":1677724,"millis":1.677724,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:54.408 [print] [\"http:\\\/\\\/nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementsetname=full&id=2220c0dd-3720-4e39-a130-171531c1e694#MD_DataIdentification\",\"http:\\\/\\\/nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementsetname=full&id=78d31ab4-4116-45b7-bcf5-e14960916b0f#MD_DataIdentification\",\"http:\\\/\\\/nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementsetname=full&id=b250f3a4-ed78-4c85-8cd5-f1af43841c6e#MD_DataIdentification\"] \n"},{"result":{"nanos":519907,"millis":0.519907,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":678510,"millis":0.67851,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"9940c446-6fd4-4ab3-a4de-7d0ee028a8d1\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":396206,"millis":0.396206,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"9940c446-6fd4-4ab3-a4de-7d0ee028a8d1\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":535.420644,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"9940c446-6fd4-4ab3-a4de-7d0ee028a8d1","startTime":1629213713872,"refId":"[1.121:67]","endTime":1629213714409,"exampleData":{"datasetIdentifierCode":"9940c446-6fd4-4ab3-a4de-7d0ee028a8d1"},"exampleIndex":120},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16800,"millis":0.0168,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:53.974 karate.env system property was: null \n"},{"result":{"nanos":28600,"millis":0.0286,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":45000,"millis":0.045,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":51201,"millis":0.051201,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":214403,"millis":0.214403,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":34001,"millis":0.034001,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":364005,"millis":0.364005,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":27400,"millis":0.0274,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":46601,"millis":0.046601,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":113701,"millis":0.113701,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":58000,"millis":0.058,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13500,"millis":0.0135,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20700,"millis":0.0207,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":44400,"millis":0.0444,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'af4841b5-ce83-4edb-af41-429a21140316'"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":551557777,"millis":551.557777,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":6501,"millis":0.006501,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":2159631,"millis":2.159631,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'af4841b5-ce83-4edb-af41-429a21140316'"}},{"result":{"nanos":2131231,"millis":2.131231,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":1942228,"millis":1.942228,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":1803226,"millis":1.803226,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":1817926,"millis":1.817926,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":1813326,"millis":1.813326,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":26300,"millis":0.0263,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":1169917,"millis":1.169917,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":1147816,"millis":1.147816,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":1271618,"millis":1.271618,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":210503,"millis":0.210503,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":882613,"millis":0.882613,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:54.544 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/habitatrichtlijnverspreidingtypen\\\/wfs?request=GetCapabilities&service=wfs \n"},{"result":{"nanos":1222018,"millis":1.222018,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":1333720,"millis":1.33372,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:54.546 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":1200017,"millis":1.200017,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":267504,"millis":0.267504,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:54.548 [print] #notpresent \n"},{"result":{"nanos":34101,"millis":0.034101,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":750111,"millis":0.750111,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:54.549 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":1829927,"millis":1.829927,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":257204,"millis":0.257204,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:54.551 [print] Beheer PDOK \n"},{"result":{"nanos":448206,"millis":0.448206,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:54.551 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=977e0e94-7aa9-4784-b2da-eaec44adb61b#MD_DataIdentification \n"},{"result":{"nanos":1786326,"millis":1.786326,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":604908,"millis":0.604908,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"af4841b5-ce83-4edb-af41-429a21140316\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":368306,"millis":0.368306,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"af4841b5-ce83-4edb-af41-429a21140316\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":579.140573,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"af4841b5-ce83-4edb-af41-429a21140316","startTime":1629213713974,"refId":"[1.122:67]","endTime":1629213714554,"exampleData":{"datasetIdentifierCode":"af4841b5-ce83-4edb-af41-429a21140316"},"exampleIndex":121},{"sectionIndex":0,"stepResults":[{"result":{"nanos":30701,"millis":0.030701,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:54.069 karate.env system property was: null \n"},{"result":{"nanos":29300,"millis":0.0293,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":55501,"millis":0.055501,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":46701,"millis":0.046701,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":217203,"millis":0.217203,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":120502,"millis":0.120502,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":373706,"millis":0.373706,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":29200,"millis":0.0292,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":60501,"millis":0.060501,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":107902,"millis":0.107902,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":58201,"millis":0.058201,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13800,"millis":0.0138,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20500,"millis":0.0205,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5500,"millis":0.0055,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5500,"millis":0.0055,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":46201,"millis":0.046201,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'b0119753-5625-4500-9df3-13823ff9868f'"}},{"result":{"nanos":6100,"millis":0.0061,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":569097231,"millis":569.097231,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":6500,"millis":0.0065,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":1388020,"millis":1.38802,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'b0119753-5625-4500-9df3-13823ff9868f'"}},{"result":{"nanos":1804426,"millis":1.804426,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":1658024,"millis":1.658024,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":1515822,"millis":1.515822,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":1607923,"millis":1.607923,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":1552522,"millis":1.552522,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":25701,"millis":0.025701,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":964814,"millis":0.964814,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":2937442,"millis":2.937442,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":1320119,"millis":1.320119,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":234103,"millis":0.234103,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":185102,"millis":0.185102,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:54.655 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/habitatrichtlijnverspreidingtypen\\\/wms?request=GetCapabilities&service=WMS \n"},{"result":{"nanos":1792526,"millis":1.792526,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":124001,"millis":0.124001,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:54.657 [print] #notpresent \n"},{"result":{"nanos":1532822,"millis":1.532822,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":117902,"millis":0.117902,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:54.659 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":33400,"millis":0.0334,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":54200,"millis":0.0542,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:54.659 [print] #notpresent \n"},{"result":{"nanos":1751125,"millis":1.751125,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":74901,"millis":0.074901,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:54.661 [print] Beheer PDOK \n"},{"result":{"nanos":37301,"millis":0.037301,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:54.661 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/en\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=977e0e94-7aa9-4784-b2da-eaec44adb61b#MD_DataIdentification \n"},{"result":{"nanos":1749125,"millis":1.749125,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":608808,"millis":0.608808,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"b0119753-5625-4500-9df3-13823ff9868f\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":1581722,"millis":1.581722,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"b0119753-5625-4500-9df3-13823ff9868f\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":594.987101,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"b0119753-5625-4500-9df3-13823ff9868f","startTime":1629213714069,"refId":"[1.123:67]","endTime":1629213714665,"exampleData":{"datasetIdentifierCode":"b0119753-5625-4500-9df3-13823ff9868f"},"exampleIndex":122},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16100,"millis":0.0161,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:54.151 karate.env system property was: null \n"},{"result":{"nanos":28400,"millis":0.0284,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":48901,"millis":0.048901,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":43501,"millis":0.043501,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":208603,"millis":0.208603,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":34801,"millis":0.034801,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":373905,"millis":0.373905,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":29201,"millis":0.029201,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":85301,"millis":0.085301,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":721411,"millis":0.721411,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":78701,"millis":0.078701,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":17800,"millis":0.0178,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":21000,"millis":0.021,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5300,"millis":0.0053,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":7800,"millis":0.0078,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":74602,"millis":0.074602,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '93a9571d-1754-47ee-a8f9-92633abfab3a'"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":532537102,"millis":532.537102,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":4901,"millis":0.004901,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":406706,"millis":0.406706,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '93a9571d-1754-47ee-a8f9-92633abfab3a'"}},{"result":{"nanos":373805,"millis":0.373805,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":341805,"millis":0.341805,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":363705,"millis":0.363705,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":428206,"millis":0.428206,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":377105,"millis":0.377105,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":22400,"millis":0.0224,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":274804,"millis":0.274804,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":262404,"millis":0.262404,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":269404,"millis":0.269404,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":94801,"millis":0.094801,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":95302,"millis":0.095302,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:54.689 [print] https:\/\/geodata.nationaalgeoregister.nl\/rvo\/invasieve-exoten\/wfs\/v1_0?request=GetCapabilities&service=WFS \n"},{"result":{"nanos":960414,"millis":0.960414,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":102302,"millis":0.102302,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:54.690 [print] OGC:WFS \n"},{"result":{"nanos":537408,"millis":0.537408,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":90401,"millis":0.090401,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:54.690 [print] #notpresent \n"},{"result":{"nanos":29701,"millis":0.029701,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":386805,"millis":0.386805,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:54.691 [print] OGC:WFS \n"},{"result":{"nanos":372805,"millis":0.372805,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":89501,"millis":0.089501,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:54.691 [print] Beheer PDOK \n"},{"result":{"nanos":45500,"millis":0.0455,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:54.691 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?SERVICE=CSW&version=2.0.2&REQUEST=GetRecordById&ID=3703b249-a0eb-484e-ba7a-10e31a55bcec&OUTPUTSCHEMA=http:\/\/www.isotc211.org\/2005\/gmd&ELEMENTSETNAME=full#MD_DataIdentification \n"},{"result":{"nanos":951814,"millis":0.951814,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":474707,"millis":0.474707,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"93a9571d-1754-47ee-a8f9-92633abfab3a\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":354505,"millis":0.354505,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"93a9571d-1754-47ee-a8f9-92633abfab3a\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":542.05294,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"93a9571d-1754-47ee-a8f9-92633abfab3a","startTime":1629213714150,"refId":"[1.124:67]","endTime":1629213714693,"exampleData":{"datasetIdentifierCode":"93a9571d-1754-47ee-a8f9-92633abfab3a"},"exampleIndex":123},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15500,"millis":0.0155,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:54.411 karate.env system property was: null \n"},{"result":{"nanos":27701,"millis":0.027701,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":45201,"millis":0.045201,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":42600,"millis":0.0426,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":209504,"millis":0.209504,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":34600,"millis":0.0346,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":352405,"millis":0.352405,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":27300,"millis":0.0273,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":44301,"millis":0.044301,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":111801,"millis":0.111801,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":240603,"millis":0.240603,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":17800,"millis":0.0178,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19700,"millis":0.0197,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":6000,"millis":0.006,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":42501,"millis":0.042501,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'b196f948-5d87-4eb4-9854-a93841c3877f'"}},{"result":{"nanos":5500,"millis":0.0055,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":555782239,"millis":555.782239,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5500,"millis":0.0055,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":559308,"millis":0.559308,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'b196f948-5d87-4eb4-9854-a93841c3877f'"}},{"result":{"nanos":470407,"millis":0.470407,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":414206,"millis":0.414206,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":407306,"millis":0.407306,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":468707,"millis":0.468707,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":439407,"millis":0.439407,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":23400,"millis":0.0234,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":352905,"millis":0.352905,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":328404,"millis":0.328404,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":336904,"millis":0.336904,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":61700,"millis":0.0617,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":175102,"millis":0.175102,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:54.973 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/rvo\\\/invasieve-exoten\\\/wms\\\/v1_0?request=GetCapabilities&service=wms \n"},{"result":{"nanos":370806,"millis":0.370806,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":117702,"millis":0.117702,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:54.974 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":341405,"millis":0.341405,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":85301,"millis":0.085301,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:54.974 [print] #notpresent \n"},{"result":{"nanos":26101,"millis":0.026101,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":44700,"millis":0.0447,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:54.974 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":426506,"millis":0.426506,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":83001,"millis":0.083001,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:54.975 [print] Beheer PDOK \n"},{"result":{"nanos":39601,"millis":0.039601,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:54.975 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=3703b249-a0eb-484e-ba7a-10e31a55bcec#MD_DataIdentification \n"},{"result":{"nanos":429406,"millis":0.429406,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":614809,"millis":0.614809,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"b196f948-5d87-4eb4-9854-a93841c3877f\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":366906,"millis":0.366906,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"b196f948-5d87-4eb4-9854-a93841c3877f\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":564.023956,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"b196f948-5d87-4eb4-9854-a93841c3877f","startTime":1629213714411,"refId":"[1.125:67]","endTime":1629213714976,"exampleData":{"datasetIdentifierCode":"b196f948-5d87-4eb4-9854-a93841c3877f"},"exampleIndex":124},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16900,"millis":0.0169,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:54.556 karate.env system property was: null \n"},{"result":{"nanos":26601,"millis":0.026601,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":48601,"millis":0.048601,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":48301,"millis":0.048301,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":220803,"millis":0.220803,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":39301,"millis":0.039301,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":404306,"millis":0.404306,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":31300,"millis":0.0313,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":239104,"millis":0.239104,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":124002,"millis":0.124002,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":58201,"millis":0.058201,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":15500,"millis":0.0155,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":21800,"millis":0.0218,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":53901,"millis":0.053901,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '4041f923-6b77-4816-bf46-437e85416c31'"}},{"result":{"nanos":6200,"millis":0.0062,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":544796180,"millis":544.79618,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5600,"millis":0.0056,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":602909,"millis":0.602909,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '4041f923-6b77-4816-bf46-437e85416c31'"}},{"result":{"nanos":534508,"millis":0.534508,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":473407,"millis":0.473407,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":441206,"millis":0.441206,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":496507,"millis":0.496507,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":442806,"millis":0.442806,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":23700,"millis":0.0237,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":315204,"millis":0.315204,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":317105,"millis":0.317105,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":328805,"millis":0.328805,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":58101,"millis":0.058101,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":114702,"millis":0.114702,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:55.107 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/rws\\\/kaderrichtlijnmarienestrategie2018\\\/wms\\\/v1_0?SERVICE=WMS&REQUEST=GetCapabilities \n"},{"result":{"nanos":769111,"millis":0.769111,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":116502,"millis":0.116502,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:55.108 [print] [\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":346305,"millis":0.346305,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":86602,"millis":0.086602,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:55.109 [print] #notpresent \n"},{"result":{"nanos":26100,"millis":0.0261,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":46001,"millis":0.046001,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:55.109 [print] [\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":449207,"millis":0.449207,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":100901,"millis":0.100901,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:55.109 [print] Beheer PDOK \n"},{"result":{"nanos":52801,"millis":0.052801,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:55.109 [print] [\"https:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=krm-a905-9d8e-4758-83fa-28b057f185e3#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=krm-a905-9d8e-4758-83fa-28b057f185e4#MD_DataIdentification\"] \n"},{"result":{"nanos":423506,"millis":0.423506,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":2938942,"millis":2.938942,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"4041f923-6b77-4816-bf46-437e85416c31\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":487307,"millis":0.487307,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"4041f923-6b77-4816-bf46-437e85416c31\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":556.162646,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"4041f923-6b77-4816-bf46-437e85416c31","startTime":1629213714556,"refId":"[1.126:67]","endTime":1629213715113,"exampleData":{"datasetIdentifierCode":"4041f923-6b77-4816-bf46-437e85416c31"},"exampleIndex":125},{"sectionIndex":0,"stepResults":[{"result":{"nanos":18001,"millis":0.018001,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:54.667 karate.env system property was: null \n"},{"result":{"nanos":28800,"millis":0.0288,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":49301,"millis":0.049301,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":45901,"millis":0.045901,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":212103,"millis":0.212103,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":36801,"millis":0.036801,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":393006,"millis":0.393006,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":28100,"millis":0.0281,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":408806,"millis":0.408806,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":378006,"millis":0.378006,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":456807,"millis":0.456807,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":20801,"millis":0.020801,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20400,"millis":0.0204,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":55500,"millis":0.0555,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '8129296b-b9c1-489f-990a-df4a879e12b2'"}},{"result":{"nanos":5401,"millis":0.005401,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":530509973,"millis":530.509973,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5400,"millis":0.0054,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":533008,"millis":0.533008,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '8129296b-b9c1-489f-990a-df4a879e12b2'"}},{"result":{"nanos":442107,"millis":0.442107,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":462407,"millis":0.462407,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":385706,"millis":0.385706,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":452506,"millis":0.452506,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":411206,"millis":0.411206,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":34700,"millis":0.0347,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":309505,"millis":0.309505,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":480507,"millis":0.480507,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":327705,"millis":0.327705,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":133302,"millis":0.133302,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":124302,"millis":0.124302,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:55.204 [print] https:\/\/service.pdok.nl\/cbs\/hh\/wfs\/v1_0?request=GetCapabilities&service=WFS \n"},{"result":{"nanos":341505,"millis":0.341505,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":239304,"millis":0.239304,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:55.205 [print] OGC:WFS \n"},{"result":{"nanos":358105,"millis":0.358105,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":580608,"millis":0.580608,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:55.206 [print] #notpresent \n"},{"result":{"nanos":50101,"millis":0.050101,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":468807,"millis":0.468807,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:55.207 [print] OGC:WFS \n"},{"result":{"nanos":442006,"millis":0.442006,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":491807,"millis":0.491807,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:55.207 [print] Beheer PDOK \n"},{"result":{"nanos":910113,"millis":0.910113,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:55.208 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=12bb57cd-73e0-41ba-a1e9-6d986b9109d3#MD_DataIdentification \n"},{"result":{"nanos":378806,"millis":0.378806,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":652409,"millis":0.652409,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"8129296b-b9c1-489f-990a-df4a879e12b2\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":395005,"millis":0.395005,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"8129296b-b9c1-489f-990a-df4a879e12b2\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":542.092744,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"8129296b-b9c1-489f-990a-df4a879e12b2","startTime":1629213714667,"refId":"[1.127:67]","endTime":1629213715210,"exampleData":{"datasetIdentifierCode":"8129296b-b9c1-489f-990a-df4a879e12b2"},"exampleIndex":126},{"sectionIndex":0,"stepResults":[{"result":{"nanos":17200,"millis":0.0172,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:54.695 karate.env system property was: null \n"},{"result":{"nanos":27000,"millis":0.027,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":46301,"millis":0.046301,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":42401,"millis":0.042401,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":194703,"millis":0.194703,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":35200,"millis":0.0352,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":391405,"millis":0.391405,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":27601,"millis":0.027601,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":46701,"millis":0.046701,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":107901,"millis":0.107901,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":108102,"millis":0.108102,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":16400,"millis":0.0164,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19400,"millis":0.0194,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":73501,"millis":0.073501,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'f0c6fbfe-a172-4223-8af3-58f6a28c881d'"}},{"result":{"nanos":6401,"millis":0.006401,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":600111579,"millis":600.111579,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5600,"millis":0.0056,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":642309,"millis":0.642309,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'f0c6fbfe-a172-4223-8af3-58f6a28c881d'"}},{"result":{"nanos":475907,"millis":0.475907,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":414106,"millis":0.414106,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":405406,"millis":0.405406,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":451307,"millis":0.451307,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":399706,"millis":0.399706,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":31400,"millis":0.0314,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":308905,"millis":0.308905,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":284904,"millis":0.284904,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":318405,"millis":0.318405,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":447506,"millis":0.447506,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":625309,"millis":0.625309,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:55.302 [print] https:\/\/service.pdok.nl\/cbs\/hh\/wms\/v1_0?request=GetCapabilities&service=WMS \n"},{"result":{"nanos":712210,"millis":0.71221,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":81902,"millis":0.081902,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:55.303 [print] OGC:WMS \n"},{"result":{"nanos":567408,"millis":0.567408,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":68401,"millis":0.068401,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:55.304 [print] #notpresent \n"},{"result":{"nanos":27501,"millis":0.027501,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":408406,"millis":0.408406,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:55.304 [print] OGC:WMS \n"},{"result":{"nanos":377706,"millis":0.377706,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":65201,"millis":0.065201,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:55.305 [print] Beheer PDOK \n"},{"result":{"nanos":56901,"millis":0.056901,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:55.305 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=12bb57cd-73e0-41ba-a1e9-6d986b9109d3#MD_DataIdentification \n"},{"result":{"nanos":973114,"millis":0.973114,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":641909,"millis":0.641909,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"f0c6fbfe-a172-4223-8af3-58f6a28c881d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":416106,"millis":0.416106,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"f0c6fbfe-a172-4223-8af3-58f6a28c881d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":610.492931,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"f0c6fbfe-a172-4223-8af3-58f6a28c881d","startTime":1629213714695,"refId":"[1.128:67]","endTime":1629213715307,"exampleData":{"datasetIdentifierCode":"f0c6fbfe-a172-4223-8af3-58f6a28c881d"},"exampleIndex":127},{"sectionIndex":0,"stepResults":[{"result":{"nanos":18801,"millis":0.018801,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:54.981 karate.env system property was: null \n"},{"result":{"nanos":32200,"millis":0.0322,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":53901,"millis":0.053901,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":47901,"millis":0.047901,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":252704,"millis":0.252704,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":39301,"millis":0.039301,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":383205,"millis":0.383205,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":28001,"millis":0.028001,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":413606,"millis":0.413606,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":118202,"millis":0.118202,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":55501,"millis":0.055501,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":15200,"millis":0.0152,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":22601,"millis":0.022601,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":54701,"millis":0.054701,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '82541a1f-2e4e-459f-ab2f-e97cac3ad040'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3500,"millis":0.0035,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":552824196,"millis":552.824196,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":2170331,"millis":2.170331,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '82541a1f-2e4e-459f-ab2f-e97cac3ad040'"}},{"result":{"nanos":2264533,"millis":2.264533,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":6207690,"millis":6.20769,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":2052230,"millis":2.05223,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":2067830,"millis":2.06783,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":1989329,"millis":1.989329,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":29401,"millis":0.029401,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":1270418,"millis":1.270418,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":1073915,"millis":1.073915,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":1133517,"millis":1.133517,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":201403,"millis":0.201403,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":124502,"millis":0.124502,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:55.556 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/habitatrichtlijnverspreidingsgebiedtypen\\\/wfs?request=GetCapabilities&service=WFS \n"},{"result":{"nanos":1618923,"millis":1.618923,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":84601,"millis":0.084601,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:55.558 [print] #notpresent \n"},{"result":{"nanos":1340419,"millis":1.340419,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":68601,"millis":0.068601,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:55.559 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":25900,"millis":0.0259,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":58701,"millis":0.058701,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:55.559 [print] #notpresent \n"},{"result":{"nanos":2307134,"millis":2.307134,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":65701,"millis":0.065701,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:55.562 [print] Beheer PDOK \n"},{"result":{"nanos":49001,"millis":0.049001,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:55.562 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/en\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=03671a9e-6aaf-464d-be99-9aad25cef9e3 \n"},{"result":{"nanos":2158831,"millis":2.158831,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":729911,"millis":0.729911,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"82541a1f-2e4e-459f-ab2f-e97cac3ad040\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":1240118,"millis":1.240118,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"82541a1f-2e4e-459f-ab2f-e97cac3ad040\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":584.715261,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"82541a1f-2e4e-459f-ab2f-e97cac3ad040","startTime":1629213714980,"refId":"[1.129:67]","endTime":1629213715566,"exampleData":{"datasetIdentifierCode":"82541a1f-2e4e-459f-ab2f-e97cac3ad040"},"exampleIndex":128},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15300,"millis":0.0153,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:55.116 karate.env system property was: null \n"},{"result":{"nanos":26001,"millis":0.026001,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":44800,"millis":0.0448,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":43401,"millis":0.043401,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":210603,"millis":0.210603,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":36601,"millis":0.036601,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":348505,"millis":0.348505,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":25801,"millis":0.025801,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":419006,"millis":0.419006,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":124602,"millis":0.124602,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":55001,"millis":0.055001,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":16800,"millis":0.0168,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":21201,"millis":0.021201,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":66301,"millis":0.066301,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '1fa220c2-5f2e-4943-a57e-c291cc35084b'"}},{"result":{"nanos":5800,"millis":0.0058,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":631088627,"millis":631.088627,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":1530722,"millis":1.530722,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '1fa220c2-5f2e-4943-a57e-c291cc35084b'"}},{"result":{"nanos":2149331,"millis":2.149331,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":2112330,"millis":2.11233,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":2070629,"millis":2.070629,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":2208332,"millis":2.208332,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":2149031,"millis":2.149031,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":30401,"millis":0.030401,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":1310619,"millis":1.310619,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":1196517,"millis":1.196517,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":1330820,"millis":1.33082,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":320805,"millis":0.320805,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":568308,"millis":0.568308,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:55.766 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/habitatrichtlijnverspreidingsgebieden\\\/v2\\\/wms?request=GetCapabilities&service=WMS \n"},{"result":{"nanos":1287919,"millis":1.287919,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":2063030,"millis":2.06303,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:55.769 [print] #notpresent \n"},{"result":{"nanos":1382520,"millis":1.38252,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":109402,"millis":0.109402,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:55.771 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":26800,"millis":0.0268,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":66201,"millis":0.066201,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:55.771 [print] #notpresent \n"},{"result":{"nanos":2559537,"millis":2.559537,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":65001,"millis":0.065001,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:55.774 [print] Beheer PDOK \n"},{"result":{"nanos":26200,"millis":0.0262,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:55.774 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=f273941e-9c3b-43bc-b886-2d50d0bf9348#MD_DataIdentification \n"},{"result":{"nanos":2437836,"millis":2.437836,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":565808,"millis":0.565808,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"1fa220c2-5f2e-4943-a57e-c291cc35084b\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":341605,"millis":0.341605,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"1fa220c2-5f2e-4943-a57e-c291cc35084b\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":660.476254,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"1fa220c2-5f2e-4943-a57e-c291cc35084b","startTime":1629213715115,"refId":"[1.130:67]","endTime":1629213715777,"exampleData":{"datasetIdentifierCode":"1fa220c2-5f2e-4943-a57e-c291cc35084b"},"exampleIndex":129},{"sectionIndex":0,"stepResults":[{"result":{"nanos":17200,"millis":0.0172,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:55.212 karate.env system property was: null \n"},{"result":{"nanos":27000,"millis":0.027,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":47501,"millis":0.047501,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":46001,"millis":0.046001,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":210103,"millis":0.210103,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":48201,"millis":0.048201,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":410706,"millis":0.410706,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":30600,"millis":0.0306,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":448407,"millis":0.448407,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":147302,"millis":0.147302,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":61201,"millis":0.061201,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":17201,"millis":0.017201,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":21100,"millis":0.0211,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5800,"millis":0.0058,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":47600,"millis":0.0476,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '4f4c7848-1767-4c67-be08-87d45d07f313'"}},{"result":{"nanos":5301,"millis":0.005301,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":570916557,"millis":570.916557,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":1761926,"millis":1.761926,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '4f4c7848-1767-4c67-be08-87d45d07f313'"}},{"result":{"nanos":2277333,"millis":2.277333,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":2217032,"millis":2.217032,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":2225432,"millis":2.225432,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":2228132,"millis":2.228132,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":2270333,"millis":2.270333,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":23601,"millis":0.023601,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":1389220,"millis":1.38922,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":1392820,"millis":1.39282,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":1658024,"millis":1.658024,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":269304,"millis":0.269304,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":105401,"millis":0.105401,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:55.803 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/habitatrichtlijnverspreidingsgebieden\\\/v2\\\/wfs?request=GetCapabilities&service=wfs \n"},{"result":{"nanos":1991629,"millis":1.991629,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":96202,"millis":0.096202,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:55.805 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":2037429,"millis":2.037429,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":67301,"millis":0.067301,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:55.807 [print] #notpresent \n"},{"result":{"nanos":26100,"millis":0.0261,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":283104,"millis":0.283104,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:55.808 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":2295333,"millis":2.295333,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":76301,"millis":0.076301,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:55.810 [print] Beheer PDOK \n"},{"result":{"nanos":49601,"millis":0.049601,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:55.810 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=f273941e-9c3b-43bc-b886-2d50d0bf9348#MD_DataIdentification \n"},{"result":{"nanos":2293333,"millis":2.293333,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":534208,"millis":0.534208,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"4f4c7848-1767-4c67-be08-87d45d07f313\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":368606,"millis":0.368606,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"4f4c7848-1767-4c67-be08-87d45d07f313\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":600.459086,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"4f4c7848-1767-4c67-be08-87d45d07f313","startTime":1629213715212,"refId":"[1.131:67]","endTime":1629213715813,"exampleData":{"datasetIdentifierCode":"4f4c7848-1767-4c67-be08-87d45d07f313"},"exampleIndex":130},{"sectionIndex":0,"stepResults":[{"result":{"nanos":17401,"millis":0.017401,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:55.309 karate.env system property was: null \n"},{"result":{"nanos":29300,"millis":0.0293,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":48601,"millis":0.048601,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":341905,"millis":0.341905,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":245004,"millis":0.245004,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":37501,"millis":0.037501,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":388505,"millis":0.388505,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":28401,"millis":0.028401,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":91501,"millis":0.091501,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":114102,"millis":0.114102,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":104802,"millis":0.104802,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":17400,"millis":0.0174,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20700,"millis":0.0207,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":79601,"millis":0.079601,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '7681eb19-a914-4dc7-9208-c2a131dca06d'"}},{"result":{"nanos":5200,"millis":0.0052,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":17501,"millis":0.017501,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":554708923,"millis":554.708923,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":6600,"millis":0.0066,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":587509,"millis":0.587509,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '7681eb19-a914-4dc7-9208-c2a131dca06d'"}},{"result":{"nanos":546908,"millis":0.546908,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":471107,"millis":0.471107,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":484807,"millis":0.484807,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":577208,"millis":0.577208,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":550108,"millis":0.550108,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":25701,"millis":0.025701,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":366705,"millis":0.366705,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":362906,"millis":0.362906,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":317505,"millis":0.317505,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":58801,"millis":0.058801,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":112601,"millis":0.112601,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:55.871 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/rws\\\/kaderrichtlijnwater2015\\\/wms\\\/v1_0?service=WMS&request=GetCapabilities \n"},{"result":{"nanos":1126917,"millis":1.126917,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":507207,"millis":0.507207,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:55.872 [print] [\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":343905,"millis":0.343905,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":446906,"millis":0.446906,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:55.873 [print] #notpresent \n"},{"result":{"nanos":44301,"millis":0.044301,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":425506,"millis":0.425506,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:55.873 [print] [\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":447306,"millis":0.447306,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":444507,"millis":0.444507,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:55.875 [print] Beheer PDOK \n"},{"result":{"nanos":1488821,"millis":1.488821,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:55.875 [print] [\"https:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=110f9ec6-4464-462e-9765-83d90cefbeag#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=110f9ec6-4464-462e-9765-83d90cefbead#MD_DataIdentification\"] \n"},{"result":{"nanos":422206,"millis":0.422206,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":576008,"millis":0.576008,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"7681eb19-a914-4dc7-9208-c2a131dca06d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":393406,"millis":0.393406,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"7681eb19-a914-4dc7-9208-c2a131dca06d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":567.44141,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"7681eb19-a914-4dc7-9208-c2a131dca06d","startTime":1629213715309,"refId":"[1.132:67]","endTime":1629213715878,"exampleData":{"datasetIdentifierCode":"7681eb19-a914-4dc7-9208-c2a131dca06d"},"exampleIndex":131},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14300,"millis":0.0143,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:55.568 karate.env system property was: null \n"},{"result":{"nanos":25800,"millis":0.0258,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":43601,"millis":0.043601,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":41200,"millis":0.0412,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":477706,"millis":0.477706,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":44400,"millis":0.0444,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":397605,"millis":0.397605,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":31201,"millis":0.031201,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":47601,"millis":0.047601,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":121802,"millis":0.121802,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":333505,"millis":0.333505,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":17000,"millis":0.017,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20000,"millis":0.02,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4501,"millis":0.004501,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":67501,"millis":0.067501,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '0bc2bcb8-558b-446b-b4e2-381b13d483a8'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3700,"millis":0.0037,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":535122940,"millis":535.12294,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":490708,"millis":0.490708,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '0bc2bcb8-558b-446b-b4e2-381b13d483a8'"}},{"result":{"nanos":424806,"millis":0.424806,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":357305,"millis":0.357305,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":343405,"millis":0.343405,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":408006,"millis":0.408006,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":381505,"millis":0.381505,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":22501,"millis":0.022501,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":294004,"millis":0.294004,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":279204,"millis":0.279204,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":271003,"millis":0.271003,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":64101,"millis":0.064101,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":1366319,"millis":1.366319,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:56.110 [print] https:\/\/geodata.nationaalgeoregister.nl\/mosselenoesterhabitats\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":333505,"millis":0.333505,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":420106,"millis":0.420106,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:56.111 [print] OGC:WMS \n"},{"result":{"nanos":325905,"millis":0.325905,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":464207,"millis":0.464207,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:56.112 [print] #notpresent \n"},{"result":{"nanos":33900,"millis":0.0339,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":440807,"millis":0.440807,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:56.112 [print] OGC:WMS \n"},{"result":{"nanos":359005,"millis":0.359005,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":422006,"millis":0.422006,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:56.113 [print] Beheer PDOK \n"},{"result":{"nanos":906113,"millis":0.906113,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:56.114 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=3d59fd06-9aec-4744-91e7-65e119f74569#MD_DataIdentification \n"},{"result":{"nanos":357705,"millis":0.357705,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":560508,"millis":0.560508,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"0bc2bcb8-558b-446b-b4e2-381b13d483a8\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":339505,"millis":0.339505,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"0bc2bcb8-558b-446b-b4e2-381b13d483a8\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":546.494302,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"0bc2bcb8-558b-446b-b4e2-381b13d483a8","startTime":1629213715568,"refId":"[1.133:67]","endTime":1629213716115,"exampleData":{"datasetIdentifierCode":"0bc2bcb8-558b-446b-b4e2-381b13d483a8"},"exampleIndex":132},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15400,"millis":0.0154,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:55.779 karate.env system property was: null \n"},{"result":{"nanos":35100,"millis":0.0351,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":48500,"millis":0.0485,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":42501,"millis":0.042501,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":284404,"millis":0.284404,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":42400,"millis":0.0424,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":357605,"millis":0.357605,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":27100,"millis":0.0271,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":43601,"millis":0.043601,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":1082916,"millis":1.082916,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":70101,"millis":0.070101,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":17000,"millis":0.017,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":21301,"millis":0.021301,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":43501,"millis":0.043501,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'aaf53e6f-fe99-4a86-a61c-50b128412d80'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":544542776,"millis":544.542776,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5600,"millis":0.0056,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":577908,"millis":0.577908,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'aaf53e6f-fe99-4a86-a61c-50b128412d80'"}},{"result":{"nanos":530208,"millis":0.530208,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":550708,"millis":0.550708,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":458407,"millis":0.458407,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":462107,"millis":0.462107,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":421106,"millis":0.421106,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":23201,"millis":0.023201,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":293804,"millis":0.293804,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":288805,"millis":0.288805,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":291804,"millis":0.291804,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":69901,"millis":0.069901,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":186403,"millis":0.186403,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:56.330 [print] https:\/\/geodata.nationaalgeoregister.nl\/mosselenoesterhabitats\/wfs?request=GetCapabilities&service=wfs \n"},{"result":{"nanos":315705,"millis":0.315705,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":93201,"millis":0.093201,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:56.331 [print] OGC:WFS \n"},{"result":{"nanos":329605,"millis":0.329605,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":74001,"millis":0.074001,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:56.331 [print] #notpresent \n"},{"result":{"nanos":24800,"millis":0.0248,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":38601,"millis":0.038601,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:56.331 [print] OGC:WFS \n"},{"result":{"nanos":386705,"millis":0.386705,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":109802,"millis":0.109802,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:56.332 [print] Beheer PDOK \n"},{"result":{"nanos":40201,"millis":0.040201,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:56.332 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=3d59fd06-9aec-4744-91e7-65e119f74569#MD_DataIdentification \n"},{"result":{"nanos":384605,"millis":0.384605,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":573208,"millis":0.573208,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"aaf53e6f-fe99-4a86-a61c-50b128412d80\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":369105,"millis":0.369105,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"aaf53e6f-fe99-4a86-a61c-50b128412d80\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":553.592707,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"aaf53e6f-fe99-4a86-a61c-50b128412d80","startTime":1629213715779,"refId":"[1.134:67]","endTime":1629213716333,"exampleData":{"datasetIdentifierCode":"aaf53e6f-fe99-4a86-a61c-50b128412d80"},"exampleIndex":133},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15001,"millis":0.015001,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:55.815 karate.env system property was: null \n"},{"result":{"nanos":27900,"millis":0.0279,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":43001,"millis":0.043001,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":41501,"millis":0.041501,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":214403,"millis":0.214403,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":33601,"millis":0.033601,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":351805,"millis":0.351805,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":26300,"millis":0.0263,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":59201,"millis":0.059201,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":104702,"millis":0.104702,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":50901,"millis":0.050901,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12700,"millis":0.0127,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18100,"millis":0.0181,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":62101,"millis":0.062101,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '8abcd2d1-3beb-43e5-a572-2b2da05a0a98'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3600,"millis":0.0036,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":540697420,"millis":540.69742,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":487407,"millis":0.487407,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '8abcd2d1-3beb-43e5-a572-2b2da05a0a98'"}},{"result":{"nanos":528908,"millis":0.528908,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":490907,"millis":0.490907,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":396106,"millis":0.396106,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":446007,"millis":0.446007,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":413006,"millis":0.413006,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":22000,"millis":0.022,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":318004,"millis":0.318004,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":325405,"millis":0.325405,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":372906,"millis":0.372906,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":64601,"millis":0.064601,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":117702,"millis":0.117702,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:56.362 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/nhi\\\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":336605,"millis":0.336605,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":86801,"millis":0.086801,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:56.362 [print] [\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":321405,"millis":0.321405,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":74202,"millis":0.074202,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:56.362 [print] #notpresent \n"},{"result":{"nanos":24500,"millis":0.0245,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":43501,"millis":0.043501,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:56.363 [print] [\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":423506,"millis":0.423506,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":80001,"millis":0.080001,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:56.363 [print] Beheer PDOK \n"},{"result":{"nanos":49900,"millis":0.0499,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:56.363 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=710c381c-ab2d-45d5-a45d-af2eba811e5f#MD_DataIdentification \n"},{"result":{"nanos":401606,"millis":0.401606,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":445107,"millis":0.445107,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"8abcd2d1-3beb-43e5-a572-2b2da05a0a98\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":286304,"millis":0.286304,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"8abcd2d1-3beb-43e5-a572-2b2da05a0a98\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":548.337034,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"8abcd2d1-3beb-43e5-a572-2b2da05a0a98","startTime":1629213715815,"refId":"[1.135:67]","endTime":1629213716364,"exampleData":{"datasetIdentifierCode":"8abcd2d1-3beb-43e5-a572-2b2da05a0a98"},"exampleIndex":134},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15700,"millis":0.0157,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:55.879 karate.env system property was: null \n"},{"result":{"nanos":27100,"millis":0.0271,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":47901,"millis":0.047901,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":41601,"millis":0.041601,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":215803,"millis":0.215803,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":32001,"millis":0.032001,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":356505,"millis":0.356505,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":27801,"millis":0.027801,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":44500,"millis":0.0445,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":127002,"millis":0.127002,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":58201,"millis":0.058201,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":16300,"millis":0.0163,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19300,"millis":0.0193,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":52001,"millis":0.052001,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '578f993f-4d0b-4c4a-a08b-dfa9e1d1376e'"}},{"result":{"nanos":6200,"millis":0.0062,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3501,"millis":0.003501,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":547326816,"millis":547.326816,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5400,"millis":0.0054,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":631809,"millis":0.631809,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '578f993f-4d0b-4c4a-a08b-dfa9e1d1376e'"}},{"result":{"nanos":428906,"millis":0.428906,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":375406,"millis":0.375406,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":363005,"millis":0.363005,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":564508,"millis":0.564508,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":493607,"millis":0.493607,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":82401,"millis":0.082401,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":339405,"millis":0.339405,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":355705,"millis":0.355705,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":393306,"millis":0.393306,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":115702,"millis":0.115702,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":176702,"millis":0.176702,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:56.434 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/nhi\\\/wfs?request=GetCapabilities&service=wfs \n"},{"result":{"nanos":364906,"millis":0.364906,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":125102,"millis":0.125102,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:56.434 [print] [\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":349705,"millis":0.349705,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":118802,"millis":0.118802,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:56.435 [print] #notpresent \n"},{"result":{"nanos":71901,"millis":0.071901,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":77901,"millis":0.077901,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:56.435 [print] [\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":374806,"millis":0.374806,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":108102,"millis":0.108102,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:56.435 [print] Beheer PDOK \n"},{"result":{"nanos":98501,"millis":0.098501,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:56.435 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=710c381c-ab2d-45d5-a45d-af2eba811e5f#MD_DataIdentification \n"},{"result":{"nanos":374906,"millis":0.374906,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":410106,"millis":0.410106,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"578f993f-4d0b-4c4a-a08b-dfa9e1d1376e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":321205,"millis":0.321205,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"578f993f-4d0b-4c4a-a08b-dfa9e1d1376e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":555.549238,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"578f993f-4d0b-4c4a-a08b-dfa9e1d1376e","startTime":1629213715879,"refId":"[1.136:67]","endTime":1629213716436,"exampleData":{"datasetIdentifierCode":"578f993f-4d0b-4c4a-a08b-dfa9e1d1376e"},"exampleIndex":135},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15601,"millis":0.015601,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:56.118 karate.env system property was: null \n"},{"result":{"nanos":27700,"millis":0.0277,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":43901,"millis":0.043901,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":44101,"millis":0.044101,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":209203,"millis":0.209203,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":34400,"millis":0.0344,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":342805,"millis":0.342805,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":28000,"millis":0.028,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":527208,"millis":0.527208,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":133102,"millis":0.133102,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":54701,"millis":0.054701,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":26800,"millis":0.0268,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17601,"millis":0.017601,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":46201,"millis":0.046201,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'dd49e02c-ea87-4ffc-89dd-f888608d95b7'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3300,"millis":0.0033,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":570128446,"millis":570.128446,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5401,"millis":0.005401,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":629109,"millis":0.629109,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'dd49e02c-ea87-4ffc-89dd-f888608d95b7'"}},{"result":{"nanos":442007,"millis":0.442007,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":348405,"millis":0.348405,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":336405,"millis":0.336405,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":537008,"millis":0.537008,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":463607,"millis":0.463607,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":97302,"millis":0.097302,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":350105,"millis":0.350105,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":381006,"millis":0.381006,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":372005,"millis":0.372005,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":136502,"millis":0.136502,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":1774725,"millis":1.774725,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:56.696 [print] https:\/\/geodata.nationaalgeoregister.nl\/nationaleparken\/wms?request=GetCapabilities&service=WMS \n"},{"result":{"nanos":411206,"millis":0.411206,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":124402,"millis":0.124402,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:56.696 [print] OGC:WMS \n"},{"result":{"nanos":341305,"millis":0.341305,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":127802,"millis":0.127802,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:56.697 [print] #notpresent \n"},{"result":{"nanos":87301,"millis":0.087301,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":452107,"millis":0.452107,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:56.698 [print] OGC:WMS \n"},{"result":{"nanos":330305,"millis":0.330305,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":462306,"millis":0.462306,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:56.699 [print] Beheer PDOK \n"},{"result":{"nanos":1001214,"millis":1.001214,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:56.700 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=4961d305-fbb5-426a-9ba3-53e1ca5f3b18#MD_DataIdentification \n"},{"result":{"nanos":317505,"millis":0.317505,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":415006,"millis":0.415006,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"dd49e02c-ea87-4ffc-89dd-f888608d95b7\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":302105,"millis":0.302105,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"dd49e02c-ea87-4ffc-89dd-f888608d95b7\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":581.942421,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"dd49e02c-ea87-4ffc-89dd-f888608d95b7","startTime":1629213716117,"refId":"[1.137:67]","endTime":1629213716701,"exampleData":{"datasetIdentifierCode":"dd49e02c-ea87-4ffc-89dd-f888608d95b7"},"exampleIndex":136},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15800,"millis":0.0158,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:56.335 karate.env system property was: null \n"},{"result":{"nanos":26200,"millis":0.0262,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":48101,"millis":0.048101,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":39901,"millis":0.039901,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":206903,"millis":0.206903,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":31401,"millis":0.031401,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":347105,"millis":0.347105,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":27100,"millis":0.0271,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":123502,"millis":0.123502,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":115102,"millis":0.115102,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":52901,"millis":0.052901,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13200,"millis":0.0132,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19300,"millis":0.0193,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":6500,"millis":0.0065,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":45601,"millis":0.045601,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'e9ba7d7f-6cd1-4271-bce4-56432924b338'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":6400,"millis":0.0064,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":539835908,"millis":539.835908,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5200,"millis":0.0052,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":731810,"millis":0.73181,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'e9ba7d7f-6cd1-4271-bce4-56432924b338'"}},{"result":{"nanos":516107,"millis":0.516107,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":437607,"millis":0.437607,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":375305,"millis":0.375305,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":560508,"millis":0.560508,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":478407,"millis":0.478407,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":78401,"millis":0.078401,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":334305,"millis":0.334305,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":345905,"millis":0.345905,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":1089916,"millis":1.089916,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":141602,"millis":0.141602,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":1478321,"millis":1.478321,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:56.883 [print] https:\/\/geodata.nationaalgeoregister.nl\/mosselzaadinvanginstallaties\/wfs?request=GetCapabilities&service=WFS \n"},{"result":{"nanos":408606,"millis":0.408606,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":312805,"millis":0.312805,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:56.884 [print] #notpresent \n"},{"result":{"nanos":373205,"millis":0.373205,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":110502,"millis":0.110502,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:56.885 [print] OGC:WFS \n"},{"result":{"nanos":88501,"millis":0.088501,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":454807,"millis":0.454807,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:56.886 [print] #notpresent \n"},{"result":{"nanos":372606,"millis":0.372606,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":109201,"millis":0.109201,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:56.886 [print] Beheer PDOK \n"},{"result":{"nanos":311505,"millis":0.311505,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:56.887 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=a04afee4-47d5-45b7-b7a0-a6f86106af11#MD_DataIdentification \n"},{"result":{"nanos":367006,"millis":0.367006,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":436406,"millis":0.436406,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"e9ba7d7f-6cd1-4271-bce4-56432924b338\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":307605,"millis":0.307605,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"e9ba7d7f-6cd1-4271-bce4-56432924b338\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":551.196374,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"e9ba7d7f-6cd1-4271-bce4-56432924b338","startTime":1629213716335,"refId":"[1.138:67]","endTime":1629213716889,"exampleData":{"datasetIdentifierCode":"e9ba7d7f-6cd1-4271-bce4-56432924b338"},"exampleIndex":137},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14101,"millis":0.014101,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:56.366 karate.env system property was: null \n"},{"result":{"nanos":36400,"millis":0.0364,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":42400,"millis":0.0424,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":41501,"millis":0.041501,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":184903,"millis":0.184903,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":32300,"millis":0.0323,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":337505,"millis":0.337505,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":24901,"millis":0.024901,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":43201,"millis":0.043201,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":100501,"millis":0.100501,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":49401,"millis":0.049401,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":11700,"millis":0.0117,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18601,"millis":0.018601,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5600,"millis":0.0056,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":40801,"millis":0.040801,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '1c9b43c3-064d-40c3-aa7c-879b7376ef6f'"}},{"result":{"nanos":5500,"millis":0.0055,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":550714465,"millis":550.714465,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":742410,"millis":0.74241,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '1c9b43c3-064d-40c3-aa7c-879b7376ef6f'"}},{"result":{"nanos":533207,"millis":0.533207,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":560708,"millis":0.560708,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":455506,"millis":0.455506,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":762411,"millis":0.762411,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":572808,"millis":0.572808,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":82202,"millis":0.082202,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":403806,"millis":0.403806,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":458307,"millis":0.458307,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":532107,"millis":0.532107,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":124201,"millis":0.124201,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":726210,"millis":0.72621,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:56.924 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/wko\\\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":481907,"millis":0.481907,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":187702,"millis":0.187702,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:56.925 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":451006,"millis":0.451006,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":221803,"millis":0.221803,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:56.926 [print] #notpresent \n"},{"result":{"nanos":90301,"millis":0.090301,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":117602,"millis":0.117602,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:56.926 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":469507,"millis":0.469507,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":140402,"millis":0.140402,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:56.927 [print] Beheer PDOK \n"},{"result":{"nanos":362205,"millis":0.362205,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:56.927 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=dc5b522e-3e14-4738-9e8e-2401e1b19ef2#MD_DataIdentification \n"},{"result":{"nanos":489507,"millis":0.489507,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":407106,"millis":0.407106,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"1c9b43c3-064d-40c3-aa7c-879b7376ef6f\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":312205,"millis":0.312205,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"1c9b43c3-064d-40c3-aa7c-879b7376ef6f\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":561.401617,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"1c9b43c3-064d-40c3-aa7c-879b7376ef6f","startTime":1629213716366,"refId":"[1.139:67]","endTime":1629213716928,"exampleData":{"datasetIdentifierCode":"1c9b43c3-064d-40c3-aa7c-879b7376ef6f"},"exampleIndex":138},{"sectionIndex":0,"stepResults":[{"result":{"nanos":45200,"millis":0.0452,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:56.439 karate.env system property was: null \n"},{"result":{"nanos":35701,"millis":0.035701,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":114802,"millis":0.114802,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":96101,"millis":0.096101,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":318305,"millis":0.318305,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":91202,"millis":0.091202,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":357205,"millis":0.357205,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":77001,"millis":0.077001,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":89002,"millis":0.089002,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":153102,"millis":0.153102,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":127502,"millis":0.127502,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":37101,"millis":0.037101,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":29500,"millis":0.0295,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":12600,"millis":0.0126,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":11400,"millis":0.0114,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":10700,"millis":0.0107,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '702060c1-b3fd-44ec-8cc6-d4249d150110'"}},{"result":{"nanos":10800,"millis":0.0108,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":11001,"millis":0.011001,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":561867526,"millis":561.867526,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":7401,"millis":0.007401,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":531607,"millis":0.531607,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '702060c1-b3fd-44ec-8cc6-d4249d150110'"}},{"result":{"nanos":479207,"millis":0.479207,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":423706,"millis":0.423706,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":409106,"millis":0.409106,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":484007,"millis":0.484007,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":469606,"millis":0.469606,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":27700,"millis":0.0277,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":328805,"millis":0.328805,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":330005,"millis":0.330005,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":325405,"millis":0.325405,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":71601,"millis":0.071601,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":1585823,"millis":1.585823,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:57.008 [print] http:\/\/services.inspire-provincies.nl\/HabitatsAndBiotopes\/services\/download_HB?request=GetCapabilities \n"},{"result":{"nanos":387805,"millis":0.387805,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":583409,"millis":0.583409,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:57.009 [print] OGC:WFS \n"},{"result":{"nanos":364105,"millis":0.364105,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":540907,"millis":0.540907,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:57.010 [print] #notpresent \n"},{"result":{"nanos":39700,"millis":0.0397,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":427806,"millis":0.427806,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:57.010 [print] OGC:WFS \n"},{"result":{"nanos":373605,"millis":0.373605,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":438607,"millis":0.438607,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:57.012 [print] Interprovinciaal Overleg \n"},{"result":{"nanos":881713,"millis":0.881713,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:57.012 [print] http:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/nl\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=88e2a6fa-b296-4ff4-bc30-fb87e2c1627e&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full#MD_DataIdentification \n"},{"result":{"nanos":369705,"millis":0.369705,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":656510,"millis":0.65651,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"702060c1-b3fd-44ec-8cc6-d4249d150110\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":349005,"millis":0.349005,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"702060c1-b3fd-44ec-8cc6-d4249d150110\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":574.382607,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"702060c1-b3fd-44ec-8cc6-d4249d150110","startTime":1629213716438,"refId":"[1.140:67]","endTime":1629213717014,"exampleData":{"datasetIdentifierCode":"702060c1-b3fd-44ec-8cc6-d4249d150110"},"exampleIndex":139},{"sectionIndex":0,"stepResults":[{"result":{"nanos":46100,"millis":0.0461,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:56.703 karate.env system property was: null \n"},{"result":{"nanos":35101,"millis":0.035101,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":114902,"millis":0.114902,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":97201,"millis":0.097201,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":693210,"millis":0.69321,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":103601,"millis":0.103601,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":376906,"millis":0.376906,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":92901,"millis":0.092901,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":112002,"millis":0.112002,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":563908,"millis":0.563908,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":132502,"millis":0.132502,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":40600,"millis":0.0406,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":30101,"millis":0.030101,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":27400,"millis":0.0274,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":14301,"millis":0.014301,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":12400,"millis":0.0124,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '5856173c-e58d-4b4c-8f9b-046ee1f20c1c'"}},{"result":{"nanos":19001,"millis":0.019001,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":31000,"millis":0.031,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":531386586,"millis":531.386586,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5800,"millis":0.0058,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":619809,"millis":0.619809,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '5856173c-e58d-4b4c-8f9b-046ee1f20c1c'"}},{"result":{"nanos":560708,"millis":0.560708,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":520408,"millis":0.520408,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":503607,"millis":0.503607,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":570509,"millis":0.570509,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":547708,"millis":0.547708,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":34801,"millis":0.034801,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":446806,"millis":0.446806,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":372105,"millis":0.372105,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":403206,"millis":0.403206,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":69701,"millis":0.069701,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":112402,"millis":0.112402,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:57.243 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/wko\\\/wfs?service=WFS&request=Getcapabilities \n"},{"result":{"nanos":416706,"millis":0.416706,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":441707,"millis":0.441707,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:57.244 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":717810,"millis":0.71781,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":252703,"millis":0.252703,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:57.245 [print] #notpresent \n"},{"result":{"nanos":33400,"millis":0.0334,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":43601,"millis":0.043601,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:57.245 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":822212,"millis":0.822212,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":260304,"millis":0.260304,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:57.246 [print] Beheer PDOK \n"},{"result":{"nanos":49601,"millis":0.049601,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:57.246 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=dc5b522e-3e14-4738-9e8e-2401e1b19ef2#MD_DataIdentification \n"},{"result":{"nanos":1005014,"millis":1.005014,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":646309,"millis":0.646309,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"5856173c-e58d-4b4c-8f9b-046ee1f20c1c\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":331605,"millis":0.331605,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"5856173c-e58d-4b4c-8f9b-046ee1f20c1c\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":543.718265,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"5856173c-e58d-4b4c-8f9b-046ee1f20c1c","startTime":1629213716703,"refId":"[1.141:67]","endTime":1629213717248,"exampleData":{"datasetIdentifierCode":"5856173c-e58d-4b4c-8f9b-046ee1f20c1c"},"exampleIndex":140},{"sectionIndex":0,"stepResults":[{"result":{"nanos":45901,"millis":0.045901,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:56.892 karate.env system property was: null \n"},{"result":{"nanos":35801,"millis":0.035801,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":116501,"millis":0.116501,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":99001,"millis":0.099001,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":283104,"millis":0.283104,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":116202,"millis":0.116202,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":399906,"millis":0.399906,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":75401,"millis":0.075401,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":93901,"millis":0.093901,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":586208,"millis":0.586208,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":149902,"millis":0.149902,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":40501,"millis":0.040501,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":29600,"millis":0.0296,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":13100,"millis":0.0131,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":11500,"millis":0.0115,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":11400,"millis":0.0114,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '972edbaa-f860-4c48-b449-4f238a263472'"}},{"result":{"nanos":11200,"millis":0.0112,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":10600,"millis":0.0106,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":534936136,"millis":534.936136,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5600,"millis":0.0056,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":568108,"millis":0.568108,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '972edbaa-f860-4c48-b449-4f238a263472'"}},{"result":{"nanos":500207,"millis":0.500207,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":465807,"millis":0.465807,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":454707,"millis":0.454707,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":541708,"millis":0.541708,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":491507,"millis":0.491507,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":26600,"millis":0.0266,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":356005,"millis":0.356005,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":372605,"millis":0.372605,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":347605,"millis":0.347605,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":69901,"millis":0.069901,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":1661524,"millis":1.661524,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:57.436 [print] https:\/\/geodata.nationaalgeoregister.nl\/restwarmte\/wfs?request=GetCapabilities&service=wfs \n"},{"result":{"nanos":404606,"millis":0.404606,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":74401,"millis":0.074401,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:57.436 [print] OGC:WFS \n"},{"result":{"nanos":386106,"millis":0.386106,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":66801,"millis":0.066801,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:57.437 [print] #notpresent \n"},{"result":{"nanos":40901,"millis":0.040901,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":503607,"millis":0.503607,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:57.438 [print] OGC:WFS \n"},{"result":{"nanos":598308,"millis":0.598308,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":70501,"millis":0.070501,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:57.439 [print] Beheer PDOK \n"},{"result":{"nanos":727210,"millis":0.72721,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:57.439 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=d6b85d84-cdb9-4a6e-b799-cf8826e22a94#MD_DataIdentification \n"},{"result":{"nanos":397206,"millis":0.397206,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":617709,"millis":0.617709,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"972edbaa-f860-4c48-b449-4f238a263472\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":354205,"millis":0.354205,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"972edbaa-f860-4c48-b449-4f238a263472\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":547.16931,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"972edbaa-f860-4c48-b449-4f238a263472","startTime":1629213716891,"refId":"[1.142:67]","endTime":1629213717442,"exampleData":{"datasetIdentifierCode":"972edbaa-f860-4c48-b449-4f238a263472"},"exampleIndex":141},{"sectionIndex":0,"stepResults":[{"result":{"nanos":49501,"millis":0.049501,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:56.931 karate.env system property was: null \n"},{"result":{"nanos":36601,"millis":0.036601,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":114101,"millis":0.114101,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":102301,"millis":0.102301,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":258104,"millis":0.258104,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":98902,"millis":0.098902,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":379505,"millis":0.379505,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":93502,"millis":0.093502,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":105901,"millis":0.105901,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":207303,"millis":0.207303,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":182902,"millis":0.182902,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":49500,"millis":0.0495,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":30301,"millis":0.030301,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":14200,"millis":0.0142,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":13001,"millis":0.013001,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":69101,"millis":0.069101,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '171b28f6-7ee7-46f9-b3b3-06d0baaa33db'"}},{"result":{"nanos":23800,"millis":0.0238,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":14800,"millis":0.0148,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":527562030,"millis":527.56203,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":3600,"millis":0.0036,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":393306,"millis":0.393306,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '171b28f6-7ee7-46f9-b3b3-06d0baaa33db'"}},{"result":{"nanos":386706,"millis":0.386706,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":337605,"millis":0.337605,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":328205,"millis":0.328205,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":354505,"millis":0.354505,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":349805,"millis":0.349805,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":21400,"millis":0.0214,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":269904,"millis":0.269904,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":269503,"millis":0.269503,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":335605,"millis":0.335605,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":55701,"millis":0.055701,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":609008,"millis":0.609008,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:57.464 [print] https:\\\/\\\/service.pdok.nl\\\/cbs\\\/pd\\\/wms\\\/v1_0?request=GetCapabilities&service=WMS \n"},{"result":{"nanos":335105,"millis":0.335105,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":65501,"millis":0.065501,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:57.465 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":306804,"millis":0.306804,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":406106,"millis":0.406106,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:57.467 [print] #notpresent \n"},{"result":{"nanos":33200,"millis":0.0332,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":46401,"millis":0.046401,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:57.467 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":355505,"millis":0.355505,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":414306,"millis":0.414306,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:57.468 [print] Beheer PDOK \n"},{"result":{"nanos":51300,"millis":0.0513,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:57.468 [print] https:\/\/www.nationaalgeoregister.nl:443\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=76541ebb-a554-4540-a017-399d4bb4a860#MD_DataIdentification \n"},{"result":{"nanos":375205,"millis":0.375205,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":483807,"millis":0.483807,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"171b28f6-7ee7-46f9-b3b3-06d0baaa33db\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":302504,"millis":0.302504,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"171b28f6-7ee7-46f9-b3b3-06d0baaa33db\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":536.295953,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"171b28f6-7ee7-46f9-b3b3-06d0baaa33db","startTime":1629213716931,"refId":"[1.143:67]","endTime":1629213717470,"exampleData":{"datasetIdentifierCode":"171b28f6-7ee7-46f9-b3b3-06d0baaa33db"},"exampleIndex":142},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15100,"millis":0.0151,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:57.016 karate.env system property was: null \n"},{"result":{"nanos":28900,"millis":0.0289,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":44301,"millis":0.044301,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":56001,"millis":0.056001,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":211303,"millis":0.211303,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":32700,"millis":0.0327,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":359505,"millis":0.359505,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":55600,"millis":0.0556,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":43000,"millis":0.043,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":512708,"millis":0.512708,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":65601,"millis":0.065601,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":15200,"millis":0.0152,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20101,"millis":0.020101,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":145602,"millis":0.145602,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '62c0d0a5-5826-406d-a625-d84bc5fec800'"}},{"result":{"nanos":7300,"millis":0.0073,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":5200,"millis":0.0052,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":534614332,"millis":534.614332,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":6200,"millis":0.0062,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":672609,"millis":0.672609,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '62c0d0a5-5826-406d-a625-d84bc5fec800'"}},{"result":{"nanos":623109,"millis":0.623109,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":506408,"millis":0.506408,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":501307,"millis":0.501307,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":570009,"millis":0.570009,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":700210,"millis":0.70021,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":31701,"millis":0.031701,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":381205,"millis":0.381205,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":395405,"millis":0.395405,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":390205,"millis":0.390205,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":68201,"millis":0.068201,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":119701,"millis":0.119701,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:57.558 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/noordzeevaarwegmarkeringenrd\\\/wfs?request=GetCapabilities&service=WFS \n"},{"result":{"nanos":504107,"millis":0.504107,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":74501,"millis":0.074501,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:57.559 [print] #notpresent \n"},{"result":{"nanos":498907,"millis":0.498907,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":64301,"millis":0.064301,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:57.559 [print] [\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":31600,"millis":0.0316,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":36701,"millis":0.036701,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:57.559 [print] #notpresent \n"},{"result":{"nanos":701110,"millis":0.70111,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":69201,"millis":0.069201,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:57.560 [print] Beheer PDOK \n"},{"result":{"nanos":32900,"millis":0.0329,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:57.560 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=be1b1514-8d1f-48e1-9624-fee9b784138b#MD_DataIdentification \n"},{"result":{"nanos":616809,"millis":0.616809,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":640410,"millis":0.64041,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"62c0d0a5-5826-406d-a625-d84bc5fec800\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":382206,"millis":0.382206,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"62c0d0a5-5826-406d-a625-d84bc5fec800\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":544.859977,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"62c0d0a5-5826-406d-a625-d84bc5fec800","startTime":1629213717016,"refId":"[1.144:67]","endTime":1629213717562,"exampleData":{"datasetIdentifierCode":"62c0d0a5-5826-406d-a625-d84bc5fec800"},"exampleIndex":143},{"sectionIndex":0,"stepResults":[{"result":{"nanos":17400,"millis":0.0174,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:57.252 karate.env system property was: null \n"},{"result":{"nanos":26300,"millis":0.0263,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":57901,"millis":0.057901,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":40601,"millis":0.040601,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":210803,"millis":0.210803,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":34701,"millis":0.034701,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":342805,"millis":0.342805,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":25100,"millis":0.0251,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":43101,"millis":0.043101,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":321305,"millis":0.321305,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":56301,"millis":0.056301,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":15800,"millis":0.0158,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":31701,"millis":0.031701,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5500,"millis":0.0055,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":48201,"millis":0.048201,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'ceda1b88-32ac-40b2-a841-71eb041c9427'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":524080079,"millis":524.080079,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5400,"millis":0.0054,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":664110,"millis":0.66411,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'ceda1b88-32ac-40b2-a841-71eb041c9427'"}},{"result":{"nanos":669510,"millis":0.66951,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":618209,"millis":0.618209,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":606109,"millis":0.606109,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":676410,"millis":0.67641,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":667810,"millis":0.66781,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":26400,"millis":0.0264,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":438006,"millis":0.438006,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":440907,"millis":0.440907,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":468607,"millis":0.468607,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":81501,"millis":0.081501,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":127002,"millis":0.127002,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:57.783 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/reststromen\\\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":990214,"millis":0.990214,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":90601,"millis":0.090601,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:57.785 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":819712,"millis":0.819712,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":76901,"millis":0.076901,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:57.785 [print] #notpresent \n"},{"result":{"nanos":29601,"millis":0.029601,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":439206,"millis":0.439206,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:57.786 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":606508,"millis":0.606508,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":67701,"millis":0.067701,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:57.787 [print] Beheer PDOK \n"},{"result":{"nanos":43600,"millis":0.0436,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:57.787 [print] [\"http:\\\/\\\/nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementsetname=full&id=11d83e36-fd0d-46bc-838c-0567c5dfdb19#MD_DataIdentification\",\"http:\\\/\\\/nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementsetname=full&id=34dacd72-d2fb-4e28-844d-73d3b9c3fef2#MD_DataIdentification\",\"http:\\\/\\\/nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementsetname=full&id=419b85e5-04ee-4cc9-b910-bc58594a943a#MD_DataIdentification\",\"http:\\\/\\\/nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementsetname=full&id=119f7512-a71e-4d1a-82e7-7a2b63f9338b#MD_DataIdentification\",\"http:\\\/\\\/nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementsetname=full&id=6ea55ec4-f312-40ef-9935-68806e61b496#MD_DataIdentification\",\"http:\\\/\\\/nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementsetname=full&id=af784610-df36-4d40-bac0-23d8e728999f#MD_DataIdentification\",\"http:\\\/\\\/nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementsetname=full&id=24eb504e-f5f3-4ecf-b760-cc5630e82a57#MD_DataIdentification\"] \n"},{"result":{"nanos":785012,"millis":0.785012,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":2923842,"millis":2.923842,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"ceda1b88-32ac-40b2-a841-71eb041c9427\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":461507,"millis":0.461507,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"ceda1b88-32ac-40b2-a841-71eb041c9427\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":538.194885,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"ceda1b88-32ac-40b2-a841-71eb041c9427","startTime":1629213717250,"refId":"[1.145:67]","endTime":1629213717791,"exampleData":{"datasetIdentifierCode":"ceda1b88-32ac-40b2-a841-71eb041c9427"},"exampleIndex":144},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14600,"millis":0.0146,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:57.444 karate.env system property was: null \n"},{"result":{"nanos":26100,"millis":0.0261,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":46000,"millis":0.046,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":40301,"millis":0.040301,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":235203,"millis":0.235203,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":35900,"millis":0.0359,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":373806,"millis":0.373806,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":28200,"millis":0.0282,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":36901,"millis":0.036901,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":114602,"millis":0.114602,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":54601,"millis":0.054601,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12400,"millis":0.0124,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19700,"millis":0.0197,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4601,"millis":0.004601,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":44900,"millis":0.0449,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '2ca26f5e-0b39-48a4-9e8d-7b9ffde9a5b0'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":546073999,"millis":546.073999,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":544508,"millis":0.544508,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '2ca26f5e-0b39-48a4-9e8d-7b9ffde9a5b0'"}},{"result":{"nanos":456906,"millis":0.456906,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":377105,"millis":0.377105,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":402706,"millis":0.402706,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":470407,"millis":0.470407,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":397905,"millis":0.397905,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":26000,"millis":0.026,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":305604,"millis":0.305604,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":294804,"millis":0.294804,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":299505,"millis":0.299505,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":69901,"millis":0.069901,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":855712,"millis":0.855712,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:57.996 [print] https:\/\/geodata.nationaalgeoregister.nl\/rws\/richtlijnoverstromingsrisico2018\/wms\/v1_0?request=GetCapabilities&service=WMS \n"},{"result":{"nanos":341104,"millis":0.341104,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":260203,"millis":0.260203,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:57.996 [print] OGC:WMS \n"},{"result":{"nanos":325805,"millis":0.325805,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":368005,"millis":0.368005,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:57.997 [print] #notpresent \n"},{"result":{"nanos":35901,"millis":0.035901,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":219803,"millis":0.219803,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:57.997 [print] OGC:WMS \n"},{"result":{"nanos":409406,"millis":0.409406,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":319504,"millis":0.319504,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:57.998 [print] Beheer PDOK \n"},{"result":{"nanos":46401,"millis":0.046401,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:57.998 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=rorl-9d8e-4758-83fx-28b057f185g1#MD_DataIdentification \n"},{"result":{"nanos":394005,"millis":0.394005,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":601309,"millis":0.601309,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"2ca26f5e-0b39-48a4-9e8d-7b9ffde9a5b0\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":342105,"millis":0.342105,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"2ca26f5e-0b39-48a4-9e8d-7b9ffde9a5b0\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":555.344728,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"2ca26f5e-0b39-48a4-9e8d-7b9ffde9a5b0","startTime":1629213717443,"refId":"[1.146:67]","endTime":1629213718000,"exampleData":{"datasetIdentifierCode":"2ca26f5e-0b39-48a4-9e8d-7b9ffde9a5b0"},"exampleIndex":145},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14100,"millis":0.0141,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:57.472 karate.env system property was: null \n"},{"result":{"nanos":27201,"millis":0.027201,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":45400,"millis":0.0454,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":43200,"millis":0.0432,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":211903,"millis":0.211903,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":32300,"millis":0.0323,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":384806,"millis":0.384806,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":29500,"millis":0.0295,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":44001,"millis":0.044001,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":474507,"millis":0.474507,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":120402,"millis":0.120402,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":18101,"millis":0.018101,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18600,"millis":0.0186,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":57301,"millis":0.057301,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '3e65fa1b-9bb1-41bd-9760-76962751b839'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":566009789,"millis":566.009789,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5300,"millis":0.0053,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":378905,"millis":0.378905,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '3e65fa1b-9bb1-41bd-9760-76962751b839'"}},{"result":{"nanos":436407,"millis":0.436407,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":397406,"millis":0.397406,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":366405,"millis":0.366405,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":418906,"millis":0.418906,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":410406,"millis":0.410406,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":20300,"millis":0.0203,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":284504,"millis":0.284504,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":276604,"millis":0.276604,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":320504,"millis":0.320504,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":58801,"millis":0.058801,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":78902,"millis":0.078902,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:58.044 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/rws\\\/verkeersscheidingsstelsel\\\/wms\\\/v2_0?service=WMS&request=getcapabilities \n"},{"result":{"nanos":608809,"millis":0.608809,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":68301,"millis":0.068301,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:58.045 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":336505,"millis":0.336505,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":180803,"millis":0.180803,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:58.045 [print] #notpresent \n"},{"result":{"nanos":27401,"millis":0.027401,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":190203,"millis":0.190203,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:58.046 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":417506,"millis":0.417506,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":67301,"millis":0.067301,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:58.046 [print] Beheer PDOK \n"},{"result":{"nanos":423506,"millis":0.423506,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:58.047 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=5996e444-f7f3-40d2-b485-8b9af6e8aa89#MD_DataIdentification \n"},{"result":{"nanos":407006,"millis":0.407006,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":394906,"millis":0.394906,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"3e65fa1b-9bb1-41bd-9760-76962751b839\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":280504,"millis":0.280504,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"3e65fa1b-9bb1-41bd-9760-76962751b839\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":574.406112,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"3e65fa1b-9bb1-41bd-9760-76962751b839","startTime":1629213717472,"refId":"[1.147:67]","endTime":1629213718048,"exampleData":{"datasetIdentifierCode":"3e65fa1b-9bb1-41bd-9760-76962751b839"},"exampleIndex":146},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16600,"millis":0.0166,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:57.564 karate.env system property was: null \n"},{"result":{"nanos":28600,"millis":0.0286,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":52900,"millis":0.0529,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":47600,"millis":0.0476,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":210903,"millis":0.210903,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":34300,"millis":0.0343,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":387006,"millis":0.387006,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":29300,"millis":0.0293,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":49400,"millis":0.0494,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":121202,"millis":0.121202,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":72202,"millis":0.072202,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":14400,"millis":0.0144,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20100,"millis":0.0201,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5400,"millis":0.0054,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":6000,"millis":0.006,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":48501,"millis":0.048501,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'a7ed73f4-e16d-46a3-befa-603370cfb6e8'"}},{"result":{"nanos":5600,"millis":0.0056,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":550078962,"millis":550.078962,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":510208,"millis":0.510208,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'a7ed73f4-e16d-46a3-befa-603370cfb6e8'"}},{"result":{"nanos":478407,"millis":0.478407,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":441406,"millis":0.441406,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":414606,"millis":0.414606,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":470207,"millis":0.470207,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":429706,"millis":0.429706,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":33101,"millis":0.033101,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":315304,"millis":0.315304,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":314804,"millis":0.314804,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":331205,"millis":0.331205,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":74401,"millis":0.074401,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":97701,"millis":0.097701,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:58.120 [print] https:\/\/geodata.nationaalgeoregister.nl\/inspire\/su-grid\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":1355319,"millis":1.355319,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":89102,"millis":0.089102,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:58.122 [print] OGC:WMS \n"},{"result":{"nanos":432606,"millis":0.432606,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":68001,"millis":0.068001,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:58.122 [print] #notpresent \n"},{"result":{"nanos":26001,"millis":0.026001,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":27900,"millis":0.0279,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:58.122 [print] OGC:WMS \n"},{"result":{"nanos":643709,"millis":0.643709,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":69701,"millis":0.069701,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:58.123 [print] Beheer PDOK \n"},{"result":{"nanos":48501,"millis":0.048501,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:58.123 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=db8d613f-5edc-4467-9cc0-e2dcfb9d64a8#MD_DataIdentification \n"},{"result":{"nanos":445506,"millis":0.445506,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":558108,"millis":0.558108,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"a7ed73f4-e16d-46a3-befa-603370cfb6e8\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":1403720,"millis":1.40372,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"a7ed73f4-e16d-46a3-befa-603370cfb6e8\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":560.316706,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"a7ed73f4-e16d-46a3-befa-603370cfb6e8","startTime":1629213717564,"refId":"[1.148:67]","endTime":1629213718125,"exampleData":{"datasetIdentifierCode":"a7ed73f4-e16d-46a3-befa-603370cfb6e8"},"exampleIndex":147},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15400,"millis":0.0154,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:57.793 karate.env system property was: null \n"},{"result":{"nanos":27700,"millis":0.0277,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":44701,"millis":0.044701,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":45401,"millis":0.045401,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":209603,"millis":0.209603,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":33701,"millis":0.033701,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":357505,"millis":0.357505,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":27501,"millis":0.027501,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":421106,"millis":0.421106,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":120402,"millis":0.120402,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":56901,"millis":0.056901,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":16000,"millis":0.016,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19900,"millis":0.0199,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":64401,"millis":0.064401,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'a2724dae-ebad-4a07-9405-49bddfde3368'"}},{"result":{"nanos":7500,"millis":0.0075,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":537022383,"millis":537.022383,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":587108,"millis":0.587108,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'a2724dae-ebad-4a07-9405-49bddfde3368'"}},{"result":{"nanos":532908,"millis":0.532908,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":461706,"millis":0.461706,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":436506,"millis":0.436506,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":535208,"millis":0.535208,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":482107,"millis":0.482107,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":26301,"millis":0.026301,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":337805,"millis":0.337805,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":344205,"millis":0.344205,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":358605,"millis":0.358605,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":77701,"millis":0.077701,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":120902,"millis":0.120902,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:58.337 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/rws\\\/verkeersscheidingsstelsel\\\/wfs\\\/v2_0?service=WFS&request=getcapabilities \n"},{"result":{"nanos":965814,"millis":0.965814,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":92401,"millis":0.092401,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:58.338 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":598608,"millis":0.598608,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":75102,"millis":0.075102,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:58.338 [print] #notpresent \n"},{"result":{"nanos":24600,"millis":0.0246,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":400106,"millis":0.400106,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:58.339 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":400306,"millis":0.400306,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":72901,"millis":0.072901,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:58.339 [print] Beheer PDOK \n"},{"result":{"nanos":50101,"millis":0.050101,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:58.339 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=5996e444-f7f3-40d2-b485-8b9af6e8aa89#MD_DataIdentification \n"},{"result":{"nanos":960514,"millis":0.960514,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":584809,"millis":0.584809,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"a2724dae-ebad-4a07-9405-49bddfde3368\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":380205,"millis":0.380205,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"a2724dae-ebad-4a07-9405-49bddfde3368\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":547.414534,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"a2724dae-ebad-4a07-9405-49bddfde3368","startTime":1629213717793,"refId":"[1.149:67]","endTime":1629213718341,"exampleData":{"datasetIdentifierCode":"a2724dae-ebad-4a07-9405-49bddfde3368"},"exampleIndex":148},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15501,"millis":0.015501,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:58.002 karate.env system property was: null \n"},{"result":{"nanos":26700,"millis":0.0267,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":43101,"millis":0.043101,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":39800,"millis":0.0398,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":207703,"millis":0.207703,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":31100,"millis":0.0311,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":342405,"millis":0.342405,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":27301,"millis":0.027301,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":42001,"millis":0.042001,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":255403,"millis":0.255403,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":56901,"millis":0.056901,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13401,"millis":0.013401,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20000,"millis":0.02,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5700,"millis":0.0057,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":42301,"millis":0.042301,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'f57bdee7-4027-4aa2-8312-4051b854be3c'"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":528095962,"millis":528.095962,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":480107,"millis":0.480107,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'f57bdee7-4027-4aa2-8312-4051b854be3c'"}},{"result":{"nanos":382705,"millis":0.382705,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":351005,"millis":0.351005,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":346105,"millis":0.346105,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":393206,"millis":0.393206,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":352205,"millis":0.352205,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":31601,"millis":0.031601,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":272304,"millis":0.272304,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":270204,"millis":0.270204,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":265904,"millis":0.265904,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":138502,"millis":0.138502,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":142402,"millis":0.142402,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:58.535 [print] https:\/\/service.pdok.nl\/rvo\/schelpdierpercelen\/wms\/v1_0?request=GetCapabilities&service=WMS \n"},{"result":{"nanos":294205,"millis":0.294205,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":103901,"millis":0.103901,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:58.536 [print] OGC:WMS \n"},{"result":{"nanos":292304,"millis":0.292304,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":79101,"millis":0.079101,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:58.536 [print] #notpresent \n"},{"result":{"nanos":26401,"millis":0.026401,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":55901,"millis":0.055901,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:58.536 [print] OGC:WMS \n"},{"result":{"nanos":355705,"millis":0.355705,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":89901,"millis":0.089901,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:58.537 [print] Beheer PDOK \n"},{"result":{"nanos":43301,"millis":0.043301,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:58.537 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=c4b4e95a-12d7-4c74-933c-cb267cfe0bcf#MD_DataIdentification \n"},{"result":{"nanos":360506,"millis":0.360506,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":584808,"millis":0.584808,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"f57bdee7-4027-4aa2-8312-4051b854be3c\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":351405,"millis":0.351405,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"f57bdee7-4027-4aa2-8312-4051b854be3c\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":535.346169,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"f57bdee7-4027-4aa2-8312-4051b854be3c","startTime":1629213718002,"refId":"[1.150:67]","endTime":1629213718538,"exampleData":{"datasetIdentifierCode":"f57bdee7-4027-4aa2-8312-4051b854be3c"},"exampleIndex":149},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14200,"millis":0.0142,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:58.050 karate.env system property was: null \n"},{"result":{"nanos":22901,"millis":0.022901,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":40400,"millis":0.0404,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":40800,"millis":0.0408,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":191303,"millis":0.191303,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":32101,"millis":0.032101,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":337705,"millis":0.337705,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":25600,"millis":0.0256,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":41501,"millis":0.041501,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":237903,"millis":0.237903,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":56000,"millis":0.056,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":14501,"millis":0.014501,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17800,"millis":0.0178,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":39501,"millis":0.039501,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5800,"millis":0.0058,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":39101,"millis":0.039101,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'cea38797-ea4b-4969-b979-8d25eb543a6c'"}},{"result":{"nanos":5400,"millis":0.0054,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":541774060,"millis":541.77406,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5600,"millis":0.0056,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":507108,"millis":0.507108,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'cea38797-ea4b-4969-b979-8d25eb543a6c'"}},{"result":{"nanos":444406,"millis":0.444406,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":402305,"millis":0.402305,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":376405,"millis":0.376405,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":445507,"millis":0.445507,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":397306,"millis":0.397306,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":20500,"millis":0.0205,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":292605,"millis":0.292605,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":313704,"millis":0.313704,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":296305,"millis":0.296305,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":627709,"millis":0.627709,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":679210,"millis":0.67921,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:58.598 [print] https:\/\/geodata.nationaalgeoregister.nl\/inspire\/elu\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":341105,"millis":0.341105,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":420606,"millis":0.420606,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:58.599 [print] OGC:WMS \n"},{"result":{"nanos":332504,"millis":0.332504,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":403905,"millis":0.403905,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:58.600 [print] #notpresent \n"},{"result":{"nanos":34200,"millis":0.0342,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":351505,"millis":0.351505,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:58.600 [print] OGC:WMS \n"},{"result":{"nanos":413106,"millis":0.413106,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":408006,"millis":0.408006,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:58.601 [print] Beheer PDOK \n"},{"result":{"nanos":814212,"millis":0.814212,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:58.602 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=6318009c-7b11-4ab9-9929-735584dfb692#MD_DataIdentification \n"},{"result":{"nanos":509107,"millis":0.509107,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":563209,"millis":0.563209,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"cea38797-ea4b-4969-b979-8d25eb543a6c\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":344205,"millis":0.344205,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"cea38797-ea4b-4969-b979-8d25eb543a6c\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":552.684817,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"cea38797-ea4b-4969-b979-8d25eb543a6c","startTime":1629213718050,"refId":"[1.151:67]","endTime":1629213718603,"exampleData":{"datasetIdentifierCode":"cea38797-ea4b-4969-b979-8d25eb543a6c"},"exampleIndex":150},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15900,"millis":0.0159,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:58.127 karate.env system property was: null \n"},{"result":{"nanos":28100,"millis":0.0281,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":47001,"millis":0.047001,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":43801,"millis":0.043801,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":243803,"millis":0.243803,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":33101,"millis":0.033101,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":340605,"millis":0.340605,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":27100,"millis":0.0271,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":43100,"millis":0.0431,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":1035015,"millis":1.035015,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":88802,"millis":0.088802,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":16600,"millis":0.0166,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":43701,"millis":0.043701,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5300,"millis":0.0053,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":46601,"millis":0.046601,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'e75b66ae-21b1-4303-aeb3-787608707b23'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":550541187,"millis":550.541187,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":528108,"millis":0.528108,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'e75b66ae-21b1-4303-aeb3-787608707b23'"}},{"result":{"nanos":541808,"millis":0.541808,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":467707,"millis":0.467707,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":465907,"millis":0.465907,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":517107,"millis":0.517107,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":482407,"millis":0.482407,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":24200,"millis":0.0242,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":358805,"millis":0.358805,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":310804,"millis":0.310804,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":293305,"millis":0.293305,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":58401,"millis":0.058401,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":83201,"millis":0.083201,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:58.685 [print] https:\/\/geodata.nationaalgeoregister.nl\/inspire\/elu\/wfs?request=GetCapabilitiesservice=wfs \n"},{"result":{"nanos":325905,"millis":0.325905,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":102901,"millis":0.102901,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:58.685 [print] OGC:WFS \n"},{"result":{"nanos":445706,"millis":0.445706,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":79401,"millis":0.079401,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:58.686 [print] #notpresent \n"},{"result":{"nanos":25300,"millis":0.0253,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":40801,"millis":0.040801,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:58.686 [print] OGC:WFS \n"},{"result":{"nanos":404306,"millis":0.404306,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":69601,"millis":0.069601,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:58.686 [print] Beheer PDOK \n"},{"result":{"nanos":43200,"millis":0.0432,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:58.687 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=6318009c-7b11-4ab9-9929-735584dfb692#MD_DataIdentification \n"},{"result":{"nanos":391305,"millis":0.391305,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":515607,"millis":0.515607,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"e75b66ae-21b1-4303-aeb3-787608707b23\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":299705,"millis":0.299705,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"e75b66ae-21b1-4303-aeb3-787608707b23\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":559.491815,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"e75b66ae-21b1-4303-aeb3-787608707b23","startTime":1629213718127,"refId":"[1.152:67]","endTime":1629213718688,"exampleData":{"datasetIdentifierCode":"e75b66ae-21b1-4303-aeb3-787608707b23"},"exampleIndex":151},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15601,"millis":0.015601,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:58.343 karate.env system property was: null \n"},{"result":{"nanos":274004,"millis":0.274004,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":52301,"millis":0.052301,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":42900,"millis":0.0429,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":217604,"millis":0.217604,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":33800,"millis":0.0338,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":341405,"millis":0.341405,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":25600,"millis":0.0256,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":43901,"millis":0.043901,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":369605,"millis":0.369605,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":85502,"millis":0.085502,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":15800,"millis":0.0158,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20900,"millis":0.0209,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4201,"millis":0.004201,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5200,"millis":0.0052,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":42400,"millis":0.0424,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'c0a8e0ee-8639-44d4-be07-d7edf9c276c7'"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":535799773,"millis":535.799773,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":614409,"millis":0.614409,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'c0a8e0ee-8639-44d4-be07-d7edf9c276c7'"}},{"result":{"nanos":528608,"millis":0.528608,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":476507,"millis":0.476507,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":457807,"millis":0.457807,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":520508,"millis":0.520508,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":489007,"millis":0.489007,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":27401,"millis":0.027401,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":345005,"millis":0.345005,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":341905,"millis":0.341905,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":395306,"millis":0.395306,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":74201,"millis":0.074201,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":124302,"millis":0.124302,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:58.886 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/inspire\\\/tn\\\/wfs?request=GetCapabilities&service=wfs \n"},{"result":{"nanos":1241818,"millis":1.241818,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":90201,"millis":0.090201,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:58.887 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":713210,"millis":0.71321,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":76001,"millis":0.076001,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:58.888 [print] #notpresent \n"},{"result":{"nanos":29400,"millis":0.0294,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":67701,"millis":0.067701,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:58.888 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":912513,"millis":0.912513,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":74301,"millis":0.074301,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:58.889 [print] Beheer PDOK \n"},{"result":{"nanos":59301,"millis":0.059301,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:58.889 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=14657c9b-91e4-4355-8563-2911ad0e78e4#MD_DataIdentification \n"},{"result":{"nanos":1084416,"millis":1.084416,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":696710,"millis":0.69671,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"c0a8e0ee-8639-44d4-be07-d7edf9c276c7\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":380505,"millis":0.380505,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"c0a8e0ee-8639-44d4-be07-d7edf9c276c7\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":547.22474,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"c0a8e0ee-8639-44d4-be07-d7edf9c276c7","startTime":1629213718343,"refId":"[1.153:67]","endTime":1629213718891,"exampleData":{"datasetIdentifierCode":"c0a8e0ee-8639-44d4-be07-d7edf9c276c7"},"exampleIndex":152},{"sectionIndex":0,"stepResults":[{"result":{"nanos":17300,"millis":0.0173,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:58.540 karate.env system property was: null \n"},{"result":{"nanos":28901,"millis":0.028901,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":47801,"millis":0.047801,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":45800,"millis":0.0458,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":216903,"millis":0.216903,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":35200,"millis":0.0352,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":454106,"millis":0.454106,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":38101,"millis":0.038101,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":71801,"millis":0.071801,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":111402,"millis":0.111402,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":50801,"millis":0.050801,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13000,"millis":0.013,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18700,"millis":0.0187,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4001,"millis":0.004001,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":44700,"millis":0.0447,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '09588464-071b-47be-8cbe-d15f2e1f9634'"}},{"result":{"nanos":4701,"millis":0.004701,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":546531329,"millis":546.531329,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":7300,"millis":0.0073,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":543908,"millis":0.543908,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '09588464-071b-47be-8cbe-d15f2e1f9634'"}},{"result":{"nanos":503707,"millis":0.503707,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":417306,"millis":0.417306,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":409906,"millis":0.409906,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":472107,"millis":0.472107,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":426606,"millis":0.426606,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":27100,"millis":0.0271,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":322505,"millis":0.322505,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":314805,"millis":0.314805,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":320705,"millis":0.320705,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":894113,"millis":0.894113,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":825812,"millis":0.825812,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:59.094 [print] https:\/\/geodata.nationaalgeoregister.nl\/inspire\/tn-c\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":363105,"millis":0.363105,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":75901,"millis":0.075901,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:59.095 [print] OGC:WMS \n"},{"result":{"nanos":381106,"millis":0.381106,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":57401,"millis":0.057401,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:59.095 [print] #notpresent \n"},{"result":{"nanos":163002,"millis":0.163002,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":75902,"millis":0.075902,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:59.095 [print] OGC:WMS \n"},{"result":{"nanos":555508,"millis":0.555508,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":78801,"millis":0.078801,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:59.096 [print] Beheer PDOK \n"},{"result":{"nanos":187103,"millis":0.187103,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:59.096 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=6c06740d-058f-4a12-bb3f-bf68efd03d09#MD_DataIdentification \n"},{"result":{"nanos":787812,"millis":0.787812,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":690610,"millis":0.69061,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"09588464-071b-47be-8cbe-d15f2e1f9634\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":413006,"millis":0.413006,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"09588464-071b-47be-8cbe-d15f2e1f9634\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":557.058584,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"09588464-071b-47be-8cbe-d15f2e1f9634","startTime":1629213718540,"refId":"[1.154:67]","endTime":1629213719098,"exampleData":{"datasetIdentifierCode":"09588464-071b-47be-8cbe-d15f2e1f9634"},"exampleIndex":153},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15200,"millis":0.0152,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:58.605 karate.env system property was: null \n"},{"result":{"nanos":27000,"millis":0.027,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":43201,"millis":0.043201,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":41101,"millis":0.041101,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":195703,"millis":0.195703,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":31300,"millis":0.0313,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":343605,"millis":0.343605,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":25400,"millis":0.0254,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":43001,"millis":0.043001,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":100701,"millis":0.100701,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":130902,"millis":0.130902,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13701,"millis":0.013701,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19200,"millis":0.0192,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":38701,"millis":0.038701,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '4074b3c3-ca85-45ad-bc0d-b5fca8540c0a'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":550379885,"millis":550.379885,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5700,"millis":0.0057,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":542207,"millis":0.542207,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '4074b3c3-ca85-45ad-bc0d-b5fca8540c0a'"}},{"result":{"nanos":495807,"millis":0.495807,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":454807,"millis":0.454807,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":454907,"millis":0.454907,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":748711,"millis":0.748711,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":506507,"millis":0.506507,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":26201,"millis":0.026201,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":361105,"millis":0.361105,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":350205,"millis":0.350205,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":416906,"millis":0.416906,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":680810,"millis":0.68081,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":792812,"millis":0.792812,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:59.163 [print] https:\/\/geodata.nationaalgeoregister.nl\/vin\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":408106,"millis":0.408106,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":492507,"millis":0.492507,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:59.164 [print] OGC:WMS \n"},{"result":{"nanos":395605,"millis":0.395605,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":491507,"millis":0.491507,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:59.165 [print] #notpresent \n"},{"result":{"nanos":38900,"millis":0.0389,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":477806,"millis":0.477806,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:59.166 [print] OGC:WMS \n"},{"result":{"nanos":448406,"millis":0.448406,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":437407,"millis":0.437407,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:59.166 [print] Beheer PDOK \n"},{"result":{"nanos":832612,"millis":0.832612,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:59.167 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=831f7bd7-c2ae-4336-bd2f-47ab20d7cdb7 \n"},{"result":{"nanos":446607,"millis":0.446607,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":608309,"millis":0.608309,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"4074b3c3-ca85-45ad-bc0d-b5fca8540c0a\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":368205,"millis":0.368205,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"4074b3c3-ca85-45ad-bc0d-b5fca8540c0a\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":562.750163,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"4074b3c3-ca85-45ad-bc0d-b5fca8540c0a","startTime":1629213718605,"refId":"[1.155:67]","endTime":1629213719169,"exampleData":{"datasetIdentifierCode":"4074b3c3-ca85-45ad-bc0d-b5fca8540c0a"},"exampleIndex":154},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15600,"millis":0.0156,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:58.690 karate.env system property was: null \n"},{"result":{"nanos":27001,"millis":0.027001,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":43301,"millis":0.043301,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":40400,"millis":0.0404,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":943714,"millis":0.943714,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":39301,"millis":0.039301,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":379806,"millis":0.379806,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":30200,"millis":0.0302,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":41801,"millis":0.041801,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":107502,"millis":0.107502,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":51600,"millis":0.0516,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13601,"millis":0.013601,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20100,"millis":0.0201,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":40501,"millis":0.040501,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'b4ae5b2c-f557-4a30-bbf2-c2681a544f32'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":547003936,"millis":547.003936,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":5300,"millis":0.0053,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":552508,"millis":0.552508,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'b4ae5b2c-f557-4a30-bbf2-c2681a544f32'"}},{"result":{"nanos":532508,"millis":0.532508,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":473407,"millis":0.473407,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":467207,"millis":0.467207,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":538308,"millis":0.538308,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":493707,"millis":0.493707,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":27700,"millis":0.0277,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":357205,"millis":0.357205,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":356905,"millis":0.356905,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":363905,"millis":0.363905,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":72501,"millis":0.072501,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":93801,"millis":0.093801,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:59.244 [print] https:\/\/geodata.nationaalgeoregister.nl\/vin\/wfs?request=GetCapabilities&service=wfs \n"},{"result":{"nanos":375606,"millis":0.375606,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":875312,"millis":0.875312,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:59.245 [print] OGC:WFS \n"},{"result":{"nanos":419806,"millis":0.419806,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":512507,"millis":0.512507,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:59.246 [print] #notpresent \n"},{"result":{"nanos":41700,"millis":0.0417,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":72101,"millis":0.072101,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:59.246 [print] OGC:WFS \n"},{"result":{"nanos":512607,"millis":0.512607,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":87801,"millis":0.087801,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:59.247 [print] Beheer PDOK \n"},{"result":{"nanos":74501,"millis":0.074501,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:59.247 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=831f7bd7-c2ae-4336-bd2f-47ab20d7cdb7#MD_DataIdentification \n"},{"result":{"nanos":421206,"millis":0.421206,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":575808,"millis":0.575808,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"b4ae5b2c-f557-4a30-bbf2-c2681a544f32\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":322604,"millis":0.322604,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"b4ae5b2c-f557-4a30-bbf2-c2681a544f32\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":557.441785,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"b4ae5b2c-f557-4a30-bbf2-c2681a544f32","startTime":1629213718690,"refId":"[1.156:67]","endTime":1629213719248,"exampleData":{"datasetIdentifierCode":"b4ae5b2c-f557-4a30-bbf2-c2681a544f32"},"exampleIndex":155},{"sectionIndex":0,"stepResults":[{"result":{"nanos":18100,"millis":0.0181,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:58.893 karate.env system property was: null \n"},{"result":{"nanos":36900,"millis":0.0369,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":50201,"millis":0.050201,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":46901,"millis":0.046901,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":228803,"millis":0.228803,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":36400,"millis":0.0364,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":373406,"millis":0.373406,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":28400,"millis":0.0284,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":72901,"millis":0.072901,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":136502,"millis":0.136502,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":59800,"millis":0.0598,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":14100,"millis":0.0141,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":21100,"millis":0.0211,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5900,"millis":0.0059,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4401,"millis":0.004401,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":45500,"millis":0.0455,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'd69fee4a-e3ff-47d4-919d-e55276a3fad9'"}},{"result":{"nanos":5800,"millis":0.0058,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":526218134,"millis":526.218134,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":35401,"millis":0.035401,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":612809,"millis":0.612809,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'd69fee4a-e3ff-47d4-919d-e55276a3fad9'"}},{"result":{"nanos":561808,"millis":0.561808,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":497507,"millis":0.497507,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":488707,"millis":0.488707,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":558908,"millis":0.558908,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":518707,"millis":0.518707,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":27401,"millis":0.027401,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":374005,"millis":0.374005,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":385805,"millis":0.385805,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":392106,"millis":0.392106,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":66801,"millis":0.066801,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":124502,"millis":0.124502,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:59.426 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/inspire\\\/tn-a\\\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":873213,"millis":0.873213,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":125702,"millis":0.125702,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:59.427 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":712811,"millis":0.712811,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":75501,"millis":0.075501,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:59.428 [print] #notpresent \n"},{"result":{"nanos":29101,"millis":0.029101,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":62001,"millis":0.062001,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:59.428 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":694910,"millis":0.69491,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":72901,"millis":0.072901,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:59.429 [print] Beheer PDOK \n"},{"result":{"nanos":56901,"millis":0.056901,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:59.429 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=31de946d-85d4-4c93-bb97-e25f4ef1401a#MD_DataIdentification \n"},{"result":{"nanos":1256718,"millis":1.256718,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":559708,"millis":0.559708,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"d69fee4a-e3ff-47d4-919d-e55276a3fad9\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":334805,"millis":0.334805,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"d69fee4a-e3ff-47d4-919d-e55276a3fad9\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":536.906688,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"d69fee4a-e3ff-47d4-919d-e55276a3fad9","startTime":1629213718893,"refId":"[1.157:67]","endTime":1629213719431,"exampleData":{"datasetIdentifierCode":"d69fee4a-e3ff-47d4-919d-e55276a3fad9"},"exampleIndex":156},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16300,"millis":0.0163,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:59.100 karate.env system property was: null \n"},{"result":{"nanos":29801,"millis":0.029801,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":46800,"millis":0.0468,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":44400,"millis":0.0444,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":212403,"millis":0.212403,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":34900,"millis":0.0349,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":399806,"millis":0.399806,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":30001,"millis":0.030001,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":243403,"millis":0.243403,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":121402,"millis":0.121402,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":56901,"millis":0.056901,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":16100,"millis":0.0161,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19300,"millis":0.0193,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5400,"millis":0.0054,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":46701,"millis":0.046701,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '5bb85b77-fffd-449b-bd61-f076fe07cc4b'"}},{"result":{"nanos":6000,"millis":0.006,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":5700,"millis":0.0057,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":542410469,"millis":542.410469,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":3700,"millis":0.0037,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":492907,"millis":0.492907,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '5bb85b77-fffd-449b-bd61-f076fe07cc4b'"}},{"result":{"nanos":456607,"millis":0.456607,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":390605,"millis":0.390605,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":383605,"millis":0.383605,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":430807,"millis":0.430807,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":381605,"millis":0.381605,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":24200,"millis":0.0242,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":285504,"millis":0.285504,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":285304,"millis":0.285304,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":290104,"millis":0.290104,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":62601,"millis":0.062601,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":108902,"millis":0.108902,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:59.648 [print] https:\/\/geodata.nationaalgeoregister.nl\/inspire\/tn-c\/wfs?request=GetCapabilities&service=wfs \n"},{"result":{"nanos":316304,"millis":0.316304,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":325104,"millis":0.325104,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:59.649 [print] OGC:WFS \n"},{"result":{"nanos":420707,"millis":0.420707,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":471907,"millis":0.471907,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:59.650 [print] #notpresent \n"},{"result":{"nanos":34900,"millis":0.0349,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":438307,"millis":0.438307,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:59.650 [print] OGC:WFS \n"},{"result":{"nanos":1186917,"millis":1.186917,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":472207,"millis":0.472207,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:59.652 [print] Beheer PDOK \n"},{"result":{"nanos":1009615,"millis":1.009615,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:59.653 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=6c06740d-058f-4a12-bb3f-bf68efd03d09#MD_DataIdentification \n"},{"result":{"nanos":406106,"millis":0.406106,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":550008,"millis":0.550008,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"5bb85b77-fffd-449b-bd61-f076fe07cc4b\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":333005,"millis":0.333005,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"5bb85b77-fffd-449b-bd61-f076fe07cc4b\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":553.312125,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"5bb85b77-fffd-449b-bd61-f076fe07cc4b","startTime":1629213719100,"refId":"[1.158:67]","endTime":1629213719654,"exampleData":{"datasetIdentifierCode":"5bb85b77-fffd-449b-bd61-f076fe07cc4b"},"exampleIndex":157},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15700,"millis":0.0157,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:59.171 karate.env system property was: null \n"},{"result":{"nanos":28401,"millis":0.028401,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":47401,"millis":0.047401,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":43900,"millis":0.0439,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":211603,"millis":0.211603,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":36700,"millis":0.0367,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":374906,"millis":0.374906,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":29600,"millis":0.0296,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":46901,"millis":0.046901,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":248304,"millis":0.248304,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":65001,"millis":0.065001,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":14700,"millis":0.0147,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19501,"millis":0.019501,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5800,"millis":0.0058,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":48001,"millis":0.048001,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'c374d556-7b6e-459b-83c7-74da6ad90a59'"}},{"result":{"nanos":15000,"millis":0.015,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":5200,"millis":0.0052,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":540142537,"millis":540.142537,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":6000,"millis":0.006,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":550008,"millis":0.550008,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'c374d556-7b6e-459b-83c7-74da6ad90a59'"}},{"result":{"nanos":474007,"millis":0.474007,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":425006,"millis":0.425006,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":420006,"millis":0.420006,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":466307,"millis":0.466307,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":450207,"millis":0.450207,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":23100,"millis":0.0231,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":325005,"millis":0.325005,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":322005,"millis":0.322005,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":332005,"millis":0.332005,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":64901,"millis":0.064901,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":550708,"millis":0.550708,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:59.717 [print] https:\/\/geodata.nationaalgeoregister.nl\/schelpdierwater\/wfs?request=GetCapabilities&service=WFS \n"},{"result":{"nanos":385605,"millis":0.385605,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":262904,"millis":0.262904,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:59.718 [print] #notpresent \n"},{"result":{"nanos":343305,"millis":0.343305,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":59001,"millis":0.059001,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:59.718 [print] OGC:WFS \n"},{"result":{"nanos":31101,"millis":0.031101,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":181503,"millis":0.181503,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:59.719 [print] #notpresent \n"},{"result":{"nanos":453006,"millis":0.453006,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":68601,"millis":0.068601,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:59.719 [print] Beheer PDOK \n"},{"result":{"nanos":532808,"millis":0.532808,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:59.720 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=4783ea4f-6b8c-4600-8af0-516f3556cfe9#MD_DataIdentification \n"},{"result":{"nanos":427506,"millis":0.427506,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":551908,"millis":0.551908,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"c374d556-7b6e-459b-83c7-74da6ad90a59\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":377006,"millis":0.377006,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"c374d556-7b6e-459b-83c7-74da6ad90a59\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":549.486875,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"c374d556-7b6e-459b-83c7-74da6ad90a59","startTime":1629213719170,"refId":"[1.159:67]","endTime":1629213719721,"exampleData":{"datasetIdentifierCode":"c374d556-7b6e-459b-83c7-74da6ad90a59"},"exampleIndex":158},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14900,"millis":0.0149,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:59.250 karate.env system property was: null \n"},{"result":{"nanos":26300,"millis":0.0263,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":43600,"millis":0.0436,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":42701,"millis":0.042701,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":210303,"millis":0.210303,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":33101,"millis":0.033101,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":347905,"millis":0.347905,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":28300,"millis":0.0283,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":47700,"millis":0.0477,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":122602,"millis":0.122602,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":66901,"millis":0.066901,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":30201,"millis":0.030201,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":21100,"millis":0.0211,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":49400,"millis":0.0494,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'f76bdce5-344e-415f-8f2c-972755e80b65'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":5300,"millis":0.0053,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":515458578,"millis":515.458578,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":6700,"millis":0.0067,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":556609,"millis":0.556609,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'f76bdce5-344e-415f-8f2c-972755e80b65'"}},{"result":{"nanos":418506,"millis":0.418506,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":358405,"millis":0.358405,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":362406,"millis":0.362406,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":404906,"millis":0.404906,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":401906,"millis":0.401906,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":33200,"millis":0.0332,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":305905,"millis":0.305905,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":299204,"millis":0.299204,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":287604,"millis":0.287604,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":61501,"millis":0.061501,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":303004,"millis":0.303004,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:21:59.771 [print] https:\/\/geodata.nationaalgeoregister.nl\/schelpdierwater\/wms?request=GetCapabilities&service=WMS \n"},{"result":{"nanos":329105,"millis":0.329105,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":83402,"millis":0.083402,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:21:59.772 [print] #notpresent \n"},{"result":{"nanos":551408,"millis":0.551408,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":56801,"millis":0.056801,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:21:59.772 [print] OGC:WMS \n"},{"result":{"nanos":132702,"millis":0.132702,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":73701,"millis":0.073701,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:21:59.773 [print] #notpresent \n"},{"result":{"nanos":459007,"millis":0.459007,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":57901,"millis":0.057901,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:21:59.773 [print] Beheer PDOK \n"},{"result":{"nanos":47801,"millis":0.047801,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:21:59.773 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=4783ea4f-6b8c-4600-8af0-516f3556cfe9#MD_DataIdentification \n"},{"result":{"nanos":398605,"millis":0.398605,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":654809,"millis":0.654809,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"f76bdce5-344e-415f-8f2c-972755e80b65\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":300005,"millis":0.300005,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"f76bdce5-344e-415f-8f2c-972755e80b65\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":523.507795,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"f76bdce5-344e-415f-8f2c-972755e80b65","startTime":1629213719250,"refId":"[1.160:67]","endTime":1629213719775,"exampleData":{"datasetIdentifierCode":"f76bdce5-344e-415f-8f2c-972755e80b65"},"exampleIndex":159},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16600,"millis":0.0166,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:59.433 karate.env system property was: null \n"},{"result":{"nanos":132402,"millis":0.132402,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":52801,"millis":0.052801,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":46001,"millis":0.046001,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":220103,"millis":0.220103,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":32101,"millis":0.032101,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":383806,"millis":0.383806,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":28600,"millis":0.0286,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":46001,"millis":0.046001,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":94401,"millis":0.094401,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":144902,"millis":0.144902,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":16600,"millis":0.0166,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20900,"millis":0.0209,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":43101,"millis":0.043101,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'e69bb2e9-eff4-4fb3-86a6-057cf628e761'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":597626970,"millis":597.62697,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":6500,"millis":0.0065,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":5271176,"millis":5.271176,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'e69bb2e9-eff4-4fb3-86a6-057cf628e761'"}},{"result":{"nanos":5751883,"millis":5.751883,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":5714083,"millis":5.714083,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":5566681,"millis":5.566681,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":5589382,"millis":5.589382,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":5694282,"millis":5.694282,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":39800,"millis":0.0398,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":3824956,"millis":3.824956,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":3851156,"millis":3.851156,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":6399793,"millis":6.399793,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":552208,"millis":0.552208,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":590509,"millis":0.590509,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:00.081 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/vogelrichtlijnverspreidingsoorten\\\/wms?request=GetCapabilities&service=WMS \n"},{"result":{"nanos":4060359,"millis":4.060359,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":304605,"millis":0.304605,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:00.086 [print] #notpresent \n"},{"result":{"nanos":4097959,"millis":4.097959,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":3925157,"millis":3.925157,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:00.094 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":35601,"millis":0.035601,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":172503,"millis":0.172503,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:00.094 [print] #notpresent \n"},{"result":{"nanos":5640382,"millis":5.640382,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":275604,"millis":0.275604,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:00.100 [print] Beheer PDOK \n"},{"result":{"nanos":602509,"millis":0.602509,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:00.100 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=fcefa13c-44e2-4953-b6d6-1ddceebc57fc#MD_DataIdentification \n"},{"result":{"nanos":5574181,"millis":5.574181,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":575708,"millis":0.575708,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"e69bb2e9-eff4-4fb3-86a6-057cf628e761\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":338005,"millis":0.338005,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"e69bb2e9-eff4-4fb3-86a6-057cf628e761\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":673.378971,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"e69bb2e9-eff4-4fb3-86a6-057cf628e761","startTime":1629213719433,"refId":"[1.161:67]","endTime":1629213720107,"exampleData":{"datasetIdentifierCode":"e69bb2e9-eff4-4fb3-86a6-057cf628e761"},"exampleIndex":160},{"sectionIndex":0,"stepResults":[{"result":{"nanos":17100,"millis":0.0171,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:59.657 karate.env system property was: null \n"},{"result":{"nanos":30700,"millis":0.0307,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":49601,"millis":0.049601,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":43901,"millis":0.043901,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":264904,"millis":0.264904,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":321304,"millis":0.321304,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":428506,"millis":0.428506,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":31400,"millis":0.0314,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":1046315,"millis":1.046315,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":121902,"millis":0.121902,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":64001,"millis":0.064001,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":16300,"millis":0.0163,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20200,"millis":0.0202,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":45901,"millis":0.045901,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '627b50bf-2e33-4beb-a314-ff8c0fe8912e'"}},{"result":{"nanos":5400,"millis":0.0054,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":540511541,"millis":540.511541,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":4301,"millis":0.004301,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":651709,"millis":0.651709,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '627b50bf-2e33-4beb-a314-ff8c0fe8912e'"}},{"result":{"nanos":597809,"millis":0.597809,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":569509,"millis":0.569509,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":457106,"millis":0.457106,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":567308,"millis":0.567308,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":510507,"millis":0.510507,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":24000,"millis":0.024,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":395406,"millis":0.395406,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":418906,"millis":0.418906,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":422306,"millis":0.422306,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":64501,"millis":0.064501,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":910013,"millis":0.910013,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:00.206 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/nl\\\/rws\\\/tn-w\\\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":463107,"millis":0.463107,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":533508,"millis":0.533508,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:00.207 [print] [\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":442406,"millis":0.442406,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":496307,"millis":0.496307,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:00.208 [print] #notpresent \n"},{"result":{"nanos":36800,"millis":0.0368,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":446306,"millis":0.446306,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:00.208 [print] [\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":510808,"millis":0.510808,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":443006,"millis":0.443006,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:00.209 [print] Beheer PDOK \n"},{"result":{"nanos":914413,"millis":0.914413,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:00.210 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=eu-2c7040b-c448-451b-bf15-f2416ecaadd1#MD_DataIdentification \n"},{"result":{"nanos":508208,"millis":0.508208,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":1026315,"millis":1.026315,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"627b50bf-2e33-4beb-a314-ff8c0fe8912e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":555708,"millis":0.555708,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"627b50bf-2e33-4beb-a314-ff8c0fe8912e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":555.002249,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"627b50bf-2e33-4beb-a314-ff8c0fe8912e","startTime":1629213719656,"refId":"[1.162:67]","endTime":1629213720212,"exampleData":{"datasetIdentifierCode":"627b50bf-2e33-4beb-a314-ff8c0fe8912e"},"exampleIndex":161},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16700,"millis":0.0167,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:59.724 karate.env system property was: null \n"},{"result":{"nanos":27901,"millis":0.027901,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":56501,"millis":0.056501,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":47200,"millis":0.0472,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":213503,"millis":0.213503,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":34600,"millis":0.0346,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":386206,"millis":0.386206,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":30401,"millis":0.030401,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":208803,"millis":0.208803,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":114402,"millis":0.114402,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":54100,"millis":0.0541,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":15300,"millis":0.0153,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":21000,"millis":0.021,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":6301,"millis":0.006301,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":48300,"millis":0.0483,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'a84f9836-9111-4e45-a311-3dab39019e15'"}},{"result":{"nanos":6301,"millis":0.006301,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":540202737,"millis":540.202737,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":722910,"millis":0.72291,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'a84f9836-9111-4e45-a311-3dab39019e15'"}},{"result":{"nanos":680809,"millis":0.680809,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":656009,"millis":0.656009,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":633610,"millis":0.63361,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":700810,"millis":0.70081,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":698810,"millis":0.69881,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":26400,"millis":0.0264,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":461807,"millis":0.461807,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":450307,"millis":0.450307,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":464607,"millis":0.464607,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":64401,"millis":0.064401,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":859412,"millis":0.859412,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:00.272 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/nl\\\/rws\\\/tn-w\\\/wfs?request=GetCapabilities&service=wfs \n"},{"result":{"nanos":712511,"millis":0.712511,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":596409,"millis":0.596409,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:00.273 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":508707,"millis":0.508707,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":457907,"millis":0.457907,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:00.274 [print] #notpresent \n"},{"result":{"nanos":37101,"millis":0.037101,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":460607,"millis":0.460607,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:00.275 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":614009,"millis":0.614009,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":437206,"millis":0.437206,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:00.276 [print] Beheer PDOK \n"},{"result":{"nanos":915314,"millis":0.915314,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:00.277 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=eu-2c7040b-c448-451b-bf15-f2416ecaadd1#MD_DataIdentification \n"},{"result":{"nanos":619809,"millis":0.619809,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":554408,"millis":0.554408,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"a84f9836-9111-4e45-a311-3dab39019e15\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":342705,"millis":0.342705,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"a84f9836-9111-4e45-a311-3dab39019e15\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":554.180841,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"a84f9836-9111-4e45-a311-3dab39019e15","startTime":1629213719723,"refId":"[1.163:67]","endTime":1629213720278,"exampleData":{"datasetIdentifierCode":"a84f9836-9111-4e45-a311-3dab39019e15"},"exampleIndex":162},{"sectionIndex":0,"stepResults":[{"result":{"nanos":38700,"millis":0.0387,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:21:59.776 karate.env system property was: null \n"},{"result":{"nanos":31301,"millis":0.031301,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":47801,"millis":0.047801,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":65701,"millis":0.065701,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":261504,"millis":0.261504,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":48001,"millis":0.048001,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":416306,"millis":0.416306,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":40301,"millis":0.040301,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":256603,"millis":0.256603,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":119501,"millis":0.119501,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":66501,"millis":0.066501,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":16700,"millis":0.0167,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20200,"millis":0.0202,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":45300,"millis":0.0453,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '18bcfb8c-b73d-4e9c-8348-7ee6cd49ec79'"}},{"result":{"nanos":6601,"millis":0.006601,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":540121736,"millis":540.121736,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":926114,"millis":0.926114,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '18bcfb8c-b73d-4e9c-8348-7ee6cd49ec79'"}},{"result":{"nanos":881713,"millis":0.881713,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":834612,"millis":0.834612,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":903514,"millis":0.903514,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":887813,"millis":0.887813,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":828912,"millis":0.828912,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":26100,"millis":0.0261,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":647409,"millis":0.647409,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":615309,"millis":0.615309,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":641510,"millis":0.64151,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":88001,"millis":0.088001,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":3459550,"millis":3.45955,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:00.330 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/inspire\\\/tn-ro\\\/wfs?request=GetCapabilities&service=WFS \n"},{"result":{"nanos":685410,"millis":0.68541,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":771711,"millis":0.771711,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:00.332 [print] #notpresent \n"},{"result":{"nanos":682110,"millis":0.68211,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":775112,"millis":0.775112,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:00.333 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":40500,"millis":0.0405,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":434207,"millis":0.434207,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:00.334 [print] #notpresent \n"},{"result":{"nanos":853512,"millis":0.853512,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":457607,"millis":0.457607,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:00.335 [print] Beheer PDOK \n"},{"result":{"nanos":878013,"millis":0.878013,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:00.336 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=8f45b8ef-0ce8-463a-9059-5efdcecb785c#MD_DataIdentification \n"},{"result":{"nanos":900613,"millis":0.900613,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":607208,"millis":0.607208,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"18bcfb8c-b73d-4e9c-8348-7ee6cd49ec79\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":1880027,"millis":1.880027,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"18bcfb8c-b73d-4e9c-8348-7ee6cd49ec79\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":561.327244,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"18bcfb8c-b73d-4e9c-8348-7ee6cd49ec79","startTime":1629213719776,"refId":"[1.164:67]","endTime":1629213720340,"exampleData":{"datasetIdentifierCode":"18bcfb8c-b73d-4e9c-8348-7ee6cd49ec79"},"exampleIndex":163},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15800,"millis":0.0158,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:00.109 karate.env system property was: null \n"},{"result":{"nanos":29301,"millis":0.029301,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":46000,"millis":0.046,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":103601,"millis":0.103601,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":225603,"millis":0.225603,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":34500,"millis":0.0345,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":413106,"millis":0.413106,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":29601,"millis":0.029601,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":265204,"millis":0.265204,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":117002,"millis":0.117002,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":56501,"millis":0.056501,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":16100,"millis":0.0161,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20700,"millis":0.0207,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":8801,"millis":0.008801,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":7000,"millis":0.007,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":50101,"millis":0.050101,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '018a28a5-1019-4747-b031-f66ffc1c6ae7'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":547684946,"millis":547.684946,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":754711,"millis":0.754711,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '018a28a5-1019-4747-b031-f66ffc1c6ae7'"}},{"result":{"nanos":688010,"millis":0.68801,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":51376246,"millis":51.376246,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":613309,"millis":0.613309,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":793012,"millis":0.793012,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":606109,"millis":0.606109,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":77401,"millis":0.077401,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":424406,"millis":0.424406,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":419106,"millis":0.419106,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":446606,"millis":0.446606,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":120701,"millis":0.120701,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":1337320,"millis":1.33732,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:00.717 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/nl\\\/rws\\\/tn-ro\\\/wfs?request=GetCapabilities&service=wfs \n"},{"result":{"nanos":528808,"millis":0.528808,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":596309,"millis":0.596309,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:00.718 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":438606,"millis":0.438606,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":554808,"millis":0.554808,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:00.719 [print] #notpresent \n"},{"result":{"nanos":88401,"millis":0.088401,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":521007,"millis":0.521007,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:00.720 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":517508,"millis":0.517508,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":474807,"millis":0.474807,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:00.721 [print] Beheer PDOK \n"},{"result":{"nanos":903913,"millis":0.903913,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:00.722 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=eu-cb527d-f6db-4835-b0cd-deb245241254#MD_DataIdentification \n"},{"result":{"nanos":497707,"millis":0.497707,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":432407,"millis":0.432407,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"018a28a5-1019-4747-b031-f66ffc1c6ae7\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":308804,"millis":0.308804,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"018a28a5-1019-4747-b031-f66ffc1c6ae7\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":612.657889,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"018a28a5-1019-4747-b031-f66ffc1c6ae7","startTime":1629213720109,"refId":"[1.165:67]","endTime":1629213720723,"exampleData":{"datasetIdentifierCode":"018a28a5-1019-4747-b031-f66ffc1c6ae7"},"exampleIndex":164},{"sectionIndex":0,"stepResults":[{"result":{"nanos":17400,"millis":0.0174,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:00.217 karate.env system property was: null \n"},{"result":{"nanos":26601,"millis":0.026601,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":51901,"millis":0.051901,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":39300,"millis":0.0393,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":214304,"millis":0.214304,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":34200,"millis":0.0342,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":399906,"millis":0.399906,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":29701,"millis":0.029701,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":471407,"millis":0.471407,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":127402,"millis":0.127402,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":61301,"millis":0.061301,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":16500,"millis":0.0165,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20000,"millis":0.02,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":59201,"millis":0.059201,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '4fb15e0d-d88f-40f1-b407-3d3edcf7e184'"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":573080614,"millis":573.080614,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":7700,"millis":0.0077,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":5598282,"millis":5.598282,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '4fb15e0d-d88f-40f1-b407-3d3edcf7e184'"}},{"result":{"nanos":561608,"millis":0.561608,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":491507,"millis":0.491507,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":471106,"millis":0.471106,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":556708,"millis":0.556708,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":493307,"millis":0.493307,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":80001,"millis":0.080001,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":362706,"millis":0.362706,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":359105,"millis":0.359105,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":383806,"millis":0.383806,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":130502,"millis":0.130502,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":4016458,"millis":4.016458,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:00.805 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/nl\\\/rws\\\/tn-ro\\\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":419406,"millis":0.419406,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":383105,"millis":0.383105,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:00.806 [print] [\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":382706,"millis":0.382706,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":542808,"millis":0.542808,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:00.807 [print] #notpresent \n"},{"result":{"nanos":79301,"millis":0.079301,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":955014,"millis":0.955014,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:00.808 [print] [\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":409706,"millis":0.409706,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":527208,"millis":0.527208,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:00.809 [print] Beheer PDOK \n"},{"result":{"nanos":685910,"millis":0.68591,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:00.810 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=eu-cb527d-f6db-4835-b0cd-deb245241254#MD_DataIdentification \n"},{"result":{"nanos":413106,"millis":0.413106,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":394905,"millis":0.394905,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"4fb15e0d-d88f-40f1-b407-3d3edcf7e184\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":269803,"millis":0.269803,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"4fb15e0d-d88f-40f1-b407-3d3edcf7e184\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":593.644412,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"4fb15e0d-d88f-40f1-b407-3d3edcf7e184","startTime":1629213720216,"refId":"[1.166:67]","endTime":1629213720811,"exampleData":{"datasetIdentifierCode":"4fb15e0d-d88f-40f1-b407-3d3edcf7e184"},"exampleIndex":165},{"sectionIndex":0,"stepResults":[{"result":{"nanos":17701,"millis":0.017701,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:00.281 karate.env system property was: null \n"},{"result":{"nanos":29500,"millis":0.0295,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":49501,"millis":0.049501,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":41801,"millis":0.041801,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":240604,"millis":0.240604,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":37400,"millis":0.0374,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":365606,"millis":0.365606,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":28300,"millis":0.0283,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":438207,"millis":0.438207,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":128902,"millis":0.128902,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":59301,"millis":0.059301,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":16700,"millis":0.0167,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20800,"millis":0.0208,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5400,"millis":0.0054,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":66601,"millis":0.066601,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '67bcc21d-beda-449d-975c-00a4fa80f2b7'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":560664334,"millis":560.664334,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":3200,"millis":0.0032,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":746711,"millis":0.746711,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '67bcc21d-beda-449d-975c-00a4fa80f2b7'"}},{"result":{"nanos":459007,"millis":0.459007,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":380706,"millis":0.380706,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":408606,"millis":0.408606,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":572708,"millis":0.572708,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":481007,"millis":0.481007,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":77402,"millis":0.077402,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":355305,"millis":0.355305,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":413606,"millis":0.413606,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":390306,"millis":0.390306,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":122602,"millis":0.122602,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":671910,"millis":0.67191,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:00.849 [print] https:\\\/\\\/service.pdok.nl\\\/hwh\\\/hydrografie\\\/wms\\\/v1_0?request=GetCapabilities&service=WMS \n"},{"result":{"nanos":451407,"millis":0.451407,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":499907,"millis":0.499907,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:00.850 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":385606,"millis":0.385606,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":397806,"millis":0.397806,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:00.850 [print] #notpresent \n"},{"result":{"nanos":83801,"millis":0.083801,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":401706,"millis":0.401706,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:00.851 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":395006,"millis":0.395006,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":396206,"millis":0.396206,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:00.852 [print] Beheer PDOK \n"},{"result":{"nanos":822612,"millis":0.822612,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:00.853 [print] https:\/\/www.nationaalgeoregister.nl:443\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=07575774-57a1-4419-bab4-6c88fdeb02b2#MD_DataIdentification \n"},{"result":{"nanos":398106,"millis":0.398106,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":445807,"millis":0.445807,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"67bcc21d-beda-449d-975c-00a4fa80f2b7\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":293704,"millis":0.293704,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"67bcc21d-beda-449d-975c-00a4fa80f2b7\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":572.279608,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"67bcc21d-beda-449d-975c-00a4fa80f2b7","startTime":1629213720280,"refId":"[1.167:67]","endTime":1629213720854,"exampleData":{"datasetIdentifierCode":"67bcc21d-beda-449d-975c-00a4fa80f2b7"},"exampleIndex":166},{"sectionIndex":0,"stepResults":[{"result":{"nanos":18900,"millis":0.0189,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:00.342 karate.env system property was: null \n"},{"result":{"nanos":28301,"millis":0.028301,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":48201,"millis":0.048201,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":40500,"millis":0.0405,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":214403,"millis":0.214403,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":34000,"millis":0.034,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":363506,"millis":0.363506,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":29900,"millis":0.0299,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":482207,"millis":0.482207,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":129702,"millis":0.129702,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":59701,"millis":0.059701,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":17601,"millis":0.017601,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":21500,"millis":0.0215,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":56501,"millis":0.056501,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'ce4ac3b9-8291-498d-95de-79fe7b6f5259'"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":5400,"millis":0.0054,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":572493305,"millis":572.493305,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":3000,"millis":0.003,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":672210,"millis":0.67221,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'ce4ac3b9-8291-498d-95de-79fe7b6f5259'"}},{"result":{"nanos":557508,"millis":0.557508,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":478807,"millis":0.478807,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":444806,"millis":0.444806,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":658010,"millis":0.65801,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":940614,"millis":0.940614,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":88301,"millis":0.088301,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":644210,"millis":0.64421,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":452606,"millis":0.452606,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":457106,"millis":0.457106,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":123702,"millis":0.123702,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":686210,"millis":0.68621,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:00.923 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/inspire\\\/tn-ro\\\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":485007,"millis":0.485007,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":493607,"millis":0.493607,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:00.924 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":479007,"millis":0.479007,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":431206,"millis":0.431206,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:00.925 [print] #notpresent \n"},{"result":{"nanos":87101,"millis":0.087101,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":419907,"millis":0.419907,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:00.926 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":494707,"millis":0.494707,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":401306,"millis":0.401306,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:00.927 [print] Beheer PDOK \n"},{"result":{"nanos":804612,"millis":0.804612,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:00.928 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=8f45b8ef-0ce8-463a-9059-5efdcecb785c#MD_DataIdentification \n"},{"result":{"nanos":501007,"millis":0.501007,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":442107,"millis":0.442107,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"ce4ac3b9-8291-498d-95de-79fe7b6f5259\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":306904,"millis":0.306904,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"ce4ac3b9-8291-498d-95de-79fe7b6f5259\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":585.611196,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"ce4ac3b9-8291-498d-95de-79fe7b6f5259","startTime":1629213720341,"refId":"[1.168:67]","endTime":1629213720929,"exampleData":{"datasetIdentifierCode":"ce4ac3b9-8291-498d-95de-79fe7b6f5259"},"exampleIndex":167},{"sectionIndex":0,"stepResults":[{"result":{"nanos":42401,"millis":0.042401,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:00.725 karate.env system property was: null \n"},{"result":{"nanos":36800,"millis":0.0368,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":106101,"millis":0.106101,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":91502,"millis":0.091502,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":246803,"millis":0.246803,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":101902,"millis":0.101902,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":400706,"millis":0.400706,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":69301,"millis":0.069301,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":253904,"millis":0.253904,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":178003,"millis":0.178003,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":125201,"millis":0.125201,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":36900,"millis":0.0369,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":26701,"millis":0.026701,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":11100,"millis":0.0111,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":10000,"millis":0.01,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":9900,"millis":0.0099,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '3d759186-7cee-4218-aa44-165f3922fbbb'"}},{"result":{"nanos":9500,"millis":0.0095,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":9600,"millis":0.0096,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":566708322,"millis":566.708322,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2500,"millis":0.0025,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":604309,"millis":0.604309,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '3d759186-7cee-4218-aa44-165f3922fbbb'"}},{"result":{"nanos":537808,"millis":0.537808,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":439907,"millis":0.439907,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":414906,"millis":0.414906,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":469807,"millis":0.469807,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":467407,"millis":0.467407,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":25400,"millis":0.0254,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":333404,"millis":0.333404,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":330704,"millis":0.330704,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":357605,"millis":0.357605,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":76501,"millis":0.076501,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":584509,"millis":0.584509,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:01.299 [print] https:\/\/geodata.nationaalgeoregister.nl\/inspire\/tn-w\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":330005,"millis":0.330005,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":112301,"millis":0.112301,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:01.300 [print] OGC:WMS \n"},{"result":{"nanos":332004,"millis":0.332004,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":69501,"millis":0.069501,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:01.300 [print] #notpresent \n"},{"result":{"nanos":22500,"millis":0.0225,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":45701,"millis":0.045701,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:01.300 [print] OGC:WMS \n"},{"result":{"nanos":396406,"millis":0.396406,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":91601,"millis":0.091601,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:01.301 [print] Beheer PDOK \n"},{"result":{"nanos":38901,"millis":0.038901,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:01.301 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=5951efa2-1ff3-4763-a966-a2f5497679ee#MD_DataIdentification \n"},{"result":{"nanos":446106,"millis":0.446106,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":567809,"millis":0.567809,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"3d759186-7cee-4218-aa44-165f3922fbbb\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":321405,"millis":0.321405,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"3d759186-7cee-4218-aa44-165f3922fbbb\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":575.893654,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"3d759186-7cee-4218-aa44-165f3922fbbb","startTime":1629213720725,"refId":"[1.169:67]","endTime":1629213721302,"exampleData":{"datasetIdentifierCode":"3d759186-7cee-4218-aa44-165f3922fbbb"},"exampleIndex":168},{"sectionIndex":0,"stepResults":[{"result":{"nanos":41901,"millis":0.041901,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:00.815 karate.env system property was: null \n"},{"result":{"nanos":32500,"millis":0.0325,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":117101,"millis":0.117101,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":98502,"millis":0.098502,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":251604,"millis":0.251604,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":92101,"millis":0.092101,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":480307,"millis":0.480307,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":71601,"millis":0.071601,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":263804,"millis":0.263804,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":169903,"millis":0.169903,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":114802,"millis":0.114802,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":34300,"millis":0.0343,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":31501,"millis":0.031501,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":11300,"millis":0.0113,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":9500,"millis":0.0095,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":12801,"millis":0.012801,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '86cb5bcc-a199-43e2-9e03-2d0fe8bdfa3f'"}},{"result":{"nanos":9200,"millis":0.0092,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":9300,"millis":0.0093,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":549723475,"millis":549.723475,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":3400,"millis":0.0034,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":846612,"millis":0.846612,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '86cb5bcc-a199-43e2-9e03-2d0fe8bdfa3f'"}},{"result":{"nanos":822911,"millis":0.822911,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":722410,"millis":0.72241,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":663210,"millis":0.66321,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":660410,"millis":0.66041,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":634409,"millis":0.634409,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":23801,"millis":0.023801,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":443606,"millis":0.443606,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":431807,"millis":0.431807,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":494907,"millis":0.494907,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":137702,"millis":0.137702,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":205403,"millis":0.205403,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:01.373 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/inspire\\\/tn-ra\\\/wfs?request=GetCapabilities&service=WFS \n"},{"result":{"nanos":601008,"millis":0.601008,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":116402,"millis":0.116402,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:01.374 [print] #notpresent \n"},{"result":{"nanos":487407,"millis":0.487407,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":129302,"millis":0.129302,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:01.374 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":31600,"millis":0.0316,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":58001,"millis":0.058001,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:01.375 [print] #notpresent \n"},{"result":{"nanos":629409,"millis":0.629409,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":94402,"millis":0.094402,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:01.375 [print] Beheer PDOK \n"},{"result":{"nanos":40900,"millis":0.0409,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:01.375 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=3a7dd0a6-d130-4c4c-b0ba-24365cf036e2#MD_DataIdentification \n"},{"result":{"nanos":626209,"millis":0.626209,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":593508,"millis":0.593508,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"86cb5bcc-a199-43e2-9e03-2d0fe8bdfa3f\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":319104,"millis":0.319104,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"86cb5bcc-a199-43e2-9e03-2d0fe8bdfa3f\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":561.393343,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"86cb5bcc-a199-43e2-9e03-2d0fe8bdfa3f","startTime":1629213720814,"refId":"[1.170:67]","endTime":1629213721377,"exampleData":{"datasetIdentifierCode":"86cb5bcc-a199-43e2-9e03-2d0fe8bdfa3f"},"exampleIndex":169},{"sectionIndex":0,"stepResults":[{"result":{"nanos":77201,"millis":0.077201,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:00.857 karate.env system property was: null \n"},{"result":{"nanos":41401,"millis":0.041401,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":164802,"millis":0.164802,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":107102,"millis":0.107102,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":282304,"millis":0.282304,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":95502,"millis":0.095502,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":374005,"millis":0.374005,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":73901,"millis":0.073901,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":303904,"millis":0.303904,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":306005,"millis":0.306005,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":145602,"millis":0.145602,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":49301,"millis":0.049301,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":142602,"millis":0.142602,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":37201,"millis":0.037201,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":14500,"millis":0.0145,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":12401,"millis":0.012401,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '97a7d966-7261-49d4-bc08-c4900981f092'"}},{"result":{"nanos":10200,"millis":0.0102,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":10400,"millis":0.0104,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":566238615,"millis":566.238615,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":636409,"millis":0.636409,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '97a7d966-7261-49d4-bc08-c4900981f092'"}},{"result":{"nanos":604209,"millis":0.604209,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":601409,"millis":0.601409,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":502507,"millis":0.502507,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":564109,"millis":0.564109,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":561908,"millis":0.561908,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":35801,"millis":0.035801,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":395806,"millis":0.395806,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":391105,"millis":0.391105,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":398905,"millis":0.398905,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":92201,"millis":0.092201,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":130802,"millis":0.130802,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:01.431 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/inspire\\\/tn-a\\\/wfs?request=GetCapabilities&service=wfs \n"},{"result":{"nanos":430606,"millis":0.430606,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":294404,"millis":0.294404,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:01.432 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":382905,"millis":0.382905,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":236704,"millis":0.236704,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:01.433 [print] #notpresent \n"},{"result":{"nanos":27100,"millis":0.0271,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":189903,"millis":0.189903,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:01.433 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":516608,"millis":0.516608,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":64501,"millis":0.064501,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:01.434 [print] Beheer PDOK \n"},{"result":{"nanos":654710,"millis":0.65471,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:01.434 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=31de946d-85d4-4c93-bb97-e25f4ef1401a#MD_DataIdentification \n"},{"result":{"nanos":480807,"millis":0.480807,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":594409,"millis":0.594409,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"97a7d966-7261-49d4-bc08-c4900981f092\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":354805,"millis":0.354805,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"97a7d966-7261-49d4-bc08-c4900981f092\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":577.633582,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"97a7d966-7261-49d4-bc08-c4900981f092","startTime":1629213720856,"refId":"[1.171:67]","endTime":1629213721436,"exampleData":{"datasetIdentifierCode":"97a7d966-7261-49d4-bc08-c4900981f092"},"exampleIndex":170},{"sectionIndex":0,"stepResults":[{"result":{"nanos":47801,"millis":0.047801,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:00.932 karate.env system property was: null \n"},{"result":{"nanos":36201,"millis":0.036201,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":118902,"millis":0.118902,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":166402,"millis":0.166402,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":281704,"millis":0.281704,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":95301,"millis":0.095301,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":368906,"millis":0.368906,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":74701,"millis":0.074701,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":545008,"millis":0.545008,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":191003,"millis":0.191003,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":153402,"millis":0.153402,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":40401,"millis":0.040401,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":30400,"millis":0.0304,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":11701,"millis":0.011701,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":11400,"millis":0.0114,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":172802,"millis":0.172802,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '65f9628b-0a58-4348-8fff-c2d02788acdb'"}},{"result":{"nanos":26700,"millis":0.0267,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":12300,"millis":0.0123,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":550608388,"millis":550.608388,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2500,"millis":0.0025,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":579808,"millis":0.579808,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '65f9628b-0a58-4348-8fff-c2d02788acdb'"}},{"result":{"nanos":568808,"millis":0.568808,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":515807,"millis":0.515807,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":498307,"millis":0.498307,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":557808,"millis":0.557808,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":530808,"millis":0.530808,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":23101,"millis":0.023101,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":382405,"millis":0.382405,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":377206,"millis":0.377206,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":419006,"millis":0.419006,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":65901,"millis":0.065901,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":115802,"millis":0.115802,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:01.490 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/inspire\\\/tn-ra\\\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":1186717,"millis":1.186717,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":82701,"millis":0.082701,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:01.491 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":433307,"millis":0.433307,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":66101,"millis":0.066101,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:01.492 [print] #notpresent \n"},{"result":{"nanos":25600,"millis":0.0256,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":139202,"millis":0.139202,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:01.492 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":960413,"millis":0.960413,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":91001,"millis":0.091001,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:01.493 [print] Beheer PDOK \n"},{"result":{"nanos":57201,"millis":0.057201,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:01.493 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=3a7dd0a6-d130-4c4c-b0ba-24365cf036e2#MD_DataIdentification \n"},{"result":{"nanos":1115816,"millis":1.115816,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":547008,"millis":0.547008,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"65f9628b-0a58-4348-8fff-c2d02788acdb\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":315904,"millis":0.315904,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"65f9628b-0a58-4348-8fff-c2d02788acdb\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":562.651661,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"65f9628b-0a58-4348-8fff-c2d02788acdb","startTime":1629213720931,"refId":"[1.172:67]","endTime":1629213721495,"exampleData":{"datasetIdentifierCode":"65f9628b-0a58-4348-8fff-c2d02788acdb"},"exampleIndex":171},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14700,"millis":0.0147,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:01.304 karate.env system property was: null \n"},{"result":{"nanos":38801,"millis":0.038801,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":137802,"millis":0.137802,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":38901,"millis":0.038901,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":214403,"millis":0.214403,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":34100,"millis":0.0341,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":363505,"millis":0.363505,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":24500,"millis":0.0245,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":43601,"millis":0.043601,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":121602,"millis":0.121602,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":55101,"millis":0.055101,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13800,"millis":0.0138,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19601,"millis":0.019601,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":48001,"millis":0.048001,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'ec73f245-66ce-4144-ac27-5966c80a4b3a'"}},{"result":{"nanos":3700,"millis":0.0037,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3600,"millis":0.0036,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":531981218,"millis":531.981218,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2600,"millis":0.0026,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":625009,"millis":0.625009,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'ec73f245-66ce-4144-ac27-5966c80a4b3a'"}},{"result":{"nanos":815612,"millis":0.815612,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":688210,"millis":0.68821,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":522308,"millis":0.522308,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":611009,"millis":0.611009,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":538308,"millis":0.538308,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":24001,"millis":0.024001,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":372705,"millis":0.372705,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":368705,"millis":0.368705,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":386906,"millis":0.386906,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":69201,"millis":0.069201,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":122702,"millis":0.122702,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:01.843 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/inspire\\\/tn-w\\\/wfs?request=GetCapabilities&service=wfs \n"},{"result":{"nanos":843212,"millis":0.843212,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":113202,"millis":0.113202,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:01.844 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":639710,"millis":0.63971,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":63201,"millis":0.063201,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:01.845 [print] #notpresent \n"},{"result":{"nanos":149902,"millis":0.149902,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":76501,"millis":0.076501,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:01.845 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":876012,"millis":0.876012,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":70301,"millis":0.070301,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:01.846 [print] Beheer PDOK \n"},{"result":{"nanos":205702,"millis":0.205702,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:01.846 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=5951efa2-1ff3-4763-a966-a2f5497679ee#MD_DataIdentification \n"},{"result":{"nanos":709010,"millis":0.70901,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":549908,"millis":0.549908,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"ec73f245-66ce-4144-ac27-5966c80a4b3a\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":352205,"millis":0.352205,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"ec73f245-66ce-4144-ac27-5966c80a4b3a\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":542.961478,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"ec73f245-66ce-4144-ac27-5966c80a4b3a","startTime":1629213721304,"refId":"[1.173:67]","endTime":1629213721848,"exampleData":{"datasetIdentifierCode":"ec73f245-66ce-4144-ac27-5966c80a4b3a"},"exampleIndex":172},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14900,"millis":0.0149,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:01.379 karate.env system property was: null \n"},{"result":{"nanos":24001,"millis":0.024001,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":47000,"millis":0.047,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":40000,"millis":0.04,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":226704,"millis":0.226704,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":33900,"millis":0.0339,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":368706,"millis":0.368706,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":26200,"millis":0.0262,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":47301,"millis":0.047301,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":114502,"millis":0.114502,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":50401,"millis":0.050401,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13700,"millis":0.0137,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20700,"millis":0.0207,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4201,"millis":0.004201,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":49400,"millis":0.0494,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'd981070b-888c-42d5-85ff-1e383f3d7fce'"}},{"result":{"nanos":5301,"millis":0.005301,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3700,"millis":0.0037,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":562306157,"millis":562.306157,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2100,"millis":0.0021,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":539908,"millis":0.539908,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'd981070b-888c-42d5-85ff-1e383f3d7fce'"}},{"result":{"nanos":463307,"millis":0.463307,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":436606,"millis":0.436606,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":423307,"millis":0.423307,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":489907,"millis":0.489907,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":527508,"millis":0.527508,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":25400,"millis":0.0254,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":361106,"millis":0.361106,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":322805,"millis":0.322805,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":322104,"millis":0.322104,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":74501,"millis":0.074501,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":911513,"millis":0.911513,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:01.948 [print] https:\/\/geodata.nationaalgeoregister.nl\/windkaart\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":371806,"millis":0.371806,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":211403,"millis":0.211403,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:01.948 [print] OGC:WMS \n"},{"result":{"nanos":353705,"millis":0.353705,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":60901,"millis":0.060901,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:01.949 [print] #notpresent \n"},{"result":{"nanos":153403,"millis":0.153403,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":72701,"millis":0.072701,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:01.949 [print] OGC:WMS \n"},{"result":{"nanos":578508,"millis":0.578508,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":67601,"millis":0.067601,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:01.950 [print] Beheer PDOK \n"},{"result":{"nanos":739210,"millis":0.73921,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:01.950 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=d845cef6-0e23-4212-a951-b69763e39ef0#MD_DataIdentification \n"},{"result":{"nanos":444207,"millis":0.444207,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":731111,"millis":0.731111,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"d981070b-888c-42d5-85ff-1e383f3d7fce\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":325705,"millis":0.325705,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"d981070b-888c-42d5-85ff-1e383f3d7fce\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":572.411907,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"d981070b-888c-42d5-85ff-1e383f3d7fce","startTime":1629213721379,"refId":"[1.174:67]","endTime":1629213721952,"exampleData":{"datasetIdentifierCode":"d981070b-888c-42d5-85ff-1e383f3d7fce"},"exampleIndex":173},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14201,"millis":0.014201,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:01.439 karate.env system property was: null \n"},{"result":{"nanos":28900,"millis":0.0289,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":47201,"millis":0.047201,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":37901,"millis":0.037901,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":220003,"millis":0.220003,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":31601,"millis":0.031601,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":372505,"millis":0.372505,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":25701,"millis":0.025701,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":44900,"millis":0.0449,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":330605,"millis":0.330605,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":68201,"millis":0.068201,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":14901,"millis":0.014901,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19900,"millis":0.0199,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":54101,"millis":0.054101,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '1009c2a4-4dba-49a5-b643-914ba8b80b52'"}},{"result":{"nanos":5800,"millis":0.0058,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":561940352,"millis":561.940352,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":3500,"millis":0.0035,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":419906,"millis":0.419906,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '1009c2a4-4dba-49a5-b643-914ba8b80b52'"}},{"result":{"nanos":443406,"millis":0.443406,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":350105,"millis":0.350105,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":305204,"millis":0.305204,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":347005,"millis":0.347005,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":365106,"millis":0.365106,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":21100,"millis":0.0211,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":299305,"millis":0.299305,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":275604,"millis":0.275604,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":268104,"millis":0.268104,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":51401,"millis":0.051401,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":86301,"millis":0.086301,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:02.006 [print] https:\/\/haleconnect.com\/ows\/services\/org.874.cb9ca55e-f4e7-4bd8-a02e-75d528e22118_wfs?SERVICE=WFS&Request=GetCapabilities \n"},{"result":{"nanos":294305,"millis":0.294305,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":71901,"millis":0.071901,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:02.007 [print] #notpresent \n"},{"result":{"nanos":459907,"millis":0.459907,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":75801,"millis":0.075801,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:02.007 [print] #notpresent \n"},{"result":{"nanos":24700,"millis":0.0247,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":36401,"millis":0.036401,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:02.007 [print] #notpresent \n"},{"result":{"nanos":337005,"millis":0.337005,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":78801,"millis":0.078801,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:02.008 [print] KNMI \n"},{"result":{"nanos":38301,"millis":0.038301,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:02.008 [print] https:\/\/haleconnect.com\/services\/bsp\/org.874.cb9ca55e-f4e7-4bd8-a02e-75d528e22118\/md\/dataset\/dataset1#xpointer%28%2F%2Fgmd%3AidentificationInfo%5B1%5D%2Fgmd%3AMD_DataIdentification%29 \n"},{"result":{"nanos":333905,"millis":0.333905,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":400606,"millis":0.400606,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"1009c2a4-4dba-49a5-b643-914ba8b80b52\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":273004,"millis":0.273004,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"1009c2a4-4dba-49a5-b643-914ba8b80b52\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":568.930857,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"1009c2a4-4dba-49a5-b643-914ba8b80b52","startTime":1629213721439,"refId":"[1.175:67]","endTime":1629213722009,"exampleData":{"datasetIdentifierCode":"1009c2a4-4dba-49a5-b643-914ba8b80b52"},"exampleIndex":174},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14701,"millis":0.014701,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:01.497 karate.env system property was: null \n"},{"result":{"nanos":35600,"millis":0.0356,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":51801,"millis":0.051801,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":39801,"millis":0.039801,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":217903,"millis":0.217903,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":30201,"millis":0.030201,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":367105,"millis":0.367105,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":26701,"millis":0.026701,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":47400,"millis":0.0474,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":108902,"millis":0.108902,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":362105,"millis":0.362105,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":15500,"millis":0.0155,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":22700,"millis":0.0227,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3500,"millis":0.0035,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":41100,"millis":0.0411,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '76854ff3-a853-4405-b9fd-acef66460376'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":67801,"millis":0.067801,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":646109973,"millis":646.109973,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":3200,"millis":0.0032,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":3431650,"millis":3.43165,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '76854ff3-a853-4405-b9fd-acef66460376'"}},{"result":{"nanos":4987572,"millis":4.987572,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":4845171,"millis":4.845171,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":4776969,"millis":4.776969,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":4963572,"millis":4.963572,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":4898872,"millis":4.898872,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":25500,"millis":0.0255,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":2960643,"millis":2.960643,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":2966743,"millis":2.966743,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":3302447,"millis":3.302447,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":580308,"millis":0.580308,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":636109,"millis":0.636109,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:02.184 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/vogelrichtlijnverspreidingsgebiedsoorten\\\/wfs?request=GetCapabilities&service=WFS \n"},{"result":{"nanos":7149303,"millis":7.149303,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":427906,"millis":0.427906,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:02.192 [print] #notpresent \n"},{"result":{"nanos":5682082,"millis":5.682082,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":174102,"millis":0.174102,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:02.197 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":29001,"millis":0.029001,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":45601,"millis":0.045601,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:02.198 [print] #notpresent \n"},{"result":{"nanos":5504279,"millis":5.504279,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":96501,"millis":0.096501,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:02.203 [print] Beheer PDOK \n"},{"result":{"nanos":35501,"millis":0.035501,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:02.203 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=cbeaebc3-815a-48af-a978-0e16892865fc#MD_DataIdentification \n"},{"result":{"nanos":6702997,"millis":6.702997,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":567808,"millis":0.567808,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"76854ff3-a853-4405-b9fd-acef66460376\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":330404,"millis":0.330404,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"76854ff3-a853-4405-b9fd-acef66460376\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":712.695835,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"76854ff3-a853-4405-b9fd-acef66460376","startTime":1629213721497,"refId":"[1.176:67]","endTime":1629213722211,"exampleData":{"datasetIdentifierCode":"76854ff3-a853-4405-b9fd-acef66460376"},"exampleIndex":175},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15201,"millis":0.015201,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:01.850 karate.env system property was: null \n"},{"result":{"nanos":27500,"millis":0.0275,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":48601,"millis":0.048601,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":37501,"millis":0.037501,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":251503,"millis":0.251503,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":33100,"millis":0.0331,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":366705,"millis":0.366705,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":25700,"millis":0.0257,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":47701,"millis":0.047701,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":275404,"millis":0.275404,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":80901,"millis":0.080901,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":16301,"millis":0.016301,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":41800,"millis":0.0418,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":9101,"millis":0.009101,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":467507,"millis":0.467507,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'bb85e473-c04a-42a6-9fdc-f0bb0239327e'"}},{"result":{"nanos":6200,"millis":0.0062,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":563022268,"millis":563.022268,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2900,"millis":0.0029,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":530808,"millis":0.530808,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'bb85e473-c04a-42a6-9fdc-f0bb0239327e'"}},{"result":{"nanos":396006,"millis":0.396006,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":342205,"millis":0.342205,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":348205,"millis":0.348205,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":435007,"millis":0.435007,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":361605,"millis":0.361605,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":32301,"millis":0.032301,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":280004,"millis":0.280004,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":273604,"millis":0.273604,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":268004,"millis":0.268004,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":67901,"millis":0.067901,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":911314,"millis":0.911314,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:02.420 [print] https:\/\/service.pdok.nl\/kadaster\/gebouwen\/atom\/v1_0\/index.xml \n"},{"result":{"nanos":328205,"millis":0.328205,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":77501,"millis":0.077501,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:02.420 [print] INSPIRE Atom \n"},{"result":{"nanos":297504,"millis":0.297504,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":107801,"millis":0.107801,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:02.421 [print] #notpresent \n"},{"result":{"nanos":30101,"millis":0.030101,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":48301,"millis":0.048301,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:02.421 [print] INSPIRE Atom \n"},{"result":{"nanos":364105,"millis":0.364105,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":86401,"millis":0.086401,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:02.421 [print] Beheer PDOK \n"},{"result":{"nanos":58701,"millis":0.058701,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:02.421 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=b4ae622c-6201-49d8-bd2e-f7fce9206a1e#MD_DataIdentification \n"},{"result":{"nanos":350705,"millis":0.350705,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":570608,"millis":0.570608,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"bb85e473-c04a-42a6-9fdc-f0bb0239327e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":330305,"millis":0.330305,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"bb85e473-c04a-42a6-9fdc-f0bb0239327e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":571.681296,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"bb85e473-c04a-42a6-9fdc-f0bb0239327e","startTime":1629213721850,"refId":"[1.177:67]","endTime":1629213722423,"exampleData":{"datasetIdentifierCode":"bb85e473-c04a-42a6-9fdc-f0bb0239327e"},"exampleIndex":176},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15100,"millis":0.0151,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:01.954 karate.env system property was: null \n"},{"result":{"nanos":28700,"millis":0.0287,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":46101,"millis":0.046101,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":37501,"millis":0.037501,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":216603,"millis":0.216603,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":32001,"millis":0.032001,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":360205,"millis":0.360205,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":27800,"millis":0.0278,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":45400,"millis":0.0454,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":107702,"millis":0.107702,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":53901,"millis":0.053901,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13000,"millis":0.013,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":21000,"millis":0.021,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":6000,"millis":0.006,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":42101,"millis":0.042101,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '91b1f8ca-63a0-4ce6-b7e1-456ee6945638'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":571694894,"millis":571.694894,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2700,"millis":0.0027,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":501808,"millis":0.501808,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '91b1f8ca-63a0-4ce6-b7e1-456ee6945638'"}},{"result":{"nanos":396006,"millis":0.396006,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":352905,"millis":0.352905,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":327705,"millis":0.327705,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":394006,"millis":0.394006,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":387106,"millis":0.387106,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":32100,"millis":0.0321,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":279605,"millis":0.279605,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":275004,"millis":0.275004,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":274304,"millis":0.274304,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":387506,"millis":0.387506,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":626909,"millis":0.626909,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:02.531 [print] https:\/\/service.pdok.nl\/rvo\/schelpdierpercelen\/atom\/v1_0\/index.xml \n"},{"result":{"nanos":322305,"millis":0.322305,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":410206,"millis":0.410206,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:02.532 [print] INSPIRE Atom \n"},{"result":{"nanos":317905,"millis":0.317905,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":402106,"millis":0.402106,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:02.533 [print] #notpresent \n"},{"result":{"nanos":31500,"millis":0.0315,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":368906,"millis":0.368906,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:02.533 [print] INSPIRE Atom \n"},{"result":{"nanos":315705,"millis":0.315705,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":298704,"millis":0.298704,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:02.534 [print] Beheer PDOK \n"},{"result":{"nanos":655510,"millis":0.65551,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:02.535 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=c4b4e95a-12d7-4c74-933c-cb267cfe0bcf#MD_DataIdentification \n"},{"result":{"nanos":319404,"millis":0.319404,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":550208,"millis":0.550208,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"91b1f8ca-63a0-4ce6-b7e1-456ee6945638\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":299404,"millis":0.299404,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"91b1f8ca-63a0-4ce6-b7e1-456ee6945638\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":581.290336,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"91b1f8ca-63a0-4ce6-b7e1-456ee6945638","startTime":1629213721954,"refId":"[1.178:67]","endTime":1629213722536,"exampleData":{"datasetIdentifierCode":"91b1f8ca-63a0-4ce6-b7e1-456ee6945638"},"exampleIndex":177},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13401,"millis":0.013401,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:02.011 karate.env system property was: null \n"},{"result":{"nanos":24500,"millis":0.0245,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":40301,"millis":0.040301,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":33100,"millis":0.0331,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":185503,"millis":0.185503,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":31601,"millis":0.031601,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":336705,"millis":0.336705,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":24200,"millis":0.0242,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":41501,"millis":0.041501,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":92801,"millis":0.092801,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":49301,"millis":0.049301,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":11200,"millis":0.0112,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17800,"millis":0.0178,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3700,"millis":0.0037,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":39201,"millis":0.039201,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'e91719b1-a139-42cf-8a1a-db78cd7477f8'"}},{"result":{"nanos":5300,"millis":0.0053,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3700,"millis":0.0037,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":544068293,"millis":544.068293,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":427406,"millis":0.427406,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'e91719b1-a139-42cf-8a1a-db78cd7477f8'"}},{"result":{"nanos":404806,"millis":0.404806,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":378306,"millis":0.378306,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":361005,"millis":0.361005,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":375506,"millis":0.375506,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":379305,"millis":0.379305,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":20000,"millis":0.02,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":272904,"millis":0.272904,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":272404,"millis":0.272404,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":285704,"millis":0.285704,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":337905,"millis":0.337905,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":417206,"millis":0.417206,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:02.560 [print] https:\/\/geodata.nationaalgeoregister.nl\/rws\/kaderrichtlijnwater2009\/atom\/v1_0\/index.xml \n"},{"result":{"nanos":300704,"millis":0.300704,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":300905,"millis":0.300905,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:02.561 [print] #notpresent \n"},{"result":{"nanos":299304,"millis":0.299304,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":310605,"millis":0.310605,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:02.561 [print] INSPIRE Atom \n"},{"result":{"nanos":26500,"millis":0.0265,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":270604,"millis":0.270604,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:02.562 [print] #notpresent \n"},{"result":{"nanos":403805,"millis":0.403805,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":282404,"millis":0.282404,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:02.562 [print] Beheer PDOK \n"},{"result":{"nanos":1095716,"millis":1.095716,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:02.563 [print] [\"https:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=krw2006-68b5-4ff3-94a4-9c24109ffd5e#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=krw2006-c57b-44a2-83a4-e51223d5f15g#MD_DataIdentification\"] \n"},{"result":{"nanos":389305,"millis":0.389305,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":462806,"millis":0.462806,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"e91719b1-a139-42cf-8a1a-db78cd7477f8\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":282605,"millis":0.282605,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"e91719b1-a139-42cf-8a1a-db78cd7477f8\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":553.387928,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"e91719b1-a139-42cf-8a1a-db78cd7477f8","startTime":1629213722010,"refId":"[1.179:67]","endTime":1629213722565,"exampleData":{"datasetIdentifierCode":"e91719b1-a139-42cf-8a1a-db78cd7477f8"},"exampleIndex":178},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15200,"millis":0.0152,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:02.213 karate.env system property was: null \n"},{"result":{"nanos":30501,"millis":0.030501,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":49800,"millis":0.0498,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":38900,"millis":0.0389,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":211704,"millis":0.211704,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":30000,"millis":0.03,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":376206,"millis":0.376206,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":28100,"millis":0.0281,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":65001,"millis":0.065001,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":108902,"millis":0.108902,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":50501,"millis":0.050501,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12000,"millis":0.012,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18000,"millis":0.018,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4101,"millis":0.004101,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3700,"millis":0.0037,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":45700,"millis":0.0457,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'a12ae6ca-b755-4707-884f-95c0d66f431a'"}},{"result":{"nanos":4601,"millis":0.004601,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":554190640,"millis":554.19064,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2500,"millis":0.0025,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":488207,"millis":0.488207,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'a12ae6ca-b755-4707-884f-95c0d66f431a'"}},{"result":{"nanos":411306,"millis":0.411306,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":325704,"millis":0.325704,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":315504,"millis":0.315504,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":381106,"millis":0.381106,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":340905,"millis":0.340905,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":19700,"millis":0.0197,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":248403,"millis":0.248403,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":242304,"millis":0.242304,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":275504,"millis":0.275504,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":65901,"millis":0.065901,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":100202,"millis":0.100202,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:02.772 [print] https:\/\/inspire.caris.nl\/gs5\/MarineRegion\/wms?service=WMS&version=1.3.0&request=GetCapabilities \n"},{"result":{"nanos":833912,"millis":0.833912,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":302604,"millis":0.302604,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:02.773 [print] OGC:WMS \n"},{"result":{"nanos":298304,"millis":0.298304,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":59501,"millis":0.059501,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:02.773 [print] #notpresent \n"},{"result":{"nanos":22000,"millis":0.022,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":49601,"millis":0.049601,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:02.773 [print] OGC:WMS \n"},{"result":{"nanos":461007,"millis":0.461007,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":57401,"millis":0.057401,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:02.774 [print] Ministerie van Defensie, Koninklijke Marine, Dienst der Hydrografie \n"},{"result":{"nanos":44101,"millis":0.044101,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:02.774 [print] https:\/\/www.nationaalgeoregister.nl:443\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=f44dac86-2228-412f-8355-e56446ca9933#MD_DataIdentification \n"},{"result":{"nanos":313704,"millis":0.313704,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":711610,"millis":0.71161,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"a12ae6ca-b755-4707-884f-95c0d66f431a\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":305204,"millis":0.305204,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"a12ae6ca-b755-4707-884f-95c0d66f431a\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":561.964252,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"a12ae6ca-b755-4707-884f-95c0d66f431a","startTime":1629213722212,"refId":"[1.180:67]","endTime":1629213722775,"exampleData":{"datasetIdentifierCode":"a12ae6ca-b755-4707-884f-95c0d66f431a"},"exampleIndex":179},{"sectionIndex":0,"stepResults":[{"result":{"nanos":12700,"millis":0.0127,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:02.424 karate.env system property was: null \n"},{"result":{"nanos":25400,"millis":0.0254,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":338005,"millis":0.338005,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":46401,"millis":0.046401,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":241004,"millis":0.241004,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":34800,"millis":0.0348,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":359106,"millis":0.359106,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":23800,"millis":0.0238,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":45301,"millis":0.045301,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":102301,"millis":0.102301,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":129401,"millis":0.129401,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12700,"millis":0.0127,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20100,"millis":0.0201,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3700,"millis":0.0037,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":42601,"millis":0.042601,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '7a748a59-36f4-475b-9647-402b5ce89a1c'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3500,"millis":0.0035,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":552798020,"millis":552.79802,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":21400,"millis":0.0214,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":494407,"millis":0.494407,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '7a748a59-36f4-475b-9647-402b5ce89a1c'"}},{"result":{"nanos":367506,"millis":0.367506,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":281204,"millis":0.281204,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":346605,"millis":0.346605,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":406706,"millis":0.406706,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":333204,"millis":0.333204,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":21800,"millis":0.0218,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":249104,"millis":0.249104,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":255003,"millis":0.255003,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":268404,"millis":0.268404,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":67001,"millis":0.067001,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":134101,"millis":0.134101,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:02.982 [print] https:\/\/service.pdok.nl\/kadaster\/lc\/atom\/v1_0\/index.xml \n"},{"result":{"nanos":934113,"millis":0.934113,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":81402,"millis":0.081402,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:02.983 [print] INSPIRE Atom \n"},{"result":{"nanos":621109,"millis":0.621109,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":105601,"millis":0.105601,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:02.984 [print] #notpresent \n"},{"result":{"nanos":27000,"millis":0.027,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":36201,"millis":0.036201,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:02.984 [print] INSPIRE Atom \n"},{"result":{"nanos":981914,"millis":0.981914,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":94301,"millis":0.094301,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:02.985 [print] Beheer PDOK \n"},{"result":{"nanos":42700,"millis":0.0427,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:02.985 [print] https:\/\/ngr.acceptatie.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=1689d1b7-ef22-417a-becd-d8d9a8a90a10#MD_DataIdentification \n"},{"result":{"nanos":999815,"millis":0.999815,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":544008,"millis":0.544008,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"7a748a59-36f4-475b-9647-402b5ce89a1c\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":313105,"millis":0.313105,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"7a748a59-36f4-475b-9647-402b5ce89a1c\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":562.275554,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"7a748a59-36f4-475b-9647-402b5ce89a1c","startTime":1629213722424,"refId":"[1.181:67]","endTime":1629213722987,"exampleData":{"datasetIdentifierCode":"7a748a59-36f4-475b-9647-402b5ce89a1c"},"exampleIndex":180},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16300,"millis":0.0163,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:02.538 karate.env system property was: null \n"},{"result":{"nanos":27300,"millis":0.0273,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":43900,"millis":0.0439,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":36701,"millis":0.036701,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":210903,"millis":0.210903,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":31101,"millis":0.031101,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":419606,"millis":0.419606,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":28300,"millis":0.0283,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":228804,"millis":0.228804,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":105701,"millis":0.105701,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":51500,"millis":0.0515,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":14801,"millis":0.014801,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17300,"millis":0.0173,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":47001,"millis":0.047001,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '555f668f-63b4-47ef-a666-f12d71c2cc4a'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":541237352,"millis":541.237352,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":6900,"millis":0.0069,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":563308,"millis":0.563308,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '555f668f-63b4-47ef-a666-f12d71c2cc4a'"}},{"result":{"nanos":440806,"millis":0.440806,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":380506,"millis":0.380506,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":353305,"millis":0.353305,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":411606,"millis":0.411606,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":371306,"millis":0.371306,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":25100,"millis":0.0251,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":286105,"millis":0.286105,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":272404,"millis":0.272404,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":278504,"millis":0.278504,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":70601,"millis":0.070601,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":96502,"millis":0.096502,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:03.085 [print] https:\/\/service.pdok.nl\/cbs\/wb2018\/atom\/v1_0\/index.xml \n"},{"result":{"nanos":262004,"millis":0.262004,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":646809,"millis":0.646809,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:03.086 [print] INSPIRE Atom \n"},{"result":{"nanos":282205,"millis":0.282205,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":62301,"millis":0.062301,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:03.086 [print] #notpresent \n"},{"result":{"nanos":21300,"millis":0.0213,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":60501,"millis":0.060501,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:03.086 [print] INSPIRE Atom \n"},{"result":{"nanos":672910,"millis":0.67291,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":64801,"millis":0.064801,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:03.087 [print] Beheer PDOK \n"},{"result":{"nanos":57601,"millis":0.057601,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:03.087 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=ffefc3dc-dc8f-4589-ae22-a60bebcdf5cb#MD_DataIdentification \n"},{"result":{"nanos":309004,"millis":0.309004,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":1106416,"millis":1.106416,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"555f668f-63b4-47ef-a666-f12d71c2cc4a\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":301804,"millis":0.301804,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"555f668f-63b4-47ef-a666-f12d71c2cc4a\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":549.938379,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"555f668f-63b4-47ef-a666-f12d71c2cc4a","startTime":1629213722538,"refId":"[1.182:67]","endTime":1629213723089,"exampleData":{"datasetIdentifierCode":"555f668f-63b4-47ef-a666-f12d71c2cc4a"},"exampleIndex":181},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13701,"millis":0.013701,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:02.567 karate.env system property was: null \n"},{"result":{"nanos":24000,"millis":0.024,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":44001,"millis":0.044001,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":38601,"millis":0.038601,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":190202,"millis":0.190202,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":31000,"millis":0.031,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":324005,"millis":0.324005,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":24800,"millis":0.0248,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":302205,"millis":0.302205,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":107301,"millis":0.107301,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":49400,"millis":0.0494,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13801,"millis":0.013801,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19500,"millis":0.0195,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":42601,"millis":0.042601,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '2931d583-9633-49d3-ad38-aabea82f6751'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3400,"millis":0.0034,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":553594432,"millis":553.594432,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2100,"millis":0.0021,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":380006,"millis":0.380006,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '2931d583-9633-49d3-ad38-aabea82f6751'"}},{"result":{"nanos":382905,"millis":0.382905,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":357305,"millis":0.357305,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":329505,"millis":0.329505,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":383305,"millis":0.383305,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":355205,"millis":0.355205,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":22700,"millis":0.0227,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":277204,"millis":0.277204,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":274704,"millis":0.274704,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":267904,"millis":0.267904,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":590608,"millis":0.590608,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":620009,"millis":0.620009,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:03.126 [print] https:\/\/service.pdok.nl\/bzk\/bro-hydrogeology\/atom\/v1_0\/index.xml \n"},{"result":{"nanos":284504,"millis":0.284504,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":479007,"millis":0.479007,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:03.127 [print] INSPIRE Atom \n"},{"result":{"nanos":268504,"millis":0.268504,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":448707,"millis":0.448707,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:03.128 [print] #notpresent \n"},{"result":{"nanos":28500,"millis":0.0285,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":423007,"millis":0.423007,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:03.128 [print] INSPIRE Atom \n"},{"result":{"nanos":317604,"millis":0.317604,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":420707,"millis":0.420707,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:03.129 [print] Beheer PDOK \n"},{"result":{"nanos":999914,"millis":0.999914,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:03.130 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=dff9c760-1380-11eb-adc1-0242ac120002#MD_DataIdentification \n"},{"result":{"nanos":310005,"millis":0.310005,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":444006,"millis":0.444006,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"2931d583-9633-49d3-ad38-aabea82f6751\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":288304,"millis":0.288304,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"2931d583-9633-49d3-ad38-aabea82f6751\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":563.791279,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"2931d583-9633-49d3-ad38-aabea82f6751","startTime":1629213722566,"refId":"[1.183:67]","endTime":1629213723131,"exampleData":{"datasetIdentifierCode":"2931d583-9633-49d3-ad38-aabea82f6751"},"exampleIndex":182},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14301,"millis":0.014301,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:02.777 karate.env system property was: null \n"},{"result":{"nanos":25200,"millis":0.0252,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":50601,"millis":0.050601,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":39001,"millis":0.039001,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":221703,"millis":0.221703,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":31901,"millis":0.031901,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":335405,"millis":0.335405,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":24500,"millis":0.0245,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":45301,"millis":0.045301,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":110602,"millis":0.110602,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":131402,"millis":0.131402,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13800,"millis":0.0138,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20500,"millis":0.0205,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":46000,"millis":0.046,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'ddf33bff-8de3-4cca-b6f5-24d18daa502f'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":558710805,"millis":558.710805,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2500,"millis":0.0025,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":528308,"millis":0.528308,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'ddf33bff-8de3-4cca-b6f5-24d18daa502f'"}},{"result":{"nanos":434806,"millis":0.434806,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":353905,"millis":0.353905,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":346906,"millis":0.346906,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":409106,"millis":0.409106,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":370305,"millis":0.370305,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":20301,"millis":0.020301,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":269904,"millis":0.269904,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":271804,"millis":0.271804,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":272604,"millis":0.272604,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":73001,"millis":0.073001,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":127902,"millis":0.127902,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:03.341 [print] https:\/\/geodata.nationaalgeoregister.nl\/rws\/kaderrichtlijnwater2015\/atom\/v1_0\/index.xml \n"},{"result":{"nanos":573608,"millis":0.573608,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":132702,"millis":0.132702,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:03.342 [print] #notpresent \n"},{"result":{"nanos":328004,"millis":0.328004,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":86401,"millis":0.086401,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:03.342 [print] INSPIRE Atom \n"},{"result":{"nanos":23600,"millis":0.0236,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":35701,"millis":0.035701,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:03.342 [print] #notpresent \n"},{"result":{"nanos":392606,"millis":0.392606,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":90801,"millis":0.090801,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:03.343 [print] Beheer PDOK \n"},{"result":{"nanos":39301,"millis":0.039301,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:03.343 [print] [\"https:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=110f9ec6-4464-462e-9765-83d90cefbeag#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=110f9ec6-4464-462e-9765-83d90cefbead#MD_DataIdentification\"] \n"},{"result":{"nanos":372805,"millis":0.372805,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":630209,"millis":0.630209,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"ddf33bff-8de3-4cca-b6f5-24d18daa502f\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":354905,"millis":0.354905,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"ddf33bff-8de3-4cca-b6f5-24d18daa502f\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":566.380917,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"ddf33bff-8de3-4cca-b6f5-24d18daa502f","startTime":1629213722777,"refId":"[1.184:67]","endTime":1629213723344,"exampleData":{"datasetIdentifierCode":"ddf33bff-8de3-4cca-b6f5-24d18daa502f"},"exampleIndex":183},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14901,"millis":0.014901,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:02.989 karate.env system property was: null \n"},{"result":{"nanos":28800,"millis":0.0288,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":51201,"millis":0.051201,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":39801,"millis":0.039801,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":212603,"millis":0.212603,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":31800,"millis":0.0318,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":355205,"millis":0.355205,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":24000,"millis":0.024,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":78801,"millis":0.078801,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":364405,"millis":0.364405,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":83401,"millis":0.083401,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":14401,"millis":0.014401,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19700,"millis":0.0197,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":44001,"millis":0.044001,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '54122631-d343-40be-9c28-e44626b37a0e'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":5001,"millis":0.005001,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":538142007,"millis":538.142007,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1800,"millis":0.0018,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":550508,"millis":0.550508,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '54122631-d343-40be-9c28-e44626b37a0e'"}},{"result":{"nanos":440906,"millis":0.440906,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":382906,"millis":0.382906,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":369505,"millis":0.369505,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":445006,"millis":0.445006,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":398606,"millis":0.398606,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":26601,"millis":0.026601,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":296604,"millis":0.296604,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":305305,"millis":0.305305,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":332405,"millis":0.332405,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":84501,"millis":0.084501,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":629509,"millis":0.629509,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:03.534 [print] https:\/\/service.pdok.nl\/cbs\/hh\/atom\/v1_0\/index.xml \n"},{"result":{"nanos":325004,"millis":0.325004,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":80402,"millis":0.080402,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:03.534 [print] INSPIRE Atom \n"},{"result":{"nanos":366505,"millis":0.366505,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":202203,"millis":0.202203,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:03.535 [print] #notpresent \n"},{"result":{"nanos":31001,"millis":0.031001,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":254403,"millis":0.254403,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:03.535 [print] INSPIRE Atom \n"},{"result":{"nanos":363505,"millis":0.363505,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":78301,"millis":0.078301,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:03.536 [print] Beheer PDOK \n"},{"result":{"nanos":582309,"millis":0.582309,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:03.537 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=12bb57cd-73e0-41ba-a1e9-6d986b9109d3#MD_DataIdentification \n"},{"result":{"nanos":365605,"millis":0.365605,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":619709,"millis":0.619709,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"54122631-d343-40be-9c28-e44626b37a0e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":359806,"millis":0.359806,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"54122631-d343-40be-9c28-e44626b37a0e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":547.416043,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"54122631-d343-40be-9c28-e44626b37a0e","startTime":1629213722989,"refId":"[1.185:67]","endTime":1629213723538,"exampleData":{"datasetIdentifierCode":"54122631-d343-40be-9c28-e44626b37a0e"},"exampleIndex":184},{"sectionIndex":0,"stepResults":[{"result":{"nanos":12500,"millis":0.0125,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:03.091 karate.env system property was: null \n"},{"result":{"nanos":25301,"millis":0.025301,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":306804,"millis":0.306804,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":37101,"millis":0.037101,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":233704,"millis":0.233704,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":31800,"millis":0.0318,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":335205,"millis":0.335205,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":22701,"millis":0.022701,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":70001,"millis":0.070001,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":110301,"millis":0.110301,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":300905,"millis":0.300905,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":15900,"millis":0.0159,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17701,"millis":0.017701,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3400,"millis":0.0034,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":40300,"millis":0.0403,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '66805d91-a5f6-4265-bd36-ef13a429c97e'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":555594660,"millis":555.59466,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1300,"millis":0.0013,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":490507,"millis":0.490507,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '66805d91-a5f6-4265-bd36-ef13a429c97e'"}},{"result":{"nanos":418706,"millis":0.418706,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":405106,"millis":0.405106,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":356106,"millis":0.356106,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":415206,"millis":0.415206,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":385406,"millis":0.385406,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":24200,"millis":0.0242,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":288004,"millis":0.288004,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":281604,"millis":0.281604,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":292504,"millis":0.292504,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":93202,"millis":0.093202,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":119302,"millis":0.119302,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:03.652 [print] https:\/\/geodata.nationaalgeoregister.nl\/bzk\/bro-bodemkaart\/atom\/v1_0\/index.xml \n"},{"result":{"nanos":1085416,"millis":1.085416,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":137502,"millis":0.137502,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:03.653 [print] #notpresent \n"},{"result":{"nanos":453807,"millis":0.453807,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":95401,"millis":0.095401,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:03.654 [print] INSPIRE Atom \n"},{"result":{"nanos":29101,"millis":0.029101,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":75201,"millis":0.075201,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:03.654 [print] #notpresent \n"},{"result":{"nanos":588809,"millis":0.588809,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":71301,"millis":0.071301,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:03.654 [print] Beheer PDOK \n"},{"result":{"nanos":64301,"millis":0.064301,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:03.654 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=ed960299-a147-4c1a-bc57-41ff83a2264f#MD_DataIdentification \n"},{"result":{"nanos":385006,"millis":0.385006,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":736911,"millis":0.736911,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"66805d91-a5f6-4265-bd36-ef13a429c97e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":364905,"millis":0.364905,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"66805d91-a5f6-4265-bd36-ef13a429c97e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":564.829498,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"66805d91-a5f6-4265-bd36-ef13a429c97e","startTime":1629213723090,"refId":"[1.186:67]","endTime":1629213723656,"exampleData":{"datasetIdentifierCode":"66805d91-a5f6-4265-bd36-ef13a429c97e"},"exampleIndex":185},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13900,"millis":0.0139,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:03.133 karate.env system property was: null \n"},{"result":{"nanos":24301,"millis":0.024301,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":66001,"millis":0.066001,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":36100,"millis":0.0361,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":190503,"millis":0.190503,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":29101,"millis":0.029101,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":331505,"millis":0.331505,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":21200,"millis":0.0212,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":456207,"millis":0.456207,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":482807,"millis":0.482807,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":88301,"millis":0.088301,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":15101,"millis":0.015101,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20300,"millis":0.0203,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":38801,"millis":0.038801,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '2f28bd85-0afc-4dc1-85f3-dac55c1b485e'"}},{"result":{"nanos":5200,"millis":0.0052,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3600,"millis":0.0036,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":561780050,"millis":561.78005,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1900,"millis":0.0019,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":535908,"millis":0.535908,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '2f28bd85-0afc-4dc1-85f3-dac55c1b485e'"}},{"result":{"nanos":471407,"millis":0.471407,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":410806,"millis":0.410806,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":415706,"millis":0.415706,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":474607,"millis":0.474607,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":443707,"millis":0.443707,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":23600,"millis":0.0236,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":328605,"millis":0.328605,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":321205,"millis":0.321205,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":336505,"millis":0.336505,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":191603,"millis":0.191603,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":142702,"millis":0.142702,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:03.701 [print] https:\/\/haleconnect.com\/ows\/services\/org.874.c4108a11-bdbb-4461-8902-423531561a7e_wms?SERVICE=WMS&Request=GetCapabilities \n"},{"result":{"nanos":372906,"millis":0.372906,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":111302,"millis":0.111302,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:03.702 [print] #notpresent \n"},{"result":{"nanos":343005,"millis":0.343005,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":73001,"millis":0.073001,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:03.702 [print] #notpresent \n"},{"result":{"nanos":27400,"millis":0.0274,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":43100,"millis":0.0431,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:03.703 [print] #notpresent \n"},{"result":{"nanos":448407,"millis":0.448407,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":81801,"millis":0.081801,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:03.703 [print] KNMI \n"},{"result":{"nanos":47201,"millis":0.047201,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:03.703 [print] https:\/\/haleconnect.com\/services\/bsp\/org.874.c4108a11-bdbb-4461-8902-423531561a7e\/md\/dataset\/dataset1#xpointer%28%2F%2Fgmd%3AidentificationInfo%5B1%5D%2Fgmd%3AMD_DataIdentification%29 \n"},{"result":{"nanos":437806,"millis":0.437806,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":615409,"millis":0.615409,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"2f28bd85-0afc-4dc1-85f3-dac55c1b485e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":367805,"millis":0.367805,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"2f28bd85-0afc-4dc1-85f3-dac55c1b485e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":570.679782,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"2f28bd85-0afc-4dc1-85f3-dac55c1b485e","startTime":1629213723133,"refId":"[1.187:67]","endTime":1629213723705,"exampleData":{"datasetIdentifierCode":"2f28bd85-0afc-4dc1-85f3-dac55c1b485e"},"exampleIndex":186},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14400,"millis":0.0144,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:03.346 karate.env system property was: null \n"},{"result":{"nanos":28800,"millis":0.0288,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":51301,"millis":0.051301,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":39001,"millis":0.039001,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":246503,"millis":0.246503,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":33800,"millis":0.0338,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":379106,"millis":0.379106,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":27000,"millis":0.027,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":53101,"millis":0.053101,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":126902,"millis":0.126902,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":54201,"millis":0.054201,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13700,"millis":0.0137,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":21301,"millis":0.021301,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":69501,"millis":0.069501,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '9ad3f0c0-9e2c-4d44-a467-b57920aa512f'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":530563797,"millis":530.563797,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1600,"millis":0.0016,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":500207,"millis":0.500207,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '9ad3f0c0-9e2c-4d44-a467-b57920aa512f'"}},{"result":{"nanos":437806,"millis":0.437806,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":384005,"millis":0.384005,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":361306,"millis":0.361306,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":387505,"millis":0.387505,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":338805,"millis":0.338805,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":28800,"millis":0.0288,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":269204,"millis":0.269204,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":252303,"millis":0.252303,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":247304,"millis":0.247304,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":60101,"millis":0.060101,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":606009,"millis":0.606009,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:03.882 [print] https:\/\/geodata.nationaalgeoregister.nl\/hwh\/eenheden\/atom\/v1_0\/index.xml \n"},{"result":{"nanos":699710,"millis":0.69971,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":69701,"millis":0.069701,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:03.883 [print] INSPIRE Atom \n"},{"result":{"nanos":549808,"millis":0.549808,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":113701,"millis":0.113701,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:03.884 [print] #notpresent \n"},{"result":{"nanos":49400,"millis":0.0494,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":354106,"millis":0.354106,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:03.884 [print] INSPIRE Atom \n"},{"result":{"nanos":337305,"millis":0.337305,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":58201,"millis":0.058201,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:03.885 [print] Beheer PDOK \n"},{"result":{"nanos":48000,"millis":0.048,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:03.885 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=2d4ec7e6-50ae-4c71-bd20-5b9211e2135f#MD_DataIdentification \n"},{"result":{"nanos":337205,"millis":0.337205,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":1110216,"millis":1.110216,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"9ad3f0c0-9e2c-4d44-a467-b57920aa512f\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":332205,"millis":0.332205,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"9ad3f0c0-9e2c-4d44-a467-b57920aa512f\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":539.673627,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"9ad3f0c0-9e2c-4d44-a467-b57920aa512f","startTime":1629213723346,"refId":"[1.188:67]","endTime":1629213723887,"exampleData":{"datasetIdentifierCode":"9ad3f0c0-9e2c-4d44-a467-b57920aa512f"},"exampleIndex":187},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16700,"millis":0.0167,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:03.540 karate.env system property was: null \n"},{"result":{"nanos":29401,"millis":0.029401,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":48701,"millis":0.048701,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":41600,"millis":0.0416,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":278304,"millis":0.278304,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":33000,"millis":0.033,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":362105,"millis":0.362105,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":30200,"millis":0.0302,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":208303,"millis":0.208303,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":113702,"millis":0.113702,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":74501,"millis":0.074501,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":14900,"millis":0.0149,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":22700,"millis":0.0227,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":89601,"millis":0.089601,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '3dc373ae-fcf6-49c9-b315-9a2178bffe4a'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3500,"millis":0.0035,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":532732329,"millis":532.732329,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2400,"millis":0.0024,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":520208,"millis":0.520208,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '3dc373ae-fcf6-49c9-b315-9a2178bffe4a'"}},{"result":{"nanos":425306,"millis":0.425306,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":379905,"millis":0.379905,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":372506,"millis":0.372506,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":450206,"millis":0.450206,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":425807,"millis":0.425807,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":20900,"millis":0.0209,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":323205,"millis":0.323205,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":302104,"millis":0.302104,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":296704,"millis":0.296704,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":62901,"millis":0.062901,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":94402,"millis":0.094402,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:04.079 [print] https:\/\/geodata.nationaalgeoregister.nl\/restwarmte\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":701210,"millis":0.70121,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":110402,"millis":0.110402,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:04.079 [print] OGC:WMS \n"},{"result":{"nanos":319804,"millis":0.319804,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":310704,"millis":0.310704,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:04.080 [print] #notpresent \n"},{"result":{"nanos":165203,"millis":0.165203,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":54301,"millis":0.054301,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:04.080 [print] OGC:WMS \n"},{"result":{"nanos":633709,"millis":0.633709,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":57701,"millis":0.057701,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:04.081 [print] Beheer PDOK \n"},{"result":{"nanos":150303,"millis":0.150303,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:04.081 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=d6b85d84-cdb9-4a6e-b799-cf8826e22a94#MD_DataIdentification \n"},{"result":{"nanos":1035615,"millis":1.035615,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":533007,"millis":0.533007,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"3dc373ae-fcf6-49c9-b315-9a2178bffe4a\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":312604,"millis":0.312604,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"3dc373ae-fcf6-49c9-b315-9a2178bffe4a\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":542.173664,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"3dc373ae-fcf6-49c9-b315-9a2178bffe4a","startTime":1629213723540,"refId":"[1.189:67]","endTime":1629213724083,"exampleData":{"datasetIdentifierCode":"3dc373ae-fcf6-49c9-b315-9a2178bffe4a"},"exampleIndex":188},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15100,"millis":0.0151,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:03.658 karate.env system property was: null \n"},{"result":{"nanos":28400,"millis":0.0284,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":45601,"millis":0.045601,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":37200,"millis":0.0372,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":230504,"millis":0.230504,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":31700,"millis":0.0317,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":335405,"millis":0.335405,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":26201,"millis":0.026201,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":67501,"millis":0.067501,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":114202,"millis":0.114202,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":49901,"millis":0.049901,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12600,"millis":0.0126,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20500,"millis":0.0205,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5500,"millis":0.0055,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3501,"millis":0.003501,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":86901,"millis":0.086901,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'e27e61d8-25b1-45ee-a2df-071312ba8a69'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":533300037,"millis":533.300037,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2300,"millis":0.0023,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":548008,"millis":0.548008,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'e27e61d8-25b1-45ee-a2df-071312ba8a69'"}},{"result":{"nanos":538408,"millis":0.538408,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":440106,"millis":0.440106,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":430906,"millis":0.430906,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":492407,"millis":0.492407,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":454707,"millis":0.454707,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":24601,"millis":0.024601,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":329905,"millis":0.329905,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":338505,"millis":0.338505,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":315705,"millis":0.315705,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":64201,"millis":0.064201,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":107001,"millis":0.107001,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:04.197 [print] https:\/\/geodata.nationaalgeoregister.nl\/rws\/kaderrichtlijnwateractueel\/atom\/v1_0\/index.xml \n"},{"result":{"nanos":357106,"millis":0.357106,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":196003,"millis":0.196003,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:04.198 [print] #notpresent \n"},{"result":{"nanos":391105,"millis":0.391105,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":84701,"millis":0.084701,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:04.198 [print] INSPIRE Atom \n"},{"result":{"nanos":22300,"millis":0.0223,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":37601,"millis":0.037601,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:04.198 [print] #notpresent \n"},{"result":{"nanos":750911,"millis":0.750911,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":91901,"millis":0.091901,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:04.199 [print] Beheer PDOK \n"},{"result":{"nanos":74902,"millis":0.074902,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:04.199 [print] [\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=622a632a-c57b-44a2-83a4-e51223d5f15g#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=2e31680f-68b5-4ff3-94a4-9c24109ffd5e#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=krw-f7bb2351-9788-42ea-a58b-a5ee1842304e#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=krw-782cab20-8328-45f1-a9b2-c27d07c14066#MD_DataIdentification\"] \n"},{"result":{"nanos":477607,"millis":0.477607,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":785811,"millis":0.785811,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"e27e61d8-25b1-45ee-a2df-071312ba8a69\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":631409,"millis":0.631409,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"e27e61d8-25b1-45ee-a2df-071312ba8a69\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":542.407771,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"e27e61d8-25b1-45ee-a2df-071312ba8a69","startTime":1629213723658,"refId":"[1.190:67]","endTime":1629213724201,"exampleData":{"datasetIdentifierCode":"e27e61d8-25b1-45ee-a2df-071312ba8a69"},"exampleIndex":189},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15500,"millis":0.0155,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:03.707 karate.env system property was: null \n"},{"result":{"nanos":26001,"millis":0.026001,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":52201,"millis":0.052201,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":37100,"millis":0.0371,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":245004,"millis":0.245004,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":32701,"millis":0.032701,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":333304,"millis":0.333304,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":26000,"millis":0.026,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":81501,"millis":0.081501,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":1059016,"millis":1.059016,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":85601,"millis":0.085601,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":15800,"millis":0.0158,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20100,"millis":0.0201,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":67901,"millis":0.067901,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '0426f471-f325-42ed-a775-81c397592e86'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3701,"millis":0.003701,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":534281251,"millis":534.281251,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1600,"millis":0.0016,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":452507,"millis":0.452507,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '0426f471-f325-42ed-a775-81c397592e86'"}},{"result":{"nanos":454607,"millis":0.454607,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":437306,"millis":0.437306,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":444107,"millis":0.444107,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":468307,"millis":0.468307,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":438806,"millis":0.438806,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":23901,"millis":0.023901,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":325205,"millis":0.325205,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":328705,"millis":0.328705,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":321705,"millis":0.321705,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":58401,"millis":0.058401,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":69001,"millis":0.069001,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:04.247 [print] https:\/\/inspire.rivm.nl\/geoserver\/wms?request=GetCapabilities \n"},{"result":{"nanos":319804,"millis":0.319804,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":81501,"millis":0.081501,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:04.248 [print] OGC:WMS \n"},{"result":{"nanos":367005,"millis":0.367005,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":148203,"millis":0.148203,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:04.248 [print] #notpresent \n"},{"result":{"nanos":22600,"millis":0.0226,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":35601,"millis":0.035601,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:04.248 [print] OGC:WMS \n"},{"result":{"nanos":517907,"millis":0.517907,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":77202,"millis":0.077202,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:04.249 [print] Rijksinstituut voor Volksgezondheid en Milieu \n"},{"result":{"nanos":46400,"millis":0.0464,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:04.249 [print] http:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=8a4f5c3b-aced-48fd-afb5-f1f1d0ef21d6#MD_DataIdentification \n"},{"result":{"nanos":401006,"millis":0.401006,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":556009,"millis":0.556009,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"0426f471-f325-42ed-a775-81c397592e86\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":277504,"millis":0.277504,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"0426f471-f325-42ed-a775-81c397592e86\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":543.069382,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"0426f471-f325-42ed-a775-81c397592e86","startTime":1629213723706,"refId":"[1.191:67]","endTime":1629213724250,"exampleData":{"datasetIdentifierCode":"0426f471-f325-42ed-a775-81c397592e86"},"exampleIndex":190},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14400,"millis":0.0144,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:03.888 karate.env system property was: null \n"},{"result":{"nanos":24701,"millis":0.024701,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":288104,"millis":0.288104,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":40101,"millis":0.040101,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":239403,"millis":0.239403,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":32600,"millis":0.0326,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":342105,"millis":0.342105,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":24001,"millis":0.024001,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":42300,"millis":0.0423,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":111502,"millis":0.111502,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":306905,"millis":0.306905,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":16100,"millis":0.0161,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18701,"millis":0.018701,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":38901,"millis":0.038901,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'c56433ca-35f2-4aaf-8bfa-35d8e0e52dda'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3500,"millis":0.0035,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":681927193,"millis":681.927193,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2100,"millis":0.0021,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":1183517,"millis":1.183517,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'c56433ca-35f2-4aaf-8bfa-35d8e0e52dda'"}},{"result":{"nanos":1261218,"millis":1.261218,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":1105216,"millis":1.105216,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":684810,"millis":0.68481,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":427707,"millis":0.427707,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":405106,"millis":0.405106,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":21400,"millis":0.0214,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":280504,"millis":0.280504,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":279604,"millis":0.279604,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":285404,"millis":0.285404,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":397206,"millis":0.397206,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":371405,"millis":0.371405,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:04.579 [print] https:\/\/inspire.rivm.nl\/geoserver\/wms? \n"},{"result":{"nanos":319104,"millis":0.319104,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":324605,"millis":0.324605,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:04.580 [print] #notpresent \n"},{"result":{"nanos":307705,"millis":0.307705,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":300904,"millis":0.300904,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:04.581 [print] OGC:WMS \n"},{"result":{"nanos":29301,"millis":0.029301,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":262604,"millis":0.262604,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:04.581 [print] #notpresent \n"},{"result":{"nanos":406106,"millis":0.406106,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":917013,"millis":0.917013,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:04.582 [print] RIVM \n"},{"result":{"nanos":2054330,"millis":2.05433,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:04.584 [print] http:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/en\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=08b27bf0-e34a-4b30-9eac-5edadfb6a288 \n"},{"result":{"nanos":442606,"millis":0.442606,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":636709,"millis":0.636709,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"c56433ca-35f2-4aaf-8bfa-35d8e0e52dda\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":459407,"millis":0.459407,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"c56433ca-35f2-4aaf-8bfa-35d8e0e52dda\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":696.648608,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"c56433ca-35f2-4aaf-8bfa-35d8e0e52dda","startTime":1629213723888,"refId":"[1.192:67]","endTime":1629213724586,"exampleData":{"datasetIdentifierCode":"c56433ca-35f2-4aaf-8bfa-35d8e0e52dda"},"exampleIndex":191},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15300,"millis":0.0153,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:04.085 karate.env system property was: null \n"},{"result":{"nanos":26401,"millis":0.026401,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":47300,"millis":0.0473,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":35700,"millis":0.0357,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":228304,"millis":0.228304,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":30900,"millis":0.0309,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":335305,"millis":0.335305,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":22901,"millis":0.022901,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":45200,"millis":0.0452,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":304305,"millis":0.304305,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":71301,"millis":0.071301,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":14600,"millis":0.0146,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18901,"millis":0.018901,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":37501,"millis":0.037501,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '94f241c2-43a2-42c3-8e9e-71976605aa0e'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":547903449,"millis":547.903449,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2700,"millis":0.0027,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":831912,"millis":0.831912,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '94f241c2-43a2-42c3-8e9e-71976605aa0e'"}},{"result":{"nanos":1112416,"millis":1.112416,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":1045515,"millis":1.045515,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":1000815,"millis":1.000815,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":1031715,"millis":1.031715,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":1032415,"millis":1.032415,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":20700,"millis":0.0207,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":678709,"millis":0.678709,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":661209,"millis":0.661209,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":751711,"millis":0.751711,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":115402,"millis":0.115402,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":104302,"millis":0.104302,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:04.643 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/top10nlv2\\\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":829712,"millis":0.829712,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":70401,"millis":0.070401,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:04.644 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":790712,"millis":0.790712,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":77901,"millis":0.077901,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:04.645 [print] #notpresent \n"},{"result":{"nanos":22000,"millis":0.022,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":57401,"millis":0.057401,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:04.645 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":1182018,"millis":1.182018,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":59901,"millis":0.059901,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:04.647 [print] Beheer PDOK \n"},{"result":{"nanos":63101,"millis":0.063101,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:04.647 [print] [\"http:\\\/\\\/nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementsetname=full&id=29d5310f-dd0d-45ba-abad-b4ffc6b8785f#MD_DataIdentification\",\"http:\\\/\\\/nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementsetname=full&id=af0c582f-9e6b-46e6-865a-fc3a2d5289b9#MD_DataIdentification\",\"http:\\\/\\\/nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementsetname=full&id=81ff84ec-42a4-4481-840b-12713bbb5d38#MD_DataIdentification\",\"http:\\\/\\\/nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementsetname=full&id=3eebf700-5abf-42e4-826c-03cfb497e366#MD_DataIdentification\",\"http:\\\/\\\/nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementsetname=full&id=4b282988-cb91-4bbc-b147-f653014917cb#MD_DataIdentification\",\"http:\\\/\\\/nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementsetname=full&id=9d9f1738-aced-47c9-aaa0-c62474a2dcfb#MD_DataIdentification\"] \n"},{"result":{"nanos":1008714,"millis":1.008714,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":777912,"millis":0.777912,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"94f241c2-43a2-42c3-8e9e-71976605aa0e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":369105,"millis":0.369105,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"94f241c2-43a2-42c3-8e9e-71976605aa0e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":562.852467,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"94f241c2-43a2-42c3-8e9e-71976605aa0e","startTime":1629213724085,"refId":"[1.193:67]","endTime":1629213724649,"exampleData":{"datasetIdentifierCode":"94f241c2-43a2-42c3-8e9e-71976605aa0e"},"exampleIndex":192},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16800,"millis":0.0168,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:04.204 karate.env system property was: null \n"},{"result":{"nanos":423006,"millis":0.423006,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":63701,"millis":0.063701,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":48301,"millis":0.048301,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":211403,"millis":0.211403,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":36000,"millis":0.036,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":396606,"millis":0.396606,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":29800,"millis":0.0298,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":337305,"millis":0.337305,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":117401,"millis":0.117401,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":61401,"millis":0.061401,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":16101,"millis":0.016101,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":21900,"millis":0.0219,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5800,"millis":0.0058,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4501,"millis":0.004501,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":48800,"millis":0.0488,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '92826f1e-040d-4099-b9e1-cab6bfc520af'"}},{"result":{"nanos":5301,"millis":0.005301,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":554027037,"millis":554.027037,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1800,"millis":0.0018,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":543008,"millis":0.543008,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '92826f1e-040d-4099-b9e1-cab6bfc520af'"}},{"result":{"nanos":461807,"millis":0.461807,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":434206,"millis":0.434206,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":405405,"millis":0.405405,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":469606,"millis":0.469606,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":594408,"millis":0.594408,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":30600,"millis":0.0306,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":338605,"millis":0.338605,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":328405,"millis":0.328405,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":320705,"millis":0.320705,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":75101,"millis":0.075101,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":162903,"millis":0.162903,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:04.764 [print] https:\/\/haleconnect.com\/ows\/services\/org.874.cb9ca55e-f4e7-4bd8-a02e-75d528e22118_wfs\/org.874.c7d1b83d-8237-44c4-9e07-420eb63dcf84?SERVICE=WFS&Request=GetCapabilities \n"},{"result":{"nanos":359305,"millis":0.359305,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":97002,"millis":0.097002,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:04.765 [print] #notpresent \n"},{"result":{"nanos":340405,"millis":0.340405,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":77101,"millis":0.077101,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:04.765 [print] #notpresent \n"},{"result":{"nanos":26001,"millis":0.026001,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":43600,"millis":0.0436,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:04.765 [print] #notpresent \n"},{"result":{"nanos":548908,"millis":0.548908,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":94501,"millis":0.094501,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:04.766 [print] Koninklijk Nederlands Meteorologisch Instituut (KNMI) \n"},{"result":{"nanos":42801,"millis":0.042801,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:04.766 [print] https:\/\/haleconnect.com\/services\/bsp\/org.874.c7d1b83d-8237-44c4-9e07-420eb63dcf84\/md\/dataset\/dataset1#xpointer%28%2F%2Fgmd%3AidentificationInfo%5B1%5D%2Fgmd%3AMD_DataIdentification%29 \n"},{"result":{"nanos":409306,"millis":0.409306,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":661710,"millis":0.66171,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"92826f1e-040d-4099-b9e1-cab6bfc520af\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":346805,"millis":0.346805,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"92826f1e-040d-4099-b9e1-cab6bfc520af\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":563.089368,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"92826f1e-040d-4099-b9e1-cab6bfc520af","startTime":1629213724203,"refId":"[1.194:67]","endTime":1629213724767,"exampleData":{"datasetIdentifierCode":"92826f1e-040d-4099-b9e1-cab6bfc520af"},"exampleIndex":193},{"sectionIndex":0,"stepResults":[{"result":{"nanos":12700,"millis":0.0127,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:04.252 karate.env system property was: null \n"},{"result":{"nanos":37101,"millis":0.037101,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":119002,"millis":0.119002,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":35700,"millis":0.0357,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":190402,"millis":0.190402,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":29701,"millis":0.029701,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":371605,"millis":0.371605,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":41501,"millis":0.041501,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":61101,"millis":0.061101,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":115602,"millis":0.115602,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":54701,"millis":0.054701,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13100,"millis":0.0131,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":15700,"millis":0.0157,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4001,"millis":0.004001,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3700,"millis":0.0037,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":38700,"millis":0.0387,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'c7dad4b9-42a8-452f-a33b-d4938ed22142'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3600,"millis":0.0036,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":540352239,"millis":540.352239,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1200,"millis":0.0012,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":380706,"millis":0.380706,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'c7dad4b9-42a8-452f-a33b-d4938ed22142'"}},{"result":{"nanos":360405,"millis":0.360405,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":310505,"millis":0.310505,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":316705,"millis":0.316705,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":353405,"millis":0.353405,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":326505,"millis":0.326505,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":19900,"millis":0.0199,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":260404,"millis":0.260404,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":252504,"millis":0.252504,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":259604,"millis":0.259604,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":55301,"millis":0.055301,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":149602,"millis":0.149602,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:04.797 [print] https:\/\/inspire.caris.nl\/gs5\/MarineRegion\/ows?service=WFS&version=2.0.0&request=GetCapabilities \n"},{"result":{"nanos":308705,"millis":0.308705,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":61901,"millis":0.061901,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:04.798 [print] OGC:WFS \n"},{"result":{"nanos":269404,"millis":0.269404,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":77901,"millis":0.077901,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:04.798 [print] #notpresent \n"},{"result":{"nanos":24001,"millis":0.024001,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":40400,"millis":0.0404,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:04.798 [print] OGC:WFS \n"},{"result":{"nanos":365105,"millis":0.365105,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":68301,"millis":0.068301,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:04.798 [print] Ministerie van Defensie, Koninklijke Marine, Dienst der Hydrografie \n"},{"result":{"nanos":37701,"millis":0.037701,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:04.798 [print] https:\/\/www.nationaalgeoregister.nl:443\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=f44dac86-2228-412f-8355-e56446ca9933#MD_DataIdentification \n"},{"result":{"nanos":332105,"millis":0.332105,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":443406,"millis":0.443406,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"c7dad4b9-42a8-452f-a33b-d4938ed22142\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":290605,"millis":0.290605,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"c7dad4b9-42a8-452f-a33b-d4938ed22142\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":546.871237,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"c7dad4b9-42a8-452f-a33b-d4938ed22142","startTime":1629213724252,"refId":"[1.195:67]","endTime":1629213724800,"exampleData":{"datasetIdentifierCode":"c7dad4b9-42a8-452f-a33b-d4938ed22142"},"exampleIndex":194},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15600,"millis":0.0156,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:04.592 karate.env system property was: null \n"},{"result":{"nanos":26501,"millis":0.026501,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":63501,"millis":0.063501,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":41601,"millis":0.041601,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":248603,"millis":0.248603,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":33901,"millis":0.033901,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":398406,"millis":0.398406,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":31801,"millis":0.031801,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":494107,"millis":0.494107,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":133402,"millis":0.133402,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":55201,"millis":0.055201,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":14500,"millis":0.0145,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20600,"millis":0.0206,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":46301,"millis":0.046301,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'f39d198a-1e69-43cc-b359-cc60a8c22d28'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":547038837,"millis":547.038837,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1200,"millis":0.0012,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":704710,"millis":0.70471,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'f39d198a-1e69-43cc-b359-cc60a8c22d28'"}},{"result":{"nanos":467006,"millis":0.467006,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":380705,"millis":0.380705,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":377606,"millis":0.377606,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":580708,"millis":0.580708,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":494507,"millis":0.494507,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":76801,"millis":0.076801,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":366306,"millis":0.366306,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":367505,"millis":0.367505,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":362606,"millis":0.362606,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":117702,"millis":0.117702,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":731411,"millis":0.731411,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:05.146 [print] https:\/\/inspire.rivm.nl\/sos\/eaq\/service?service=AQD&version=1.0.0&request=GetCapabilities \n"},{"result":{"nanos":755011,"millis":0.755011,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":133202,"millis":0.133202,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:05.147 [print] #notpresent \n"},{"result":{"nanos":612709,"millis":0.612709,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":119702,"millis":0.119702,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:05.148 [print] OGC:SOS \n"},{"result":{"nanos":316004,"millis":0.316004,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":107701,"millis":0.107701,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:05.148 [print] #notpresent \n"},{"result":{"nanos":644710,"millis":0.64471,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":117802,"millis":0.117802,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:05.149 [print] RIVM \n"},{"result":{"nanos":378205,"millis":0.378205,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:05.149 [print] [\"http:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/en\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=733559a5-201d-40e5-ad43-d1c7bae84d9f\",\"http:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/en\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=d3c9efd6-fca7-49d6-92bb-5f507abece90\",\"http:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/en\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=af135cd8-d429-4fc7-b9e3-09e15217520d\",\"http:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/en\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=b3ec8793-7747-4da0-b6c3-aa384446a586\",\"http:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/en\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=5800f3b0-2ea2-4231-8165-216a7b26867f\",\"http:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/en\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=d8f370e8-123c-4ab3-9410-04f728327ac6\",\"http:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/en\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=f91c6ad6-62a5-46d0-8a5b-8a62e7a4b833\",\"http:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/en\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=500d396f-5ec6-4e4b-a151-5fb3cddd8082\"] \n"},{"result":{"nanos":373506,"millis":0.373506,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":483607,"millis":0.483607,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"f39d198a-1e69-43cc-b359-cc60a8c22d28\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":374306,"millis":0.374306,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"f39d198a-1e69-43cc-b359-cc60a8c22d28\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":558.125,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"f39d198a-1e69-43cc-b359-cc60a8c22d28","startTime":1629213724591,"refId":"[1.196:67]","endTime":1629213725151,"exampleData":{"datasetIdentifierCode":"f39d198a-1e69-43cc-b359-cc60a8c22d28"},"exampleIndex":195},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13800,"millis":0.0138,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:04.651 karate.env system property was: null \n"},{"result":{"nanos":24300,"millis":0.0243,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":48301,"millis":0.048301,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":37201,"millis":0.037201,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":213003,"millis":0.213003,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":167503,"millis":0.167503,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":339405,"millis":0.339405,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":25900,"millis":0.0259,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":75601,"millis":0.075601,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":187203,"millis":0.187203,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":58601,"millis":0.058601,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":14700,"millis":0.0147,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18701,"millis":0.018701,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":47201,"millis":0.047201,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '108fec55-e467-4d04-ab35-fd0d7060e3e2'"}},{"result":{"nanos":3700,"millis":0.0037,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":534952161,"millis":534.952161,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2200,"millis":0.0022,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":642409,"millis":0.642409,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '108fec55-e467-4d04-ab35-fd0d7060e3e2'"}},{"result":{"nanos":516008,"millis":0.516008,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":453206,"millis":0.453206,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":495607,"millis":0.495607,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":613809,"millis":0.613809,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":558708,"millis":0.558708,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":76302,"millis":0.076302,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":396505,"millis":0.396505,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":446506,"millis":0.446506,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":433907,"millis":0.433907,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":123502,"millis":0.123502,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":161702,"millis":0.161702,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:05.192 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/rws\\\/richtlijnstedelijkafvalwater2015\\\/wms\\\/v1_0?request=GetCapabilities&service=WMS \n"},{"result":{"nanos":426307,"millis":0.426307,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":160502,"millis":0.160502,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:05.193 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":435507,"millis":0.435507,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":142302,"millis":0.142302,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:05.194 [print] #notpresent \n"},{"result":{"nanos":72801,"millis":0.072801,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":104102,"millis":0.104102,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:05.194 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":498007,"millis":0.498007,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":165103,"millis":0.165103,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:05.194 [print] Beheer PDOK \n"},{"result":{"nanos":117301,"millis":0.117301,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:05.195 [print] [\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=uwwtd-9d8e-4758-83fa-28b057f185e1#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=uwwtd-9d8e-4758-83fa-28b057f185e2#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=uwwtd-9d8e-4758-83fa-28b057f185e3#MD_DataIdentification\"] \n"},{"result":{"nanos":546307,"millis":0.546307,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":497407,"millis":0.497407,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"108fec55-e467-4d04-ab35-fd0d7060e3e2\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":2430735,"millis":2.430735,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"108fec55-e467-4d04-ab35-fd0d7060e3e2\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":546.756233,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"108fec55-e467-4d04-ab35-fd0d7060e3e2","startTime":1629213724651,"refId":"[1.197:67]","endTime":1629213725198,"exampleData":{"datasetIdentifierCode":"108fec55-e467-4d04-ab35-fd0d7060e3e2"},"exampleIndex":196},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14401,"millis":0.014401,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:04.770 karate.env system property was: null \n"},{"result":{"nanos":25000,"millis":0.025,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":49301,"millis":0.049301,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":39601,"millis":0.039601,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":303304,"millis":0.303304,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":34001,"millis":0.034001,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":425506,"millis":0.425506,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":28801,"millis":0.028801,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":59901,"millis":0.059901,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":108601,"millis":0.108601,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":53401,"millis":0.053401,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13300,"millis":0.0133,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18600,"millis":0.0186,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":47301,"millis":0.047301,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '54d2021b-e778-4834-a3c6-75c89d36b942'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3700,"millis":0.0037,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":535190565,"millis":535.190565,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1500,"millis":0.0015,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":725611,"millis":0.725611,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '54d2021b-e778-4834-a3c6-75c89d36b942'"}},{"result":{"nanos":509807,"millis":0.509807,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":611409,"millis":0.611409,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":555008,"millis":0.555008,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":673710,"millis":0.67371,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":536308,"millis":0.536308,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":106301,"millis":0.106301,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":393405,"millis":0.393405,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":386206,"millis":0.386206,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":385706,"millis":0.385706,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":184203,"millis":0.184203,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":854412,"millis":0.854412,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:05.312 [print] https:\/\/geodata.nationaalgeoregister.nl\/tiles\/service\/wmts?request=GetCapabilities&service=wmts \n"},{"result":{"nanos":423107,"millis":0.423107,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":327905,"millis":0.327905,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:05.313 [print] OGC:WMTS \n"},{"result":{"nanos":392905,"millis":0.392905,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":296104,"millis":0.296104,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:05.314 [print] #notpresent \n"},{"result":{"nanos":81501,"millis":0.081501,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":259604,"millis":0.259604,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:05.314 [print] OGC:WMTS \n"},{"result":{"nanos":426807,"millis":0.426807,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":317204,"millis":0.317204,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:05.315 [print] Beheer PDOK \n"},{"result":{"nanos":504108,"millis":0.504108,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:05.316 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=2ae3e9b7-aa79-41d4-a35b-c9a0fee69e5c#MD_DataIdentification \n"},{"result":{"nanos":433506,"millis":0.433506,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":419106,"millis":0.419106,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"54d2021b-e778-4834-a3c6-75c89d36b942\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":290004,"millis":0.290004,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"54d2021b-e778-4834-a3c6-75c89d36b942\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":546.523731,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"54d2021b-e778-4834-a3c6-75c89d36b942","startTime":1629213724769,"refId":"[1.198:67]","endTime":1629213725317,"exampleData":{"datasetIdentifierCode":"54d2021b-e778-4834-a3c6-75c89d36b942"},"exampleIndex":197},{"sectionIndex":0,"stepResults":[{"result":{"nanos":90701,"millis":0.090701,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:04.838 karate.env system property was: null \n"},{"result":{"nanos":41001,"millis":0.041001,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":117702,"millis":0.117702,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":119102,"millis":0.119102,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":303004,"millis":0.303004,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":98002,"millis":0.098002,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":369905,"millis":0.369905,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":71801,"millis":0.071801,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":93901,"millis":0.093901,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":436806,"millis":0.436806,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":138602,"millis":0.138602,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":37400,"millis":0.0374,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":24801,"millis":0.024801,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":10800,"millis":0.0108,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":10200,"millis":0.0102,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":10000,"millis":0.01,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'c47e4ef8-951e-4765-8d01-29150c12a22d'"}},{"result":{"nanos":9700,"millis":0.0097,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":47000,"millis":0.047,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":548653559,"millis":548.653559,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2600,"millis":0.0026,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":484407,"millis":0.484407,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'c47e4ef8-951e-4765-8d01-29150c12a22d'"}},{"result":{"nanos":403906,"millis":0.403906,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":394506,"millis":0.394506,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":337005,"millis":0.337005,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":683210,"millis":0.68321,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":469806,"millis":0.469806,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":77801,"millis":0.077801,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":363405,"millis":0.363405,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":336205,"millis":0.336205,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":377706,"millis":0.377706,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":616109,"millis":0.616109,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":751511,"millis":0.751511,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:05.395 [print] https:\/\/www.broinspireservices.nl\/atom\/services.atom \n"},{"result":{"nanos":371806,"millis":0.371806,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":551508,"millis":0.551508,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:05.396 [print] #notpresent \n"},{"result":{"nanos":939114,"millis":0.939114,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":665409,"millis":0.665409,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:05.398 [print] INSPIRE Atom \n"},{"result":{"nanos":91501,"millis":0.091501,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":455807,"millis":0.455807,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:05.398 [print] #notpresent \n"},{"result":{"nanos":417206,"millis":0.417206,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":523408,"millis":0.523408,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:05.399 [print] TNO Geologische Dienst Nederland \n"},{"result":{"nanos":1134916,"millis":1.134916,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:05.400 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire?SERVICE=CSW&version=2.0.2&REQUEST=GetRecordById&ID=7D35598D-DFBF-C64D-0F1A-92A80A45EB14&OUTPUTSCHEMA=http:\/\/www.isotc211.org\/2005\/gmd&ELEMENTSETNAME=full#MD_DataIdentification \n"},{"result":{"nanos":368306,"millis":0.368306,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":445706,"millis":0.445706,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"c47e4ef8-951e-4765-8d01-29150c12a22d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":326604,"millis":0.326604,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"c47e4ef8-951e-4765-8d01-29150c12a22d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":562.273455,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"c47e4ef8-951e-4765-8d01-29150c12a22d","startTime":1629213724837,"refId":"[1.199:67]","endTime":1629213725401,"exampleData":{"datasetIdentifierCode":"c47e4ef8-951e-4765-8d01-29150c12a22d"},"exampleIndex":198},{"sectionIndex":0,"stepResults":[{"result":{"nanos":43600,"millis":0.0436,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:05.154 karate.env system property was: null \n"},{"result":{"nanos":36700,"millis":0.0367,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":109502,"millis":0.109502,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":91901,"millis":0.091901,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":254503,"millis":0.254503,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":92202,"millis":0.092202,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":365305,"millis":0.365305,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":68701,"millis":0.068701,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":96002,"millis":0.096002,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":153202,"millis":0.153202,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":122402,"millis":0.122402,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":33701,"millis":0.033701,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":27200,"millis":0.0272,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":11101,"millis":0.011101,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":10300,"millis":0.0103,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":10800,"millis":0.0108,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '15c3c30f-0db2-4b3b-80f6-b990c8fc8225'"}},{"result":{"nanos":10200,"millis":0.0102,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":9601,"millis":0.009601,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":613336098,"millis":613.336098,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1300,"millis":0.0013,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":462507,"millis":0.462507,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '15c3c30f-0db2-4b3b-80f6-b990c8fc8225'"}},{"result":{"nanos":370705,"millis":0.370705,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":359205,"millis":0.359205,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":333405,"millis":0.333405,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":372505,"millis":0.372505,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":332704,"millis":0.332704,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":35400,"millis":0.0354,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":255304,"millis":0.255304,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":249104,"millis":0.249104,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":267604,"millis":0.267604,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":71801,"millis":0.071801,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":278204,"millis":0.278204,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:05.773 [print] https:\/\/service.pdok.nl\/hwh\/hydrografie\/atom\/v1_0\/index.xml \n"},{"result":{"nanos":291204,"millis":0.291204,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":108601,"millis":0.108601,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:05.774 [print] INSPIRE Atom \n"},{"result":{"nanos":286804,"millis":0.286804,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":72201,"millis":0.072201,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:05.774 [print] #notpresent \n"},{"result":{"nanos":22600,"millis":0.0226,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":35301,"millis":0.035301,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:05.774 [print] INSPIRE Atom \n"},{"result":{"nanos":343505,"millis":0.343505,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":71901,"millis":0.071901,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:05.775 [print] Beheer PDOK \n"},{"result":{"nanos":49101,"millis":0.049101,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:05.775 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=07575774-57a1-4419-bab4-6c88fdeb02b2#MD_DataIdentification \n"},{"result":{"nanos":339405,"millis":0.339405,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":1211118,"millis":1.211118,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"15c3c30f-0db2-4b3b-80f6-b990c8fc8225\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":413506,"millis":0.413506,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"15c3c30f-0db2-4b3b-80f6-b990c8fc8225\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":621.518016,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"15c3c30f-0db2-4b3b-80f6-b990c8fc8225","startTime":1629213725154,"refId":"[1.200:67]","endTime":1629213725777,"exampleData":{"datasetIdentifierCode":"15c3c30f-0db2-4b3b-80f6-b990c8fc8225"},"exampleIndex":199},{"sectionIndex":0,"stepResults":[{"result":{"nanos":61101,"millis":0.061101,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:05.202 karate.env system property was: null \n"},{"result":{"nanos":38901,"millis":0.038901,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":116202,"millis":0.116202,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":95701,"millis":0.095701,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":287704,"millis":0.287704,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":91601,"millis":0.091601,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":378206,"millis":0.378206,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":68701,"millis":0.068701,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":120402,"millis":0.120402,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":177202,"millis":0.177202,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":141802,"millis":0.141802,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":35800,"millis":0.0358,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":28701,"millis":0.028701,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":11600,"millis":0.0116,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":9900,"millis":0.0099,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":10001,"millis":0.010001,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '243c6401-9ed1-4cdd-b9a7-caff08813ce4'"}},{"result":{"nanos":27901,"millis":0.027901,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":12100,"millis":0.0121,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":635331717,"millis":635.331717,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1600,"millis":0.0016,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":403705,"millis":0.403705,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '243c6401-9ed1-4cdd-b9a7-caff08813ce4'"}},{"result":{"nanos":342205,"millis":0.342205,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":302504,"millis":0.302504,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":317105,"millis":0.317105,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":356605,"millis":0.356605,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":327805,"millis":0.327805,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":24001,"millis":0.024001,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":249403,"millis":0.249403,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":244404,"millis":0.244404,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":252504,"millis":0.252504,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":54401,"millis":0.054401,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":96801,"millis":0.096801,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:05.843 [print] https:\/\/inspire.caris.nl\/atom\/maritieme-grenzen-zones-noordzee-EEZ-volgens-UNCLOS-feed.atom \n"},{"result":{"nanos":266904,"millis":0.266904,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":101302,"millis":0.101302,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:05.843 [print] #notpresent \n"},{"result":{"nanos":364905,"millis":0.364905,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":75901,"millis":0.075901,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:05.843 [print] INSPIRE Atom \n"},{"result":{"nanos":22900,"millis":0.0229,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":56001,"millis":0.056001,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:05.844 [print] #notpresent \n"},{"result":{"nanos":331905,"millis":0.331905,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":65201,"millis":0.065201,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:05.844 [print] Ministerie van Defensie, Koninklijke Marine, Dienst der Hydrografie \n"},{"result":{"nanos":34201,"millis":0.034201,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:05.844 [print] https:\/\/www.nationaalgeoregister.nl:443\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=e8b84fae-00b3-49c1-80c1-df8f69f64e8c#MD_DataIdentification \n"},{"result":{"nanos":332405,"millis":0.332405,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":504807,"millis":0.504807,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"243c6401-9ed1-4cdd-b9a7-caff08813ce4\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":289604,"millis":0.289604,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"243c6401-9ed1-4cdd-b9a7-caff08813ce4\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":642.464322,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"243c6401-9ed1-4cdd-b9a7-caff08813ce4","startTime":1629213725200,"refId":"[1.201:67]","endTime":1629213725845,"exampleData":{"datasetIdentifierCode":"243c6401-9ed1-4cdd-b9a7-caff08813ce4"},"exampleIndex":200},{"sectionIndex":0,"stepResults":[{"result":{"nanos":51901,"millis":0.051901,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:05.319 karate.env system property was: null \n"},{"result":{"nanos":39201,"millis":0.039201,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":113302,"millis":0.113302,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":92101,"millis":0.092101,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":254604,"millis":0.254604,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":93601,"millis":0.093601,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":366305,"millis":0.366305,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":70401,"millis":0.070401,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":287804,"millis":0.287804,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":210204,"millis":0.210204,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":133602,"millis":0.133602,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":37700,"millis":0.0377,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":29401,"millis":0.029401,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":11200,"millis":0.0112,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":9900,"millis":0.0099,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":10101,"millis":0.010101,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '1ff0035a-acc0-4a67-a76c-3b79646b4eef'"}},{"result":{"nanos":11300,"millis":0.0113,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":9200,"millis":0.0092,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":547704646,"millis":547.704646,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1000,"millis":0.001,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":313005,"millis":0.313005,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '1ff0035a-acc0-4a67-a76c-3b79646b4eef'"}},{"result":{"nanos":334105,"millis":0.334105,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":299904,"millis":0.299904,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":315004,"millis":0.315004,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":338005,"millis":0.338005,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":310205,"millis":0.310205,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":18000,"millis":0.018,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":255604,"millis":0.255604,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":264004,"millis":0.264004,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":239804,"millis":0.239804,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":342405,"millis":0.342405,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":287504,"millis":0.287504,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:05.873 [print] https:\/\/inspire.caris.nl\/server\/services\/ows\/view\/map\/amplitude-getij_IVS?request=GetCapabilities&service=WMS&version=1.3.0 \n"},{"result":{"nanos":271304,"millis":0.271304,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":78001,"millis":0.078001,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:05.873 [print] OGC:WMS \n"},{"result":{"nanos":306004,"millis":0.306004,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":212903,"millis":0.212903,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:05.874 [print] #notpresent \n"},{"result":{"nanos":25700,"millis":0.0257,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":180303,"millis":0.180303,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:05.874 [print] OGC:WMS \n"},{"result":{"nanos":329605,"millis":0.329605,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":309404,"millis":0.309404,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:05.874 [print] Ministerie van Defensie, Koninklijke Marine, Dienst der Hydrografie \n"},{"result":{"nanos":409506,"millis":0.409506,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:05.875 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=be6551de-a709-4c6d-a5e2-f63f0cf038ba&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full#MD_DataIdentification \n"},{"result":{"nanos":317905,"millis":0.317905,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":388606,"millis":0.388606,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"1ff0035a-acc0-4a67-a76c-3b79646b4eef\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":270204,"millis":0.270204,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"1ff0035a-acc0-4a67-a76c-3b79646b4eef\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":555.954468,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"1ff0035a-acc0-4a67-a76c-3b79646b4eef","startTime":1629213725319,"refId":"[1.202:67]","endTime":1629213725876,"exampleData":{"datasetIdentifierCode":"1ff0035a-acc0-4a67-a76c-3b79646b4eef"},"exampleIndex":201},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14700,"millis":0.0147,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:05.404 karate.env system property was: null \n"},{"result":{"nanos":27300,"millis":0.0273,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":49101,"millis":0.049101,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":39600,"millis":0.0396,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":223403,"millis":0.223403,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":33000,"millis":0.033,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":351205,"millis":0.351205,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":24500,"millis":0.0245,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":424606,"millis":0.424606,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":152302,"millis":0.152302,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":59801,"millis":0.059801,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":15600,"millis":0.0156,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18000,"millis":0.018,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":35900,"millis":0.0359,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '01572637-b851-4cc3-b06a-56c1ae1115cc'"}},{"result":{"nanos":4101,"millis":0.004101,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":539570428,"millis":539.570428,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1900,"millis":0.0019,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":495207,"millis":0.495207,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '01572637-b851-4cc3-b06a-56c1ae1115cc'"}},{"result":{"nanos":480907,"millis":0.480907,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":418906,"millis":0.418906,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":416506,"millis":0.416506,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":449407,"millis":0.449407,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":412706,"millis":0.412706,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":29701,"millis":0.029701,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":362105,"millis":0.362105,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":316405,"millis":0.316405,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":364005,"millis":0.364005,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":61501,"millis":0.061501,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":97701,"millis":0.097701,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:05.949 [print] https:\\\/\\\/inspire.rivm.nl\\\/geoserver\\\/wfs?request=GetCapabilities \n"},{"result":{"nanos":672710,"millis":0.67271,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":312205,"millis":0.312205,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:05.950 [print] OGC:WFS \n"},{"result":{"nanos":347705,"millis":0.347705,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":60601,"millis":0.060601,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:05.951 [print] INSPIRE Atom \n"},{"result":{"nanos":217603,"millis":0.217603,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":75302,"millis":0.075302,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:05.951 [print] OGC:WFS \n"},{"result":{"nanos":472607,"millis":0.472607,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":52601,"millis":0.052601,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:05.951 [print] Rijksinstituut voor Volksgezondheid en Milieu \n"},{"result":{"nanos":212503,"millis":0.212503,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:05.952 [print] http:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=d9baa847-4652-4588-abe1-0b050f40f27f#MD_DataIdentification \n"},{"result":{"nanos":421806,"millis":0.421806,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":464706,"millis":0.464706,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"01572637-b851-4cc3-b06a-56c1ae1115cc\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":281405,"millis":0.281405,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"01572637-b851-4cc3-b06a-56c1ae1115cc\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":548.555758,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"01572637-b851-4cc3-b06a-56c1ae1115cc","startTime":1629213725403,"refId":"[1.203:67]","endTime":1629213725953,"exampleData":{"datasetIdentifierCode":"01572637-b851-4cc3-b06a-56c1ae1115cc"},"exampleIndex":202},{"sectionIndex":0,"stepResults":[{"result":{"nanos":20901,"millis":0.020901,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:05.779 karate.env system property was: null \n"},{"result":{"nanos":35100,"millis":0.0351,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":59001,"millis":0.059001,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":42801,"millis":0.042801,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":237604,"millis":0.237604,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":38400,"millis":0.0384,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":390506,"millis":0.390506,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":28501,"millis":0.028501,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":48201,"millis":0.048201,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":116901,"millis":0.116901,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":72601,"millis":0.072601,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":14300,"millis":0.0143,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20201,"millis":0.020201,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5700,"millis":0.0057,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":57801,"millis":0.057801,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '30f65c89-2246-49f8-8b50-0f1140d6f2aa'"}},{"result":{"nanos":5400,"millis":0.0054,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":547335345,"millis":547.335345,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2100,"millis":0.0021,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":544808,"millis":0.544808,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '30f65c89-2246-49f8-8b50-0f1140d6f2aa'"}},{"result":{"nanos":500707,"millis":0.500707,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":488907,"millis":0.488907,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":452907,"millis":0.452907,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":518307,"millis":0.518307,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":481507,"millis":0.481507,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":22500,"millis":0.0225,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":331405,"millis":0.331405,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":342305,"millis":0.342305,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":368406,"millis":0.368406,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":62401,"millis":0.062401,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":115301,"millis":0.115301,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:06.332 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/inspire\\\/hy-p\\\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":384205,"millis":0.384205,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":99602,"millis":0.099602,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:06.333 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":368305,"millis":0.368305,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":135402,"millis":0.135402,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:06.333 [print] #notpresent \n"},{"result":{"nanos":44600,"millis":0.0446,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":61100,"millis":0.0611,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:06.333 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":599808,"millis":0.599808,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":68401,"millis":0.068401,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:06.334 [print] Beheer PDOK \n"},{"result":{"nanos":55700,"millis":0.0557,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:06.334 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=1c3afc74-cc34-44b7-938a-963e2350795a#MD_DataIdentification \n"},{"result":{"nanos":523507,"millis":0.523507,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":536308,"millis":0.536308,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"30f65c89-2246-49f8-8b50-0f1140d6f2aa\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":342505,"millis":0.342505,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"30f65c89-2246-49f8-8b50-0f1140d6f2aa\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":555.989968,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"30f65c89-2246-49f8-8b50-0f1140d6f2aa","startTime":1629213725778,"refId":"[1.204:67]","endTime":1629213726336,"exampleData":{"datasetIdentifierCode":"30f65c89-2246-49f8-8b50-0f1140d6f2aa"},"exampleIndex":203},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14801,"millis":0.014801,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:05.847 karate.env system property was: null \n"},{"result":{"nanos":25700,"millis":0.0257,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":44001,"millis":0.044001,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":38000,"millis":0.038,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":193302,"millis":0.193302,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":31600,"millis":0.0316,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":329505,"millis":0.329505,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":23100,"millis":0.0231,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":54901,"millis":0.054901,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":97602,"millis":0.097602,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":47600,"millis":0.0476,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":11300,"millis":0.0113,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18700,"millis":0.0187,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3600,"millis":0.0036,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":36401,"millis":0.036401,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'ff8f6da2-949e-4838-90f6-fd895a4a240f'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3600,"millis":0.0036,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":566116119,"millis":566.116119,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2700,"millis":0.0027,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":458606,"millis":0.458606,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'ff8f6da2-949e-4838-90f6-fd895a4a240f'"}},{"result":{"nanos":425006,"millis":0.425006,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":386506,"millis":0.386506,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":379905,"millis":0.379905,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":438907,"millis":0.438907,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":414806,"millis":0.414806,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":23801,"millis":0.023801,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":306704,"millis":0.306704,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":288705,"millis":0.288705,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":302304,"millis":0.302304,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":71501,"millis":0.071501,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":477006,"millis":0.477006,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:06.419 [print] https:\/\/inspire.rivm.nl\/geoserver\/wfs? \n"},{"result":{"nanos":343705,"millis":0.343705,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":67101,"millis":0.067101,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:06.419 [print] #notpresent \n"},{"result":{"nanos":587608,"millis":0.587608,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":61201,"millis":0.061201,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:06.420 [print] OGC:WFS \n"},{"result":{"nanos":271704,"millis":0.271704,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":132302,"millis":0.132302,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:06.420 [print] #notpresent \n"},{"result":{"nanos":512208,"millis":0.512208,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":61201,"millis":0.061201,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:06.421 [print] RIVM \n"},{"result":{"nanos":242903,"millis":0.242903,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:06.421 [print] http:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/en\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=d24ccb35-e9d2-41bf-b231-43083fc0c76d \n"},{"result":{"nanos":527008,"millis":0.527008,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":518908,"millis":0.518908,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"ff8f6da2-949e-4838-90f6-fd895a4a240f\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":290104,"millis":0.290104,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"ff8f6da2-949e-4838-90f6-fd895a4a240f\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":574.690942,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"ff8f6da2-949e-4838-90f6-fd895a4a240f","startTime":1629213725847,"refId":"[1.205:67]","endTime":1629213726423,"exampleData":{"datasetIdentifierCode":"ff8f6da2-949e-4838-90f6-fd895a4a240f"},"exampleIndex":204},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13000,"millis":0.013,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:05.878 karate.env system property was: null \n"},{"result":{"nanos":24401,"millis":0.024401,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":42100,"millis":0.0421,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":36700,"millis":0.0367,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":180503,"millis":0.180503,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":29500,"millis":0.0295,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":319005,"millis":0.319005,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":22101,"millis":0.022101,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":40600,"millis":0.0406,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":250504,"millis":0.250504,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":48501,"millis":0.048501,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12800,"millis":0.0128,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17600,"millis":0.0176,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":3801,"millis":0.003801,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":36800,"millis":0.0368,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '257b960c-ece6-4e0f-b893-77b219c6133f'"}},{"result":{"nanos":4901,"millis":0.004901,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":576323267,"millis":576.323267,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2700,"millis":0.0027,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":472707,"millis":0.472707,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '257b960c-ece6-4e0f-b893-77b219c6133f'"}},{"result":{"nanos":446706,"millis":0.446706,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":392906,"millis":0.392906,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":416706,"millis":0.416706,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":431706,"millis":0.431706,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":404406,"millis":0.404406,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":23701,"millis":0.023701,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":319004,"millis":0.319004,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":309504,"millis":0.309504,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":317105,"millis":0.317105,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":61401,"millis":0.061401,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":67501,"millis":0.067501,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:06.459 [print] https:\/\/haleconnect.com\/ows\/services\/org.874.cb9ca55e-f4e7-4bd8-a02e-75d528e22118_wfs\/org.874.6f95c52b-e32a-43d5-a057-bac1f7ba2a42?SERVICE=WFS&Request=GetCapabilities \n"},{"result":{"nanos":821612,"millis":0.821612,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":211603,"millis":0.211603,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:06.461 [print] #notpresent \n"},{"result":{"nanos":476506,"millis":0.476506,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":320804,"millis":0.320804,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:06.461 [print] #notpresent \n"},{"result":{"nanos":32101,"millis":0.032101,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":277404,"millis":0.277404,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:06.462 [print] #notpresent \n"},{"result":{"nanos":432507,"millis":0.432507,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":64601,"millis":0.064601,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:06.462 [print] Koninklijk Nederlands Meteorologisch Instituut (KNMI) \n"},{"result":{"nanos":243903,"millis":0.243903,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:06.462 [print] https:\/\/haleconnect.com\/services\/bsp\/org.874.6f95c52b-e32a-43d5-a057-bac1f7ba2a42\/md\/dataset\/dataset1#xpointer%28%2F%2Fgmd%3AidentificationInfo%5B1%5D%2Fgmd%3AMD_DataIdentification%29 \n"},{"result":{"nanos":455307,"millis":0.455307,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":429506,"millis":0.429506,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"257b960c-ece6-4e0f-b893-77b219c6133f\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":266103,"millis":0.266103,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"257b960c-ece6-4e0f-b893-77b219c6133f\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":585.112294,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"257b960c-ece6-4e0f-b893-77b219c6133f","startTime":1629213725878,"refId":"[1.206:67]","endTime":1629213726464,"exampleData":{"datasetIdentifierCode":"257b960c-ece6-4e0f-b893-77b219c6133f"},"exampleIndex":205},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14300,"millis":0.0143,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:05.955 karate.env system property was: null \n"},{"result":{"nanos":24501,"millis":0.024501,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":46600,"millis":0.0466,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":36200,"millis":0.0362,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":191403,"millis":0.191403,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":31201,"millis":0.031201,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":328704,"millis":0.328704,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":23601,"millis":0.023601,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":41401,"millis":0.041401,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":102801,"millis":0.102801,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":50301,"millis":0.050301,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":11300,"millis":0.0113,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":16301,"millis":0.016301,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":36100,"millis":0.0361,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '93c8762c-4cbb-42b0-9b02-89ef902e8880'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":546895441,"millis":546.895441,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1800,"millis":0.0018,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":372105,"millis":0.372105,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '93c8762c-4cbb-42b0-9b02-89ef902e8880'"}},{"result":{"nanos":368506,"millis":0.368506,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":359205,"millis":0.359205,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":346605,"millis":0.346605,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":398306,"millis":0.398306,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":364406,"millis":0.364406,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":20700,"millis":0.0207,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":267604,"millis":0.267604,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":264004,"millis":0.264004,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":327905,"millis":0.327905,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":67601,"millis":0.067601,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":59101,"millis":0.059101,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:06.507 [print] https:\/\/service.pdok.nl\/provincies\/ps\/atom\/v1_0\/index.xml \n"},{"result":{"nanos":592809,"millis":0.592809,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":279104,"millis":0.279104,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:06.508 [print] INSPIRE Atom \n"},{"result":{"nanos":296704,"millis":0.296704,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":51400,"millis":0.0514,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:06.508 [print] #notpresent \n"},{"result":{"nanos":170003,"millis":0.170003,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":163702,"millis":0.163702,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:06.508 [print] INSPIRE Atom \n"},{"result":{"nanos":404705,"millis":0.404705,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":55800,"millis":0.0558,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:06.509 [print] Beheer PDOK \n"},{"result":{"nanos":562508,"millis":0.562508,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:06.510 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=49ab8bee-b467-486a-96ca-b950443c453a#MD_DataIdentification \n"},{"result":{"nanos":361305,"millis":0.361305,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":427307,"millis":0.427307,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"93c8762c-4cbb-42b0-9b02-89ef902e8880\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":304004,"millis":0.304004,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"93c8762c-4cbb-42b0-9b02-89ef902e8880\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":554.753854,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"93c8762c-4cbb-42b0-9b02-89ef902e8880","startTime":1629213725955,"refId":"[1.207:67]","endTime":1629213726511,"exampleData":{"datasetIdentifierCode":"93c8762c-4cbb-42b0-9b02-89ef902e8880"},"exampleIndex":206},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16400,"millis":0.0164,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:06.338 karate.env system property was: null \n"},{"result":{"nanos":138602,"millis":0.138602,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":54000,"millis":0.054,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":42300,"millis":0.0423,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":223604,"millis":0.223604,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":35200,"millis":0.0352,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":388806,"millis":0.388806,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":28601,"millis":0.028601,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":46400,"millis":0.0464,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":118202,"millis":0.118202,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":56701,"millis":0.056701,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12800,"millis":0.0128,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20701,"millis":0.020701,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":7200,"millis":0.0072,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":55501,"millis":0.055501,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '1d568785-efdd-429d-b491-56f785c3656a'"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":532080126,"millis":532.080126,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1300,"millis":0.0013,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":546708,"millis":0.546708,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '1d568785-efdd-429d-b491-56f785c3656a'"}},{"result":{"nanos":445006,"millis":0.445006,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":390006,"millis":0.390006,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":431106,"millis":0.431106,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":442107,"millis":0.442107,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":390306,"millis":0.390306,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":19800,"millis":0.0198,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":298205,"millis":0.298205,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":284904,"millis":0.284904,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":281704,"millis":0.281704,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":59101,"millis":0.059101,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":905013,"millis":0.905013,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:06.875 [print] https:\/\/geodata.nationaalgeoregister.nl\/inspire\/au\/wfs?request=GetCapabilities&service=wfs \n"},{"result":{"nanos":337304,"millis":0.337304,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":64601,"millis":0.064601,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:06.876 [print] OGC:WFS \n"},{"result":{"nanos":486207,"millis":0.486207,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":57701,"millis":0.057701,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:06.877 [print] #notpresent \n"},{"result":{"nanos":22500,"millis":0.0225,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":20801,"millis":0.020801,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:06.877 [print] OGC:WFS \n"},{"result":{"nanos":661409,"millis":0.661409,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":56701,"millis":0.056701,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:06.878 [print] Beheer PDOK \n"},{"result":{"nanos":144502,"millis":0.144502,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:06.878 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=7dd1fd45-ace5-41e0-93a6-64e3be231717#MD_DataIdentification \n"},{"result":{"nanos":482207,"millis":0.482207,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":537408,"millis":0.537408,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"1d568785-efdd-429d-b491-56f785c3656a\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":305305,"millis":0.305305,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"1d568785-efdd-429d-b491-56f785c3656a\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":541.010956,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"1d568785-efdd-429d-b491-56f785c3656a","startTime":1629213726337,"refId":"[1.208:67]","endTime":1629213726879,"exampleData":{"datasetIdentifierCode":"1d568785-efdd-429d-b491-56f785c3656a"},"exampleIndex":207},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13900,"millis":0.0139,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:06.424 karate.env system property was: null \n"},{"result":{"nanos":25401,"millis":0.025401,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":45901,"millis":0.045901,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":35300,"millis":0.0353,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":225304,"millis":0.225304,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":41500,"millis":0.0415,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":328105,"millis":0.328105,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":22601,"millis":0.022601,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":40600,"millis":0.0406,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":298305,"millis":0.298305,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":60001,"millis":0.060001,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":24400,"millis":0.0244,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":16201,"millis":0.016201,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":36500,"millis":0.0365,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'd415c10a-8dbf-4c01-8061-4689e5db38ac'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3500,"millis":0.0035,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":567036234,"millis":567.036234,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1900,"millis":0.0019,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":633109,"millis":0.633109,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'd415c10a-8dbf-4c01-8061-4689e5db38ac'"}},{"result":{"nanos":559408,"millis":0.559408,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":609409,"millis":0.609409,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":463807,"millis":0.463807,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":485207,"millis":0.485207,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":448107,"millis":0.448107,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":20700,"millis":0.0207,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":379906,"millis":0.379906,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":364105,"millis":0.364105,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":353006,"millis":0.353006,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":62701,"millis":0.062701,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":106501,"millis":0.106501,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:06.998 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/ecotopen\\\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":352606,"millis":0.352606,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":97501,"millis":0.097501,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:06.998 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":346305,"millis":0.346305,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":72302,"millis":0.072302,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:06.999 [print] #notpresent \n"},{"result":{"nanos":23200,"millis":0.0232,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":35401,"millis":0.035401,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:06.999 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":443306,"millis":0.443306,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":74801,"millis":0.074801,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:06.999 [print] Beheer PDOK \n"},{"result":{"nanos":166203,"millis":0.166203,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:07.000 [print] [\"https:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=78d31ab4-4116-45b7-bcf5-e14960916b0f#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=2220c0dd-3720-4e39-a130-171531c1e694#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=b250f3a4-ed78-4c85-8cd5-f1af43841c6e#MD_DataIdentification\"] \n"},{"result":{"nanos":442206,"millis":0.442206,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":545607,"millis":0.545607,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"d415c10a-8dbf-4c01-8061-4689e5db38ac\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":353805,"millis":0.353805,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"d415c10a-8dbf-4c01-8061-4689e5db38ac\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":575.707462,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"d415c10a-8dbf-4c01-8061-4689e5db38ac","startTime":1629213726424,"refId":"[1.209:67]","endTime":1629213727001,"exampleData":{"datasetIdentifierCode":"d415c10a-8dbf-4c01-8061-4689e5db38ac"},"exampleIndex":208},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13000,"millis":0.013,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:06.465 karate.env system property was: null \n"},{"result":{"nanos":24101,"millis":0.024101,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":42801,"millis":0.042801,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":36000,"millis":0.036,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":200203,"millis":0.200203,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":32001,"millis":0.032001,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":320105,"millis":0.320105,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":23100,"millis":0.0231,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":41801,"millis":0.041801,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":318104,"millis":0.318104,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":60500,"millis":0.0605,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13101,"millis":0.013101,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":16700,"millis":0.0167,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3700,"millis":0.0037,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":34901,"millis":0.034901,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '641a0f48-872b-4470-b130-e3d28e6bfdfb'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":550707597,"millis":550.707597,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1400,"millis":0.0014,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":386406,"millis":0.386406,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '641a0f48-872b-4470-b130-e3d28e6bfdfb'"}},{"result":{"nanos":422106,"millis":0.422106,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":395505,"millis":0.395505,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":402505,"millis":0.402505,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":450006,"millis":0.450006,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":444007,"millis":0.444007,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":29100,"millis":0.0291,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":311004,"millis":0.311004,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":298505,"millis":0.298505,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":336105,"millis":0.336105,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":54801,"millis":0.054801,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":360905,"millis":0.360905,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:07.022 [print] https:\/\/geodata.nationaalgeoregister.nl\/rws\/kaderrichtlijnmarienestrategie2018\/atom\/v1_0\/index.xml \n"},{"result":{"nanos":392906,"millis":0.392906,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":962414,"millis":0.962414,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:07.023 [print] #notpresent \n"},{"result":{"nanos":358706,"millis":0.358706,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":224503,"millis":0.224503,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:07.024 [print] INSPIRE Atom \n"},{"result":{"nanos":30101,"millis":0.030101,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":175602,"millis":0.175602,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:07.024 [print] #notpresent \n"},{"result":{"nanos":1326720,"millis":1.32672,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":95501,"millis":0.095501,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:07.026 [print] Beheer PDOK \n"},{"result":{"nanos":191403,"millis":0.191403,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:07.026 [print] [\"https:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=krm-a905-9d8e-4758-83fa-28b057f185e3#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=krm-a905-9d8e-4758-83fa-28b057f185e4#MD_DataIdentification\"] \n"},{"result":{"nanos":422006,"millis":0.422006,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":469206,"millis":0.469206,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"641a0f48-872b-4470-b130-e3d28e6bfdfb\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":476907,"millis":0.476907,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"641a0f48-872b-4470-b130-e3d28e6bfdfb\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":560.918945,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"641a0f48-872b-4470-b130-e3d28e6bfdfb","startTime":1629213726465,"refId":"[1.210:67]","endTime":1629213727027,"exampleData":{"datasetIdentifierCode":"641a0f48-872b-4470-b130-e3d28e6bfdfb"},"exampleIndex":209},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14000,"millis":0.014,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:06.513 karate.env system property was: null \n"},{"result":{"nanos":23901,"millis":0.023901,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":70201,"millis":0.070201,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":37500,"millis":0.0375,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":195202,"millis":0.195202,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":33600,"millis":0.0336,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":404706,"millis":0.404706,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":29201,"millis":0.029201,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":190203,"millis":0.190203,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":101801,"millis":0.101801,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":51201,"millis":0.051201,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12800,"millis":0.0128,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":25300,"millis":0.0253,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":67101,"millis":0.067101,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'b81f9ce3-f612-4761-ba37-4c8afda9033a'"}},{"result":{"nanos":4701,"millis":0.004701,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3400,"millis":0.0034,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":574064936,"millis":574.064936,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1400,"millis":0.0014,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":523108,"millis":0.523108,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'b81f9ce3-f612-4761-ba37-4c8afda9033a'"}},{"result":{"nanos":498707,"millis":0.498707,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":548608,"millis":0.548608,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":506307,"millis":0.506307,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":484807,"millis":0.484807,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":444407,"millis":0.444407,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":35501,"millis":0.035501,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":528907,"millis":0.528907,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":374605,"millis":0.374605,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":352805,"millis":0.352805,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":65301,"millis":0.065301,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":134802,"millis":0.134802,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:07.093 [print] https:\/\/haleconnect.com\/ows\/services\/org.874.cb9ca55e-f4e7-4bd8-a02e-75d528e22118_wms\/org.874.6f95c52b-e32a-43d5-a057-bac1f7ba2a42?SERVICE=WMS&Request=GetCapabilities \n"},{"result":{"nanos":364005,"millis":0.364005,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":130702,"millis":0.130702,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:07.094 [print] #notpresent \n"},{"result":{"nanos":361406,"millis":0.361406,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":68501,"millis":0.068501,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:07.094 [print] #notpresent \n"},{"result":{"nanos":36400,"millis":0.0364,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":37800,"millis":0.0378,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:07.094 [print] #notpresent \n"},{"result":{"nanos":441407,"millis":0.441407,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":83401,"millis":0.083401,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:07.095 [print] Koninklijk Nederlands Meteorologisch Instituut (KNMI) \n"},{"result":{"nanos":276904,"millis":0.276904,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:07.095 [print] https:\/\/haleconnect.com\/services\/bsp\/org.874.6f95c52b-e32a-43d5-a057-bac1f7ba2a42\/md\/dataset\/dataset1#xpointer%28%2F%2Fgmd%3AidentificationInfo%5B1%5D%2Fgmd%3AMD_DataIdentification%29 \n"},{"result":{"nanos":538107,"millis":0.538107,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":531007,"millis":0.531007,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"b81f9ce3-f612-4761-ba37-4c8afda9033a\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":461406,"millis":0.461406,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"b81f9ce3-f612-4761-ba37-4c8afda9033a\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":583.168865,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"b81f9ce3-f612-4761-ba37-4c8afda9033a","startTime":1629213726512,"refId":"[1.211:67]","endTime":1629213727097,"exampleData":{"datasetIdentifierCode":"b81f9ce3-f612-4761-ba37-4c8afda9033a"},"exampleIndex":210},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13600,"millis":0.0136,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:06.881 karate.env system property was: null \n"},{"result":{"nanos":25700,"millis":0.0257,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":44901,"millis":0.044901,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":39000,"millis":0.039,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":195403,"millis":0.195403,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":30401,"millis":0.030401,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":351505,"millis":0.351505,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":24500,"millis":0.0245,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":66201,"millis":0.066201,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":99501,"millis":0.099501,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":46901,"millis":0.046901,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12500,"millis":0.0125,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":16200,"millis":0.0162,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":39800,"millis":0.0398,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '40f04047-3b61-40eb-b026-c1a0caa71881'"}},{"result":{"nanos":3600,"millis":0.0036,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":534688064,"millis":534.688064,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":3100,"millis":0.0031,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":744810,"millis":0.74481,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '40f04047-3b61-40eb-b026-c1a0caa71881'"}},{"result":{"nanos":707710,"millis":0.70771,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":664110,"millis":0.66411,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":647809,"millis":0.647809,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":716710,"millis":0.71671,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":701610,"millis":0.70161,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":26600,"millis":0.0266,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":480507,"millis":0.480507,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":478207,"millis":0.478207,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":488308,"millis":0.488308,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":74101,"millis":0.074101,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":162402,"millis":0.162402,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:07.423 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/reststromen\\\/wfs?request=GetCapabilities&service=wfs \n"},{"result":{"nanos":855112,"millis":0.855112,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":128102,"millis":0.128102,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:07.424 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":445807,"millis":0.445807,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":72201,"millis":0.072201,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:07.425 [print] #notpresent \n"},{"result":{"nanos":21400,"millis":0.0214,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":51901,"millis":0.051901,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:07.425 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":592409,"millis":0.592409,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":83001,"millis":0.083001,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:07.426 [print] Beheer PDOK \n"},{"result":{"nanos":85302,"millis":0.085302,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:07.426 [print] [\"http:\\\/\\\/nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementsetname=full&id=11d83e36-fd0d-46bc-838c-0567c5dfdb19#MD_DataIdentification\",\"http:\\\/\\\/nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementsetname=full&id=34dacd72-d2fb-4e28-844d-73d3b9c3fef2#MD_DataIdentification\",\"http:\\\/\\\/nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementsetname=full&id=419b85e5-04ee-4cc9-b910-bc58594a943a#MD_DataIdentification\",\"http:\\\/\\\/nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementsetname=full&id=119f7512-a71e-4d1a-82e7-7a2b63f9338b#MD_DataIdentification\",\"http:\\\/\\\/nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementsetname=full&id=6ea55ec4-f312-40ef-9935-68806e61b496#MD_DataIdentification\",\"http:\\\/\\\/nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementsetname=full&id=af784610-df36-4d40-bac0-23d8e728999f#MD_DataIdentification\",\"http:\\\/\\\/nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementsetname=full&id=24eb504e-f5f3-4ecf-b760-cc5630e82a57#MD_DataIdentification\"] \n"},{"result":{"nanos":571208,"millis":0.571208,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":572008,"millis":0.572008,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"40f04047-3b61-40eb-b026-c1a0caa71881\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":357805,"millis":0.357805,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"40f04047-3b61-40eb-b026-c1a0caa71881\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":545.442917,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"40f04047-3b61-40eb-b026-c1a0caa71881","startTime":1629213726881,"refId":"[1.212:67]","endTime":1629213727427,"exampleData":{"datasetIdentifierCode":"40f04047-3b61-40eb-b026-c1a0caa71881"},"exampleIndex":211},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13901,"millis":0.013901,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:07.003 karate.env system property was: null \n"},{"result":{"nanos":25400,"millis":0.0254,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":48501,"millis":0.048501,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":37001,"millis":0.037001,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":212503,"millis":0.212503,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":30300,"millis":0.0303,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":354905,"millis":0.354905,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":25000,"millis":0.025,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":44801,"millis":0.044801,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":105401,"millis":0.105401,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":50000,"millis":0.05,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":11901,"millis":0.011901,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19700,"millis":0.0197,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3700,"millis":0.0037,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":39501,"millis":0.039501,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '6ff5af41-4cb0-406a-a77c-a4cf4223cbc7'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3500,"millis":0.0035,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":549232376,"millis":549.232376,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2300,"millis":0.0023,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":561308,"millis":0.561308,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '6ff5af41-4cb0-406a-a77c-a4cf4223cbc7'"}},{"result":{"nanos":542708,"millis":0.542708,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":501907,"millis":0.501907,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":489307,"millis":0.489307,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":546808,"millis":0.546808,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":508007,"millis":0.508007,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":34101,"millis":0.034101,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":312204,"millis":0.312204,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":323104,"millis":0.323104,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":320305,"millis":0.320305,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":57301,"millis":0.057301,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":121802,"millis":0.121802,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:07.558 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/wijkenbuurten2016\\\/wfs?request=GetCapabilities&service=wfs \n"},{"result":{"nanos":807612,"millis":0.807612,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":113602,"millis":0.113602,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:07.559 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":548908,"millis":0.548908,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":63701,"millis":0.063701,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:07.560 [print] #notpresent \n"},{"result":{"nanos":153902,"millis":0.153902,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":75101,"millis":0.075101,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:07.560 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":651410,"millis":0.65141,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":68501,"millis":0.068501,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:07.561 [print] Beheer PDOK \n"},{"result":{"nanos":207903,"millis":0.207903,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:07.561 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=6cde2ce7-3ecd-4785-b7b8-d62c3381efe9#MD_DataIdentification \n"},{"result":{"nanos":500707,"millis":0.500707,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":488108,"millis":0.488108,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"6ff5af41-4cb0-406a-a77c-a4cf4223cbc7\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":286604,"millis":0.286604,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"6ff5af41-4cb0-406a-a77c-a4cf4223cbc7\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":558.554912,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"6ff5af41-4cb0-406a-a77c-a4cf4223cbc7","startTime":1629213727003,"refId":"[1.213:67]","endTime":1629213727562,"exampleData":{"datasetIdentifierCode":"6ff5af41-4cb0-406a-a77c-a4cf4223cbc7"},"exampleIndex":212},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15700,"millis":0.0157,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:07.029 karate.env system property was: null \n"},{"result":{"nanos":36900,"millis":0.0369,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":55001,"millis":0.055001,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":40201,"millis":0.040201,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":201803,"millis":0.201803,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":30901,"millis":0.030901,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":355005,"millis":0.355005,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":25600,"millis":0.0256,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":45901,"millis":0.045901,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":265904,"millis":0.265904,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":64201,"millis":0.064201,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":14200,"millis":0.0142,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17900,"millis":0.0179,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":39601,"millis":0.039601,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '03c48a93-1e31-4c69-92c6-9a7efecf67a9'"}},{"result":{"nanos":5400,"millis":0.0054,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":558301507,"millis":558.301507,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1400,"millis":0.0014,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":372805,"millis":0.372805,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '03c48a93-1e31-4c69-92c6-9a7efecf67a9'"}},{"result":{"nanos":375105,"millis":0.375105,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":353005,"millis":0.353005,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":335205,"millis":0.335205,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":372705,"millis":0.372705,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":359405,"millis":0.359405,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":21901,"millis":0.021901,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":276204,"millis":0.276204,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":278804,"millis":0.278804,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":270604,"millis":0.270604,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":89602,"millis":0.089602,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":95201,"millis":0.095201,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:07.593 [print] https:\/\/geodata.nationaalgeoregister.nl\/digitaaltopografischbestand\/wfs?request=GetCapabilities&service=WFS \n"},{"result":{"nanos":317304,"millis":0.317304,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":92202,"millis":0.092202,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:07.593 [print] OGC:WFS \n"},{"result":{"nanos":326005,"millis":0.326005,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":78301,"millis":0.078301,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:07.593 [print] #notpresent \n"},{"result":{"nanos":27900,"millis":0.0279,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":47201,"millis":0.047201,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:07.593 [print] OGC:WFS \n"},{"result":{"nanos":385706,"millis":0.385706,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":88901,"millis":0.088901,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:07.594 [print] Beheer PDOK \n"},{"result":{"nanos":51001,"millis":0.051001,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:07.594 [print] [\"https:\\\/\\\/nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?SERVICE=CSW&version=2.0.2&REQUEST=GetRecordById&ID=c4b137b8-2317-42c2-aced-204c4216d68d&OUTPUTSCHEMA=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&ELEMENTSETNAME=full#MD_DataIdentification\",\"https:\\\/\\\/nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?SERVICE=CSW&version=2.0.2&REQUEST=GetRecordById&ID=c4bed072-0fda-47b8-96fa-457a938b88fc&OUTPUTSCHEMA=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&ELEMENTSETNAME=full#MD_DataIdentification\",\"https:\\\/\\\/nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?SERVICE=CSW&version=2.0.2&REQUEST=GetRecordById&ID=3229e4d7-4bcd-4b94-819d-8e62de69ce2e&OUTPUTSCHEMA=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&ELEMENTSETNAME=full#MD_DataIdentification\"] \n"},{"result":{"nanos":369906,"millis":0.369906,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":505607,"millis":0.505607,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"03c48a93-1e31-4c69-92c6-9a7efecf67a9\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":346305,"millis":0.346305,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"03c48a93-1e31-4c69-92c6-9a7efecf67a9\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":565.36701,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"03c48a93-1e31-4c69-92c6-9a7efecf67a9","startTime":1629213727029,"refId":"[1.214:67]","endTime":1629213727595,"exampleData":{"datasetIdentifierCode":"03c48a93-1e31-4c69-92c6-9a7efecf67a9"},"exampleIndex":213},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14700,"millis":0.0147,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:07.102 karate.env system property was: null \n"},{"result":{"nanos":25500,"millis":0.0255,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":45401,"millis":0.045401,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":38401,"millis":0.038401,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":196703,"millis":0.196703,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":30500,"millis":0.0305,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":345605,"millis":0.345605,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":26101,"millis":0.026101,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":185103,"millis":0.185103,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":111201,"millis":0.111201,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":47701,"millis":0.047701,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13800,"millis":0.0138,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20000,"millis":0.02,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":43901,"millis":0.043901,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'c78a99eb-9ba3-4307-a21b-2a64ad5da039'"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3600,"millis":0.0036,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":544378905,"millis":544.378905,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2000,"millis":0.002,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":441306,"millis":0.441306,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'c78a99eb-9ba3-4307-a21b-2a64ad5da039'"}},{"result":{"nanos":427906,"millis":0.427906,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":382405,"millis":0.382405,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":361806,"millis":0.361806,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":412706,"millis":0.412706,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":401206,"millis":0.401206,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":20700,"millis":0.0207,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":296105,"millis":0.296105,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":281804,"millis":0.281804,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":287104,"millis":0.287104,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":56901,"millis":0.056901,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":706810,"millis":0.70681,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:07.653 [print] https:\/\/geodata.nationaalgeoregister.nl\/mosselzaadinvanginstallaties\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":1036815,"millis":1.036815,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":422406,"millis":0.422406,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:07.654 [print] OGC:WMS \n"},{"result":{"nanos":327605,"millis":0.327605,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":419406,"millis":0.419406,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:07.654 [print] #notpresent \n"},{"result":{"nanos":32001,"millis":0.032001,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":378705,"millis":0.378705,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:07.655 [print] OGC:WMS \n"},{"result":{"nanos":403505,"millis":0.403505,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":405405,"millis":0.405405,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:07.656 [print] Beheer PDOK \n"},{"result":{"nanos":883512,"millis":0.883512,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:07.656 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=a04afee4-47d5-45b7-b7a0-a6f86106af11#MD_DataIdentification \n"},{"result":{"nanos":413606,"millis":0.413606,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":460506,"millis":0.460506,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"c78a99eb-9ba3-4307-a21b-2a64ad5da039\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":288304,"millis":0.288304,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"c78a99eb-9ba3-4307-a21b-2a64ad5da039\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":555.091457,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"c78a99eb-9ba3-4307-a21b-2a64ad5da039","startTime":1629213727099,"refId":"[1.215:67]","endTime":1629213727658,"exampleData":{"datasetIdentifierCode":"c78a99eb-9ba3-4307-a21b-2a64ad5da039"},"exampleIndex":214},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13600,"millis":0.0136,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:07.429 karate.env system property was: null \n"},{"result":{"nanos":24401,"millis":0.024401,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":44800,"millis":0.0448,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":36700,"millis":0.0367,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":226603,"millis":0.226603,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":30400,"millis":0.0304,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":322205,"millis":0.322205,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":25000,"millis":0.025,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":55901,"millis":0.055901,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":102102,"millis":0.102102,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":47701,"millis":0.047701,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12100,"millis":0.0121,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17400,"millis":0.0174,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3700,"millis":0.0037,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":37400,"millis":0.0374,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'cb13a608-3d78-4f79-ba60-be63ccd6e268'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3700,"millis":0.0037,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":541200659,"millis":541.200659,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1300,"millis":0.0013,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":530907,"millis":0.530907,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'cb13a608-3d78-4f79-ba60-be63ccd6e268'"}},{"result":{"nanos":403506,"millis":0.403506,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":366805,"millis":0.366805,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":385906,"millis":0.385906,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":434306,"millis":0.434306,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":378305,"millis":0.378305,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":22601,"millis":0.022601,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":274204,"millis":0.274204,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":275604,"millis":0.275604,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":268904,"millis":0.268904,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":60101,"millis":0.060101,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":437506,"millis":0.437506,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:07.976 [print] https:\/\/service.pdok.nl\/cbs\/vk100\/atom\/v1_0\/index.xml \n"},{"result":{"nanos":321404,"millis":0.321404,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":82602,"millis":0.082602,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:07.976 [print] INSPIRE Atom \n"},{"result":{"nanos":273604,"millis":0.273604,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":102301,"millis":0.102301,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:07.976 [print] #notpresent \n"},{"result":{"nanos":25200,"millis":0.0252,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":69701,"millis":0.069701,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:07.977 [print] INSPIRE Atom \n"},{"result":{"nanos":315605,"millis":0.315605,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":77201,"millis":0.077201,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:07.977 [print] Beheer PDOK \n"},{"result":{"nanos":61901,"millis":0.061901,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:07.977 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=1462bbce-ccd3-4362-83d8-4535ca8f44eb#MD_DataIdentification \n"},{"result":{"nanos":322805,"millis":0.322805,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":555108,"millis":0.555108,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"cb13a608-3d78-4f79-ba60-be63ccd6e268\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":389906,"millis":0.389906,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"cb13a608-3d78-4f79-ba60-be63ccd6e268\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":548.649965,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"cb13a608-3d78-4f79-ba60-be63ccd6e268","startTime":1629213727429,"refId":"[1.216:67]","endTime":1629213727978,"exampleData":{"datasetIdentifierCode":"cb13a608-3d78-4f79-ba60-be63ccd6e268"},"exampleIndex":215},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14900,"millis":0.0149,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:07.564 karate.env system property was: null \n"},{"result":{"nanos":25401,"millis":0.025401,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":46000,"millis":0.046,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":35100,"millis":0.0351,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":199203,"millis":0.199203,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":27901,"millis":0.027901,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":328304,"millis":0.328304,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":23600,"millis":0.0236,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":61401,"millis":0.061401,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":100501,"millis":0.100501,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":48300,"millis":0.0483,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":11900,"millis":0.0119,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18200,"millis":0.0182,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5500,"millis":0.0055,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":37401,"millis":0.037401,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'deaf8380-ad45-48d2-8c3e-81164471bafb'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3600,"millis":0.0036,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":574172438,"millis":574.172438,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1800,"millis":0.0018,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":491907,"millis":0.491907,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'deaf8380-ad45-48d2-8c3e-81164471bafb'"}},{"result":{"nanos":428006,"millis":0.428006,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":363205,"millis":0.363205,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":350505,"millis":0.350505,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":428906,"millis":0.428906,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":380906,"millis":0.380906,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":22300,"millis":0.0223,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":283104,"millis":0.283104,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":280004,"millis":0.280004,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":282204,"millis":0.282204,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":66400,"millis":0.0664,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":144702,"millis":0.144702,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:08.143 [print] https:\/\/service.pdok.nl\/cbs\/vk500\/atom\/v1_0\/index.xml \n"},{"result":{"nanos":853312,"millis":0.853312,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":107602,"millis":0.107602,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:08.144 [print] INSPIRE Atom \n"},{"result":{"nanos":313405,"millis":0.313405,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":91101,"millis":0.091101,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:08.144 [print] #notpresent \n"},{"result":{"nanos":27501,"millis":0.027501,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":57201,"millis":0.057201,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:08.145 [print] INSPIRE Atom \n"},{"result":{"nanos":379105,"millis":0.379105,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":78401,"millis":0.078401,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:08.145 [print] Beheer PDOK \n"},{"result":{"nanos":47401,"millis":0.047401,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:08.145 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=f605a24f-60cd-4c40-94c8-2186aba3ddd0#MD_DataIdentification \n"},{"result":{"nanos":393905,"millis":0.393905,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":571708,"millis":0.571708,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"deaf8380-ad45-48d2-8c3e-81164471bafb\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":328405,"millis":0.328405,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"deaf8380-ad45-48d2-8c3e-81164471bafb\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":581.940446,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"deaf8380-ad45-48d2-8c3e-81164471bafb","startTime":1629213727564,"refId":"[1.217:67]","endTime":1629213728146,"exampleData":{"datasetIdentifierCode":"deaf8380-ad45-48d2-8c3e-81164471bafb"},"exampleIndex":216},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16400,"millis":0.0164,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:07.597 karate.env system property was: null \n"},{"result":{"nanos":26801,"millis":0.026801,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":53300,"millis":0.0533,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":41800,"millis":0.0418,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":217903,"millis":0.217903,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":30700,"millis":0.0307,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":324405,"millis":0.324405,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":23100,"millis":0.0231,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":69001,"millis":0.069001,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":103101,"millis":0.103101,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":47901,"millis":0.047901,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13100,"millis":0.0131,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17500,"millis":0.0175,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3700,"millis":0.0037,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":41300,"millis":0.0413,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '13e4dff0-1e80-11e2-81c1-0800200c9a66'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3100,"millis":0.0031,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":559709127,"millis":559.709127,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2100,"millis":0.0021,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":305504,"millis":0.305504,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '13e4dff0-1e80-11e2-81c1-0800200c9a66'"}},{"result":{"nanos":314505,"millis":0.314505,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":305905,"millis":0.305905,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":296304,"millis":0.296304,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":327705,"millis":0.327705,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":300004,"millis":0.300004,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":31201,"millis":0.031201,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":240904,"millis":0.240904,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":228003,"millis":0.228003,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":235904,"millis":0.235904,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":456206,"millis":0.456206,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":531508,"millis":0.531508,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:08.162 [print] https:\/\/www.gdngeoservices.nl\/inspire\/downloads\/services.atom \n"},{"result":{"nanos":279304,"millis":0.279304,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":411406,"millis":0.411406,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:08.163 [print] INSPIRE Atom \n"},{"result":{"nanos":295604,"millis":0.295604,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":387506,"millis":0.387506,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:08.163 [print] #notpresent \n"},{"result":{"nanos":29900,"millis":0.0299,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":370506,"millis":0.370506,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:08.164 [print] INSPIRE Atom \n"},{"result":{"nanos":329805,"millis":0.329805,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":53801,"millis":0.053801,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:08.164 [print] TNO Geologische Dienst Nederland \n"},{"result":{"nanos":1852427,"millis":1.852427,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:08.165 [print] [\"https:\\\/\\\/nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/inspire?SERVICE=CSW&version=2.0.2&REQUEST=GetRecordById&ID=11a292bd-9022-4a9f-b1bf-02f5c89ad74a&OUTPUTSCHEMA=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&ELEMENTSETNAME=full#MD_DataIdentification\",\"https:\\\/\\\/nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/inspire?SERVICE=CSW&version=2.0.2&REQUEST=GetRecordById&ID=80630ee7-3a15-4ea0-bdc0-a8aebfa2f204&OUTPUTSCHEMA=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&ELEMENTSETNAME=full#MD_DataIdentification\"] \n"},{"result":{"nanos":326505,"millis":0.326505,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":360605,"millis":0.360605,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"13e4dff0-1e80-11e2-81c1-0800200c9a66\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":278204,"millis":0.278204,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"13e4dff0-1e80-11e2-81c1-0800200c9a66\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":569.301765,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"13e4dff0-1e80-11e2-81c1-0800200c9a66","startTime":1629213727597,"refId":"[1.218:67]","endTime":1629213728167,"exampleData":{"datasetIdentifierCode":"13e4dff0-1e80-11e2-81c1-0800200c9a66"},"exampleIndex":217},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14600,"millis":0.0146,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:07.660 karate.env system property was: null \n"},{"result":{"nanos":25801,"millis":0.025801,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":45300,"millis":0.0453,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":36400,"millis":0.0364,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":240704,"millis":0.240704,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":33300,"millis":0.0333,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":320905,"millis":0.320905,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":22801,"millis":0.022801,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":493107,"millis":0.493107,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":110001,"millis":0.110001,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":48900,"millis":0.0489,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":14401,"millis":0.014401,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18100,"millis":0.0181,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":46601,"millis":0.046601,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'd293204f-6581-4b0a-811b-1dcce97adedd'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3600,"millis":0.0036,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":547414449,"millis":547.414449,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1300,"millis":0.0013,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":442707,"millis":0.442707,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'd293204f-6581-4b0a-811b-1dcce97adedd'"}},{"result":{"nanos":414206,"millis":0.414206,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":358405,"millis":0.358405,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":376006,"millis":0.376006,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":393806,"millis":0.393806,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":360405,"millis":0.360405,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":19300,"millis":0.0193,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":277704,"millis":0.277704,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":285104,"millis":0.285104,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":278004,"millis":0.278004,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":120402,"millis":0.120402,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":665710,"millis":0.66571,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:08.214 [print] https:\/\/geodata.nationaalgeoregister.nl\/publiekrechtelijkebeperking\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":315105,"millis":0.315105,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":225903,"millis":0.225903,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:08.214 [print] OGC:WMS \n"},{"result":{"nanos":321805,"millis":0.321805,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":219803,"millis":0.219803,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:08.215 [print] #notpresent \n"},{"result":{"nanos":26601,"millis":0.026601,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":176102,"millis":0.176102,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:08.215 [print] OGC:WMS \n"},{"result":{"nanos":413406,"millis":0.413406,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":219403,"millis":0.219403,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:08.216 [print] Beheer PDOK \n"},{"result":{"nanos":410406,"millis":0.410406,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:08.216 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=e536d943-ecff-4d7a-9500-cc31a263a6af#MD_DataIdentification \n"},{"result":{"nanos":381906,"millis":0.381906,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":467906,"millis":0.467906,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"d293204f-6581-4b0a-811b-1dcce97adedd\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":266204,"millis":0.266204,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"d293204f-6581-4b0a-811b-1dcce97adedd\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":556.338779,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"d293204f-6581-4b0a-811b-1dcce97adedd","startTime":1629213727660,"refId":"[1.219:67]","endTime":1629213728217,"exampleData":{"datasetIdentifierCode":"d293204f-6581-4b0a-811b-1dcce97adedd"},"exampleIndex":218},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13500,"millis":0.0135,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:07.980 karate.env system property was: null \n"},{"result":{"nanos":23201,"millis":0.023201,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":44100,"millis":0.0441,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":36301,"millis":0.036301,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":195903,"millis":0.195903,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":30300,"millis":0.0303,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":331004,"millis":0.331004,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":23401,"millis":0.023401,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":89201,"millis":0.089201,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":104502,"millis":0.104502,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":47601,"millis":0.047601,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12300,"millis":0.0123,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19300,"millis":0.0193,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4401,"millis":0.004401,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":41900,"millis":0.0419,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '2d1860f2-f8ba-457e-bd64-93cdabd69aee'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3500,"millis":0.0035,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":546035729,"millis":546.035729,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2000,"millis":0.002,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":450707,"millis":0.450707,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '2d1860f2-f8ba-457e-bd64-93cdabd69aee'"}},{"result":{"nanos":384705,"millis":0.384705,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":304704,"millis":0.304704,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":294104,"millis":0.294104,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":380205,"millis":0.380205,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":327905,"millis":0.327905,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":18400,"millis":0.0184,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":251503,"millis":0.251503,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":244404,"millis":0.244404,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":245104,"millis":0.245104,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":64101,"millis":0.064101,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":321705,"millis":0.321705,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:08.531 [print] https:\/\/inspire.caris.nl\/geoserver\/auwms\/wms?request=GetCapabilities&service=WMS&version=1.3.0 \n"},{"result":{"nanos":306404,"millis":0.306404,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":77201,"millis":0.077201,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:08.532 [print] OGC:WMS \n"},{"result":{"nanos":492107,"millis":0.492107,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":55601,"millis":0.055601,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:08.532 [print] #notpresent \n"},{"result":{"nanos":248103,"millis":0.248103,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":125102,"millis":0.125102,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:08.533 [print] OGC:WMS \n"},{"result":{"nanos":425306,"millis":0.425306,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":55101,"millis":0.055101,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:08.533 [print] Ministerie van Defensie, Koninklijke Marine, Dienst der Hydrografie \n"},{"result":{"nanos":373606,"millis":0.373606,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:08.533 [print] https:\/\/www.nationaalgeoregister.nl:443\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=4cda487b-c467-490c-a843-6563fec016be#MD_DataIdentification \n"},{"result":{"nanos":351805,"millis":0.351805,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":594609,"millis":0.594609,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"2d1860f2-f8ba-457e-bd64-93cdabd69aee\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":288504,"millis":0.288504,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"2d1860f2-f8ba-457e-bd64-93cdabd69aee\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":553.74804,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"2d1860f2-f8ba-457e-bd64-93cdabd69aee","startTime":1629213727980,"refId":"[1.220:67]","endTime":1629213728535,"exampleData":{"datasetIdentifierCode":"2d1860f2-f8ba-457e-bd64-93cdabd69aee"},"exampleIndex":219},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13601,"millis":0.013601,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:08.149 karate.env system property was: null \n"},{"result":{"nanos":24200,"millis":0.0242,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":46601,"millis":0.046601,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":36800,"millis":0.0368,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":202502,"millis":0.202502,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":28900,"millis":0.0289,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":351105,"millis":0.351105,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":25001,"millis":0.025001,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":62901,"millis":0.062901,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":105001,"millis":0.105001,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":48701,"millis":0.048701,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12501,"millis":0.012501,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18300,"millis":0.0183,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5600,"millis":0.0056,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3600,"millis":0.0036,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":37601,"millis":0.037601,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '77971fa3-f869-4726-969a-482e0b1a8c5d'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3700,"millis":0.0037,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":529845294,"millis":529.845294,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2700,"millis":0.0027,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":518007,"millis":0.518007,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '77971fa3-f869-4726-969a-482e0b1a8c5d'"}},{"result":{"nanos":431507,"millis":0.431507,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":372805,"millis":0.372805,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":363605,"millis":0.363605,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":423706,"millis":0.423706,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":389105,"millis":0.389105,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":23601,"millis":0.023601,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":295804,"millis":0.295804,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":287505,"millis":0.287505,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":284604,"millis":0.284604,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":65801,"millis":0.065801,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":137902,"millis":0.137902,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:08.684 [print] https:\/\/www.gdngeoservices.nl\/inspire\/downloads\/services.atom \n"},{"result":{"nanos":424907,"millis":0.424907,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":181202,"millis":0.181202,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:08.684 [print] INSPIRE Atom \n"},{"result":{"nanos":415106,"millis":0.415106,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":87201,"millis":0.087201,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:08.685 [print] #notpresent \n"},{"result":{"nanos":28401,"millis":0.028401,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":43700,"millis":0.0437,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:08.685 [print] INSPIRE Atom \n"},{"result":{"nanos":580609,"millis":0.580609,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":63201,"millis":0.063201,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:08.685 [print] TNO Geologische Dienst Nederland \n"},{"result":{"nanos":59501,"millis":0.059501,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:08.686 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire?SERVICE=CSW&version=2.0.2&REQUEST=GetRecordById&ID=80630ee7-3a15-4ea0-bdc0-a8aebfa2f204&OUTPUTSCHEMA=http:\/\/www.isotc211.org\/2005\/gmd&ELEMENTSETNAME=full#MD_DataIdentification \n"},{"result":{"nanos":387706,"millis":0.387706,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":716010,"millis":0.71601,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"77971fa3-f869-4726-969a-482e0b1a8c5d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":340805,"millis":0.340805,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"77971fa3-f869-4726-969a-482e0b1a8c5d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":537.80081,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"77971fa3-f869-4726-969a-482e0b1a8c5d","startTime":1629213728148,"refId":"[1.221:67]","endTime":1629213728687,"exampleData":{"datasetIdentifierCode":"77971fa3-f869-4726-969a-482e0b1a8c5d"},"exampleIndex":220},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13800,"millis":0.0138,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:08.169 karate.env system property was: null \n"},{"result":{"nanos":22001,"millis":0.022001,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":40000,"millis":0.04,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":35101,"millis":0.035101,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":179803,"millis":0.179803,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":28700,"millis":0.0287,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":326105,"millis":0.326105,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":21100,"millis":0.0211,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":39200,"millis":0.0392,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":492207,"millis":0.492207,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":57801,"millis":0.057801,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13901,"millis":0.013901,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":15500,"millis":0.0155,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":34801,"millis":0.034801,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'adn573b0-bd3b-4d7b-a97d-e65841e6e0b4'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":558939516,"millis":558.939516,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1700,"millis":0.0017,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":704710,"millis":0.70471,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'adn573b0-bd3b-4d7b-a97d-e65841e6e0b4'"}},{"result":{"nanos":763711,"millis":0.763711,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":734410,"millis":0.73441,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":726311,"millis":0.726311,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":796912,"millis":0.796912,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":761011,"millis":0.761011,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":19500,"millis":0.0195,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":512107,"millis":0.512107,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":498307,"millis":0.498307,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":556608,"millis":0.556608,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":101401,"millis":0.101401,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":103402,"millis":0.103402,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:08.736 [print] https:\\\/\\\/geo.rijkswaterstaat.nl\\\/services\\\/ogc\\\/gdr\\\/bodemhoogte_5mtr\\\/ows?service=WMS&request=getcapabilities&version=1.3.0 \n"},{"result":{"nanos":643709,"millis":0.643709,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":109001,"millis":0.109001,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:08.737 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":627609,"millis":0.627609,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":85301,"millis":0.085301,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:08.738 [print] #notpresent \n"},{"result":{"nanos":40900,"millis":0.0409,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":54500,"millis":0.0545,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:08.738 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":877813,"millis":0.877813,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":60801,"millis":0.060801,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:08.739 [print] Rijkswaterstaat \n"},{"result":{"nanos":46901,"millis":0.046901,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:08.739 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=adn73c4a-ef03-4785-b7f6-942e86b385f7#MD_DataIdentification \n"},{"result":{"nanos":740311,"millis":0.740311,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":990214,"millis":0.990214,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"adn573b0-bd3b-4d7b-a97d-e65841e6e0b4\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":378905,"millis":0.378905,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"adn573b0-bd3b-4d7b-a97d-e65841e6e0b4\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":571.212491,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"adn573b0-bd3b-4d7b-a97d-e65841e6e0b4","startTime":1629213728169,"refId":"[1.222:67]","endTime":1629213728741,"exampleData":{"datasetIdentifierCode":"adn573b0-bd3b-4d7b-a97d-e65841e6e0b4"},"exampleIndex":221},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13100,"millis":0.0131,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:08.219 karate.env system property was: null \n"},{"result":{"nanos":23701,"millis":0.023701,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":44500,"millis":0.0445,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":36800,"millis":0.0368,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":194703,"millis":0.194703,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":30601,"millis":0.030601,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":315704,"millis":0.315704,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":22201,"millis":0.022201,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":216803,"millis":0.216803,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":102402,"millis":0.102402,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":48500,"millis":0.0485,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13701,"millis":0.013701,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17000,"millis":0.017,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5300,"millis":0.0053,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":41001,"millis":0.041001,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'adn573b0-bd3b-4d7b-a97d-e65841e6e0b2'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3700,"millis":0.0037,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":573266425,"millis":573.266425,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2700,"millis":0.0027,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":680810,"millis":0.68081,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'adn573b0-bd3b-4d7b-a97d-e65841e6e0b2'"}},{"result":{"nanos":743211,"millis":0.743211,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":701511,"millis":0.701511,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":689610,"millis":0.68961,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":750111,"millis":0.750111,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":721711,"millis":0.721711,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":25600,"millis":0.0256,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":2830841,"millis":2.830841,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":532107,"millis":0.532107,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":504207,"millis":0.504207,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":96901,"millis":0.096901,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":649209,"millis":0.649209,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:08.803 [print] https:\\\/\\\/inspire.rasdaman.org\\\/rasdaman\\\/ows?SERVICE=WCS&VERSION=2.0.1&REQUEST=GetCapabilities \n"},{"result":{"nanos":597809,"millis":0.597809,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":100901,"millis":0.100901,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:08.804 [print] [\"OGC:WCS\",\"OGC:WCS\",\"OGC:WCS\",\"OGC:WCS\",\"OGC:WCS\",\"OGC:WCS\",\"OGC:WCS\",\"OGC:WCS\",\"OGC:WCS\",\"OGC:WCS\",\"OGC:WCS\",\"OGC:WCS\",\"OGC:WCS\",\"OGC:WCS\",\"OGC:WCS\",\"OGC:WCS\",\"OGC:WCS\"] \n"},{"result":{"nanos":449706,"millis":0.449706,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":76501,"millis":0.076501,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:08.804 [print] #notpresent \n"},{"result":{"nanos":23200,"millis":0.0232,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":41001,"millis":0.041001,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:08.804 [print] [\"OGC:WCS\",\"OGC:WCS\",\"OGC:WCS\",\"OGC:WCS\",\"OGC:WCS\",\"OGC:WCS\",\"OGC:WCS\",\"OGC:WCS\",\"OGC:WCS\",\"OGC:WCS\",\"OGC:WCS\",\"OGC:WCS\",\"OGC:WCS\",\"OGC:WCS\",\"OGC:WCS\",\"OGC:WCS\",\"OGC:WCS\"] \n"},{"result":{"nanos":584308,"millis":0.584308,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":654410,"millis":0.65441,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:08.805 [print] Rijkswaterstaat \n"},{"result":{"nanos":43701,"millis":0.043701,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:08.806 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=adn73c4a-ef03-4785-b7f6-942e86b385f7#MD_DataIdentification \n"},{"result":{"nanos":586408,"millis":0.586408,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":551308,"millis":0.551308,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"adn573b0-bd3b-4d7b-a97d-e65841e6e0b2\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":314704,"millis":0.314704,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"adn573b0-bd3b-4d7b-a97d-e65841e6e0b2\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":587.357328,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"adn573b0-bd3b-4d7b-a97d-e65841e6e0b2","startTime":1629213728219,"refId":"[1.223:67]","endTime":1629213728807,"exampleData":{"datasetIdentifierCode":"adn573b0-bd3b-4d7b-a97d-e65841e6e0b2"},"exampleIndex":222},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14800,"millis":0.0148,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:08.537 karate.env system property was: null \n"},{"result":{"nanos":24700,"millis":0.0247,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":41201,"millis":0.041201,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":36601,"millis":0.036601,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":213303,"millis":0.213303,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":30500,"millis":0.0305,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":329704,"millis":0.329704,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":22501,"millis":0.022501,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":40500,"millis":0.0405,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":105401,"millis":0.105401,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":128502,"millis":0.128502,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13000,"millis":0.013,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19601,"millis":0.019601,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3700,"millis":0.0037,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":37301,"millis":0.037301,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'wt-3730-e750-485a-9c0c-39bf9bt72cf9'"}},{"result":{"nanos":3700,"millis":0.0037,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":533932253,"millis":533.932253,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2200,"millis":0.0022,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":557308,"millis":0.557308,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'wt-3730-e750-485a-9c0c-39bf9bt72cf9'"}},{"result":{"nanos":477607,"millis":0.477607,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":526008,"millis":0.526008,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":465807,"millis":0.465807,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":495807,"millis":0.495807,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":456306,"millis":0.456306,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":22700,"millis":0.0227,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":331605,"millis":0.331605,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":2969643,"millis":2.969643,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":329605,"millis":0.329605,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":389606,"millis":0.389606,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":389006,"millis":0.389006,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:09.080 [print] https:\/\/haleconnect.com\/services\/bsp\/org.292.5458b0b7-4aef-467a-b646-e76d966bcfc1\/service\/atom\/id_predefined_dataset \n"},{"result":{"nanos":323605,"millis":0.323605,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":250703,"millis":0.250703,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:09.080 [print] INSPIRE Atom \n"},{"result":{"nanos":313604,"millis":0.313604,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":221503,"millis":0.221503,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:09.081 [print] #notpresent \n"},{"result":{"nanos":26000,"millis":0.026,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":171603,"millis":0.171603,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:09.081 [print] INSPIRE Atom \n"},{"result":{"nanos":427106,"millis":0.427106,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":219503,"millis":0.219503,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:09.082 [print] Rijkswaterstaat \n"},{"result":{"nanos":406706,"millis":0.406706,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:09.082 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=wt-3730-e750-485a-9c0c-39bf9be72cf9#MD_DataIdentification \n"},{"result":{"nanos":373206,"millis":0.373206,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":578108,"millis":0.578108,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"wt-3730-e750-485a-9c0c-39bf9bt72cf9\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":332204,"millis":0.332204,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"wt-3730-e750-485a-9c0c-39bf9bt72cf9\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":546.062327,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"wt-3730-e750-485a-9c0c-39bf9bt72cf9","startTime":1629213728536,"refId":"[1.224:67]","endTime":1629213729083,"exampleData":{"datasetIdentifierCode":"wt-3730-e750-485a-9c0c-39bf9bt72cf9"},"exampleIndex":223},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13001,"millis":0.013001,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:08.689 karate.env system property was: null \n"},{"result":{"nanos":24400,"millis":0.0244,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":121102,"millis":0.121102,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":35801,"millis":0.035801,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":192403,"millis":0.192403,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":30200,"millis":0.0302,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":324805,"millis":0.324805,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":23201,"millis":0.023201,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":39600,"millis":0.0396,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":99902,"millis":0.099902,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":130802,"millis":0.130802,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12000,"millis":0.012,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18900,"millis":0.0189,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4901,"millis":0.004901,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3600,"millis":0.0036,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":39500,"millis":0.0395,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'wt-83730-e750-485a-9c0c-39bf9bt72cf8'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3500,"millis":0.0035,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":529072182,"millis":529.072182,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":3300,"millis":0.0033,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":523508,"millis":0.523508,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'wt-83730-e750-485a-9c0c-39bf9bt72cf8'"}},{"result":{"nanos":42006110,"millis":42.00611,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":545108,"millis":0.545108,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":381706,"millis":0.381706,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":718710,"millis":0.71871,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":526307,"millis":0.526307,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":81902,"millis":0.081902,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":347805,"millis":0.347805,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":354705,"millis":0.354705,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":410006,"millis":0.410006,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":870913,"millis":0.870913,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":1150317,"millis":1.150317,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:09.268 [print] https:\/\/haleconnect.com\/services\/bsp\/org.292.504afbe6-0069-411b-b69b-2aae3728f735\/service\/atom\/id_predefined_dataset \n"},{"result":{"nanos":2156432,"millis":2.156432,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":689410,"millis":0.68941,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:09.270 [print] INSPIRE Atom \n"},{"result":{"nanos":839412,"millis":0.839412,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":583109,"millis":0.583109,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:09.272 [print] #notpresent \n"},{"result":{"nanos":82301,"millis":0.082301,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":1605923,"millis":1.605923,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:09.274 [print] INSPIRE Atom \n"},{"result":{"nanos":436106,"millis":0.436106,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":373605,"millis":0.373605,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:09.278 [print] Rijkswaterstaat \n"},{"result":{"nanos":524307,"millis":0.524307,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:09.279 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=wt-83730-e750-485a-9c0c-39bf9be72cf8#MD_DataIdentification \n"},{"result":{"nanos":401506,"millis":0.401506,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":448507,"millis":0.448507,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"wt-83730-e750-485a-9c0c-39bf9bt72cf8\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":339705,"millis":0.339705,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"wt-83730-e750-485a-9c0c-39bf9bt72cf8\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":586.59502,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"wt-83730-e750-485a-9c0c-39bf9bt72cf8","startTime":1629213728689,"refId":"[1.225:67]","endTime":1629213729280,"exampleData":{"datasetIdentifierCode":"wt-83730-e750-485a-9c0c-39bf9bt72cf8"},"exampleIndex":224},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14901,"millis":0.014901,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:08.743 karate.env system property was: null \n"},{"result":{"nanos":25300,"millis":0.0253,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":61501,"millis":0.061501,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":40601,"millis":0.040601,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":206603,"millis":0.206603,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":42501,"millis":0.042501,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":453406,"millis":0.453406,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":29001,"millis":0.029001,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":42601,"millis":0.042601,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":103001,"millis":0.103001,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":49601,"millis":0.049601,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12400,"millis":0.0124,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19000,"millis":0.019,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5800,"millis":0.0058,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":50801,"millis":0.050801,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'wt-f5eb-b09f-4f6d-8397-8878a1t86238'"}},{"result":{"nanos":5700,"millis":0.0057,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":563233578,"millis":563.233578,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1500,"millis":0.0015,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":493607,"millis":0.493607,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'wt-f5eb-b09f-4f6d-8397-8878a1t86238'"}},{"result":{"nanos":483907,"millis":0.483907,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":440707,"millis":0.440707,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":466907,"millis":0.466907,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":572108,"millis":0.572108,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":533608,"millis":0.533608,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":73601,"millis":0.073601,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":399106,"millis":0.399106,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":399406,"millis":0.399406,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":405406,"millis":0.405406,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":115501,"millis":0.115501,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":948414,"millis":0.948414,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:09.313 [print] https:\/\/haleconnect.com\/services\/bsp\/org.292.42527b86-52a7-4b94-9f83-8e8a9e900f5a\/service\/atom\/id_predefined_dataset \n"},{"result":{"nanos":390806,"millis":0.390806,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":248304,"millis":0.248304,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:09.314 [print] INSPIRE Atom \n"},{"result":{"nanos":471207,"millis":0.471207,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":342805,"millis":0.342805,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:09.315 [print] #notpresent \n"},{"result":{"nanos":71401,"millis":0.071401,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":313605,"millis":0.313605,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:09.315 [print] INSPIRE Atom \n"},{"result":{"nanos":403006,"millis":0.403006,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":329905,"millis":0.329905,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:09.316 [print] Rijkswaterstaat \n"},{"result":{"nanos":542408,"millis":0.542408,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:09.316 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=wt-f5eb-b09f-4f6d-8397-8878a1b86238#MD_DataIdentification \n"},{"result":{"nanos":388006,"millis":0.388006,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":1480221,"millis":1.480221,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"wt-f5eb-b09f-4f6d-8397-8878a1t86238\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":339205,"millis":0.339205,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"wt-f5eb-b09f-4f6d-8397-8878a1t86238\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":575.059453,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"wt-f5eb-b09f-4f6d-8397-8878a1t86238","startTime":1629213728743,"refId":"[1.226:67]","endTime":1629213729318,"exampleData":{"datasetIdentifierCode":"wt-f5eb-b09f-4f6d-8397-8878a1t86238"},"exampleIndex":225},{"sectionIndex":0,"stepResults":[{"result":{"nanos":12600,"millis":0.0126,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:08.809 karate.env system property was: null \n"},{"result":{"nanos":26500,"millis":0.0265,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":46401,"millis":0.046401,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":35700,"millis":0.0357,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":222704,"millis":0.222704,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":34100,"millis":0.0341,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":331505,"millis":0.331505,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":24101,"millis":0.024101,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":59801,"millis":0.059801,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":107301,"millis":0.107301,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":49101,"millis":0.049101,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":11100,"millis":0.0111,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18801,"millis":0.018801,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":41001,"millis":0.041001,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'wt-3730-e750-485a-9c0c-39bf9bf72cf9'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":557552496,"millis":557.552496,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1400,"millis":0.0014,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":551308,"millis":0.551308,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'wt-3730-e750-485a-9c0c-39bf9bf72cf9'"}},{"result":{"nanos":458007,"millis":0.458007,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":388305,"millis":0.388305,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":422907,"millis":0.422907,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":602609,"millis":0.602609,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":493707,"millis":0.493707,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":67601,"millis":0.067601,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":360105,"millis":0.360105,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":378205,"millis":0.378205,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":350805,"millis":0.350805,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":114601,"millis":0.114601,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":167903,"millis":0.167903,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:09.372 [print] https:\/\/haleconnect.com\/ows\/services\/org.292.5458b0b7-4aef-467a-b646-e76d966bcfc1_wfs?service=WFS&version=2.0.0&request=GetCapabilities \n"},{"result":{"nanos":372905,"millis":0.372905,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":944313,"millis":0.944313,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:09.374 [print] OGC:WFS \n"},{"result":{"nanos":476306,"millis":0.476306,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":131702,"millis":0.131702,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:09.374 [print] #notpresent \n"},{"result":{"nanos":73701,"millis":0.073701,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":3361249,"millis":3.361249,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:09.378 [print] OGC:WFS \n"},{"result":{"nanos":436706,"millis":0.436706,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":464007,"millis":0.464007,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:09.379 [print] Rijkswaterstaat \n"},{"result":{"nanos":873313,"millis":0.873313,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:09.379 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=wt-3730-e750-485a-9c0c-39bf9be72cf9#MD_DataIdentification \n"},{"result":{"nanos":403606,"millis":0.403606,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":888313,"millis":0.888313,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"wt-3730-e750-485a-9c0c-39bf9bf72cf9\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":305805,"millis":0.305805,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"wt-3730-e750-485a-9c0c-39bf9bf72cf9\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":571.680501,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"wt-3730-e750-485a-9c0c-39bf9bf72cf9","startTime":1629213728809,"refId":"[1.227:67]","endTime":1629213729381,"exampleData":{"datasetIdentifierCode":"wt-3730-e750-485a-9c0c-39bf9bf72cf9"},"exampleIndex":226},{"sectionIndex":0,"stepResults":[{"result":{"nanos":12900,"millis":0.0129,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:09.085 karate.env system property was: null \n"},{"result":{"nanos":27700,"millis":0.0277,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":50201,"millis":0.050201,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":46201,"millis":0.046201,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":225403,"millis":0.225403,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":31301,"millis":0.031301,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":325004,"millis":0.325004,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":22901,"millis":0.022901,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":42200,"millis":0.0422,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":256403,"millis":0.256403,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":61801,"millis":0.061801,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13601,"millis":0.013601,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17700,"millis":0.0177,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3401,"millis":0.003401,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":43700,"millis":0.0437,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'wt-3730-e750-485a-9c0c-39bf9bm72cf9'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":549464278,"millis":549.464278,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2200,"millis":0.0022,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":684410,"millis":0.68441,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'wt-3730-e750-485a-9c0c-39bf9bm72cf9'"}},{"result":{"nanos":582409,"millis":0.582409,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":483307,"millis":0.483307,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":466107,"millis":0.466107,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":653810,"millis":0.65381,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":513407,"millis":0.513407,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":72501,"millis":0.072501,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":363005,"millis":0.363005,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":356805,"millis":0.356805,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":409406,"millis":0.409406,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":148703,"millis":0.148703,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":2498136,"millis":2.498136,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:09.644 [print] https:\/\/haleconnect.com\/ows\/services\/org.292.5458b0b7-4aef-467a-b646-e76d966bcfc1_wms?service=WMS&version=1.3.0&request=GetCapabilities \n"},{"result":{"nanos":781312,"millis":0.781312,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":140602,"millis":0.140602,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:09.645 [print] OGC:WMS \n"},{"result":{"nanos":622509,"millis":0.622509,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":110002,"millis":0.110002,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:09.645 [print] #notpresent \n"},{"result":{"nanos":62901,"millis":0.062901,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":328805,"millis":0.328805,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:09.646 [print] OGC:WMS \n"},{"result":{"nanos":632109,"millis":0.632109,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":109702,"millis":0.109702,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:09.647 [print] Rijkswaterstaat \n"},{"result":{"nanos":100101,"millis":0.100101,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:09.647 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=wt-3730-e750-485a-9c0c-39bf9be72cf9#MD_DataIdentification \n"},{"result":{"nanos":995014,"millis":0.995014,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":406506,"millis":0.406506,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"wt-3730-e750-485a-9c0c-39bf9bm72cf9\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":291905,"millis":0.291905,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"wt-3730-e750-485a-9c0c-39bf9bm72cf9\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":562.473169,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"wt-3730-e750-485a-9c0c-39bf9bm72cf9","startTime":1629213729085,"refId":"[1.228:67]","endTime":1629213729649,"exampleData":{"datasetIdentifierCode":"wt-3730-e750-485a-9c0c-39bf9bm72cf9"},"exampleIndex":227},{"sectionIndex":0,"stepResults":[{"result":{"nanos":55001,"millis":0.055001,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:09.282 karate.env system property was: null \n"},{"result":{"nanos":46000,"millis":0.046,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":112801,"millis":0.112801,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":89602,"millis":0.089602,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":248403,"millis":0.248403,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":84902,"millis":0.084902,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":341705,"millis":0.341705,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":66301,"millis":0.066301,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":100701,"millis":0.100701,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":381005,"millis":0.381005,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":120402,"millis":0.120402,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":35101,"millis":0.035101,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":25800,"millis":0.0258,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":10200,"millis":0.0102,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":9801,"millis":0.009801,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":29200,"millis":0.0292,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'tbjk534p-wubf-crbp-cj25-d41611m0gfim'"}},{"result":{"nanos":9900,"millis":0.0099,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":9501,"millis":0.009501,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":548553765,"millis":548.553765,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2200,"millis":0.0022,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":710610,"millis":0.71061,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'tbjk534p-wubf-crbp-cj25-d41611m0gfim'"}},{"result":{"nanos":672009,"millis":0.672009,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":624010,"millis":0.62401,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":587908,"millis":0.587908,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":660410,"millis":0.66041,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":619209,"millis":0.619209,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":21501,"millis":0.021501,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":451906,"millis":0.451906,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":468306,"millis":0.468306,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":461106,"millis":0.461106,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":77201,"millis":0.077201,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":116501,"millis":0.116501,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:09.839 [print] https:\\\/\\\/marineprojects.openearth.nl\\\/geoserver\\\/ihm_krm\\\/wms?service=WMS&version=1.3.0&request=GetCapabilities \n"},{"result":{"nanos":468107,"millis":0.468107,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":104702,"millis":0.104702,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:09.839 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":444207,"millis":0.444207,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":90901,"millis":0.090901,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:09.840 [print] #notpresent \n"},{"result":{"nanos":26200,"millis":0.0262,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":39700,"millis":0.0397,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:09.840 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":602609,"millis":0.602609,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":58001,"millis":0.058001,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:09.841 [print] Rijkswaterstaat \n"},{"result":{"nanos":49601,"millis":0.049601,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:09.841 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire?SERVICE=CSW&version=2.0.2&request=GetRecordById&outputschema=https:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=tbjk534p-wubf-crbp-cj25-d4161160gfim#MD_DataIdentification \n"},{"result":{"nanos":619709,"millis":0.619709,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":608109,"millis":0.608109,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"tbjk534p-wubf-crbp-cj25-d41611m0gfim\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":322905,"millis":0.322905,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"tbjk534p-wubf-crbp-cj25-d41611m0gfim\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":559.237719,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"tbjk534p-wubf-crbp-cj25-d41611m0gfim","startTime":1629213729282,"refId":"[1.229:67]","endTime":1629213729842,"exampleData":{"datasetIdentifierCode":"tbjk534p-wubf-crbp-cj25-d41611m0gfim"},"exampleIndex":228},{"sectionIndex":0,"stepResults":[{"result":{"nanos":41301,"millis":0.041301,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:09.321 karate.env system property was: null \n"},{"result":{"nanos":33401,"millis":0.033401,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":133902,"millis":0.133902,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":88701,"millis":0.088701,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":240604,"millis":0.240604,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":85301,"millis":0.085301,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":338505,"millis":0.338505,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":64701,"millis":0.064701,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":316405,"millis":0.316405,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":163502,"millis":0.163502,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":1202018,"millis":1.202018,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":57001,"millis":0.057001,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":28700,"millis":0.0287,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":11300,"millis":0.0113,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":15000,"millis":0.015,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":10201,"millis":0.010201,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '68ebd5c9-0ea1-4f22-9907-ec4c06fcd3e2'"}},{"result":{"nanos":10000,"millis":0.01,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":10100,"millis":0.0101,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":555731770,"millis":555.73177,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1600,"millis":0.0016,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":481107,"millis":0.481107,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '68ebd5c9-0ea1-4f22-9907-ec4c06fcd3e2'"}},{"result":{"nanos":529507,"millis":0.529507,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":533408,"millis":0.533408,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":500608,"millis":0.500608,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":529007,"millis":0.529007,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":504307,"millis":0.504307,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":23200,"millis":0.0232,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":374405,"millis":0.374405,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":360405,"millis":0.360405,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":390705,"millis":0.390705,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":60600,"millis":0.0606,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":140302,"millis":0.140302,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:09.884 [print] https:\\\/\\\/waterwebservices.rijkswaterstaat.nl\\\/services\\\/distributielaagWFS\\\/distributielaag_dbo?service=WFS&version=2.0.0&request=GetCapabilities \n"},{"result":{"nanos":377905,"millis":0.377905,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":81902,"millis":0.081902,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:09.885 [print] [\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":353305,"millis":0.353305,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":81601,"millis":0.081601,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:09.885 [print] #notpresent \n"},{"result":{"nanos":23001,"millis":0.023001,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":37500,"millis":0.0375,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:09.885 [print] [\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":429207,"millis":0.429207,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":84101,"millis":0.084101,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:09.886 [print] Rijkswaterstaat \n"},{"result":{"nanos":37701,"millis":0.037701,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:09.886 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire?SERVICE=CSW&version=2.0.2&request=GetRecordById&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=68ebd5c9-0ea1-4f22-9907-ec4c063cd3e2#MD_DataIdentification \n"},{"result":{"nanos":425606,"millis":0.425606,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":410906,"millis":0.410906,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"68ebd5c9-0ea1-4f22-9907-ec4c06fcd3e2\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":300705,"millis":0.300705,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"68ebd5c9-0ea1-4f22-9907-ec4c06fcd3e2\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":565.655014,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"68ebd5c9-0ea1-4f22-9907-ec4c06fcd3e2","startTime":1629213729320,"refId":"[1.230:67]","endTime":1629213729887,"exampleData":{"datasetIdentifierCode":"68ebd5c9-0ea1-4f22-9907-ec4c06fcd3e2"},"exampleIndex":229},{"sectionIndex":0,"stepResults":[{"result":{"nanos":41001,"millis":0.041001,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:09.384 karate.env system property was: null \n"},{"result":{"nanos":34101,"millis":0.034101,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":107201,"millis":0.107201,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":87602,"millis":0.087602,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":236203,"millis":0.236203,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":81101,"millis":0.081101,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":338804,"millis":0.338804,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":63901,"millis":0.063901,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":461706,"millis":0.461706,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":164303,"millis":0.164303,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":114802,"millis":0.114802,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":46400,"millis":0.0464,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":24900,"millis":0.0249,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":10100,"millis":0.0101,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":9300,"millis":0.0093,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":9300,"millis":0.0093,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'f2d2cd9d-7410-485a-95e0-c1b885243eaf'"}},{"result":{"nanos":8600,"millis":0.0086,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":8800,"millis":0.0088,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":521531273,"millis":521.531273,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2000,"millis":0.002,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":422806,"millis":0.422806,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'f2d2cd9d-7410-485a-95e0-c1b885243eaf'"}},{"result":{"nanos":388806,"millis":0.388806,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":335105,"millis":0.335105,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":343205,"millis":0.343205,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":412606,"millis":0.412606,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":382206,"millis":0.382206,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":23900,"millis":0.0239,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":361506,"millis":0.361506,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":279804,"millis":0.279804,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":275504,"millis":0.275504,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":595109,"millis":0.595109,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":654210,"millis":0.65421,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:09.912 [print] https:\/\/inspire.caris.nl\/geoserver\/auwms\/wms?request=GetCapabilities \n"},{"result":{"nanos":325105,"millis":0.325105,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":487207,"millis":0.487207,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:09.913 [print] OGC:WMS \n"},{"result":{"nanos":408106,"millis":0.408106,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":462307,"millis":0.462307,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:09.914 [print] #notpresent \n"},{"result":{"nanos":34300,"millis":0.0343,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":412706,"millis":0.412706,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:09.914 [print] OGC:WMS \n"},{"result":{"nanos":365805,"millis":0.365805,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":559808,"millis":0.559808,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:09.915 [print] Ministerie van Defensie, Koninklijke Marine, Dienst der Hydrografie \n"},{"result":{"nanos":2719140,"millis":2.71914,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:09.918 [print] https:\/\/www.nationaalgeoregister.nl:443\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=e8b84fae-00b3-49c1-80c1-df8f69f64e8c#MD_DataIdentification \n"},{"result":{"nanos":403706,"millis":0.403706,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":681210,"millis":0.68121,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"f2d2cd9d-7410-485a-95e0-c1b885243eaf\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":366406,"millis":0.366406,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"f2d2cd9d-7410-485a-95e0-c1b885243eaf\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":535.081971,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"f2d2cd9d-7410-485a-95e0-c1b885243eaf","startTime":1629213729383,"refId":"[1.231:67]","endTime":1629213729919,"exampleData":{"datasetIdentifierCode":"f2d2cd9d-7410-485a-95e0-c1b885243eaf"},"exampleIndex":230},{"sectionIndex":0,"stepResults":[{"result":{"nanos":41101,"millis":0.041101,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:09.651 karate.env system property was: null \n"},{"result":{"nanos":35400,"millis":0.0354,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":111601,"millis":0.111601,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":86102,"millis":0.086102,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":280004,"millis":0.280004,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":91201,"millis":0.091201,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":365906,"millis":0.365906,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":70701,"millis":0.070701,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":103201,"millis":0.103201,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":180603,"millis":0.180603,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":125302,"millis":0.125302,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":34501,"millis":0.034501,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":24200,"millis":0.0242,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":9800,"millis":0.0098,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":9400,"millis":0.0094,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":9600,"millis":0.0096,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'ce0a3f8e-6713-455f-805e-a067162c287d'"}},{"result":{"nanos":8800,"millis":0.0088,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":9400,"millis":0.0094,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":530140098,"millis":530.140098,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2000,"millis":0.002,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":633809,"millis":0.633809,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'ce0a3f8e-6713-455f-805e-a067162c287d'"}},{"result":{"nanos":480407,"millis":0.480407,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":398506,"millis":0.398506,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":373905,"millis":0.373905,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":470707,"millis":0.470707,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":402106,"millis":0.402106,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":20801,"millis":0.020801,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":326905,"millis":0.326905,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":310904,"millis":0.310904,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":303305,"millis":0.303305,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":144702,"millis":0.144702,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":120702,"millis":0.120702,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:10.187 [print] https:\/\/haleconnect.com\/ows\/services\/org.874.7e01e60c-8887-425c-af9b-e2cf6af9181b_wms?SERVICE=WMS&Request=GetCapabilities \n"},{"result":{"nanos":336605,"millis":0.336605,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":341905,"millis":0.341905,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:10.188 [print] #notpresent \n"},{"result":{"nanos":506508,"millis":0.506508,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":301905,"millis":0.301905,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:10.189 [print] #notpresent \n"},{"result":{"nanos":33700,"millis":0.0337,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":172102,"millis":0.172102,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:10.189 [print] #notpresent \n"},{"result":{"nanos":427406,"millis":0.427406,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":238403,"millis":0.238403,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:10.190 [print] Koninklijk Nederlands Meteorologisch Instituut (KNMI) \n"},{"result":{"nanos":336905,"millis":0.336905,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:10.190 [print] https:\/\/haleconnect.com\/services\/bsp\/org.874.7e01e60c-8887-425c-af9b-e2cf6af9181b\/md\/dataset\/dataset1#xpointer%28%2F%2Fgmd%3AidentificationInfo%5B1%5D%2Fgmd%3AMD_DataIdentification%29 \n"},{"result":{"nanos":416206,"millis":0.416206,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":683110,"millis":0.68311,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"ce0a3f8e-6713-455f-805e-a067162c287d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":331404,"millis":0.331404,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"ce0a3f8e-6713-455f-805e-a067162c287d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":539.851839,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"ce0a3f8e-6713-455f-805e-a067162c287d","startTime":1629213729650,"refId":"[1.232:67]","endTime":1629213730191,"exampleData":{"datasetIdentifierCode":"ce0a3f8e-6713-455f-805e-a067162c287d"},"exampleIndex":231},{"sectionIndex":0,"stepResults":[{"result":{"nanos":12800,"millis":0.0128,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:09.844 karate.env system property was: null \n"},{"result":{"nanos":24501,"millis":0.024501,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":45001,"millis":0.045001,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":34500,"millis":0.0345,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":199903,"millis":0.199903,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":32101,"millis":0.032101,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":328105,"millis":0.328105,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":24000,"millis":0.024,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":42501,"millis":0.042501,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":101701,"millis":0.101701,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":48101,"millis":0.048101,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":11800,"millis":0.0118,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17000,"millis":0.017,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3500,"millis":0.0035,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":39201,"millis":0.039201,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'd7d19437-f875-45b3-86cd-2fa3335479ec'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":532483432,"millis":532.483432,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1600,"millis":0.0016,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":570208,"millis":0.570208,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'd7d19437-f875-45b3-86cd-2fa3335479ec'"}},{"result":{"nanos":490507,"millis":0.490507,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":446606,"millis":0.446606,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":441406,"millis":0.441406,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":501408,"millis":0.501408,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":472107,"millis":0.472107,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":23200,"millis":0.0232,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":479807,"millis":0.479807,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":379806,"millis":0.379806,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":345305,"millis":0.345305,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":67201,"millis":0.067201,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":147003,"millis":0.147003,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:10.382 [print] https:\/\/geodata.nationaalgeoregister.nl\/inspire\/ps-rvo-np\/wfs?request=GetCapabilities&service=wfs \n"},{"result":{"nanos":1141416,"millis":1.141416,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":84901,"millis":0.084901,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:10.384 [print] OGC:WFS \n"},{"result":{"nanos":661410,"millis":0.66141,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":75201,"millis":0.075201,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:10.384 [print] #notpresent \n"},{"result":{"nanos":27000,"millis":0.027,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":59101,"millis":0.059101,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:10.384 [print] OGC:WFS \n"},{"result":{"nanos":848113,"millis":0.848113,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":73001,"millis":0.073001,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:10.385 [print] Beheer PDOK \n"},{"result":{"nanos":64901,"millis":0.064901,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:10.385 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=247a1d15-0a67-40ce-85be-1403c08f15a8#MD_DataIdentification \n"},{"result":{"nanos":1024215,"millis":1.024215,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":537108,"millis":0.537108,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"d7d19437-f875-45b3-86cd-2fa3335479ec\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":322805,"millis":0.322805,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"d7d19437-f875-45b3-86cd-2fa3335479ec\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":542.746983,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"d7d19437-f875-45b3-86cd-2fa3335479ec","startTime":1629213729844,"refId":"[1.233:67]","endTime":1629213730387,"exampleData":{"datasetIdentifierCode":"d7d19437-f875-45b3-86cd-2fa3335479ec"},"exampleIndex":232},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14201,"millis":0.014201,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:09.889 karate.env system property was: null \n"},{"result":{"nanos":26700,"millis":0.0267,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":49601,"millis":0.049601,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":40701,"millis":0.040701,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":193703,"millis":0.193703,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":34600,"millis":0.0346,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":413806,"millis":0.413806,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":30200,"millis":0.0302,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":43501,"millis":0.043501,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":106201,"millis":0.106201,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":58700,"millis":0.0587,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12900,"millis":0.0129,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17700,"millis":0.0177,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5600,"millis":0.0056,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":45400,"millis":0.0454,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'f5660ac6-8031-4acc-832c-1d1b82b062ba'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":5601,"millis":0.005601,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":560870044,"millis":560.870044,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2000,"millis":0.002,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":539107,"millis":0.539107,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'f5660ac6-8031-4acc-832c-1d1b82b062ba'"}},{"result":{"nanos":435506,"millis":0.435506,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":482307,"millis":0.482307,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":417307,"millis":0.417307,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":453606,"millis":0.453606,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":399805,"millis":0.399805,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":24000,"millis":0.024,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":296404,"millis":0.296404,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":289104,"millis":0.289104,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":288604,"millis":0.288604,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":63801,"millis":0.063801,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":98602,"millis":0.098602,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:10.456 [print] https:\/\/www.gdngeoservices.nl\/inspire\/downloads\/services.atom \n"},{"result":{"nanos":708510,"millis":0.70851,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":274904,"millis":0.274904,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:10.457 [print] INSPIRE Atom \n"},{"result":{"nanos":315204,"millis":0.315204,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":68901,"millis":0.068901,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:10.457 [print] #notpresent \n"},{"result":{"nanos":29500,"millis":0.0295,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":196903,"millis":0.196903,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:10.457 [print] INSPIRE Atom \n"},{"result":{"nanos":363105,"millis":0.363105,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":67801,"millis":0.067801,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:10.458 [print] TNO Geologische Dienst Nederland \n"},{"result":{"nanos":39300,"millis":0.0393,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:10.458 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire?SERVICE=CSW&version=2.0.2&REQUEST=GetRecordById&ID=11a292bd-9022-4a9f-b1bf-02f5c89ad74a&OUTPUTSCHEMA=http:\/\/www.isotc211.org\/2005\/gmd&ELEMENTSETNAME=full#MD_DataIdentification \n"},{"result":{"nanos":377305,"millis":0.377305,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":522008,"millis":0.522008,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"f5660ac6-8031-4acc-832c-1d1b82b062ba\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":322805,"millis":0.322805,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"f5660ac6-8031-4acc-832c-1d1b82b062ba\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":569.054658,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"f5660ac6-8031-4acc-832c-1d1b82b062ba","startTime":1629213729889,"refId":"[1.234:67]","endTime":1629213730459,"exampleData":{"datasetIdentifierCode":"f5660ac6-8031-4acc-832c-1d1b82b062ba"},"exampleIndex":233},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16600,"millis":0.0166,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:09.922 karate.env system property was: null \n"},{"result":{"nanos":29600,"millis":0.0296,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":47401,"millis":0.047401,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":41801,"millis":0.041801,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":228403,"millis":0.228403,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":32801,"millis":0.032801,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":354105,"millis":0.354105,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":26301,"millis":0.026301,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":515007,"millis":0.515007,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":124602,"millis":0.124602,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":55901,"millis":0.055901,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":17601,"millis":0.017601,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":30200,"millis":0.0302,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":59701,"millis":0.059701,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'c21c6bf5-8899-4b46-8986-0f65eca05ed0'"}},{"result":{"nanos":5300,"millis":0.0053,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":549447678,"millis":549.447678,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1100,"millis":0.0011,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":340905,"millis":0.340905,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'c21c6bf5-8899-4b46-8986-0f65eca05ed0'"}},{"result":{"nanos":371205,"millis":0.371205,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":345505,"millis":0.345505,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":329704,"millis":0.329704,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":368605,"millis":0.368605,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":339405,"millis":0.339405,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":17900,"millis":0.0179,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":273304,"millis":0.273304,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":255503,"millis":0.255503,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":265704,"millis":0.265704,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":81902,"millis":0.081902,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":1047415,"millis":1.047415,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:10.477 [print] https:\/\/geodata.nationaalgeoregister.nl\/rws\/richtlijnstedelijkafvalwater2015\/atom\/v1_0\/index.xml \n"},{"result":{"nanos":302105,"millis":0.302105,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":86101,"millis":0.086101,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:10.478 [print] #notpresent \n"},{"result":{"nanos":606409,"millis":0.606409,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":113302,"millis":0.113302,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:10.479 [print] INSPIRE Atom \n"},{"result":{"nanos":315904,"millis":0.315904,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":115202,"millis":0.115202,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:10.479 [print] #notpresent \n"},{"result":{"nanos":375005,"millis":0.375005,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":504708,"millis":0.504708,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:10.480 [print] Beheer PDOK \n"},{"result":{"nanos":326105,"millis":0.326105,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:10.481 [print] [\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=uwwtd-9d8e-4758-83fa-28b057f185e3#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=uwwtd-9d8e-4758-83fa-28b057f185e2#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=uwwtd-9d8e-4758-83fa-28b057f185e1#MD_DataIdentification\"] \n"},{"result":{"nanos":2380134,"millis":2.380134,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":419306,"millis":0.419306,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"c21c6bf5-8899-4b46-8986-0f65eca05ed0\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":302204,"millis":0.302204,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"c21c6bf5-8899-4b46-8986-0f65eca05ed0\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":560.930744,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"c21c6bf5-8899-4b46-8986-0f65eca05ed0","startTime":1629213729921,"refId":"[1.235:67]","endTime":1629213730484,"exampleData":{"datasetIdentifierCode":"c21c6bf5-8899-4b46-8986-0f65eca05ed0"},"exampleIndex":234},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16000,"millis":0.016,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:10.194 karate.env system property was: null \n"},{"result":{"nanos":29301,"millis":0.029301,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":50800,"millis":0.0508,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":40300,"millis":0.0403,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":222004,"millis":0.222004,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":32800,"millis":0.0328,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":361406,"millis":0.361406,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":26600,"millis":0.0266,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":302905,"millis":0.302905,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":118201,"millis":0.118201,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":57900,"millis":0.0579,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":15601,"millis":0.015601,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19200,"millis":0.0192,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":8100,"millis":0.0081,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":91901,"millis":0.091901,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '7b8f44b5-6eae-4113-a835-84b8678c3dd5'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":586667719,"millis":586.667719,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1500,"millis":0.0015,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":517407,"millis":0.517407,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '7b8f44b5-6eae-4113-a835-84b8678c3dd5'"}},{"result":{"nanos":446607,"millis":0.446607,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":398606,"millis":0.398606,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":386406,"millis":0.386406,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":451806,"millis":0.451806,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":400005,"millis":0.400005,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":22100,"millis":0.0221,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":416006,"millis":0.416006,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":323405,"millis":0.323405,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":324305,"millis":0.324305,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":66101,"millis":0.066101,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":139802,"millis":0.139802,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:10.786 [print] https:\/\/service.pdok.nl\/rce\/ps-ch\/wms\/v1_0?request=GetCapabilities&service=WMS \n"},{"result":{"nanos":332305,"millis":0.332305,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":97602,"millis":0.097602,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:10.787 [print] OGC:WMS \n"},{"result":{"nanos":322305,"millis":0.322305,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":71301,"millis":0.071301,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:10.787 [print] #notpresent \n"},{"result":{"nanos":23900,"millis":0.0239,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":39301,"millis":0.039301,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:10.787 [print] OGC:WMS \n"},{"result":{"nanos":390706,"millis":0.390706,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":86001,"millis":0.086001,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:10.788 [print] Beheer PDOK \n"},{"result":{"nanos":37501,"millis":0.037501,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:10.788 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=493ab81b-75f8-4205-b030-6b2fd9eb4295#MD_DataIdentification \n"},{"result":{"nanos":459907,"millis":0.459907,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":545608,"millis":0.545608,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"7b8f44b5-6eae-4113-a835-84b8678c3dd5\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":372605,"millis":0.372605,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"7b8f44b5-6eae-4113-a835-84b8678c3dd5\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":594.746236,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"7b8f44b5-6eae-4113-a835-84b8678c3dd5","startTime":1629213730194,"refId":"[1.236:67]","endTime":1629213730789,"exampleData":{"datasetIdentifierCode":"7b8f44b5-6eae-4113-a835-84b8678c3dd5"},"exampleIndex":235},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14801,"millis":0.014801,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:10.389 karate.env system property was: null \n"},{"result":{"nanos":25500,"millis":0.0255,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":45901,"millis":0.045901,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":40201,"millis":0.040201,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":229803,"millis":0.229803,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":31601,"millis":0.031601,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":356905,"millis":0.356905,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":26801,"millis":0.026801,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":62601,"millis":0.062601,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":108001,"millis":0.108001,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":52601,"millis":0.052601,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12400,"millis":0.0124,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17801,"millis":0.017801,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":42001,"millis":0.042001,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '101a2cc7-bb53-4a16-98f9-bab1f4745b01'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":5500,"millis":0.0055,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":529236985,"millis":529.236985,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2000,"millis":0.002,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":619409,"millis":0.619409,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '101a2cc7-bb53-4a16-98f9-bab1f4745b01'"}},{"result":{"nanos":590409,"millis":0.590409,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":464207,"millis":0.464207,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":448506,"millis":0.448506,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":493807,"millis":0.493807,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":716910,"millis":0.71691,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":31900,"millis":0.0319,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":351505,"millis":0.351505,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":314904,"millis":0.314904,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":336805,"millis":0.336805,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":70101,"millis":0.070101,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":138902,"millis":0.138902,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:10.925 [print] https:\\\/\\\/service.pdok.nl\\\/rce\\\/ps-ch\\\/wfs\\\/v1_0?request=GetCapabilities&service=wfs \n"},{"result":{"nanos":825412,"millis":0.825412,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":91001,"millis":0.091001,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:10.926 [print] [\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":705911,"millis":0.705911,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":3566552,"millis":3.566552,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:10.930 [print] #notpresent \n"},{"result":{"nanos":34600,"millis":0.0346,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":396106,"millis":0.396106,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:10.930 [print] [\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":411906,"millis":0.411906,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":69201,"millis":0.069201,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:10.931 [print] Beheer PDOK \n"},{"result":{"nanos":84201,"millis":0.084201,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:10.931 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=493ab81b-75f8-4205-b030-6b2fd9eb4295#MD_DataIdentification \n"},{"result":{"nanos":1012315,"millis":1.012315,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":561108,"millis":0.561108,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"101a2cc7-bb53-4a16-98f9-bab1f4745b01\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":325905,"millis":0.325905,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"101a2cc7-bb53-4a16-98f9-bab1f4745b01\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":542.985086,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"101a2cc7-bb53-4a16-98f9-bab1f4745b01","startTime":1629213730389,"refId":"[1.237:67]","endTime":1629213730933,"exampleData":{"datasetIdentifierCode":"101a2cc7-bb53-4a16-98f9-bab1f4745b01"},"exampleIndex":236},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14500,"millis":0.0145,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:10.461 karate.env system property was: null \n"},{"result":{"nanos":25701,"millis":0.025701,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":48901,"millis":0.048901,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":41700,"millis":0.0417,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":215304,"millis":0.215304,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":33700,"millis":0.0337,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":539408,"millis":0.539408,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":33401,"millis":0.033401,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":35800,"millis":0.0358,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":122702,"millis":0.122702,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":751811,"millis":0.751811,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":20501,"millis":0.020501,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19700,"millis":0.0197,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":43100,"millis":0.0431,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '0080a9ce-b836-45bc-8fdf-07dcbe97101d'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3700,"millis":0.0037,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":550278990,"millis":550.27899,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2301,"millis":0.002301,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":489607,"millis":0.489607,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '0080a9ce-b836-45bc-8fdf-07dcbe97101d'"}},{"result":{"nanos":444707,"millis":0.444707,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":389905,"millis":0.389905,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":364205,"millis":0.364205,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":442406,"millis":0.442406,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":404206,"millis":0.404206,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":31900,"millis":0.0319,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":311105,"millis":0.311105,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":281704,"millis":0.281704,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":293405,"millis":0.293405,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":64001,"millis":0.064001,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":134302,"millis":0.134302,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:11.018 [print] https:\/\/service.pdok.nl\/rce\/ps-ch\/atom\/v1_0\/index.xml \n"},{"result":{"nanos":812412,"millis":0.812412,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":75801,"millis":0.075801,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:11.019 [print] INSPIRE Atom \n"},{"result":{"nanos":556408,"millis":0.556408,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":66901,"millis":0.066901,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:11.019 [print] #notpresent \n"},{"result":{"nanos":24701,"millis":0.024701,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":51201,"millis":0.051201,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:11.019 [print] INSPIRE Atom \n"},{"result":{"nanos":714110,"millis":0.71411,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":72201,"millis":0.072201,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:11.020 [print] Beheer PDOK \n"},{"result":{"nanos":53101,"millis":0.053101,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:11.020 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=493ab81b-75f8-4205-b030-6b2fd9eb4295#MD_DataIdentification \n"},{"result":{"nanos":355906,"millis":0.355906,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":1152916,"millis":1.152916,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"0080a9ce-b836-45bc-8fdf-07dcbe97101d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":315604,"millis":0.315604,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"0080a9ce-b836-45bc-8fdf-07dcbe97101d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":560.147735,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"0080a9ce-b836-45bc-8fdf-07dcbe97101d","startTime":1629213730461,"refId":"[1.238:67]","endTime":1629213731022,"exampleData":{"datasetIdentifierCode":"0080a9ce-b836-45bc-8fdf-07dcbe97101d"},"exampleIndex":237},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14000,"millis":0.014,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:10.486 karate.env system property was: null \n"},{"result":{"nanos":24501,"millis":0.024501,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":44100,"millis":0.0441,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":33701,"millis":0.033701,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":183703,"millis":0.183703,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":35200,"millis":0.0352,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":369906,"millis":0.369906,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":25800,"millis":0.0258,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":68201,"millis":0.068201,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":484408,"millis":0.484408,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":63501,"millis":0.063501,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13500,"millis":0.0135,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":16200,"millis":0.0162,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4501,"millis":0.004501,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":36400,"millis":0.0364,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'a02c6566-e0ad-4fc1-b217-67cc1099dea2'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":563395681,"millis":563.395681,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2400,"millis":0.0024,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":486507,"millis":0.486507,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'a02c6566-e0ad-4fc1-b217-67cc1099dea2'"}},{"result":{"nanos":427307,"millis":0.427307,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":372005,"millis":0.372005,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":374206,"millis":0.374206,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":453707,"millis":0.453707,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":399806,"millis":0.399806,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":30200,"millis":0.0302,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":926214,"millis":0.926214,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":316905,"millis":0.316905,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":300104,"millis":0.300104,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":507908,"millis":0.507908,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":608409,"millis":0.608409,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:11.057 [print] https:\/\/inspire.rivm.nl\/geoserver\/wms?request=GetCapabilities \n"},{"result":{"nanos":335405,"millis":0.335405,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":491507,"millis":0.491507,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:11.058 [print] OGC:WMS \n"},{"result":{"nanos":340405,"millis":0.340405,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":238104,"millis":0.238104,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:11.058 [print] #notpresent \n"},{"result":{"nanos":29700,"millis":0.0297,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":150703,"millis":0.150703,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:11.058 [print] OGC:WMS \n"},{"result":{"nanos":411106,"millis":0.411106,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":217103,"millis":0.217103,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:11.059 [print] Rijksinstituut voor Volksgezondheid en Milieu \n"},{"result":{"nanos":390706,"millis":0.390706,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:11.059 [print] http:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=8b0b02a0-1e1b-4cda-bcfe-6fa0f738e38f#MD_DataIdentification \n"},{"result":{"nanos":390706,"millis":0.390706,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":534507,"millis":0.534507,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"a02c6566-e0ad-4fc1-b217-67cc1099dea2\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":302304,"millis":0.302304,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"a02c6566-e0ad-4fc1-b217-67cc1099dea2\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":573.863837,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"a02c6566-e0ad-4fc1-b217-67cc1099dea2","startTime":1629213730486,"refId":"[1.239:67]","endTime":1629213731061,"exampleData":{"datasetIdentifierCode":"a02c6566-e0ad-4fc1-b217-67cc1099dea2"},"exampleIndex":238},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15600,"millis":0.0156,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:10.791 karate.env system property was: null \n"},{"result":{"nanos":27701,"millis":0.027701,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":51801,"millis":0.051801,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":39400,"millis":0.0394,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":209503,"millis":0.209503,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":33300,"millis":0.0333,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":353405,"millis":0.353405,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":26101,"millis":0.026101,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":79401,"millis":0.079401,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":111902,"millis":0.111902,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":51201,"millis":0.051201,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13400,"millis":0.0134,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20600,"millis":0.0206,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":41500,"millis":0.0415,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '918388cf-9d8c-4264-b108-3e375bde0d52'"}},{"result":{"nanos":4201,"millis":0.004201,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":536971797,"millis":536.971797,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1600,"millis":0.0016,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":578608,"millis":0.578608,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '918388cf-9d8c-4264-b108-3e375bde0d52'"}},{"result":{"nanos":695810,"millis":0.69581,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":508907,"millis":0.508907,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":482707,"millis":0.482707,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":542608,"millis":0.542608,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":522207,"millis":0.522207,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":24300,"millis":0.0243,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":368005,"millis":0.368005,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":354505,"millis":0.354505,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":385706,"millis":0.385706,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":67401,"millis":0.067401,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":118802,"millis":0.118802,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:11.335 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/noordzeevaarwegmarkeringenrd\\\/wms?service=WMS&request=GetCapabilities \n"},{"result":{"nanos":852512,"millis":0.852512,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":84902,"millis":0.084902,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:11.336 [print] [\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":644809,"millis":0.644809,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":75702,"millis":0.075702,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:11.336 [print] #notpresent \n"},{"result":{"nanos":25400,"millis":0.0254,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":29101,"millis":0.029101,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:11.336 [print] [\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":821212,"millis":0.821212,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":67901,"millis":0.067901,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:11.337 [print] Beheer PDOK \n"},{"result":{"nanos":27500,"millis":0.0275,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:11.337 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=be1b1514-8d1f-48e1-9624-fee9b784138b#MD_DataIdentification \n"},{"result":{"nanos":768912,"millis":0.768912,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":618109,"millis":0.618109,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"918388cf-9d8c-4264-b108-3e375bde0d52\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":336305,"millis":0.336305,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"918388cf-9d8c-4264-b108-3e375bde0d52\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":547.067144,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"918388cf-9d8c-4264-b108-3e375bde0d52","startTime":1629213730791,"refId":"[1.240:67]","endTime":1629213731339,"exampleData":{"datasetIdentifierCode":"918388cf-9d8c-4264-b108-3e375bde0d52"},"exampleIndex":239},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13100,"millis":0.0131,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:10.938 karate.env system property was: null \n"},{"result":{"nanos":25401,"millis":0.025401,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":49300,"millis":0.0493,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":38201,"millis":0.038201,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":192903,"millis":0.192903,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":30701,"millis":0.030701,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":327704,"millis":0.327704,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":23001,"millis":0.023001,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":215803,"millis":0.215803,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":111502,"millis":0.111502,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":48901,"millis":0.048901,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12800,"millis":0.0128,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20900,"millis":0.0209,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":42800,"millis":0.0428,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '2650d49b-7d9a-49b5-b748-a0372cd9b5cf'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3600,"millis":0.0036,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":533498947,"millis":533.498947,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2500,"millis":0.0025,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":580809,"millis":0.580809,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '2650d49b-7d9a-49b5-b748-a0372cd9b5cf'"}},{"result":{"nanos":521907,"millis":0.521907,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":482907,"millis":0.482907,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":447306,"millis":0.447306,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":518507,"millis":0.518507,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":466607,"millis":0.466607,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":23001,"millis":0.023001,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":341705,"millis":0.341705,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":321805,"millis":0.321805,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":326905,"millis":0.326905,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":66101,"millis":0.066101,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":139902,"millis":0.139902,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:11.477 [print] http:\\\/\\\/geodata.nationaalgeoregister.nl\\\/wsdiensteninspire\\\/wms?request=getcapabilities&service=WMS \n"},{"result":{"nanos":338805,"millis":0.338805,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":68701,"millis":0.068701,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:11.478 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":323205,"millis":0.323205,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":46001,"millis":0.046001,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:11.478 [print] #notpresent \n"},{"result":{"nanos":22500,"millis":0.0225,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":28301,"millis":0.028301,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:11.478 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":418006,"millis":0.418006,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":55201,"millis":0.055201,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:11.479 [print] Beheer PDOK \n"},{"result":{"nanos":22300,"millis":0.0223,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:11.479 [print] https:\/\/www.nationaalgeoregister.nl:443\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=bffcd5d9-02b4-4e7d-991f-a386611cad84#MD_DataIdentification \n"},{"result":{"nanos":403106,"millis":0.403106,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":538608,"millis":0.538608,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"2650d49b-7d9a-49b5-b748-a0372cd9b5cf\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":314105,"millis":0.314105,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"2650d49b-7d9a-49b5-b748-a0372cd9b5cf\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":541.487665,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"2650d49b-7d9a-49b5-b748-a0372cd9b5cf","startTime":1629213730938,"refId":"[1.241:67]","endTime":1629213731480,"exampleData":{"datasetIdentifierCode":"2650d49b-7d9a-49b5-b748-a0372cd9b5cf"},"exampleIndex":240},{"sectionIndex":0,"stepResults":[{"result":{"nanos":17100,"millis":0.0171,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:11.024 karate.env system property was: null \n"},{"result":{"nanos":28200,"millis":0.0282,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":48201,"millis":0.048201,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":38801,"millis":0.038801,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":202103,"millis":0.202103,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":31000,"millis":0.031,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":379605,"millis":0.379605,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":28301,"millis":0.028301,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":68301,"millis":0.068301,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":110202,"millis":0.110202,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":341505,"millis":0.341505,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":16600,"millis":0.0166,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19500,"millis":0.0195,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4001,"millis":0.004001,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3700,"millis":0.0037,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":42300,"millis":0.0423,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'f1dadc2c-6de2-415a-a2b7-aaf057ddda43'"}},{"result":{"nanos":4101,"millis":0.004101,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":541002456,"millis":541.002456,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2300,"millis":0.0023,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":613609,"millis":0.613609,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'f1dadc2c-6de2-415a-a2b7-aaf057ddda43'"}},{"result":{"nanos":574109,"millis":0.574109,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":464707,"millis":0.464707,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":444106,"millis":0.444106,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":468007,"millis":0.468007,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":415906,"millis":0.415906,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":22400,"millis":0.0224,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":312405,"millis":0.312405,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":308405,"millis":0.308405,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":311604,"millis":0.311604,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":62601,"millis":0.062601,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":114602,"millis":0.114602,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:11.571 [print] https:\/\/geodata.nationaalgeoregister.nl\/inspireadressen\/v2\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":332105,"millis":0.332105,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":60401,"millis":0.060401,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:11.572 [print] OGC:WMS \n"},{"result":{"nanos":333705,"millis":0.333705,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":50501,"millis":0.050501,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:11.572 [print] #notpresent \n"},{"result":{"nanos":22900,"millis":0.0229,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":25501,"millis":0.025501,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:11.572 [print] OGC:WMS \n"},{"result":{"nanos":410806,"millis":0.410806,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":65001,"millis":0.065001,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:11.573 [print] Beheer PDOK \n"},{"result":{"nanos":24600,"millis":0.0246,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:11.573 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=76091be7-358a-4a44-8182-b4139c96c6a4#MD_DataIdentification \n"},{"result":{"nanos":409406,"millis":0.409406,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":715710,"millis":0.71571,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"f1dadc2c-6de2-415a-a2b7-aaf057ddda43\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":310405,"millis":0.310405,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"f1dadc2c-6de2-415a-a2b7-aaf057ddda43\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":549.265879,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"f1dadc2c-6de2-415a-a2b7-aaf057ddda43","startTime":1629213731024,"refId":"[1.242:67]","endTime":1629213731574,"exampleData":{"datasetIdentifierCode":"f1dadc2c-6de2-415a-a2b7-aaf057ddda43"},"exampleIndex":241},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14100,"millis":0.0141,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:11.063 karate.env system property was: null \n"},{"result":{"nanos":27000,"millis":0.027,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":48401,"millis":0.048401,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":37701,"millis":0.037701,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":214803,"millis":0.214803,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":32801,"millis":0.032801,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":346305,"millis":0.346305,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":24700,"millis":0.0247,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":235604,"millis":0.235604,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":111002,"millis":0.111002,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":51000,"millis":0.051,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":15801,"millis":0.015801,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20700,"millis":0.0207,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5400,"millis":0.0054,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":41300,"millis":0.0413,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '1bd24d1e-aa13-4395-809e-893570f7c651'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":551570609,"millis":551.570609,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1400,"millis":0.0014,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":490507,"millis":0.490507,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '1bd24d1e-aa13-4395-809e-893570f7c651'"}},{"result":{"nanos":450806,"millis":0.450806,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":431107,"millis":0.431107,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":395806,"millis":0.395806,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":448406,"millis":0.448406,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":414106,"millis":0.414106,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":22300,"millis":0.0223,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":304104,"millis":0.304104,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":329504,"millis":0.329504,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":313204,"millis":0.313204,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":62801,"millis":0.062801,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":95102,"millis":0.095102,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:11.620 [print] https:\/\/geodata.nationaalgeoregister.nl\/overheidsdiensten\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":359005,"millis":0.359005,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":56001,"millis":0.056001,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:11.620 [print] OGC:WMS \n"},{"result":{"nanos":337005,"millis":0.337005,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":58301,"millis":0.058301,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:11.621 [print] #notpresent \n"},{"result":{"nanos":22400,"millis":0.0224,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":21701,"millis":0.021701,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:11.621 [print] OGC:WMS \n"},{"result":{"nanos":430606,"millis":0.430606,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":49301,"millis":0.049301,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:11.621 [print] Beheer PDOK \n"},{"result":{"nanos":22500,"millis":0.0225,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:11.621 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=c935f2ab-9b65-4dc4-94a0-73aeb840a941#MD_DataIdentification \n"},{"result":{"nanos":400406,"millis":0.400406,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":519208,"millis":0.519208,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"1bd24d1e-aa13-4395-809e-893570f7c651\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":322705,"millis":0.322705,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"1bd24d1e-aa13-4395-809e-893570f7c651\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":559.167819,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"1bd24d1e-aa13-4395-809e-893570f7c651","startTime":1629213731063,"refId":"[1.243:67]","endTime":1629213731623,"exampleData":{"datasetIdentifierCode":"1bd24d1e-aa13-4395-809e-893570f7c651"},"exampleIndex":242},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16901,"millis":0.016901,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:11.341 karate.env system property was: null \n"},{"result":{"nanos":28000,"millis":0.028,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":49900,"millis":0.0499,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":39601,"millis":0.039601,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":217103,"millis":0.217103,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":33701,"millis":0.033701,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":353105,"millis":0.353105,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":25301,"millis":0.025301,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":43500,"millis":0.0435,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":119002,"millis":0.119002,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":143202,"millis":0.143202,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":14701,"millis":0.014701,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":21000,"millis":0.021,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5500,"millis":0.0055,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":49000,"millis":0.049,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '280cee65-1b66-4973-a569-75122e0b745b'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3801,"millis":0.003801,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":536901796,"millis":536.901796,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1400,"millis":0.0014,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":550908,"millis":0.550908,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '280cee65-1b66-4973-a569-75122e0b745b'"}},{"result":{"nanos":492107,"millis":0.492107,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":484707,"millis":0.484707,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":424906,"millis":0.424906,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":493607,"millis":0.493607,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":436107,"millis":0.436107,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":31500,"millis":0.0315,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":312304,"millis":0.312304,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":316205,"millis":0.316205,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":346105,"millis":0.346105,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":75901,"millis":0.075901,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":132102,"millis":0.132102,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:11.884 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/rws\\\/richtlijnstedelijkafvalwater2015\\\/wfs\\\/v1_0?request=GetCapabilities&service=WFS \n"},{"result":{"nanos":349505,"millis":0.349505,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":107701,"millis":0.107701,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:11.884 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":315004,"millis":0.315004,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":80702,"millis":0.080702,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:11.885 [print] #notpresent \n"},{"result":{"nanos":23100,"millis":0.0231,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":41501,"millis":0.041501,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:11.885 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":426606,"millis":0.426606,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":78801,"millis":0.078801,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:11.885 [print] Beheer PDOK \n"},{"result":{"nanos":44700,"millis":0.0447,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:11.885 [print] [\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=uwwtd-9d8e-4758-83fa-28b057f185e3#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=uwwtd-9d8e-4758-83fa-28b057f185e2#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=uwwtd-9d8e-4758-83fa-28b057f185e1#MD_DataIdentification\"] \n"},{"result":{"nanos":395406,"millis":0.395406,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":564308,"millis":0.564308,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"280cee65-1b66-4973-a569-75122e0b745b\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":339705,"millis":0.339705,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"280cee65-1b66-4973-a569-75122e0b745b\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":544.939112,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"280cee65-1b66-4973-a569-75122e0b745b","startTime":1629213731341,"refId":"[1.244:67]","endTime":1629213731887,"exampleData":{"datasetIdentifierCode":"280cee65-1b66-4973-a569-75122e0b745b"},"exampleIndex":243},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14000,"millis":0.014,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:11.482 karate.env system property was: null \n"},{"result":{"nanos":26301,"millis":0.026301,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":47901,"millis":0.047901,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":37600,"millis":0.0376,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":212903,"millis":0.212903,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":31600,"millis":0.0316,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":354405,"millis":0.354405,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":26901,"millis":0.026901,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":42600,"millis":0.0426,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":109501,"millis":0.109501,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":54701,"millis":0.054701,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12100,"millis":0.0121,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20001,"millis":0.020001,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":44001,"millis":0.044001,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'tbjk534p-wubf-crbp-cj25-d41611f0gfim'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":540035042,"millis":540.035042,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1900,"millis":0.0019,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":755811,"millis":0.755811,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'tbjk534p-wubf-crbp-cj25-d41611f0gfim'"}},{"result":{"nanos":795611,"millis":0.795611,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":761511,"millis":0.761511,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":717910,"millis":0.71791,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":787312,"millis":0.787312,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":743911,"millis":0.743911,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":24900,"millis":0.0249,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":469507,"millis":0.469507,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":447606,"millis":0.447606,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":506508,"millis":0.506508,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":86701,"millis":0.086701,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":118402,"millis":0.118402,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:12.030 [print] https:\\\/\\\/marineprojects.openearth.nl\\\/geoserver\\\/ihm_krm\\\/wfs?service=WFS&version=2.0.0&request=GetCapabilities \n"},{"result":{"nanos":496107,"millis":0.496107,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":108901,"millis":0.108901,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:12.030 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":481107,"millis":0.481107,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":64801,"millis":0.064801,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:12.031 [print] #notpresent \n"},{"result":{"nanos":23300,"millis":0.0233,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":53501,"millis":0.053501,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:12.031 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":656909,"millis":0.656909,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":61800,"millis":0.0618,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:12.032 [print] Rijkswaterstaat \n"},{"result":{"nanos":57000,"millis":0.057,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:12.032 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire?SERVICE=CSW&version=2.0.2&request=GetRecordById&outputschema=https:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=tbjk534p-wubf-crbp-cj25-d4161160gfim#MD_DataIdentification \n"},{"result":{"nanos":650809,"millis":0.650809,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":564508,"millis":0.564508,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"tbjk534p-wubf-crbp-cj25-d41611f0gfim\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":367206,"millis":0.367206,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"tbjk534p-wubf-crbp-cj25-d41611f0gfim\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":550.889996,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"tbjk534p-wubf-crbp-cj25-d41611f0gfim","startTime":1629213731482,"refId":"[1.245:67]","endTime":1629213732033,"exampleData":{"datasetIdentifierCode":"tbjk534p-wubf-crbp-cj25-d41611f0gfim"},"exampleIndex":244},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15301,"millis":0.015301,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:11.576 karate.env system property was: null \n"},{"result":{"nanos":27900,"millis":0.0279,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":48501,"millis":0.048501,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":36201,"millis":0.036201,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":208403,"millis":0.208403,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":33100,"millis":0.0331,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":357005,"millis":0.357005,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":24500,"millis":0.0245,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":40401,"millis":0.040401,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":107602,"millis":0.107602,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":77901,"millis":0.077901,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13800,"millis":0.0138,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18000,"millis":0.018,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":41900,"millis":0.0419,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'wt-83730-e750-485a-9c0c-39bf9bm72cf8'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":553904943,"millis":553.904943,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2301,"millis":0.002301,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":572008,"millis":0.572008,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'wt-83730-e750-485a-9c0c-39bf9bm72cf8'"}},{"result":{"nanos":563908,"millis":0.563908,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":509407,"millis":0.509407,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":537708,"millis":0.537708,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":569308,"millis":0.569308,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":524507,"millis":0.524507,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":25500,"millis":0.0255,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":386506,"millis":0.386506,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":368005,"millis":0.368005,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":376506,"millis":0.376506,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":68701,"millis":0.068701,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":802212,"millis":0.802212,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:12.136 [print] https:\/\/haleconnect.com\/ows\/services\/org.292.42527b86-52a7-4b94-9f83-8e8a9e900f5a_wms?service=WMS&version=1.3.0&request=GetCapabilities \n"},{"result":{"nanos":461407,"millis":0.461407,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":254604,"millis":0.254604,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:12.138 [print] OGC:WMS \n"},{"result":{"nanos":411106,"millis":0.411106,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":214203,"millis":0.214203,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:12.138 [print] #notpresent \n"},{"result":{"nanos":28701,"millis":0.028701,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":164202,"millis":0.164202,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:12.138 [print] OGC:WMS \n"},{"result":{"nanos":519908,"millis":0.519908,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":210803,"millis":0.210803,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:12.139 [print] Rijkswaterstaat \n"},{"result":{"nanos":935214,"millis":0.935214,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:12.140 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=wt-83730-e750-485a-9c0c-39bf9be72cf8#MD_DataIdentification \n"},{"result":{"nanos":544908,"millis":0.544908,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":610409,"millis":0.610409,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"wt-83730-e750-485a-9c0c-39bf9bm72cf8\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":410706,"millis":0.410706,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"wt-83730-e750-485a-9c0c-39bf9bm72cf8\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":565.046006,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"wt-83730-e750-485a-9c0c-39bf9bm72cf8","startTime":1629213731576,"refId":"[1.246:67]","endTime":1629213732142,"exampleData":{"datasetIdentifierCode":"wt-83730-e750-485a-9c0c-39bf9bm72cf8"},"exampleIndex":245},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15601,"millis":0.015601,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:11.625 karate.env system property was: null \n"},{"result":{"nanos":26500,"millis":0.0265,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":50001,"millis":0.050001,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":40101,"millis":0.040101,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":212503,"millis":0.212503,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":51101,"millis":0.051101,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":347705,"millis":0.347705,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":27300,"millis":0.0273,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":42201,"millis":0.042201,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":109202,"millis":0.109202,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":51401,"millis":0.051401,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":11900,"millis":0.0119,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19200,"millis":0.0192,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":38200,"millis":0.0382,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'wt-f297898-2640-44c2-bbe9-c0480dt83794'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4301,"millis":0.004301,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":564050390,"millis":564.05039,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2600,"millis":0.0026,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":494007,"millis":0.494007,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'wt-f297898-2640-44c2-bbe9-c0480dt83794'"}},{"result":{"nanos":408006,"millis":0.408006,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":356705,"millis":0.356705,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":349805,"millis":0.349805,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":423006,"millis":0.423006,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":383006,"millis":0.383006,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":19600,"millis":0.0196,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":293504,"millis":0.293504,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":319904,"millis":0.319904,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":291005,"millis":0.291005,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":701610,"millis":0.70161,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":697610,"millis":0.69761,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:12.195 [print] https:\/\/haleconnect.com\/services\/bsp\/org.292.c3955762-73a3-4c16-a15c-f3869487a1e3\/service\/atom\/id_predefined_dataset \n"},{"result":{"nanos":337105,"millis":0.337105,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":434507,"millis":0.434507,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:12.196 [print] INSPIRE Atom \n"},{"result":{"nanos":319705,"millis":0.319705,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":394106,"millis":0.394106,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:12.196 [print] #notpresent \n"},{"result":{"nanos":29000,"millis":0.029,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":376806,"millis":0.376806,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:12.197 [print] INSPIRE Atom \n"},{"result":{"nanos":390905,"millis":0.390905,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":395805,"millis":0.395805,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:12.198 [print] Rijkswaterstaat \n"},{"result":{"nanos":802311,"millis":0.802311,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:12.199 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=eu-f297898-2640-44c2-bbe9-c0480da83794#MD_DataIdentification \n"},{"result":{"nanos":372606,"millis":0.372606,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":554408,"millis":0.554408,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"wt-f297898-2640-44c2-bbe9-c0480dt83794\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":323105,"millis":0.323105,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"wt-f297898-2640-44c2-bbe9-c0480dt83794\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":574.581744,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"wt-f297898-2640-44c2-bbe9-c0480dt83794","startTime":1629213731624,"refId":"[1.247:67]","endTime":1629213732200,"exampleData":{"datasetIdentifierCode":"wt-f297898-2640-44c2-bbe9-c0480dt83794"},"exampleIndex":246},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16700,"millis":0.0167,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:11.889 karate.env system property was: null \n"},{"result":{"nanos":29800,"millis":0.0298,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":49500,"millis":0.0495,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":41001,"millis":0.041001,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":224303,"millis":0.224303,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":36300,"millis":0.0363,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":354105,"millis":0.354105,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":28000,"millis":0.028,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":473907,"millis":0.473907,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":133402,"millis":0.133402,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":55201,"millis":0.055201,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":16200,"millis":0.0162,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19101,"millis":0.019101,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":48501,"millis":0.048501,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'wt-f297898-2640-44c2-bbe9-c0480dm83794'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":543399391,"millis":543.399391,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2100,"millis":0.0021,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":578809,"millis":0.578809,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'wt-f297898-2640-44c2-bbe9-c0480dm83794'"}},{"result":{"nanos":527908,"millis":0.527908,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":477307,"millis":0.477307,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":468407,"millis":0.468407,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":527308,"millis":0.527308,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":459707,"millis":0.459707,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":19900,"millis":0.0199,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":300505,"millis":0.300505,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":306704,"millis":0.306704,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":298005,"millis":0.298005,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":65601,"millis":0.065601,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":92801,"millis":0.092801,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:12.439 [print] https:\/\/haleconnect.com\/ows\/services\/org.292.c3955762-73a3-4c16-a15c-f3869487a1e3_wms?service=WMS&version=1.3.0&request=GetCapabilities \n"},{"result":{"nanos":1070816,"millis":1.070816,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":102702,"millis":0.102702,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:12.440 [print] OGC:WMS \n"},{"result":{"nanos":322004,"millis":0.322004,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":52601,"millis":0.052601,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:12.440 [print] #notpresent \n"},{"result":{"nanos":22601,"millis":0.022601,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":50501,"millis":0.050501,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:12.440 [print] OGC:WMS \n"},{"result":{"nanos":413506,"millis":0.413506,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":80401,"millis":0.080401,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:12.441 [print] Rijkswaterstaat \n"},{"result":{"nanos":34201,"millis":0.034201,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:12.441 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=eu-f297898-2640-44c2-bbe9-c0480da83794#MD_DataIdentification \n"},{"result":{"nanos":410506,"millis":0.410506,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":550808,"millis":0.550808,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"wt-f297898-2640-44c2-bbe9-c0480dm83794\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":308705,"millis":0.308705,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"wt-f297898-2640-44c2-bbe9-c0480dm83794\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":552.487726,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"wt-f297898-2640-44c2-bbe9-c0480dm83794","startTime":1629213731888,"refId":"[1.248:67]","endTime":1629213732442,"exampleData":{"datasetIdentifierCode":"wt-f297898-2640-44c2-bbe9-c0480dm83794"},"exampleIndex":247},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14800,"millis":0.0148,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:12.035 karate.env system property was: null \n"},{"result":{"nanos":25300,"millis":0.0253,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":49300,"millis":0.0493,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":38401,"millis":0.038401,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":214603,"millis":0.214603,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":31801,"millis":0.031801,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":347005,"millis":0.347005,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":25800,"millis":0.0258,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":84701,"millis":0.084701,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":112002,"millis":0.112002,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":50500,"millis":0.0505,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13500,"millis":0.0135,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18800,"millis":0.0188,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3700,"millis":0.0037,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":43601,"millis":0.043601,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'cf69ec50-9849-4afd-853c-ee5621md336d'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":536438489,"millis":536.438489,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2300,"millis":0.0023,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":523007,"millis":0.523007,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'cf69ec50-9849-4afd-853c-ee5621md336d'"}},{"result":{"nanos":424406,"millis":0.424406,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":383706,"millis":0.383706,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":369505,"millis":0.369505,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":1251418,"millis":1.251418,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":440306,"millis":0.440306,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":20600,"millis":0.0206,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":301504,"millis":0.301504,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":334405,"millis":0.334405,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":318305,"millis":0.318305,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":60301,"millis":0.060301,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":114902,"millis":0.114902,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:12.578 [print] https:\\\/\\\/waterwebservices.rijkswaterstaat.nl\\\/services\\\/distributielaagWFS\\\/distributielaag_dbo?service=WMS&version=1.3.0&request=GetCapabilities \n"},{"result":{"nanos":412906,"millis":0.412906,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":97201,"millis":0.097201,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:12.578 [print] [\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":404506,"millis":0.404506,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":92102,"millis":0.092102,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:12.579 [print] #notpresent \n"},{"result":{"nanos":23900,"millis":0.0239,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":43401,"millis":0.043401,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:12.579 [print] [\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":520108,"millis":0.520108,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":59401,"millis":0.059401,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:12.580 [print] Rijkswaterstaat \n"},{"result":{"nanos":46700,"millis":0.0467,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:12.580 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire?SERVICE=CSW&version=2.0.2&request=GetRecordById&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=cf69ec50-9849-4afd-853c-ee56211d336d#MD_DataIdentification \n"},{"result":{"nanos":539808,"millis":0.539808,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":547108,"millis":0.547108,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"cf69ec50-9849-4afd-853c-ee5621md336d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":329904,"millis":0.329904,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"cf69ec50-9849-4afd-853c-ee5621md336d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":545.186413,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"cf69ec50-9849-4afd-853c-ee5621md336d","startTime":1629213732035,"refId":"[1.249:67]","endTime":1629213732581,"exampleData":{"datasetIdentifierCode":"cf69ec50-9849-4afd-853c-ee5621md336d"},"exampleIndex":248},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15800,"millis":0.0158,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:12.144 karate.env system property was: null \n"},{"result":{"nanos":28200,"millis":0.0282,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":48601,"millis":0.048601,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":37901,"millis":0.037901,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":207603,"millis":0.207603,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":57401,"millis":0.057401,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":350005,"millis":0.350005,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":25701,"millis":0.025701,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":41400,"millis":0.0414,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":103302,"millis":0.103302,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":64301,"millis":0.064301,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13900,"millis":0.0139,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18601,"millis":0.018601,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":7000,"millis":0.007,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":53801,"millis":0.053801,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'tn-2c7040b-c448-451b-bf15-f2416emaadd1'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":542635780,"millis":542.63578,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2300,"millis":0.0023,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":625709,"millis":0.625709,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'tn-2c7040b-c448-451b-bf15-f2416emaadd1'"}},{"result":{"nanos":639009,"millis":0.639009,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":610909,"millis":0.610909,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":582409,"millis":0.582409,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":656210,"millis":0.65621,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":616909,"millis":0.616909,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":25000,"millis":0.025,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":429607,"millis":0.429607,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":421306,"millis":0.421306,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":455007,"millis":0.455007,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":73401,"millis":0.073401,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":606809,"millis":0.606809,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:12.694 [print] https:\\\/\\\/haleconnect.com\\\/ows\\\/services\\\/org.292.2885ef73-e044-4da4-b9b6-8a461a5353aa_wms?service=WMS&version=1.3.0&request=GetCapabilities \n"},{"result":{"nanos":428306,"millis":0.428306,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":538508,"millis":0.538508,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:12.695 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":414006,"millis":0.414006,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":64801,"millis":0.064801,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:12.695 [print] #notpresent \n"},{"result":{"nanos":33500,"millis":0.0335,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":496807,"millis":0.496807,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:12.696 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":539208,"millis":0.539208,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":430206,"millis":0.430206,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:12.697 [print] Rijkswaterstaat \n"},{"result":{"nanos":924014,"millis":0.924014,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:12.698 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=https:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=eu-2c7040b-c448-451b-bf15-f2416ecaadd1#MD_DataIdentification \n"},{"result":{"nanos":515707,"millis":0.515707,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":541207,"millis":0.541207,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"tn-2c7040b-c448-451b-bf15-f2416emaadd1\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":309404,"millis":0.309404,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"tn-2c7040b-c448-451b-bf15-f2416emaadd1\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":554.704156,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"tn-2c7040b-c448-451b-bf15-f2416emaadd1","startTime":1629213732143,"refId":"[1.250:67]","endTime":1629213732699,"exampleData":{"datasetIdentifierCode":"tn-2c7040b-c448-451b-bf15-f2416emaadd1"},"exampleIndex":249},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13700,"millis":0.0137,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:12.202 karate.env system property was: null \n"},{"result":{"nanos":26800,"millis":0.0268,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":48601,"millis":0.048601,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":38801,"millis":0.038801,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":198403,"millis":0.198403,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":31400,"millis":0.0314,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":333905,"millis":0.333905,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":25101,"millis":0.025101,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":43101,"millis":0.043101,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":122202,"millis":0.122202,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":51801,"millis":0.051801,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":14000,"millis":0.014,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17701,"millis":0.017701,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":44101,"millis":0.044101,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'tn-2c7040b-c448-451b-bf15-f2416etaadd1'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":541866368,"millis":541.866368,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1800,"millis":0.0018,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":1121116,"millis":1.121116,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'tn-2c7040b-c448-451b-bf15-f2416etaadd1'"}},{"result":{"nanos":547408,"millis":0.547408,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":477307,"millis":0.477307,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":982114,"millis":0.982114,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":529108,"millis":0.529108,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":458607,"millis":0.458607,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":23700,"millis":0.0237,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":328905,"millis":0.328905,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":330405,"millis":0.330405,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":323705,"millis":0.323705,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":61301,"millis":0.061301,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":82301,"millis":0.082301,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:12.751 [print] https:\/\/haleconnect.com\/services\/bsp\/org.292.2885ef73-e044-4da4-b9b6-8a461a5353aa\/service\/atom\/id_predefined_dataset \n"},{"result":{"nanos":341405,"millis":0.341405,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":90301,"millis":0.090301,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:12.752 [print] INSPIRE Atom \n"},{"result":{"nanos":354005,"millis":0.354005,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":89701,"millis":0.089701,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:12.752 [print] #notpresent \n"},{"result":{"nanos":25100,"millis":0.0251,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":43401,"millis":0.043401,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:12.752 [print] INSPIRE Atom \n"},{"result":{"nanos":455707,"millis":0.455707,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":88901,"millis":0.088901,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:12.753 [print] Rijkswaterstaat \n"},{"result":{"nanos":42501,"millis":0.042501,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:12.753 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=eu-2c7040b-c448-451b-bf15-f2416ecaadd1#MD_DataIdentification \n"},{"result":{"nanos":458507,"millis":0.458507,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":517708,"millis":0.517708,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"tn-2c7040b-c448-451b-bf15-f2416etaadd1\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":330205,"millis":0.330205,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"tn-2c7040b-c448-451b-bf15-f2416etaadd1\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":550.998204,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"tn-2c7040b-c448-451b-bf15-f2416etaadd1","startTime":1629213732201,"refId":"[1.251:67]","endTime":1629213732754,"exampleData":{"datasetIdentifierCode":"tn-2c7040b-c448-451b-bf15-f2416etaadd1"},"exampleIndex":250},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13100,"millis":0.0131,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:12.444 karate.env system property was: null \n"},{"result":{"nanos":26300,"millis":0.0263,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":49701,"millis":0.049701,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":36001,"millis":0.036001,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":207403,"millis":0.207403,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":31700,"millis":0.0317,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":340805,"millis":0.340805,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":25500,"millis":0.0255,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":43401,"millis":0.043401,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":125702,"millis":0.125702,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":52101,"millis":0.052101,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13100,"millis":0.0131,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18500,"millis":0.0185,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":42600,"millis":0.0426,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'wt-f5eb-b09f-4f6d-8397-8878a1f86238'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":533655649,"millis":533.655649,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1300,"millis":0.0013,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":562308,"millis":0.562308,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'wt-f5eb-b09f-4f6d-8397-8878a1f86238'"}},{"result":{"nanos":513307,"millis":0.513307,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":471207,"millis":0.471207,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":478007,"millis":0.478007,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":539407,"millis":0.539407,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":485107,"millis":0.485107,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":23300,"millis":0.0233,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":358505,"millis":0.358505,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":347705,"millis":0.347705,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":342405,"millis":0.342405,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":66701,"millis":0.066701,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":768011,"millis":0.768011,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:12.984 [print] https:\/\/haleconnect.com\/ows\/services\/org.292.42527b86-52a7-4b94-9f83-8e8a9e900f5a_wfs?service=WFS&version=2.0.0&request=GetCapabilities \n"},{"result":{"nanos":394105,"millis":0.394105,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":77802,"millis":0.077802,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:12.985 [print] OGC:WFS \n"},{"result":{"nanos":362705,"millis":0.362705,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":72001,"millis":0.072001,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:12.985 [print] #notpresent \n"},{"result":{"nanos":25601,"millis":0.025601,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":64801,"millis":0.064801,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:12.985 [print] OGC:WFS \n"},{"result":{"nanos":496907,"millis":0.496907,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":65201,"millis":0.065201,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:12.986 [print] Rijkswaterstaat \n"},{"result":{"nanos":54501,"millis":0.054501,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:12.986 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=wt-f5eb-b09f-4f6d-8397-8878a1b86238#MD_DataIdentification \n"},{"result":{"nanos":512808,"millis":0.512808,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":579708,"millis":0.579708,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"wt-f5eb-b09f-4f6d-8397-8878a1f86238\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":368405,"millis":0.368405,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"wt-f5eb-b09f-4f6d-8397-8878a1f86238\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":542.729578,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"wt-f5eb-b09f-4f6d-8397-8878a1f86238","startTime":1629213732444,"refId":"[1.252:67]","endTime":1629213732987,"exampleData":{"datasetIdentifierCode":"wt-f5eb-b09f-4f6d-8397-8878a1f86238"},"exampleIndex":251},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14001,"millis":0.014001,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:12.583 karate.env system property was: null \n"},{"result":{"nanos":27700,"millis":0.0277,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":45501,"millis":0.045501,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":34900,"millis":0.0349,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":204303,"millis":0.204303,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":32900,"millis":0.0329,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":328505,"millis":0.328505,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":25100,"millis":0.0251,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":227503,"millis":0.227503,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":110102,"millis":0.110102,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":50100,"millis":0.0501,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12901,"millis":0.012901,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17400,"millis":0.0174,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":41101,"millis":0.041101,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'ea4cb6a2-f637-413a-91cc-d58473c2f138'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3700,"millis":0.0037,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":537042899,"millis":537.042899,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2000,"millis":0.002,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":521008,"millis":0.521008,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'ea4cb6a2-f637-413a-91cc-d58473c2f138'"}},{"result":{"nanos":473307,"millis":0.473307,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":433907,"millis":0.433907,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":427806,"millis":0.427806,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":477107,"millis":0.477107,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":434707,"millis":0.434707,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":22400,"millis":0.0224,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":347205,"millis":0.347205,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":325004,"millis":0.325004,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":389805,"millis":0.389805,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":897713,"millis":0.897713,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":883212,"millis":0.883212,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:13.128 [print] http:\/\/services.inspire-provincies.nl\/EnvironmentalMonitoringFacilities\/services\/view_EF?request=GetCapabilities \n"},{"result":{"nanos":379005,"millis":0.379005,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":519408,"millis":0.519408,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:13.129 [print] OGC:WMS \n"},{"result":{"nanos":368806,"millis":0.368806,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":503907,"millis":0.503907,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:13.130 [print] #notpresent \n"},{"result":{"nanos":35001,"millis":0.035001,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":450106,"millis":0.450106,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:13.130 [print] OGC:WMS \n"},{"result":{"nanos":440806,"millis":0.440806,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":460807,"millis":0.460807,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:13.131 [print] Interprovinciaal Overleg \n"},{"result":{"nanos":1391020,"millis":1.39102,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:13.132 [print] [\"http:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/nl\\\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=c829abeb-bfac-4224-8332-e7a9a89e692e&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full#MD_DataIdentification\",\"http:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/nl\\\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=fe45c540-e37d-11e4-b571-0800200c9a66&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full#MD_DataIdentification\"] \n"},{"result":{"nanos":394706,"millis":0.394706,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":574609,"millis":0.574609,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"ea4cb6a2-f637-413a-91cc-d58473c2f138\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":319605,"millis":0.319605,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"ea4cb6a2-f637-413a-91cc-d58473c2f138\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":549.703283,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"ea4cb6a2-f637-413a-91cc-d58473c2f138","startTime":1629213732583,"refId":"[1.253:67]","endTime":1629213733134,"exampleData":{"datasetIdentifierCode":"ea4cb6a2-f637-413a-91cc-d58473c2f138"},"exampleIndex":252},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13301,"millis":0.013301,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:12.701 karate.env system property was: null \n"},{"result":{"nanos":24700,"millis":0.0247,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":45701,"millis":0.045701,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":37500,"millis":0.0375,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":714010,"millis":0.71401,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":58001,"millis":0.058001,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":340105,"millis":0.340105,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":24900,"millis":0.0249,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":41800,"millis":0.0418,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":103202,"millis":0.103202,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":46301,"millis":0.046301,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":11500,"millis":0.0115,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20900,"millis":0.0209,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3600,"millis":0.0036,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":42400,"millis":0.0424,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '542b330b-d3c6-4617-b97f-693e5cfd1872'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3600,"millis":0.0036,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":546471635,"millis":546.471635,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1800,"millis":0.0018,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":535108,"millis":0.535108,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '542b330b-d3c6-4617-b97f-693e5cfd1872'"}},{"result":{"nanos":491008,"millis":0.491008,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":363105,"millis":0.363105,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":436107,"millis":0.436107,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":480407,"millis":0.480407,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":411906,"millis":0.411906,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":23800,"millis":0.0238,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":42789621,"millis":42.789621,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":725611,"millis":0.725611,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":419706,"millis":0.419706,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":110502,"millis":0.110502,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":146702,"millis":0.146702,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:13.297 [print] https:\/\/www.broinspireservices.nl\/wfs\/osamepl-a-v1.0?request=GetCapabilities&service=WFS&version=2.0.0 \n"},{"result":{"nanos":366406,"millis":0.366406,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":132202,"millis":0.132202,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:13.297 [print] #notpresent \n"},{"result":{"nanos":4375263,"millis":4.375263,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":331904,"millis":0.331904,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:13.302 [print] OGC:WFS \n"},{"result":{"nanos":83201,"millis":0.083201,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":2146231,"millis":2.146231,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:13.304 [print] #notpresent \n"},{"result":{"nanos":368106,"millis":0.368106,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":334905,"millis":0.334905,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:13.305 [print] TNO Geologische Dienst Nederland \n"},{"result":{"nanos":517607,"millis":0.517607,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:13.305 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire?SERVICE=CSW&version=2.0.2&REQUEST=GetRecordById&ID=24de356e-ec4d-4a18-9903-6401d222b77c&OUTPUTSCHEMA=http:\/\/www.isotc211.org\/2005\/gmd&ELEMENTSETNAME=full#MD_DataIdentification \n"},{"result":{"nanos":379006,"millis":0.379006,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":918013,"millis":0.918013,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"542b330b-d3c6-4617-b97f-693e5cfd1872\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":307904,"millis":0.307904,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"542b330b-d3c6-4617-b97f-693e5cfd1872\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":605.207687,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"542b330b-d3c6-4617-b97f-693e5cfd1872","startTime":1629213732701,"refId":"[1.254:67]","endTime":1629213733307,"exampleData":{"datasetIdentifierCode":"542b330b-d3c6-4617-b97f-693e5cfd1872"},"exampleIndex":253},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14100,"millis":0.0141,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:12.756 karate.env system property was: null \n"},{"result":{"nanos":26201,"millis":0.026201,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":47500,"millis":0.0475,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":38100,"millis":0.0381,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":205803,"millis":0.205803,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":32301,"millis":0.032301,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":344905,"millis":0.344905,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":25900,"millis":0.0259,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":41300,"millis":0.0413,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":106802,"millis":0.106802,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":52501,"millis":0.052501,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12200,"millis":0.0122,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20700,"millis":0.0207,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5300,"millis":0.0053,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5500,"millis":0.0055,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":41101,"millis":0.041101,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '52d0313e-0d2b-44b4-b51e-d9e504307f70'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":542404776,"millis":542.404776,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1700,"millis":0.0017,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":387705,"millis":0.387705,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '52d0313e-0d2b-44b4-b51e-d9e504307f70'"}},{"result":{"nanos":354905,"millis":0.354905,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":315004,"millis":0.315004,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":307304,"millis":0.307304,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":1522722,"millis":1.522722,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":407806,"millis":0.407806,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":64901,"millis":0.064901,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":278104,"millis":0.278104,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":314505,"millis":0.314505,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":304904,"millis":0.304904,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":1932328,"millis":1.932328,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":653309,"millis":0.653309,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:13.306 [print] https:\/\/service.pdok.nl\/bzk\/bro-environmental-monitoring-facilities\/atom\/v1_0\/index.xml \n"},{"result":{"nanos":367706,"millis":0.367706,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":108501,"millis":0.108501,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:13.307 [print] INSPIRE Atom \n"},{"result":{"nanos":592708,"millis":0.592708,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":137402,"millis":0.137402,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:13.308 [print] #notpresent \n"},{"result":{"nanos":61901,"millis":0.061901,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":377506,"millis":0.377506,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:13.308 [print] INSPIRE Atom \n"},{"result":{"nanos":603409,"millis":0.603409,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":571008,"millis":0.571008,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:13.310 [print] Beheer PDOK \n"},{"result":{"nanos":989715,"millis":0.989715,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:13.311 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=dff9c760-1380-11eb-adc1-0242ac120002#MD_DataIdentification \n"},{"result":{"nanos":334905,"millis":0.334905,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":822212,"millis":0.822212,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"52d0313e-0d2b-44b4-b51e-d9e504307f70\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":247004,"millis":0.247004,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"52d0313e-0d2b-44b4-b51e-d9e504307f70\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":555.492964,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"52d0313e-0d2b-44b4-b51e-d9e504307f70","startTime":1629213732756,"refId":"[1.255:67]","endTime":1629213733312,"exampleData":{"datasetIdentifierCode":"52d0313e-0d2b-44b4-b51e-d9e504307f70"},"exampleIndex":254},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13100,"millis":0.0131,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:12.989 karate.env system property was: null \n"},{"result":{"nanos":25001,"millis":0.025001,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":45100,"millis":0.0451,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":35201,"millis":0.035201,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":199303,"millis":0.199303,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":32300,"millis":0.0323,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":352505,"millis":0.352505,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":23500,"millis":0.0235,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":39201,"millis":0.039201,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":102102,"millis":0.102102,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":46800,"millis":0.0468,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12601,"millis":0.012601,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18700,"millis":0.0187,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":41801,"millis":0.041801,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '37e05521-c323-4dbe-aba4-de1178ba44a5'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3400,"millis":0.0034,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":674854200,"millis":674.8542,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1000,"millis":0.001,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":3592652,"millis":3.592652,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '37e05521-c323-4dbe-aba4-de1178ba44a5'"}},{"result":{"nanos":8377021,"millis":8.377021,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":5048474,"millis":5.048474,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":4987472,"millis":4.987472,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":5650782,"millis":5.650782,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":5106574,"millis":5.106574,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":106002,"millis":0.106002,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":3465250,"millis":3.46525,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":3105945,"millis":3.105945,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":3470950,"millis":3.47095,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":640710,"millis":0.64071,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":156902,"millis":0.156902,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:13.709 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/vogelrichtlijnverspreidingsoorten\\\/wfs?request=GetCapabilities&service=WFS \n"},{"result":{"nanos":3651353,"millis":3.651353,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":144902,"millis":0.144902,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:13.713 [print] #notpresent \n"},{"result":{"nanos":3479450,"millis":3.47945,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":142302,"millis":0.142302,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:13.717 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":70601,"millis":0.070601,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":73801,"millis":0.073801,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:13.717 [print] #notpresent \n"},{"result":{"nanos":6037388,"millis":6.037388,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":447606,"millis":0.447606,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:13.724 [print] Beheer PDOK \n"},{"result":{"nanos":819312,"millis":0.819312,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:13.724 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=fcefa13c-44e2-4953-b6d6-1ddceebc57fc#MD_DataIdentification \n"},{"result":{"nanos":6415693,"millis":6.415693,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":616109,"millis":0.616109,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"37e05521-c323-4dbe-aba4-de1178ba44a5\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":347205,"millis":0.347205,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"37e05521-c323-4dbe-aba4-de1178ba44a5\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":741.812071,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"37e05521-c323-4dbe-aba4-de1178ba44a5","startTime":1629213732989,"refId":"[1.256:67]","endTime":1629213733732,"exampleData":{"datasetIdentifierCode":"37e05521-c323-4dbe-aba4-de1178ba44a5"},"exampleIndex":255},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14800,"millis":0.0148,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:13.136 karate.env system property was: null \n"},{"result":{"nanos":27701,"millis":0.027701,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":47201,"millis":0.047201,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":41300,"millis":0.0413,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":323804,"millis":0.323804,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":35601,"millis":0.035601,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":389306,"millis":0.389306,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":29400,"millis":0.0294,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":433107,"millis":0.433107,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":118401,"millis":0.118401,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":55500,"millis":0.0555,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":15201,"millis":0.015201,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":21300,"millis":0.0213,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":45900,"millis":0.0459,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'e29b19de-d191-47f2-b944-5056a7674cce'"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4401,"millis":0.004401,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":527275956,"millis":527.275956,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1900,"millis":0.0019,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":589008,"millis":0.589008,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'e29b19de-d191-47f2-b944-5056a7674cce'"}},{"result":{"nanos":343605,"millis":0.343605,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":425106,"millis":0.425106,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":317105,"millis":0.317105,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":599408,"millis":0.599408,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":456406,"millis":0.456406,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":80002,"millis":0.080002,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":294904,"millis":0.294904,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":350305,"millis":0.350305,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":373206,"millis":0.373206,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":1724625,"millis":1.724625,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":675910,"millis":0.67591,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:13.672 [print] https:\/\/inspire.caris.nl\/gs5\/am\/wms?service=WMS&version=1.3.0&request=GetCapabilities \n"},{"result":{"nanos":432007,"millis":0.432007,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":428206,"millis":0.428206,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:13.673 [print] OGC:WMS \n"},{"result":{"nanos":391306,"millis":0.391306,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":424606,"millis":0.424606,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:13.673 [print] #notpresent \n"},{"result":{"nanos":94702,"millis":0.094702,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":404406,"millis":0.404406,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:13.674 [print] OGC:WMS \n"},{"result":{"nanos":489107,"millis":0.489107,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":395806,"millis":0.395806,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:13.675 [print] Ministerie van Defensie, Koninklijke Marine, Dienst der Hydrografie \n"},{"result":{"nanos":3192647,"millis":3.192647,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:13.678 [print] https:\/\/www.nationaalgeoregister.nl:443\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=4617f0e0-6af4-4ac0-9044-31df9d03071c#MD_DataIdentification \n"},{"result":{"nanos":384305,"millis":0.384305,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":454406,"millis":0.454406,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"e29b19de-d191-47f2-b944-5056a7674cce\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":7875515,"millis":7.875515,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"e29b19de-d191-47f2-b944-5056a7674cce\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":550.091588,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"e29b19de-d191-47f2-b944-5056a7674cce","startTime":1629213733136,"refId":"[1.257:67]","endTime":1629213733687,"exampleData":{"datasetIdentifierCode":"e29b19de-d191-47f2-b944-5056a7674cce"},"exampleIndex":256},{"sectionIndex":0,"stepResults":[{"result":{"nanos":44801,"millis":0.044801,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:13.313 karate.env system property was: null \n"},{"result":{"nanos":45101,"millis":0.045101,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":140502,"millis":0.140502,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":119902,"millis":0.119902,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":262604,"millis":0.262604,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":84101,"millis":0.084101,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":354905,"millis":0.354905,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":70401,"millis":0.070401,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":9926344,"millis":9.926344,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":150302,"millis":0.150302,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":106602,"millis":0.106602,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":34900,"millis":0.0349,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19601,"millis":0.019601,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":9800,"millis":0.0098,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":11000,"millis":0.011,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":9200,"millis":0.0092,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '82fa284e-8218-40e4-a593-c2f8a832c3d5'"}},{"result":{"nanos":9000,"millis":0.009,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":9000,"millis":0.009,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":565834816,"millis":565.834816,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1900,"millis":0.0019,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":454807,"millis":0.454807,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '82fa284e-8218-40e4-a593-c2f8a832c3d5'"}},{"result":{"nanos":405406,"millis":0.405406,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":317304,"millis":0.317304,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":333504,"millis":0.333504,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":557008,"millis":0.557008,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":448606,"millis":0.448606,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":80501,"millis":0.080501,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":322105,"millis":0.322105,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":271704,"millis":0.271704,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":274004,"millis":0.274004,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":65401,"millis":0.065401,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":350205,"millis":0.350205,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:13.894 [print] https:\/\/www.gdngeoservices.nl\/inspire\/wms\/olie_en_gasvelden?service=WMS&request=GetCapabilities \n"},{"result":{"nanos":618109,"millis":0.618109,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":67201,"millis":0.067201,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:13.895 [print] #notpresent \n"},{"result":{"nanos":475106,"millis":0.475106,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":215203,"millis":0.215203,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:13.896 [print] OGC:WMS \n"},{"result":{"nanos":28600,"millis":0.0286,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":39201,"millis":0.039201,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:13.896 [print] #notpresent \n"},{"result":{"nanos":362305,"millis":0.362305,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":247304,"millis":0.247304,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:13.897 [print] TNO Geologische Dienst Nederland \n"},{"result":{"nanos":42401,"millis":0.042401,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:13.897 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire?SERVICE=CSW&version=2.0.2&REQUEST=GetRecordById&ID=b61a773c-ecad-4e60-93e9-0a4caac0b52f&OUTPUTSCHEMA=http:\/\/www.isotc211.org\/2005\/gmd&ELEMENTSETNAME=full#MD_DataIdentification \n"},{"result":{"nanos":359905,"millis":0.359905,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":455607,"millis":0.455607,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"82fa284e-8218-40e4-a593-c2f8a832c3d5\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":294504,"millis":0.294504,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"82fa284e-8218-40e4-a593-c2f8a832c3d5\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":584.330783,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"82fa284e-8218-40e4-a593-c2f8a832c3d5","startTime":1629213733311,"refId":"[1.258:67]","endTime":1629213733898,"exampleData":{"datasetIdentifierCode":"82fa284e-8218-40e4-a593-c2f8a832c3d5"},"exampleIndex":257},{"sectionIndex":0,"stepResults":[{"result":{"nanos":42701,"millis":0.042701,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:13.321 karate.env system property was: null \n"},{"result":{"nanos":30400,"millis":0.0304,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":96802,"millis":0.096802,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":80501,"millis":0.080501,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":214003,"millis":0.214003,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":80401,"millis":0.080401,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":328405,"millis":0.328405,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":62801,"millis":0.062801,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":73201,"millis":0.073201,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":145402,"millis":0.145402,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":107902,"millis":0.107902,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":33200,"millis":0.0332,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":27301,"millis":0.027301,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":10000,"millis":0.01,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":9400,"millis":0.0094,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":10101,"millis":0.010101,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'wt-f5eb-b09f-4f6d-8397-8878a1m86238'"}},{"result":{"nanos":8500,"millis":0.0085,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":8900,"millis":0.0089,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":538289516,"millis":538.289516,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1400,"millis":0.0014,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":615509,"millis":0.615509,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'wt-f5eb-b09f-4f6d-8397-8878a1m86238'"}},{"result":{"nanos":545908,"millis":0.545908,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":484107,"millis":0.484107,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":465906,"millis":0.465906,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":528807,"millis":0.528807,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":487608,"millis":0.487608,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":33200,"millis":0.0332,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":368306,"millis":0.368306,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":378405,"millis":0.378405,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":386405,"millis":0.386405,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":114402,"millis":0.114402,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":709411,"millis":0.709411,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:13.867 [print] https:\/\/haleconnect.com\/ows\/services\/org.292.42527b86-52a7-4b94-9f83-8e8a9e900f5a_wms?service=WMS&version=1.3.0&request=GetCapabilities \n"},{"result":{"nanos":375005,"millis":0.375005,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":85302,"millis":0.085302,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:13.867 [print] OGC:WMS \n"},{"result":{"nanos":341805,"millis":0.341805,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":64701,"millis":0.064701,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:13.868 [print] #notpresent \n"},{"result":{"nanos":28900,"millis":0.0289,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":35401,"millis":0.035401,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:13.868 [print] OGC:WMS \n"},{"result":{"nanos":543508,"millis":0.543508,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":54301,"millis":0.054301,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:13.868 [print] Rijkswaterstaat \n"},{"result":{"nanos":40500,"millis":0.0405,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:13.869 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=wt-f5eb-b09f-4f6d-8397-8878a1b86238#MD_DataIdentification \n"},{"result":{"nanos":838713,"millis":0.838713,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":548308,"millis":0.548308,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"wt-f5eb-b09f-4f6d-8397-8878a1m86238\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":306304,"millis":0.306304,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"wt-f5eb-b09f-4f6d-8397-8878a1m86238\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":548.041559,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"wt-f5eb-b09f-4f6d-8397-8878a1m86238","startTime":1629213733314,"refId":"[1.259:67]","endTime":1629213733870,"exampleData":{"datasetIdentifierCode":"wt-f5eb-b09f-4f6d-8397-8878a1m86238"},"exampleIndex":258},{"sectionIndex":0,"stepResults":[{"result":{"nanos":57700,"millis":0.0577,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:13.692 karate.env system property was: null \n"},{"result":{"nanos":42600,"millis":0.0426,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":124002,"millis":0.124002,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":102502,"millis":0.102502,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":6495394,"millis":6.495394,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":144603,"millis":0.144603,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":524507,"millis":0.524507,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":98001,"millis":0.098001,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":473407,"millis":0.473407,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":218603,"millis":0.218603,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":151803,"millis":0.151803,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":41500,"millis":0.0415,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":31300,"millis":0.0313,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":21900,"millis":0.0219,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":10901,"millis":0.010901,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":16100,"millis":0.0161,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'cd370f58-0e54-48d6-b83b-ccd332bfb7c7'"}},{"result":{"nanos":10800,"millis":0.0108,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":10100,"millis":0.0101,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":523050173,"millis":523.050173,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2000,"millis":0.002,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":543108,"millis":0.543108,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'cd370f58-0e54-48d6-b83b-ccd332bfb7c7'"}},{"result":{"nanos":512507,"millis":0.512507,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":448307,"millis":0.448307,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":423806,"millis":0.423806,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":488907,"millis":0.488907,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":431307,"millis":0.431307,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":26700,"millis":0.0267,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":311405,"millis":0.311405,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":349105,"millis":0.349105,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":305805,"millis":0.305805,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":66201,"millis":0.066201,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":594808,"millis":0.594808,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:14.229 [print] https:\/\/inspire.rivm.nl\/geoserver\/wms?request=GetCapabilities \n"},{"result":{"nanos":507007,"millis":0.507007,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":218703,"millis":0.218703,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:14.230 [print] OGC:WMS \n"},{"result":{"nanos":349906,"millis":0.349906,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":194302,"millis":0.194302,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:14.231 [print] #notpresent \n"},{"result":{"nanos":29000,"millis":0.029,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":152702,"millis":0.152702,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:14.231 [print] OGC:WMS \n"},{"result":{"nanos":429507,"millis":0.429507,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":818612,"millis":0.818612,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:14.232 [print] Rijksinstituut voor Volksgezondheid en Milieu \n"},{"result":{"nanos":601808,"millis":0.601808,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:14.233 [print] http:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=ad6caa40-89ab-47e3-85ab-3f8e32024a71#MD_DataIdentification \n"},{"result":{"nanos":474606,"millis":0.474606,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":545408,"millis":0.545408,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"cd370f58-0e54-48d6-b83b-ccd332bfb7c7\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":298004,"millis":0.298004,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"cd370f58-0e54-48d6-b83b-ccd332bfb7c7\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":540.749427,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"cd370f58-0e54-48d6-b83b-ccd332bfb7c7","startTime":1629213733689,"refId":"[1.260:67]","endTime":1629213734234,"exampleData":{"datasetIdentifierCode":"cd370f58-0e54-48d6-b83b-ccd332bfb7c7"},"exampleIndex":259},{"sectionIndex":0,"stepResults":[{"result":{"nanos":45900,"millis":0.0459,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:13.734 karate.env system property was: null \n"},{"result":{"nanos":36201,"millis":0.036201,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":118702,"millis":0.118702,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":91301,"millis":0.091301,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":281905,"millis":0.281905,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":87701,"millis":0.087701,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":375206,"millis":0.375206,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":70901,"millis":0.070901,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":93201,"millis":0.093201,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":177703,"millis":0.177703,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":123701,"millis":0.123701,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":36900,"millis":0.0369,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":30501,"millis":0.030501,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":11400,"millis":0.0114,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":10500,"millis":0.0105,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":10300,"millis":0.0103,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'cf69ec50-9849-4afd-853c-ee5621fd336d'"}},{"result":{"nanos":9500,"millis":0.0095,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":9600,"millis":0.0096,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":552224991,"millis":552.224991,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1400,"millis":0.0014,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":671610,"millis":0.67161,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'cf69ec50-9849-4afd-853c-ee5621fd336d'"}},{"result":{"nanos":536608,"millis":0.536608,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":438607,"millis":0.438607,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":452606,"millis":0.452606,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":511007,"millis":0.511007,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":512708,"millis":0.512708,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":28700,"millis":0.0287,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":393706,"millis":0.393706,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":341105,"millis":0.341105,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":569609,"millis":0.569609,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":68101,"millis":0.068101,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":175702,"millis":0.175702,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:14.294 [print] https:\\\/\\\/waterwebservices.rijkswaterstaat.nl\\\/services\\\/distributielaagWFS\\\/distributielaag_dbo?service=WFS&version=1.1.0&request=GetCapabilities \n"},{"result":{"nanos":403106,"millis":0.403106,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":247804,"millis":0.247804,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:14.294 [print] [\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":356205,"millis":0.356205,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":65300,"millis":0.0653,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:14.295 [print] #notpresent \n"},{"result":{"nanos":39200,"millis":0.0392,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":252404,"millis":0.252404,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:14.296 [print] [\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":486907,"millis":0.486907,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":243504,"millis":0.243504,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:14.296 [print] Rijkswaterstaat \n"},{"result":{"nanos":462907,"millis":0.462907,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:14.297 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire?SERVICE=CSW&version=2.0.2&request=GetRecordById&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=cf69ec50-9849-4afd-853c-ee56211d336d#MD_DataIdentification \n"},{"result":{"nanos":461107,"millis":0.461107,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":1916727,"millis":1.916727,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"cf69ec50-9849-4afd-853c-ee5621fd336d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":2008129,"millis":2.008129,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"cf69ec50-9849-4afd-853c-ee5621fd336d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":565.490883,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"cf69ec50-9849-4afd-853c-ee5621fd336d","startTime":1629213733734,"refId":"[1.261:67]","endTime":1629213734301,"exampleData":{"datasetIdentifierCode":"cf69ec50-9849-4afd-853c-ee5621fd336d"},"exampleIndex":260},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14801,"millis":0.014801,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:13.872 karate.env system property was: null \n"},{"result":{"nanos":27100,"millis":0.0271,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":49401,"millis":0.049401,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":36001,"millis":0.036001,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":220703,"millis":0.220703,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":31900,"millis":0.0319,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":363705,"millis":0.363705,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":27400,"millis":0.0274,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":40001,"millis":0.040001,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":254004,"millis":0.254004,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":53901,"millis":0.053901,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12900,"millis":0.0129,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18600,"millis":0.0186,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4801,"millis":0.004801,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":42100,"millis":0.0421,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'wt-83730-e750-485a-9c0c-39bf9bf72cf8'"}},{"result":{"nanos":43100,"millis":0.0431,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":536193147,"millis":536.193147,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2300,"millis":0.0023,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":581508,"millis":0.581508,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'wt-83730-e750-485a-9c0c-39bf9bf72cf8'"}},{"result":{"nanos":543008,"millis":0.543008,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":486607,"millis":0.486607,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":482907,"millis":0.482907,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":473306,"millis":0.473306,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":445106,"millis":0.445106,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":20900,"millis":0.0209,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":318904,"millis":0.318904,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":365406,"millis":0.365406,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":322505,"millis":0.322505,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":69301,"millis":0.069301,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":156202,"millis":0.156202,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:14.415 [print] https:\/\/haleconnect.com\/ows\/services\/org.292.42527b86-52a7-4b94-9f83-8e8a9e900f5a_wfs?service=WFS&version=2.0.0&request=GetCapabilities \n"},{"result":{"nanos":339505,"millis":0.339505,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":88901,"millis":0.088901,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:14.416 [print] OGC:WFS \n"},{"result":{"nanos":359606,"millis":0.359606,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":53100,"millis":0.0531,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:14.416 [print] #notpresent \n"},{"result":{"nanos":21500,"millis":0.0215,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":49601,"millis":0.049601,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:14.416 [print] OGC:WFS \n"},{"result":{"nanos":435306,"millis":0.435306,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":85501,"millis":0.085501,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:14.417 [print] Rijkswaterstaat \n"},{"result":{"nanos":39500,"millis":0.0395,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:14.417 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=wt-83730-e750-485a-9c0c-39bf9be72cf8#MD_DataIdentification \n"},{"result":{"nanos":418106,"millis":0.418106,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":530308,"millis":0.530308,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"wt-83730-e750-485a-9c0c-39bf9bf72cf8\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":968014,"millis":0.968014,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"wt-83730-e750-485a-9c0c-39bf9bf72cf8\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":545.099573,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"wt-83730-e750-485a-9c0c-39bf9bf72cf8","startTime":1629213733872,"refId":"[1.262:67]","endTime":1629213734419,"exampleData":{"datasetIdentifierCode":"wt-83730-e750-485a-9c0c-39bf9bf72cf8"},"exampleIndex":261},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15401,"millis":0.015401,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:13.901 karate.env system property was: null \n"},{"result":{"nanos":27200,"millis":0.0272,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":54101,"millis":0.054101,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":40801,"millis":0.040801,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":260704,"millis":0.260704,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":35500,"millis":0.0355,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":392405,"millis":0.392405,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":29901,"millis":0.029901,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":42200,"millis":0.0422,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":277404,"millis":0.277404,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":57901,"millis":0.057901,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":14600,"millis":0.0146,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20900,"millis":0.0209,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5701,"millis":0.005701,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":44400,"millis":0.0444,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'ebd6ea46-ee7b-432f-83c4-058c889a790d'"}},{"result":{"nanos":9400,"millis":0.0094,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":554720611,"millis":554.720611,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":22901,"millis":0.022901,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":481807,"millis":0.481807,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'ebd6ea46-ee7b-432f-83c4-058c889a790d'"}},{"result":{"nanos":497307,"millis":0.497307,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":466307,"millis":0.466307,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":441207,"millis":0.441207,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":493907,"millis":0.493907,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":469907,"millis":0.469907,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":23600,"millis":0.0236,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":354805,"millis":0.354805,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":338205,"millis":0.338205,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":382006,"millis":0.382006,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":65301,"millis":0.065301,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":100201,"millis":0.100201,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:14.461 [print] http:\\\/\\\/services.inspire-provincies.nl\\\/EnvironmentalMonitoringFacilities\\\/services\\\/download_EF?request=GetCapabilities \n"},{"result":{"nanos":793712,"millis":0.793712,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":106602,"millis":0.106602,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:14.462 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":368105,"millis":0.368105,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":101102,"millis":0.101102,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:14.463 [print] #notpresent \n"},{"result":{"nanos":29300,"millis":0.0293,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":67201,"millis":0.067201,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:14.463 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":512907,"millis":0.512907,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":74301,"millis":0.074301,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:14.464 [print] Interprovinciaal Overleg \n"},{"result":{"nanos":55401,"millis":0.055401,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:14.464 [print] [\"http:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/nl\\\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=c829abeb-bfac-4224-8332-e7a9a89e692e&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full#MD_DataIdentification\",\"http:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/nl\\\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=fe45c540-e37d-11e4-b571-0800200c9a66&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full#MD_DataIdentification\"] \n"},{"result":{"nanos":420106,"millis":0.420106,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":553408,"millis":0.553408,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"ebd6ea46-ee7b-432f-83c4-058c889a790d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":317204,"millis":0.317204,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"ebd6ea46-ee7b-432f-83c4-058c889a790d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":563.59554,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"ebd6ea46-ee7b-432f-83c4-058c889a790d","startTime":1629213733900,"refId":"[1.263:67]","endTime":1629213734465,"exampleData":{"datasetIdentifierCode":"ebd6ea46-ee7b-432f-83c4-058c889a790d"},"exampleIndex":262},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14300,"millis":0.0143,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:14.236 karate.env system property was: null \n"},{"result":{"nanos":26701,"millis":0.026701,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":53301,"millis":0.053301,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":37700,"millis":0.0377,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":212404,"millis":0.212404,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":32800,"millis":0.0328,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":349905,"millis":0.349905,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":24500,"millis":0.0245,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":284104,"millis":0.284104,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":118202,"millis":0.118202,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":53001,"millis":0.053001,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13900,"millis":0.0139,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18800,"millis":0.0188,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5200,"millis":0.0052,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":45901,"millis":0.045901,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'a299a4af-ccd8-4d32-b1fb-ffab77b32e0e'"}},{"result":{"nanos":7200,"millis":0.0072,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":543091235,"millis":543.091235,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1700,"millis":0.0017,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":818911,"millis":0.818911,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'a299a4af-ccd8-4d32-b1fb-ffab77b32e0e'"}},{"result":{"nanos":513507,"millis":0.513507,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":378206,"millis":0.378206,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":380406,"millis":0.380406,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":398506,"millis":0.398506,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":343405,"millis":0.343405,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":21100,"millis":0.0211,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":263004,"millis":0.263004,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":256304,"millis":0.256304,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":261804,"millis":0.261804,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":58801,"millis":0.058801,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":96701,"millis":0.096701,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:14.785 [print] https:\/\/www.broinspireservices.nl\/wfs\/osgegmw-a-v1.0?request=GetCapabilities&service=WFS&version=2.0.0 \n"},{"result":{"nanos":287005,"millis":0.287005,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":109701,"millis":0.109701,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:14.785 [print] #notpresent \n"},{"result":{"nanos":378306,"millis":0.378306,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":171303,"millis":0.171303,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:14.786 [print] OGC:WFS \n"},{"result":{"nanos":26200,"millis":0.0262,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":43701,"millis":0.043701,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:14.786 [print] #notpresent \n"},{"result":{"nanos":553308,"millis":0.553308,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":100601,"millis":0.100601,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:14.787 [print] TNO Geologische Dienst Nederland \n"},{"result":{"nanos":48600,"millis":0.0486,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:14.787 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire?SERVICE=CSW&version=2.0.2&REQUEST=GetRecordById&ID=f99e915a-75e5-4c36-97f2-61eff692d85b&OUTPUTSCHEMA=http:\/\/www.isotc211.org\/2005\/gmd&ELEMENTSETNAME=full#MD_DataIdentification \n"},{"result":{"nanos":428107,"millis":0.428107,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":580708,"millis":0.580708,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"a299a4af-ccd8-4d32-b1fb-ffab77b32e0e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":299105,"millis":0.299105,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"a299a4af-ccd8-4d32-b1fb-ffab77b32e0e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":551.216154,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"a299a4af-ccd8-4d32-b1fb-ffab77b32e0e","startTime":1629213734236,"refId":"[1.264:67]","endTime":1629213734788,"exampleData":{"datasetIdentifierCode":"a299a4af-ccd8-4d32-b1fb-ffab77b32e0e"},"exampleIndex":263},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15000,"millis":0.015,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:14.303 karate.env system property was: null \n"},{"result":{"nanos":27000,"millis":0.027,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":46001,"millis":0.046001,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":41000,"millis":0.041,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":203903,"millis":0.203903,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":34100,"millis":0.0341,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":358105,"millis":0.358105,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":26000,"millis":0.026,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":42701,"millis":0.042701,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":288804,"millis":0.288804,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":55901,"millis":0.055901,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13200,"millis":0.0132,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19101,"millis":0.019101,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":45201,"millis":0.045201,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '684ff4f6-1652-45a8-93f0-8e16d37b2a66'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":5300,"millis":0.0053,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":524855872,"millis":524.855872,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2100,"millis":0.0021,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":428906,"millis":0.428906,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '684ff4f6-1652-45a8-93f0-8e16d37b2a66'"}},{"result":{"nanos":397405,"millis":0.397405,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":328104,"millis":0.328104,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":317005,"millis":0.317005,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":355605,"millis":0.355605,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":343505,"millis":0.343505,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":18800,"millis":0.0188,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":254104,"millis":0.254104,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":255403,"millis":0.255403,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":286104,"millis":0.286104,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":48301,"millis":0.048301,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":930013,"millis":0.930013,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:14.834 [print] https:\/\/geodata.nationaalgeoregister.nl\/hwh\/eenheden\/wms\/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetCapabilities \n"},{"result":{"nanos":301805,"millis":0.301805,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":216103,"millis":0.216103,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:14.834 [print] OGC:WMS \n"},{"result":{"nanos":282104,"millis":0.282104,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":218503,"millis":0.218503,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:14.835 [print] #notpresent \n"},{"result":{"nanos":25300,"millis":0.0253,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":31100,"millis":0.0311,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:14.835 [print] OGC:WMS \n"},{"result":{"nanos":514207,"millis":0.514207,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":215603,"millis":0.215603,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:14.836 [print] Beheer PDOK \n"},{"result":{"nanos":33301,"millis":0.033301,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:14.836 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=2d4ec7e6-50ae-4c71-bd20-5b9211e2135f#MD_DataIdentification \n"},{"result":{"nanos":932013,"millis":0.932013,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":442906,"millis":0.442906,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"684ff4f6-1652-45a8-93f0-8e16d37b2a66\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":270204,"millis":0.270204,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"684ff4f6-1652-45a8-93f0-8e16d37b2a66\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":533.538293,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"684ff4f6-1652-45a8-93f0-8e16d37b2a66","startTime":1629213734303,"refId":"[1.265:67]","endTime":1629213734838,"exampleData":{"datasetIdentifierCode":"684ff4f6-1652-45a8-93f0-8e16d37b2a66"},"exampleIndex":264},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16300,"millis":0.0163,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:14.421 karate.env system property was: null \n"},{"result":{"nanos":41301,"millis":0.041301,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":55601,"millis":0.055601,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":51500,"millis":0.0515,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":227303,"millis":0.227303,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":33100,"millis":0.0331,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":360205,"millis":0.360205,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":25000,"millis":0.025,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":44901,"millis":0.044901,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":253704,"millis":0.253704,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":57901,"millis":0.057901,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13900,"millis":0.0139,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":29501,"millis":0.029501,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":7500,"millis":0.0075,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":89401,"millis":0.089401,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '25a99d92-ea8a-4163-82ab-3521c9b0c96b'"}},{"result":{"nanos":6600,"millis":0.0066,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":532633484,"millis":532.633484,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2800,"millis":0.0028,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":567008,"millis":0.567008,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '25a99d92-ea8a-4163-82ab-3521c9b0c96b'"}},{"result":{"nanos":549508,"millis":0.549508,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":501407,"millis":0.501407,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":507507,"millis":0.507507,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":557608,"millis":0.557608,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":513008,"millis":0.513008,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":24100,"millis":0.0241,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":370006,"millis":0.370006,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":366505,"millis":0.366505,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":386506,"millis":0.386506,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":60101,"millis":0.060101,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":130702,"millis":0.130702,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:14.960 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/bestandbodemgebruik2015\\\/wfs?service=WFS&request=GetCapabilities \n"},{"result":{"nanos":430807,"millis":0.430807,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":269404,"millis":0.269404,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:14.961 [print] [\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":420206,"millis":0.420206,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":263904,"millis":0.263904,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:14.962 [print] #notpresent \n"},{"result":{"nanos":31600,"millis":0.0316,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":37800,"millis":0.0378,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:14.962 [print] [\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":535007,"millis":0.535007,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":71801,"millis":0.071801,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:14.963 [print] Beheer PDOK \n"},{"result":{"nanos":589508,"millis":0.589508,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:14.963 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=2d3dd6d2-2d2b-4b5f-9e30-86e19ed77a56#MD_DataIdentification \n"},{"result":{"nanos":517308,"millis":0.517308,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":469107,"millis":0.469107,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"25a99d92-ea8a-4163-82ab-3521c9b0c96b\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":275804,"millis":0.275804,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"25a99d92-ea8a-4163-82ab-3521c9b0c96b\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":542.405824,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"25a99d92-ea8a-4163-82ab-3521c9b0c96b","startTime":1629213734420,"refId":"[1.266:67]","endTime":1629213734965,"exampleData":{"datasetIdentifierCode":"25a99d92-ea8a-4163-82ab-3521c9b0c96b"},"exampleIndex":265},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14600,"millis":0.0146,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:14.467 karate.env system property was: null \n"},{"result":{"nanos":26200,"millis":0.0262,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":47501,"millis":0.047501,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":37301,"millis":0.037301,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":205703,"millis":0.205703,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":32100,"millis":0.0321,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":352705,"millis":0.352705,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":25200,"millis":0.0252,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":42601,"millis":0.042601,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":109102,"millis":0.109102,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":53000,"millis":0.053,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12200,"millis":0.0122,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20800,"millis":0.0208,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5500,"millis":0.0055,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":40700,"millis":0.0407,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '00e8746f-5031-413e-8343-9203c8ea82ee'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":531409766,"millis":531.409766,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1800,"millis":0.0018,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":489407,"millis":0.489407,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '00e8746f-5031-413e-8343-9203c8ea82ee'"}},{"result":{"nanos":464506,"millis":0.464506,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":451107,"millis":0.451107,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":427406,"millis":0.427406,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":465406,"millis":0.465406,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":447007,"millis":0.447007,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":25300,"millis":0.0253,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":328004,"millis":0.328004,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":317005,"millis":0.317005,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":330805,"millis":0.330805,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":55901,"millis":0.055901,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":81101,"millis":0.081101,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:15.004 [print] http:\/\/services.inspire-provincies.nl\/NaturalRiskZones\/services\/download_NZ?request=GetCapabilities \n"},{"result":{"nanos":334905,"millis":0.334905,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":242704,"millis":0.242704,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:15.005 [print] OGC:WFS \n"},{"result":{"nanos":334205,"millis":0.334205,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":195503,"millis":0.195503,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:15.005 [print] #notpresent \n"},{"result":{"nanos":24400,"millis":0.0244,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":37301,"millis":0.037301,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:15.006 [print] OGC:WFS \n"},{"result":{"nanos":552608,"millis":0.552608,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":215203,"millis":0.215203,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:15.006 [print] Interprovinciaal Overleg \n"},{"result":{"nanos":39801,"millis":0.039801,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:15.006 [print] [\"http:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/nl\\\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=88f76a94-ee4d-4e0c-9fde-91b692403e39&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full#MD_DataIdentification\",\"http:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/nl\\\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=08af1182-91fe-4d21-aa21-ee002953c3cc&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full#MD_DataIdentification\",\"http:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/nl\\\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=d91126e0-e37b-11e4-b571-0800200c9a66&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full#MD_DataIdentification\",\"http:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/nl\\\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=667ebfb0-e37c-11e4-b571-0800200c9a66&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full#MD_DataIdentification\"] \n"},{"result":{"nanos":1944728,"millis":1.944728,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":463607,"millis":0.463607,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"00e8746f-5031-413e-8343-9203c8ea82ee\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":302204,"millis":0.302204,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"00e8746f-5031-413e-8343-9203c8ea82ee\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":541.019603,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"00e8746f-5031-413e-8343-9203c8ea82ee","startTime":1629213734467,"refId":"[1.267:67]","endTime":1629213735009,"exampleData":{"datasetIdentifierCode":"00e8746f-5031-413e-8343-9203c8ea82ee"},"exampleIndex":266},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15901,"millis":0.015901,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:14.791 karate.env system property was: null \n"},{"result":{"nanos":27400,"millis":0.0274,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":50601,"millis":0.050601,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":40101,"millis":0.040101,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":224103,"millis":0.224103,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":35801,"millis":0.035801,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":361505,"millis":0.361505,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":27900,"millis":0.0279,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":43300,"millis":0.0433,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":103302,"millis":0.103302,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":142802,"millis":0.142802,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":15100,"millis":0.0151,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20101,"millis":0.020101,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":7200,"millis":0.0072,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":53101,"millis":0.053101,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'a8ad0d7d-ea9e-4261-bc92-772e99a41387'"}},{"result":{"nanos":6200,"millis":0.0062,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3700,"millis":0.0037,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":526813000,"millis":526.813,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2400,"millis":0.0024,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":514907,"millis":0.514907,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'a8ad0d7d-ea9e-4261-bc92-772e99a41387'"}},{"result":{"nanos":483707,"millis":0.483707,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":423806,"millis":0.423806,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":408106,"millis":0.408106,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":519108,"millis":0.519108,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":447406,"millis":0.447406,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":23100,"millis":0.0231,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":297704,"millis":0.297704,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":287304,"millis":0.287304,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":283704,"millis":0.283704,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":59001,"millis":0.059001,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":95501,"millis":0.095501,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:15.323 [print] https:\/\/geodata.nationaalgeoregister.nl\/inspireadressen\/v2\/wfs?service=wfs&request=GetCapabilities \n"},{"result":{"nanos":307404,"millis":0.307404,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":65901,"millis":0.065901,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:15.323 [print] #notpresent \n"},{"result":{"nanos":288604,"millis":0.288604,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":51601,"millis":0.051601,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:15.324 [print] OGC:WFS \n"},{"result":{"nanos":20201,"millis":0.020201,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":21100,"millis":0.0211,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:15.324 [print] #notpresent \n"},{"result":{"nanos":374706,"millis":0.374706,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":51200,"millis":0.0512,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:15.324 [print] Beheer PDOK \n"},{"result":{"nanos":31401,"millis":0.031401,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:15.324 [print] http:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/eng\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=76091be7-358a-4a44-8182-b4139c96c6a4#MD_DataIdentification \n"},{"result":{"nanos":346505,"millis":0.346505,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":528108,"millis":0.528108,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"a8ad0d7d-ea9e-4261-bc92-772e99a41387\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":306304,"millis":0.306304,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"a8ad0d7d-ea9e-4261-bc92-772e99a41387\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":534.234607,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"a8ad0d7d-ea9e-4261-bc92-772e99a41387","startTime":1629213734790,"refId":"[1.268:67]","endTime":1629213735326,"exampleData":{"datasetIdentifierCode":"a8ad0d7d-ea9e-4261-bc92-772e99a41387"},"exampleIndex":267},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13100,"millis":0.0131,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:14.839 karate.env system property was: null \n"},{"result":{"nanos":26400,"millis":0.0264,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":45401,"millis":0.045401,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":37001,"millis":0.037001,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":193303,"millis":0.193303,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":29400,"millis":0.0294,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":329705,"millis":0.329705,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":30201,"millis":0.030201,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":41300,"millis":0.0413,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":246504,"millis":0.246504,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":50201,"millis":0.050201,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12400,"millis":0.0124,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18600,"millis":0.0186,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4701,"millis":0.004701,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5200,"millis":0.0052,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":35500,"millis":0.0355,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '40c4ec8c-14b2-4104-982b-c0ebfd5397c4'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4101,"millis":0.004101,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":553688587,"millis":553.688587,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1700,"millis":0.0017,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":524407,"millis":0.524407,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '40c4ec8c-14b2-4104-982b-c0ebfd5397c4'"}},{"result":{"nanos":494607,"millis":0.494607,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":453907,"millis":0.453907,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":442006,"millis":0.442006,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":516507,"millis":0.516507,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":494607,"millis":0.494607,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":25200,"millis":0.0252,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":350505,"millis":0.350505,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":333305,"millis":0.333305,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":342605,"millis":0.342605,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":68201,"millis":0.068201,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":568208,"millis":0.568208,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:15.399 [print] https:\/\/geodata.nationaalgeoregister.nl\/inspire\/su-grid\/wfs?request=GetCapabilities&service=wfs \n"},{"result":{"nanos":384505,"millis":0.384505,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":74901,"millis":0.074901,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:15.400 [print] OGC:WFS \n"},{"result":{"nanos":571708,"millis":0.571708,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":230704,"millis":0.230704,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:15.400 [print] #notpresent \n"},{"result":{"nanos":30100,"millis":0.0301,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":44301,"millis":0.044301,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:15.401 [print] OGC:WFS \n"},{"result":{"nanos":688010,"millis":0.68801,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":239904,"millis":0.239904,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:15.402 [print] Beheer PDOK \n"},{"result":{"nanos":42600,"millis":0.0426,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:15.402 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=db8d613f-5edc-4467-9cc0-e2dcfb9d64a8#MD_DataIdentification \n"},{"result":{"nanos":1133616,"millis":1.133616,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":530708,"millis":0.530708,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"40c4ec8c-14b2-4104-982b-c0ebfd5397c4\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":320505,"millis":0.320505,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"40c4ec8c-14b2-4104-982b-c0ebfd5397c4\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":563.722932,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"40c4ec8c-14b2-4104-982b-c0ebfd5397c4","startTime":1629213734839,"refId":"[1.269:67]","endTime":1629213735404,"exampleData":{"datasetIdentifierCode":"40c4ec8c-14b2-4104-982b-c0ebfd5397c4"},"exampleIndex":268},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13201,"millis":0.013201,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:14.967 karate.env system property was: null \n"},{"result":{"nanos":25500,"millis":0.0255,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":47201,"millis":0.047201,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":34000,"millis":0.034,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":223203,"millis":0.223203,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":57501,"millis":0.057501,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":326305,"millis":0.326305,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":24300,"millis":0.0243,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":38701,"millis":0.038701,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":700110,"millis":0.70011,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":59800,"millis":0.0598,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":14801,"millis":0.014801,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18300,"millis":0.0183,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":54201,"millis":0.054201,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '070014b4-1f63-4819-beea-000b7d5f8d86'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3501,"millis":0.003501,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":675858250,"millis":675.85825,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2400,"millis":0.0024,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":466807,"millis":0.466807,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '070014b4-1f63-4819-beea-000b7d5f8d86'"}},{"result":{"nanos":373606,"millis":0.373606,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":308704,"millis":0.308704,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":313905,"millis":0.313905,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":385906,"millis":0.385906,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":322905,"millis":0.322905,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":19200,"millis":0.0192,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":255404,"millis":0.255404,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":246504,"millis":0.246504,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":254303,"millis":0.254303,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":57900,"millis":0.0579,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":420406,"millis":0.420406,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:15.649 [print] https:\/\/www.broinspireservices.nl\/atom\/services.atom \n"},{"result":{"nanos":315104,"millis":0.315104,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":217404,"millis":0.217404,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:15.649 [print] #notpresent \n"},{"result":{"nanos":286104,"millis":0.286104,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":188503,"millis":0.188503,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:15.650 [print] INSPIRE Atom \n"},{"result":{"nanos":24500,"millis":0.0245,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":139502,"millis":0.139502,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:15.650 [print] #notpresent \n"},{"result":{"nanos":335005,"millis":0.335005,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":214004,"millis":0.214004,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:15.651 [print] TNO Geologische Dienst Nederland \n"},{"result":{"nanos":35100,"millis":0.0351,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:15.651 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire?SERVICE=CSW&version=2.0.2&REQUEST=GetRecordById&ID=F646DFB9-5BF6-EAB9-042B-CAB6FF2DC275&OUTPUTSCHEMA=http:\/\/www.isotc211.org\/2005\/gmd&ELEMENTSETNAME=full#MD_DataIdentification \n"},{"result":{"nanos":335504,"millis":0.335504,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":1815126,"millis":1.815126,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"070014b4-1f63-4819-beea-000b7d5f8d86\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":382305,"millis":0.382305,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"070014b4-1f63-4819-beea-000b7d5f8d86\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":685.227986,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"070014b4-1f63-4819-beea-000b7d5f8d86","startTime":1629213734967,"refId":"[1.270:67]","endTime":1629213735654,"exampleData":{"datasetIdentifierCode":"070014b4-1f63-4819-beea-000b7d5f8d86"},"exampleIndex":269},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13900,"millis":0.0139,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:15.011 karate.env system property was: null \n"},{"result":{"nanos":25901,"millis":0.025901,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":44800,"millis":0.0448,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":34000,"millis":0.034,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":224303,"millis":0.224303,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":178602,"millis":0.178602,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":326505,"millis":0.326505,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":24700,"millis":0.0247,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":41000,"millis":0.041,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":256504,"millis":0.256504,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":51701,"millis":0.051701,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":14900,"millis":0.0149,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17700,"millis":0.0177,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":39301,"millis":0.039301,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '7e87a655-c4eb-404d-9d0a-efa2dccef7cc'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":671381786,"millis":671.381786,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1300,"millis":0.0013,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":389906,"millis":0.389906,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '7e87a655-c4eb-404d-9d0a-efa2dccef7cc'"}},{"result":{"nanos":424406,"millis":0.424406,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":407806,"millis":0.407806,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":368805,"millis":0.368805,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":423107,"millis":0.423107,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":406006,"millis":0.406006,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":20100,"millis":0.0201,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":310405,"millis":0.310405,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":282504,"millis":0.282504,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":286204,"millis":0.286204,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":48101,"millis":0.048101,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":465107,"millis":0.465107,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:15.688 [print] https:\/\/geodata.nationaalgeoregister.nl\/inspire\/gn\/wfs?&request=GetCapabilities&service=WFS \n"},{"result":{"nanos":339105,"millis":0.339105,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":51101,"millis":0.051101,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:15.688 [print] #notpresent \n"},{"result":{"nanos":303804,"millis":0.303804,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":52501,"millis":0.052501,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:15.689 [print] OGC:WFS \n"},{"result":{"nanos":25901,"millis":0.025901,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":32600,"millis":0.0326,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:15.689 [print] #notpresent \n"},{"result":{"nanos":567809,"millis":0.567809,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":210703,"millis":0.210703,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:15.690 [print] Beheer PDOK \n"},{"result":{"nanos":34300,"millis":0.0343,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:15.690 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=1a40eb6f-4f33-4e15-a0b1-2d350ad2636e#MD_DataIdentification \n"},{"result":{"nanos":851912,"millis":0.851912,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":466407,"millis":0.466407,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"7e87a655-c4eb-404d-9d0a-efa2dccef7cc\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":259704,"millis":0.259704,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"7e87a655-c4eb-404d-9d0a-efa2dccef7cc\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":679.723207,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"7e87a655-c4eb-404d-9d0a-efa2dccef7cc","startTime":1629213735011,"refId":"[1.271:67]","endTime":1629213735692,"exampleData":{"datasetIdentifierCode":"7e87a655-c4eb-404d-9d0a-efa2dccef7cc"},"exampleIndex":270},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13300,"millis":0.0133,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:15.327 karate.env system property was: null \n"},{"result":{"nanos":26100,"millis":0.0261,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":49901,"millis":0.049901,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":40501,"millis":0.040501,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":274004,"millis":0.274004,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":52801,"millis":0.052801,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":531808,"millis":0.531808,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":32900,"millis":0.0329,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":44501,"millis":0.044501,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":112302,"millis":0.112302,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":51000,"millis":0.051,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12800,"millis":0.0128,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19900,"millis":0.0199,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5200,"millis":0.0052,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":61700,"millis":0.0617,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'ce963e61-779f-470f-a99d-48d9796e5ba3'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3600,"millis":0.0036,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":526143490,"millis":526.14349,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1200,"millis":0.0012,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":562108,"millis":0.562108,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'ce963e61-779f-470f-a99d-48d9796e5ba3'"}},{"result":{"nanos":491107,"millis":0.491107,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":464906,"millis":0.464906,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":462307,"millis":0.462307,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":513508,"millis":0.513508,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":465607,"millis":0.465607,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":23100,"millis":0.0231,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":349505,"millis":0.349505,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":334404,"millis":0.334404,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":354805,"millis":0.354805,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":66901,"millis":0.066901,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":114502,"millis":0.114502,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:15.860 [print] https:\/\/geodata.nationaalgeoregister.nl\/inspire\/gn\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":1617623,"millis":1.617623,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":88402,"millis":0.088402,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:15.861 [print] OGC:WMS \n"},{"result":{"nanos":394905,"millis":0.394905,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":512607,"millis":0.512607,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:15.863 [print] #notpresent \n"},{"result":{"nanos":35301,"millis":0.035301,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":454006,"millis":0.454006,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:15.863 [print] OGC:WMS \n"},{"result":{"nanos":429007,"millis":0.429007,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":389905,"millis":0.389905,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:15.864 [print] Beheer PDOK \n"},{"result":{"nanos":60600,"millis":0.0606,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:15.864 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=1a40eb6f-4f33-4e15-a0b1-2d350ad2636e#MD_DataIdentification \n"},{"result":{"nanos":407205,"millis":0.407205,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":572308,"millis":0.572308,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"ce963e61-779f-470f-a99d-48d9796e5ba3\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":332405,"millis":0.332405,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"ce963e61-779f-470f-a99d-48d9796e5ba3\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":536.983142,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"ce963e61-779f-470f-a99d-48d9796e5ba3","startTime":1629213735327,"refId":"[1.272:67]","endTime":1629213735866,"exampleData":{"datasetIdentifierCode":"ce963e61-779f-470f-a99d-48d9796e5ba3"},"exampleIndex":271},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13500,"millis":0.0135,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:15.406 karate.env system property was: null \n"},{"result":{"nanos":26501,"millis":0.026501,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":46200,"millis":0.0462,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":36900,"millis":0.0369,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":200303,"millis":0.200303,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":30101,"millis":0.030101,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":325804,"millis":0.325804,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":24300,"millis":0.0243,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":41001,"millis":0.041001,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":264404,"millis":0.264404,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":48900,"millis":0.0489,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12501,"millis":0.012501,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19600,"millis":0.0196,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":39301,"millis":0.039301,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '9c80458b-12c6-4d38-8f6d-387ab6e4ed21'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":569027809,"millis":569.027809,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1500,"millis":0.0015,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":556508,"millis":0.556508,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '9c80458b-12c6-4d38-8f6d-387ab6e4ed21'"}},{"result":{"nanos":515008,"millis":0.515008,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":422106,"millis":0.422106,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":417606,"millis":0.417606,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":506208,"millis":0.506208,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":465007,"millis":0.465007,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":24000,"millis":0.024,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":336605,"millis":0.336605,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":311705,"millis":0.311705,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":326105,"millis":0.326105,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":63601,"millis":0.063601,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":107601,"millis":0.107601,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:15.981 [print] https:\/\/geodata.nationaalgeoregister.nl\/natura2000\/wms?service=WMS&request=GetCapabilities \n"},{"result":{"nanos":628909,"millis":0.628909,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":89901,"millis":0.089901,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:15.981 [print] OGC:WMS \n"},{"result":{"nanos":483407,"millis":0.483407,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":97802,"millis":0.097802,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:15.982 [print] #notpresent \n"},{"result":{"nanos":30900,"millis":0.0309,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":33400,"millis":0.0334,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:15.982 [print] OGC:WMS \n"},{"result":{"nanos":448507,"millis":0.448507,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":55401,"millis":0.055401,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:15.982 [print] Beheer PDOK \n"},{"result":{"nanos":31700,"millis":0.0317,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:15.982 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=8829e5dd-c861-4639-a6c8-fdbb6e3440d2#MD_DataIdentification \n"},{"result":{"nanos":430606,"millis":0.430606,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":553608,"millis":0.553608,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"9c80458b-12c6-4d38-8f6d-387ab6e4ed21\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":8347620,"millis":8.34762,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"9c80458b-12c6-4d38-8f6d-387ab6e4ed21\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":585.460446,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"9c80458b-12c6-4d38-8f6d-387ab6e4ed21","startTime":1629213735405,"refId":"[1.273:67]","endTime":1629213735992,"exampleData":{"datasetIdentifierCode":"9c80458b-12c6-4d38-8f6d-387ab6e4ed21"},"exampleIndex":272},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15400,"millis":0.0154,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:15.657 karate.env system property was: null \n"},{"result":{"nanos":26001,"millis":0.026001,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":75701,"millis":0.075701,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":37901,"millis":0.037901,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":207503,"millis":0.207503,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":31500,"millis":0.0315,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":362606,"millis":0.362606,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":25700,"millis":0.0257,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":38901,"millis":0.038901,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":229403,"millis":0.229403,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":55601,"millis":0.055601,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12600,"millis":0.0126,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18900,"millis":0.0189,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5600,"millis":0.0056,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":49401,"millis":0.049401,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '8e7686c3-f75e-411f-866e-6985267b916b'"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":635068362,"millis":635.068362,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2200,"millis":0.0022,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":2961642,"millis":2.961642,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '8e7686c3-f75e-411f-866e-6985267b916b'"}},{"result":{"nanos":4027658,"millis":4.027658,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":3917356,"millis":3.917356,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":3922857,"millis":3.922857,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":3999458,"millis":3.999458,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":3941057,"millis":3.941057,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":21700,"millis":0.0217,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":2541736,"millis":2.541736,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":2424835,"millis":2.424835,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":2824340,"millis":2.82434,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":532208,"millis":0.532208,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":119202,"millis":0.119202,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:16.325 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/vogelrichtlijnverspreidingsgebiedsoorten\\\/wms?request=GetCapabilities&service=WMS \n"},{"result":{"nanos":2618738,"millis":2.618738,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":83001,"millis":0.083001,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:16.328 [print] #notpresent \n"},{"result":{"nanos":2671739,"millis":2.671739,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":75201,"millis":0.075201,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:16.331 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":34201,"millis":0.034201,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":23100,"millis":0.0231,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:16.331 [print] #notpresent \n"},{"result":{"nanos":3998058,"millis":3.998058,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":61801,"millis":0.061801,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:16.335 [print] Beheer PDOK \n"},{"result":{"nanos":62401,"millis":0.062401,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:16.335 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=cbeaebc3-815a-48af-a978-0e16892865fc#MD_DataIdentification \n"},{"result":{"nanos":4139360,"millis":4.13936,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":538908,"millis":0.538908,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"8e7686c3-f75e-411f-866e-6985267b916b\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":298004,"millis":0.298004,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"8e7686c3-f75e-411f-866e-6985267b916b\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":682.114541,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"8e7686c3-f75e-411f-866e-6985267b916b","startTime":1629213735657,"refId":"[1.274:67]","endTime":1629213736340,"exampleData":{"datasetIdentifierCode":"8e7686c3-f75e-411f-866e-6985267b916b"},"exampleIndex":273},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13701,"millis":0.013701,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:15.693 karate.env system property was: null \n"},{"result":{"nanos":22100,"millis":0.0221,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":43601,"millis":0.043601,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":33600,"millis":0.0336,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":177503,"millis":0.177503,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":30101,"millis":0.030101,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":315604,"millis":0.315604,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":22401,"millis":0.022401,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":40400,"millis":0.0404,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":247904,"millis":0.247904,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":53001,"millis":0.053001,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12700,"millis":0.0127,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18401,"millis":0.018401,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":35600,"millis":0.0356,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '24055de7-dcff-487a-8f9a-7aee4f0d8351'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":552045164,"millis":552.045164,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1900,"millis":0.0019,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":521307,"millis":0.521307,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '24055de7-dcff-487a-8f9a-7aee4f0d8351'"}},{"result":{"nanos":478507,"millis":0.478507,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":427707,"millis":0.427707,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":407706,"millis":0.407706,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":488207,"millis":0.488207,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":445406,"millis":0.445406,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":24500,"millis":0.0245,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":334305,"millis":0.334305,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":319605,"millis":0.319605,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":326405,"millis":0.326405,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":93701,"millis":0.093701,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":665710,"millis":0.66571,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:16.252 [print] https:\/\/haleconnect.com\/ows\/services\/org.874.cb9ca55e-f4e7-4bd8-a02e-75d528e22118_wms\/org.874.83f948b1-9293-4926-b64d-40857c792f1e?SERVICE=WMS&Request=GetCapabilities \n"},{"result":{"nanos":307705,"millis":0.307705,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":73501,"millis":0.073501,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:16.252 [print] #notpresent \n"},{"result":{"nanos":470707,"millis":0.470707,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":188003,"millis":0.188003,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:16.253 [print] #notpresent \n"},{"result":{"nanos":25400,"millis":0.0254,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":27901,"millis":0.027901,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:16.253 [print] #notpresent \n"},{"result":{"nanos":522507,"millis":0.522507,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":230804,"millis":0.230804,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:16.253 [print] Koninklijk Nederlands Meteorologisch Instituut (KNMI) \n"},{"result":{"nanos":46300,"millis":0.0463,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:16.254 [print] https:\/\/haleconnect.com\/services\/bsp\/org.874.83f948b1-9293-4926-b64d-40857c792f1e\/md\/dataset\/dataset1#xpointer%28%2F%2Fgmd%3AidentificationInfo%5B1%5D%2Fgmd%3AMD_DataIdentification%29 \n"},{"result":{"nanos":709410,"millis":0.70941,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":488407,"millis":0.488407,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"24055de7-dcff-487a-8f9a-7aee4f0d8351\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":342905,"millis":0.342905,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"24055de7-dcff-487a-8f9a-7aee4f0d8351\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":561.097897,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"24055de7-dcff-487a-8f9a-7aee4f0d8351","startTime":1629213735693,"refId":"[1.275:67]","endTime":1629213736255,"exampleData":{"datasetIdentifierCode":"24055de7-dcff-487a-8f9a-7aee4f0d8351"},"exampleIndex":274},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15000,"millis":0.015,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:15.868 karate.env system property was: null \n"},{"result":{"nanos":37500,"millis":0.0375,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":45201,"millis":0.045201,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":42601,"millis":0.042601,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":210303,"millis":0.210303,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":32901,"millis":0.032901,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":329004,"millis":0.329004,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":25000,"millis":0.025,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":40401,"millis":0.040401,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":502307,"millis":0.502307,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":61901,"millis":0.061901,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":15300,"millis":0.0153,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":22001,"millis":0.022001,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":52301,"millis":0.052301,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '56e8ce20-0e6f-4ef2-8c09-6e30bc3680b9'"}},{"result":{"nanos":16000,"millis":0.016,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":527554310,"millis":527.55431,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2100,"millis":0.0021,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":477807,"millis":0.477807,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '56e8ce20-0e6f-4ef2-8c09-6e30bc3680b9'"}},{"result":{"nanos":411406,"millis":0.411406,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":347805,"millis":0.347805,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":327605,"millis":0.327605,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":399306,"millis":0.399306,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":356705,"millis":0.356705,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":26100,"millis":0.0261,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":285004,"millis":0.285004,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":351906,"millis":0.351906,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":532808,"millis":0.532808,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":75401,"millis":0.075401,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":1314119,"millis":1.314119,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:16.404 [print] https:\/\/service.pdok.nl\/bzk\/bro-geomorfologischekaart\/atom\/v1_0\/index.xml \n"},{"result":{"nanos":328605,"millis":0.328605,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":519708,"millis":0.519708,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:16.405 [print] INSPIRE Atom \n"},{"result":{"nanos":295404,"millis":0.295404,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":500407,"millis":0.500407,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:16.406 [print] #notpresent \n"},{"result":{"nanos":34300,"millis":0.0343,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":451207,"millis":0.451207,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:16.406 [print] INSPIRE Atom \n"},{"result":{"nanos":478407,"millis":0.478407,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":781011,"millis":0.781011,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:16.407 [print] Beheer PDOK \n"},{"result":{"nanos":1014715,"millis":1.014715,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:16.408 [print] [\"https:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=8f52e76f-c96d-4df3-a778-279c2164372b#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=459231d0-7379-4f26-a444-7616e1d888f0#MD_DataIdentification\"] \n"},{"result":{"nanos":325605,"millis":0.325605,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":584908,"millis":0.584908,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"56e8ce20-0e6f-4ef2-8c09-6e30bc3680b9\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":419807,"millis":0.419807,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"56e8ce20-0e6f-4ef2-8c09-6e30bc3680b9\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":539.658087,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"56e8ce20-0e6f-4ef2-8c09-6e30bc3680b9","startTime":1629213735868,"refId":"[1.276:67]","endTime":1629213736410,"exampleData":{"datasetIdentifierCode":"56e8ce20-0e6f-4ef2-8c09-6e30bc3680b9"},"exampleIndex":275},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14100,"millis":0.0141,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:15.994 karate.env system property was: null \n"},{"result":{"nanos":28300,"millis":0.0283,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":49301,"millis":0.049301,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":38700,"millis":0.0387,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":213103,"millis":0.213103,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":42800,"millis":0.0428,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":351305,"millis":0.351305,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":24900,"millis":0.0249,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":837512,"millis":0.837512,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":135602,"millis":0.135602,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":51401,"millis":0.051401,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":15001,"millis":0.015001,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":23800,"millis":0.0238,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":46001,"millis":0.046001,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '598c4109-21d2-4a6c-b083-9975a6736849'"}},{"result":{"nanos":6000,"millis":0.006,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3200,"millis":0.0032,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":555872820,"millis":555.87282,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2000,"millis":0.002,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":562309,"millis":0.562309,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '598c4109-21d2-4a6c-b083-9975a6736849'"}},{"result":{"nanos":521007,"millis":0.521007,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":516508,"millis":0.516508,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":473607,"millis":0.473607,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":533108,"millis":0.533108,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":488707,"millis":0.488707,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":25201,"millis":0.025201,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":363905,"millis":0.363905,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":350105,"millis":0.350105,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":371406,"millis":0.371406,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":55201,"millis":0.055201,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":133302,"millis":0.133302,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:16.556 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/nwbvaarwegen\\\/wms?request=getCapabilities&service=WMS \n"},{"result":{"nanos":370405,"millis":0.370405,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":98701,"millis":0.098701,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:16.557 [print] #notpresent \n"},{"result":{"nanos":335405,"millis":0.335405,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":77101,"millis":0.077101,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:16.557 [print] [\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":22901,"millis":0.022901,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":35400,"millis":0.0354,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:16.557 [print] #notpresent \n"},{"result":{"nanos":403206,"millis":0.403206,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":82801,"millis":0.082801,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:16.558 [print] Beheer PDOK \n"},{"result":{"nanos":32100,"millis":0.0321,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:16.558 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=00d8c7c8-98ff-4b06-8f53-b44216e6e75c#MD_DataIdentification \n"},{"result":{"nanos":396106,"millis":0.396106,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":636109,"millis":0.636109,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"598c4109-21d2-4a6c-b083-9975a6736849\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":275304,"millis":0.275304,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"598c4109-21d2-4a6c-b083-9975a6736849\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":564.923551,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"598c4109-21d2-4a6c-b083-9975a6736849","startTime":1629213735994,"refId":"[1.277:67]","endTime":1629213736559,"exampleData":{"datasetIdentifierCode":"598c4109-21d2-4a6c-b083-9975a6736849"},"exampleIndex":276},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13300,"millis":0.0133,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:16.257 karate.env system property was: null \n"},{"result":{"nanos":27800,"millis":0.0278,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":47201,"millis":0.047201,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":37101,"millis":0.037101,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":199103,"millis":0.199103,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":29100,"millis":0.0291,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":330905,"millis":0.330905,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":24201,"millis":0.024201,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":41000,"millis":0.041,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":249904,"millis":0.249904,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":53601,"millis":0.053601,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13600,"millis":0.0136,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17601,"millis":0.017601,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":40701,"millis":0.040701,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'd7a395a2-8673-4794-a5a6-fed6492cd580'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":541160907,"millis":541.160907,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2201,"millis":0.002201,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":567208,"millis":0.567208,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'd7a395a2-8673-4794-a5a6-fed6492cd580'"}},{"result":{"nanos":494607,"millis":0.494607,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":442207,"millis":0.442207,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":407206,"millis":0.407206,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":475407,"millis":0.475407,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":433106,"millis":0.433106,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":50101,"millis":0.050101,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":331305,"millis":0.331305,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":312505,"millis":0.312505,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":327805,"millis":0.327805,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":60801,"millis":0.060801,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":412306,"millis":0.412306,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:16.804 [print] https:\\\/\\\/service.pdok.nl\\\/hwh\\\/luchtfotocir\\\/wms\\\/v1_0?request=GetCapabilities&service=wms \n"},{"result":{"nanos":41353896,"millis":41.353896,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":290104,"millis":0.290104,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:16.846 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":587409,"millis":0.587409,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":118802,"millis":0.118802,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:16.847 [print] #notpresent \n"},{"result":{"nanos":69201,"millis":0.069201,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":60801,"millis":0.060801,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:16.847 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":489307,"millis":0.489307,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":96201,"millis":0.096201,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:16.847 [print] Beheer PDOK \n"},{"result":{"nanos":76101,"millis":0.076101,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:16.848 [print] [\"https:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=1be28290-55fa-4486-b9d3-b9d147117863#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=7c24ea89-074e-4c4f-91e3-d38e813e9cb6#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=7f5d7945-8fa8-4d36-be4c-2fdb3c7d613b#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=9ed6b8ed-254a-4745-a09a-3b57137d1b69#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=4cfb1469-a152-4ba6-8fe9-4b627acd7ee0#MD_DataIdentification\"] \n"},{"result":{"nanos":448306,"millis":0.448306,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":431107,"millis":0.431107,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"d7a395a2-8673-4794-a5a6-fed6492cd580\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":295804,"millis":0.295804,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"d7a395a2-8673-4794-a5a6-fed6492cd580\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":590.937429,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"d7a395a2-8673-4794-a5a6-fed6492cd580","startTime":1629213736257,"refId":"[1.278:67]","endTime":1629213736849,"exampleData":{"datasetIdentifierCode":"d7a395a2-8673-4794-a5a6-fed6492cd580"},"exampleIndex":277},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15800,"millis":0.0158,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:16.344 karate.env system property was: null \n"},{"result":{"nanos":28600,"millis":0.0286,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":49700,"millis":0.0497,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":60301,"millis":0.060301,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":198603,"millis":0.198603,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":31301,"millis":0.031301,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":325505,"millis":0.325505,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":22700,"millis":0.0227,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":42801,"millis":0.042801,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":107001,"millis":0.107001,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":48501,"millis":0.048501,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12100,"millis":0.0121,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20100,"millis":0.0201,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":42601,"millis":0.042601,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'd2a05dd5-98e8-4f9c-8ba2-7fe2d5c7c507'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":5500,"millis":0.0055,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":564496844,"millis":564.496844,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2700,"millis":0.0027,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":594008,"millis":0.594008,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'd2a05dd5-98e8-4f9c-8ba2-7fe2d5c7c507'"}},{"result":{"nanos":446606,"millis":0.446606,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":385306,"millis":0.385306,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":368605,"millis":0.368605,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":559108,"millis":0.559108,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":492107,"millis":0.492107,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":77401,"millis":0.077401,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":372406,"millis":0.372406,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":391105,"millis":0.391105,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":367705,"millis":0.367705,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":132902,"millis":0.132902,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":190103,"millis":0.190103,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:16.914 [print] https:\/\/geodata.nationaalgeoregister.nl\/rvo\/inspire\/invasieve-exoten\/atom\/v1_0\/index.xml \n"},{"result":{"nanos":345305,"millis":0.345305,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":141102,"millis":0.141102,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:16.915 [print] INSPIRE Atom \n"},{"result":{"nanos":324204,"millis":0.324204,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":111502,"millis":0.111502,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:16.915 [print] #notpresent \n"},{"result":{"nanos":62401,"millis":0.062401,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":82801,"millis":0.082801,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:16.915 [print] INSPIRE Atom \n"},{"result":{"nanos":357106,"millis":0.357106,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":114301,"millis":0.114301,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:16.916 [print] Beheer PDOK \n"},{"result":{"nanos":82301,"millis":0.082301,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:16.916 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=3703b249-a0eb-484e-ba7a-10e31a55bcec#MD_DataIdentification \n"},{"result":{"nanos":333205,"millis":0.333205,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":371205,"millis":0.371205,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"d2a05dd5-98e8-4f9c-8ba2-7fe2d5c7c507\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":248404,"millis":0.248404,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"d2a05dd5-98e8-4f9c-8ba2-7fe2d5c7c507\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":572.474657,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"d2a05dd5-98e8-4f9c-8ba2-7fe2d5c7c507","startTime":1629213736342,"refId":"[1.279:67]","endTime":1629213736917,"exampleData":{"datasetIdentifierCode":"d2a05dd5-98e8-4f9c-8ba2-7fe2d5c7c507"},"exampleIndex":278},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15100,"millis":0.0151,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:16.412 karate.env system property was: null \n"},{"result":{"nanos":26100,"millis":0.0261,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":48601,"millis":0.048601,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":34501,"millis":0.034501,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":202703,"millis":0.202703,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":30800,"millis":0.0308,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":360606,"millis":0.360606,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":24400,"millis":0.0244,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":189503,"millis":0.189503,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":122202,"millis":0.122202,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":53501,"millis":0.053501,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":16500,"millis":0.0165,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20200,"millis":0.0202,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4901,"millis":0.004901,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":84601,"millis":0.084601,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'b87a0095-2ad7-4dbb-81a1-fed060df79e1'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3400,"millis":0.0034,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":541065006,"millis":541.065006,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2200,"millis":0.0022,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":499607,"millis":0.499607,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'b87a0095-2ad7-4dbb-81a1-fed060df79e1'"}},{"result":{"nanos":346305,"millis":0.346305,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":277304,"millis":0.277304,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":292904,"millis":0.292904,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":425506,"millis":0.425506,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":350505,"millis":0.350505,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":60801,"millis":0.060801,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":283904,"millis":0.283904,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":349405,"millis":0.349405,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":292204,"millis":0.292204,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":391406,"millis":0.391406,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":899313,"millis":0.899313,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:16.959 [print] https:\/\/geodata.nationaalgeoregister.nl\/nationaleparken\/wfs?request=GetCapabilities&service=WFS \n"},{"result":{"nanos":274104,"millis":0.274104,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":290804,"millis":0.290804,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:16.960 [print] OGC:WFS \n"},{"result":{"nanos":291005,"millis":0.291005,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":210903,"millis":0.210903,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:16.960 [print] #notpresent \n"},{"result":{"nanos":63001,"millis":0.063001,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":188803,"millis":0.188803,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:16.961 [print] OGC:WFS \n"},{"result":{"nanos":301804,"millis":0.301804,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":676410,"millis":0.67641,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:16.962 [print] Beheer PDOK \n"},{"result":{"nanos":778611,"millis":0.778611,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:16.962 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=4961d305-fbb5-426a-9ba3-53e1ca5f3b18#MD_DataIdentification \n"},{"result":{"nanos":295304,"millis":0.295304,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":365505,"millis":0.365505,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"b87a0095-2ad7-4dbb-81a1-fed060df79e1\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":237103,"millis":0.237103,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"b87a0095-2ad7-4dbb-81a1-fed060df79e1\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":550.756946,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"b87a0095-2ad7-4dbb-81a1-fed060df79e1","startTime":1629213736412,"refId":"[1.280:67]","endTime":1629213736963,"exampleData":{"datasetIdentifierCode":"b87a0095-2ad7-4dbb-81a1-fed060df79e1"},"exampleIndex":279},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13700,"millis":0.0137,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:16.561 karate.env system property was: null \n"},{"result":{"nanos":22901,"millis":0.022901,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":48000,"millis":0.048,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":36800,"millis":0.0368,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":200203,"millis":0.200203,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":30201,"millis":0.030201,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":327004,"millis":0.327004,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":24700,"millis":0.0247,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":70501,"millis":0.070501,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":105502,"millis":0.105502,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":47700,"millis":0.0477,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12101,"millis":0.012101,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20700,"millis":0.0207,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":49601,"millis":0.049601,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '68722979-8d6c-4ee4-a81a-8381d2588fe5'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":5200,"millis":0.0052,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":571620646,"millis":571.620646,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2400,"millis":0.0024,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":651109,"millis":0.651109,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '68722979-8d6c-4ee4-a81a-8381d2588fe5'"}},{"result":{"nanos":459007,"millis":0.459007,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":362505,"millis":0.362505,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":364206,"millis":0.364206,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":560408,"millis":0.560408,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":483007,"millis":0.483007,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":85301,"millis":0.085301,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":357705,"millis":0.357705,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":355905,"millis":0.355905,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":370906,"millis":0.370906,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":107401,"millis":0.107401,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":1438321,"millis":1.438321,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:17.140 [print] https:\/\/geodata.nationaalgeoregister.nl\/nl\/rws\/hy-n\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":316505,"millis":0.316505,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":123902,"millis":0.123902,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:17.140 [print] OGC:WMS \n"},{"result":{"nanos":602109,"millis":0.602109,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":480207,"millis":0.480207,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:17.141 [print] #notpresent \n"},{"result":{"nanos":74601,"millis":0.074601,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":417806,"millis":0.417806,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:17.142 [print] OGC:WMS \n"},{"result":{"nanos":431907,"millis":0.431907,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":466606,"millis":0.466606,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:17.143 [print] Beheer PDOK \n"},{"result":{"nanos":885012,"millis":0.885012,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:17.144 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=eu-f297898-2640-44c2-bbe9-c0480da83794#MD_DataIdentification \n"},{"result":{"nanos":451706,"millis":0.451706,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":415506,"millis":0.415506,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"68722979-8d6c-4ee4-a81a-8381d2588fe5\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":248404,"millis":0.248404,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"68722979-8d6c-4ee4-a81a-8381d2588fe5\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":583.160912,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"68722979-8d6c-4ee4-a81a-8381d2588fe5","startTime":1629213736561,"refId":"[1.281:67]","endTime":1629213737145,"exampleData":{"datasetIdentifierCode":"68722979-8d6c-4ee4-a81a-8381d2588fe5"},"exampleIndex":280},{"sectionIndex":0,"stepResults":[{"result":{"nanos":36400,"millis":0.0364,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:16.851 karate.env system property was: null \n"},{"result":{"nanos":43200,"millis":0.0432,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":110402,"millis":0.110402,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":77401,"millis":0.077401,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":247104,"millis":0.247104,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":79701,"millis":0.079701,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":717311,"millis":0.717311,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":69201,"millis":0.069201,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":113001,"millis":0.113001,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":150202,"millis":0.150202,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":106901,"millis":0.106901,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":30300,"millis":0.0303,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":24400,"millis":0.0244,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":8700,"millis":0.0087,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":9100,"millis":0.0091,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":12101,"millis":0.012101,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '58353cdf-b3a1-454e-9284-932a7e815e57'"}},{"result":{"nanos":8700,"millis":0.0087,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":16000,"millis":0.016,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":529063733,"millis":529.063733,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2400,"millis":0.0024,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":648510,"millis":0.64851,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '58353cdf-b3a1-454e-9284-932a7e815e57'"}},{"result":{"nanos":626809,"millis":0.626809,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":562308,"millis":0.562308,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":500808,"millis":0.500808,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":700910,"millis":0.70091,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":595609,"millis":0.595609,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":72901,"millis":0.072901,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":427206,"millis":0.427206,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":418106,"millis":0.418106,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":458206,"millis":0.458206,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":120602,"millis":0.120602,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":166803,"millis":0.166803,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:17.388 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/inspire\\\/hy-p\\\/wfs?request=GetCapabilities&service=wfs \n"},{"result":{"nanos":425906,"millis":0.425906,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":204203,"millis":0.204203,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:17.388 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":1130817,"millis":1.130817,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":75701,"millis":0.075701,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:17.390 [print] #notpresent \n"},{"result":{"nanos":26800,"millis":0.0268,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":28701,"millis":0.028701,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:17.390 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":498207,"millis":0.498207,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":51001,"millis":0.051001,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:17.390 [print] Beheer PDOK \n"},{"result":{"nanos":22700,"millis":0.0227,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:17.390 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=1c3afc74-cc34-44b7-938a-963e2350795a#MD_DataIdentification \n"},{"result":{"nanos":483406,"millis":0.483406,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":391705,"millis":0.391705,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"58353cdf-b3a1-454e-9284-932a7e815e57\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":263204,"millis":0.263204,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"58353cdf-b3a1-454e-9284-932a7e815e57\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":539.827387,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"58353cdf-b3a1-454e-9284-932a7e815e57","startTime":1629213736851,"refId":"[1.282:67]","endTime":1629213737392,"exampleData":{"datasetIdentifierCode":"58353cdf-b3a1-454e-9284-932a7e815e57"},"exampleIndex":281},{"sectionIndex":0,"stepResults":[{"result":{"nanos":37201,"millis":0.037201,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:16.919 karate.env system property was: null \n"},{"result":{"nanos":31901,"millis":0.031901,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":109401,"millis":0.109401,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":88402,"millis":0.088402,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":240203,"millis":0.240203,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":79401,"millis":0.079401,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":356005,"millis":0.356005,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":60201,"millis":0.060201,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":102801,"millis":0.102801,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":152002,"millis":0.152002,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":118002,"millis":0.118002,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":29500,"millis":0.0295,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":25201,"millis":0.025201,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":415506,"millis":0.415506,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":33900,"millis":0.0339,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":9500,"millis":0.0095,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '180b6682-5d6f-429d-abb7-32f7d6253787'"}},{"result":{"nanos":8600,"millis":0.0086,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":8600,"millis":0.0086,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":541633314,"millis":541.633314,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2701,"millis":0.002701,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":652509,"millis":0.652509,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '180b6682-5d6f-429d-abb7-32f7d6253787'"}},{"result":{"nanos":525308,"millis":0.525308,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":473107,"millis":0.473107,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":461007,"millis":0.461007,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":570209,"millis":0.570209,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":488507,"millis":0.488507,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":23200,"millis":0.0232,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":306605,"millis":0.306605,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":291304,"millis":0.291304,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":304105,"millis":0.304105,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":56701,"millis":0.056701,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":452206,"millis":0.452206,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:17.467 [print] https:\/\/geodata.nationaalgeoregister.nl\/windkaart\/wfs?request=GetCapabilities&service=wfs \n"},{"result":{"nanos":360805,"millis":0.360805,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":61201,"millis":0.061201,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:17.468 [print] OGC:WFS \n"},{"result":{"nanos":484507,"millis":0.484507,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":165503,"millis":0.165503,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:17.469 [print] #notpresent \n"},{"result":{"nanos":24800,"millis":0.0248,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":29301,"millis":0.029301,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:17.469 [print] OGC:WFS \n"},{"result":{"nanos":437807,"millis":0.437807,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":204903,"millis":0.204903,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:17.470 [print] Beheer PDOK \n"},{"result":{"nanos":32600,"millis":0.0326,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:17.470 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=d845cef6-0e23-4212-a951-b69763e39ef0#MD_DataIdentification \n"},{"result":{"nanos":1206018,"millis":1.206018,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":510607,"millis":0.510607,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"180b6682-5d6f-429d-abb7-32f7d6253787\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":308604,"millis":0.308604,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"180b6682-5d6f-429d-abb7-32f7d6253787\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":551.973766,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"180b6682-5d6f-429d-abb7-32f7d6253787","startTime":1629213736919,"refId":"[1.283:67]","endTime":1629213737472,"exampleData":{"datasetIdentifierCode":"180b6682-5d6f-429d-abb7-32f7d6253787"},"exampleIndex":282},{"sectionIndex":0,"stepResults":[{"result":{"nanos":36501,"millis":0.036501,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:16.966 karate.env system property was: null \n"},{"result":{"nanos":31200,"millis":0.0312,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":124902,"millis":0.124902,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":78601,"millis":0.078601,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":265903,"millis":0.265903,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":77301,"millis":0.077301,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":343805,"millis":0.343805,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":59701,"millis":0.059701,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":508707,"millis":0.508707,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":173503,"millis":0.173503,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":108801,"millis":0.108801,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":32600,"millis":0.0326,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":23000,"millis":0.023,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":9600,"millis":0.0096,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":8500,"millis":0.0085,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":8500,"millis":0.0085,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '25c69c01-8dfa-406f-bbcb-24feba25dcc6'"}},{"result":{"nanos":8800,"millis":0.0088,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":8301,"millis":0.008301,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":551991263,"millis":551.991263,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2600,"millis":0.0026,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":554208,"millis":0.554208,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '25c69c01-8dfa-406f-bbcb-24feba25dcc6'"}},{"result":{"nanos":523907,"millis":0.523907,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":418706,"millis":0.418706,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":416506,"millis":0.416506,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":470407,"millis":0.470407,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":436906,"millis":0.436906,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":31001,"millis":0.031001,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":343005,"millis":0.343005,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":320305,"millis":0.320305,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":318404,"millis":0.318404,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":116301,"millis":0.116301,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":111502,"millis":0.111502,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:17.525 [print] https:\/\/geodata.nationaalgeoregister.nl\/provincies\/ps\/wms\/v1?SERVICE=WMS&REQUEST=GetCapabilities \n"},{"result":{"nanos":1154617,"millis":1.154617,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":121402,"millis":0.121402,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:17.526 [print] OGC:WMS \n"},{"result":{"nanos":636109,"millis":0.636109,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":101502,"millis":0.101502,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:17.527 [print] #notpresent \n"},{"result":{"nanos":30200,"millis":0.0302,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":45701,"millis":0.045701,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:17.527 [print] OGC:WMS \n"},{"result":{"nanos":877113,"millis":0.877113,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":88001,"millis":0.088001,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:17.528 [print] Beheer PDOK \n"},{"result":{"nanos":37901,"millis":0.037901,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:17.528 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=49ab8bee-b467-486a-96ca-b950443c453a#MD_DataIdentification \n"},{"result":{"nanos":925813,"millis":0.925813,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":462306,"millis":0.462306,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"25c69c01-8dfa-406f-bbcb-24feba25dcc6\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":273304,"millis":0.273304,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"25c69c01-8dfa-406f-bbcb-24feba25dcc6\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":562.717216,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"25c69c01-8dfa-406f-bbcb-24feba25dcc6","startTime":1629213736965,"refId":"[1.284:67]","endTime":1629213737529,"exampleData":{"datasetIdentifierCode":"25c69c01-8dfa-406f-bbcb-24feba25dcc6"},"exampleIndex":283},{"sectionIndex":0,"stepResults":[{"result":{"nanos":37600,"millis":0.0376,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:17.147 karate.env system property was: null \n"},{"result":{"nanos":32601,"millis":0.032601,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":126402,"millis":0.126402,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":89701,"millis":0.089701,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":246304,"millis":0.246304,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":78601,"millis":0.078601,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":342605,"millis":0.342605,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":59301,"millis":0.059301,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":482907,"millis":0.482907,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":170502,"millis":0.170502,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":111802,"millis":0.111802,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":31600,"millis":0.0316,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":26501,"millis":0.026501,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":9100,"millis":0.0091,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":10400,"millis":0.0104,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":8600,"millis":0.0086,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '63f622ef-46b3-411a-a2aa-045cabf1e3ac'"}},{"result":{"nanos":8700,"millis":0.0087,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":8100,"millis":0.0081,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":554171995,"millis":554.171995,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2000,"millis":0.002,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":567208,"millis":0.567208,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '63f622ef-46b3-411a-a2aa-045cabf1e3ac'"}},{"result":{"nanos":524807,"millis":0.524807,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":540608,"millis":0.540608,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":475506,"millis":0.475506,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":551808,"millis":0.551808,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":501607,"millis":0.501607,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":33201,"millis":0.033201,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":348205,"millis":0.348205,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":347105,"millis":0.347105,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":348705,"millis":0.348705,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":64901,"millis":0.064901,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":938514,"millis":0.938514,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:17.709 [print] https:\/\/geodata.nationaalgeoregister.nl\/provincies\/ps\/wfs\/v1?SERVICE=WFS&REQUEST=GetCapabilities&version=2.0.0 \n"},{"result":{"nanos":411306,"millis":0.411306,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":88902,"millis":0.088902,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:17.710 [print] OGC:WFS \n"},{"result":{"nanos":570408,"millis":0.570408,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":67901,"millis":0.067901,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:17.710 [print] #notpresent \n"},{"result":{"nanos":198003,"millis":0.198003,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":42401,"millis":0.042401,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:17.711 [print] OGC:WFS \n"},{"result":{"nanos":551108,"millis":0.551108,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":54201,"millis":0.054201,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:17.711 [print] Beheer PDOK \n"},{"result":{"nanos":164102,"millis":0.164102,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:17.711 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=49ab8bee-b467-486a-96ca-b950443c453a#MD_DataIdentification \n"},{"result":{"nanos":456406,"millis":0.456406,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":517008,"millis":0.517008,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"63f622ef-46b3-411a-a2aa-045cabf1e3ac\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":294504,"millis":0.294504,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"63f622ef-46b3-411a-a2aa-045cabf1e3ac\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":564.713747,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"63f622ef-46b3-411a-a2aa-045cabf1e3ac","startTime":1629213737147,"refId":"[1.285:67]","endTime":1629213737713,"exampleData":{"datasetIdentifierCode":"63f622ef-46b3-411a-a2aa-045cabf1e3ac"},"exampleIndex":284},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13200,"millis":0.0132,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:17.393 karate.env system property was: null \n"},{"result":{"nanos":27301,"millis":0.027301,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":49000,"millis":0.049,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":36601,"millis":0.036601,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":209503,"millis":0.209503,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":33201,"millis":0.033201,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":325504,"millis":0.325504,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":23700,"millis":0.0237,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":54301,"millis":0.054301,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":103101,"millis":0.103101,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":50801,"millis":0.050801,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":10700,"millis":0.0107,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19000,"millis":0.019,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":6200,"millis":0.0062,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3700,"millis":0.0037,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":33001,"millis":0.033001,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '7f79fc69-d0c7-4913-a05a-527c90453297'"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":552106965,"millis":552.106965,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2300,"millis":0.0023,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":480607,"millis":0.480607,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '7f79fc69-d0c7-4913-a05a-527c90453297'"}},{"result":{"nanos":411806,"millis":0.411806,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":336605,"millis":0.336605,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":331105,"millis":0.331105,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":383505,"millis":0.383505,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":369306,"millis":0.369306,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":20000,"millis":0.02,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":320405,"millis":0.320405,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":266904,"millis":0.266904,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":323705,"millis":0.323705,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":62301,"millis":0.062301,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":226703,"millis":0.226703,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:17.950 [print] https:\/\/haleconnect.com\/ows\/services\/org.874.cb9ca55e-f4e7-4bd8-a02e-75d528e22118_wms?SERVICE=WMS&Request=GetCapabilities \n"},{"result":{"nanos":1421421,"millis":1.421421,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":85801,"millis":0.085801,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:17.952 [print] #notpresent \n"},{"result":{"nanos":760211,"millis":0.760211,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":62201,"millis":0.062201,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:17.953 [print] #notpresent \n"},{"result":{"nanos":23301,"millis":0.023301,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":21100,"millis":0.0211,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:17.953 [print] #notpresent \n"},{"result":{"nanos":628109,"millis":0.628109,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":124502,"millis":0.124502,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:17.954 [print] KNMI \n"},{"result":{"nanos":22201,"millis":0.022201,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:17.954 [print] https:\/\/haleconnect.com\/services\/bsp\/org.874.cb9ca55e-f4e7-4bd8-a02e-75d528e22118\/md\/dataset\/dataset1#xpointer%28%2F%2Fgmd%3AidentificationInfo%5B1%5D%2Fgmd%3AMD_DataIdentification%29 \n"},{"result":{"nanos":436906,"millis":0.436906,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":515408,"millis":0.515408,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"7f79fc69-d0c7-4913-a05a-527c90453297\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":396606,"millis":0.396606,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"7f79fc69-d0c7-4913-a05a-527c90453297\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":561.148098,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"7f79fc69-d0c7-4913-a05a-527c90453297","startTime":1629213737393,"refId":"[1.286:67]","endTime":1629213737955,"exampleData":{"datasetIdentifierCode":"7f79fc69-d0c7-4913-a05a-527c90453297"},"exampleIndex":285},{"sectionIndex":0,"stepResults":[{"result":{"nanos":17300,"millis":0.0173,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:17.474 karate.env system property was: null \n"},{"result":{"nanos":29401,"millis":0.029401,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":52800,"millis":0.0528,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":43100,"millis":0.0431,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":232104,"millis":0.232104,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":34800,"millis":0.0348,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":387506,"millis":0.387506,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":25601,"millis":0.025601,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":73601,"millis":0.073601,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":423206,"millis":0.423206,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":84801,"millis":0.084801,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":26000,"millis":0.026,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17000,"millis":0.017,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4401,"millis":0.004401,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":36400,"millis":0.0364,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '027e3f15-3b58-4570-97bb-779ce3ca947e'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3700,"millis":0.0037,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":543921146,"millis":543.921146,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1700,"millis":0.0017,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":480507,"millis":0.480507,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '027e3f15-3b58-4570-97bb-779ce3ca947e'"}},{"result":{"nanos":453107,"millis":0.453107,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":352505,"millis":0.352505,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":336205,"millis":0.336205,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":398306,"millis":0.398306,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":342605,"millis":0.342605,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":32601,"millis":0.032601,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":263604,"millis":0.263604,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":256204,"millis":0.256204,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":265304,"millis":0.265304,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":66601,"millis":0.066601,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":101501,"millis":0.101501,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:18.024 [print] https:\/\/geodata.nationaalgeoregister.nl\/wijkenbuurten2019\/wfs?request=GetCapabilities&service=WFS \n"},{"result":{"nanos":303005,"millis":0.303005,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":59301,"millis":0.059301,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:18.024 [print] OGC:WFS \n"},{"result":{"nanos":402306,"millis":0.402306,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":56701,"millis":0.056701,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:18.025 [print] #notpresent \n"},{"result":{"nanos":25600,"millis":0.0256,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":121202,"millis":0.121202,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:18.025 [print] OGC:WFS \n"},{"result":{"nanos":386406,"millis":0.386406,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":56901,"millis":0.056901,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:18.025 [print] Beheer PDOK \n"},{"result":{"nanos":25400,"millis":0.0254,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:18.025 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=5c37d29a-006d-4136-8989-adfc35a1d4a7#MD_DataIdentification \n"},{"result":{"nanos":367306,"millis":0.367306,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":940614,"millis":0.940614,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"027e3f15-3b58-4570-97bb-779ce3ca947e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":318904,"millis":0.318904,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"027e3f15-3b58-4570-97bb-779ce3ca947e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":551.835563,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"027e3f15-3b58-4570-97bb-779ce3ca947e","startTime":1629213737474,"refId":"[1.287:67]","endTime":1629213738027,"exampleData":{"datasetIdentifierCode":"027e3f15-3b58-4570-97bb-779ce3ca947e"},"exampleIndex":286},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16400,"millis":0.0164,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:17.531 karate.env system property was: null \n"},{"result":{"nanos":26201,"millis":0.026201,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":46900,"millis":0.0469,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":37300,"millis":0.0373,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":200503,"millis":0.200503,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":43901,"millis":0.043901,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":335805,"millis":0.335805,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":23200,"millis":0.0232,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":38501,"millis":0.038501,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":336005,"millis":0.336005,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":85201,"millis":0.085201,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13301,"millis":0.013301,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18700,"millis":0.0187,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3600,"millis":0.0036,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":33801,"millis":0.033801,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'a5437cb4-98ef-4c8e-a5ed-000e7a82b774'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":538178764,"millis":538.178764,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1300,"millis":0.0013,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":440706,"millis":0.440706,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'a5437cb4-98ef-4c8e-a5ed-000e7a82b774'"}},{"result":{"nanos":407506,"millis":0.407506,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":342304,"millis":0.342304,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":330504,"millis":0.330504,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":419906,"millis":0.419906,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":367805,"millis":0.367805,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":22501,"millis":0.022501,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":281004,"millis":0.281004,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":320005,"millis":0.320005,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":292204,"millis":0.292204,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":59401,"millis":0.059401,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":93901,"millis":0.093901,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:18.075 [print] https:\/\/geodata.nationaalgeoregister.nl\/cbsvierkanten100mv2\/wfs?request=GetCapabilities&service=WFS \n"},{"result":{"nanos":700810,"millis":0.70081,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":160802,"millis":0.160802,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:18.076 [print] OGC:WFS \n"},{"result":{"nanos":310804,"millis":0.310804,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":150302,"millis":0.150302,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:18.076 [print] #notpresent \n"},{"result":{"nanos":29100,"millis":0.0291,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":30200,"millis":0.0302,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:18.076 [print] OGC:WFS \n"},{"result":{"nanos":551408,"millis":0.551408,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":61401,"millis":0.061401,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:18.077 [print] Beheer PDOK \n"},{"result":{"nanos":28100,"millis":0.0281,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:18.077 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=1462bbce-ccd3-4362-83d8-4535ca8f44eb#MD_DataIdentification \n"},{"result":{"nanos":395206,"millis":0.395206,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":664910,"millis":0.66491,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"a5437cb4-98ef-4c8e-a5ed-000e7a82b774\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":304704,"millis":0.304704,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"a5437cb4-98ef-4c8e-a5ed-000e7a82b774\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":546.217077,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"a5437cb4-98ef-4c8e-a5ed-000e7a82b774","startTime":1629213737531,"refId":"[1.288:67]","endTime":1629213738078,"exampleData":{"datasetIdentifierCode":"a5437cb4-98ef-4c8e-a5ed-000e7a82b774"},"exampleIndex":287},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13501,"millis":0.013501,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:17.715 karate.env system property was: null \n"},{"result":{"nanos":38700,"millis":0.0387,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":48801,"millis":0.048801,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":34901,"millis":0.034901,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":214703,"millis":0.214703,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":31101,"millis":0.031101,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":329304,"millis":0.329304,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":24200,"millis":0.0242,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":39001,"millis":0.039001,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":254203,"millis":0.254203,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":61601,"millis":0.061601,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13301,"millis":0.013301,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18400,"millis":0.0184,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":48701,"millis":0.048701,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '1601e160-91e8-4091-9aca-10294f819d42'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":528034417,"millis":528.034417,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2000,"millis":0.002,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":545608,"millis":0.545608,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '1601e160-91e8-4091-9aca-10294f819d42'"}},{"result":{"nanos":531508,"millis":0.531508,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":466407,"millis":0.466407,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":441006,"millis":0.441006,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":512708,"millis":0.512708,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":472007,"millis":0.472007,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":23300,"millis":0.0233,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":354405,"millis":0.354405,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":341505,"millis":0.341505,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":410706,"millis":0.410706,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":875413,"millis":0.875413,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":829612,"millis":0.829612,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:18.250 [print] https:\/\/geodata.nationaalgeoregister.nl\/inspire\/ps-natura2000\/wfs?request=GetCapabilities&service=wfs \n"},{"result":{"nanos":407606,"millis":0.407606,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":497207,"millis":0.497207,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:18.251 [print] OGC:WFS \n"},{"result":{"nanos":388006,"millis":0.388006,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":67301,"millis":0.067301,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:18.252 [print] #notpresent \n"},{"result":{"nanos":29400,"millis":0.0294,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":373806,"millis":0.373806,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:18.252 [print] OGC:WFS \n"},{"result":{"nanos":436006,"millis":0.436006,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":59101,"millis":0.059101,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:18.253 [print] Beheer PDOK \n"},{"result":{"nanos":355205,"millis":0.355205,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:18.253 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=280ed37a-b8d2-4ac5-8567-04d84fad3a41#MD_DataIdentification \n"},{"result":{"nanos":450406,"millis":0.450406,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":479607,"millis":0.479607,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"1601e160-91e8-4091-9aca-10294f819d42\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":270104,"millis":0.270104,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"1601e160-91e8-4091-9aca-10294f819d42\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":538.841675,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"1601e160-91e8-4091-9aca-10294f819d42","startTime":1629213737714,"refId":"[1.289:67]","endTime":1629213738256,"exampleData":{"datasetIdentifierCode":"1601e160-91e8-4091-9aca-10294f819d42"},"exampleIndex":288},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14000,"millis":0.014,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:17.957 karate.env system property was: null \n"},{"result":{"nanos":26600,"millis":0.0266,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":52901,"millis":0.052901,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":37901,"millis":0.037901,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":3835555,"millis":3.835555,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":45600,"millis":0.0456,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":470207,"millis":0.470207,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":31101,"millis":0.031101,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":38300,"millis":0.0383,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":114602,"millis":0.114602,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":52301,"millis":0.052301,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12900,"millis":0.0129,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20801,"millis":0.020801,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5300,"millis":0.0053,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":50401,"millis":0.050401,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'adn83730-e750-485a-9c0c-39bf9bt72cf8'"}},{"result":{"nanos":5500,"millis":0.0055,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":538241465,"millis":538.241465,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2700,"millis":0.0027,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":745910,"millis":0.74591,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'adn83730-e750-485a-9c0c-39bf9bt72cf8'"}},{"result":{"nanos":586508,"millis":0.586508,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":439007,"millis":0.439007,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":426506,"millis":0.426506,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":541708,"millis":0.541708,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":462807,"millis":0.462807,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":23500,"millis":0.0235,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":333904,"millis":0.333904,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":318304,"millis":0.318304,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":312104,"millis":0.312104,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":68201,"millis":0.068201,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":125402,"millis":0.125402,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:18.505 [print] https:\/\/www.rijkswaterstaat.nl\/apps\/geoservices\/geodata\/dmc\/bodemhoogte_5mtr_atom_index.xml \n"},{"result":{"nanos":474207,"millis":0.474207,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":73101,"millis":0.073101,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:18.506 [print] INSPIRE Atom \n"},{"result":{"nanos":405705,"millis":0.405705,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":51800,"millis":0.0518,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:18.506 [print] #notpresent \n"},{"result":{"nanos":24001,"millis":0.024001,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":25400,"millis":0.0254,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:18.506 [print] INSPIRE Atom \n"},{"result":{"nanos":641510,"millis":0.64151,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":62901,"millis":0.062901,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:18.507 [print] Rijkswaterstaat \n"},{"result":{"nanos":26300,"millis":0.0263,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:18.507 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=adn73c4a-ef03-4785-b7f6-942e86b385f7#MD_DataIdentification \n"},{"result":{"nanos":406706,"millis":0.406706,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":2047730,"millis":2.04773,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"adn83730-e750-485a-9c0c-39bf9bt72cf8\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":363205,"millis":0.363205,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"adn83730-e750-485a-9c0c-39bf9bt72cf8\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":552.052862,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"adn83730-e750-485a-9c0c-39bf9bt72cf8","startTime":1629213737957,"refId":"[1.290:67]","endTime":1629213738510,"exampleData":{"datasetIdentifierCode":"adn83730-e750-485a-9c0c-39bf9bt72cf8"},"exampleIndex":289},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15400,"millis":0.0154,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:18.029 karate.env system property was: null \n"},{"result":{"nanos":27900,"millis":0.0279,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":161903,"millis":0.161903,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":47001,"millis":0.047001,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":247703,"millis":0.247703,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":51401,"millis":0.051401,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":388806,"millis":0.388806,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":26600,"millis":0.0266,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":37301,"millis":0.037301,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":103502,"millis":0.103502,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":134802,"millis":0.134802,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":14600,"millis":0.0146,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18100,"millis":0.0181,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4401,"millis":0.004401,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":41400,"millis":0.0414,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'wt-83730-e750-485a-9c0c-39bf9bm72cf8_'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":548187008,"millis":548.187008,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2400,"millis":0.0024,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":484107,"millis":0.484107,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'wt-83730-e750-485a-9c0c-39bf9bm72cf8_'"}},{"result":{"nanos":429606,"millis":0.429606,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":311605,"millis":0.311605,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":306804,"millis":0.306804,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":377705,"millis":0.377705,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":366505,"millis":0.366505,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":32500,"millis":0.0325,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":255804,"millis":0.255804,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":236304,"millis":0.236304,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":235903,"millis":0.235903,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":59501,"millis":0.059501,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":108202,"millis":0.108202,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:18.582 [print] https:\/\/haleconnect.com\/ows\/services\/org.292.504afbe6-0069-411b-b69b-2aae3728f735_wms?SERVICE=WMS&Request=GetCapabilities \n"},{"result":{"nanos":375705,"millis":0.375705,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":59601,"millis":0.059601,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:18.583 [print] #notpresent \n"},{"result":{"nanos":265503,"millis":0.265503,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":47901,"millis":0.047901,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:18.583 [print] #notpresent \n"},{"result":{"nanos":20201,"millis":0.020201,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":20900,"millis":0.0209,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:18.583 [print] #notpresent \n"},{"result":{"nanos":429706,"millis":0.429706,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":59101,"millis":0.059101,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:18.584 [print] Rijkswaterstaat \n"},{"result":{"nanos":19601,"millis":0.019601,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:18.584 [print] https:\/\/haleconnect.com\/services\/bsp\/org.292.504afbe6-0069-411b-b69b-2aae3728f735\/md\/dataset\/dataset1#xpointer%28%2F%2Fgmd%3AidentificationInfo%5B1%5D%2Fgmd%3AMD_DataIdentification%29 \n"},{"result":{"nanos":388805,"millis":0.388805,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":800112,"millis":0.800112,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"wt-83730-e750-485a-9c0c-39bf9bm72cf8_\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":325305,"millis":0.325305,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"wt-83730-e750-485a-9c0c-39bf9bm72cf8_\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":555.539815,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"wt-83730-e750-485a-9c0c-39bf9bm72cf8_","startTime":1629213738029,"refId":"[1.291:67]","endTime":1629213738585,"exampleData":{"datasetIdentifierCode":"wt-83730-e750-485a-9c0c-39bf9bm72cf8_"},"exampleIndex":290},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14301,"millis":0.014301,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:18.080 karate.env system property was: null \n"},{"result":{"nanos":27400,"millis":0.0274,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":111802,"millis":0.111802,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":41601,"millis":0.041601,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":210603,"millis":0.210603,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":34400,"millis":0.0344,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":430207,"millis":0.430207,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":30700,"millis":0.0307,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":41001,"millis":0.041001,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":106402,"millis":0.106402,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":138002,"millis":0.138002,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13300,"millis":0.0133,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19500,"millis":0.0195,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5300,"millis":0.0053,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":36800,"millis":0.0368,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '35546103-58eb-4f61-a858-a6fbc5a7e814'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":541498012,"millis":541.498012,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1800,"millis":0.0018,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":464407,"millis":0.464407,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '35546103-58eb-4f61-a858-a6fbc5a7e814'"}},{"result":{"nanos":388106,"millis":0.388106,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":350405,"millis":0.350405,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":333005,"millis":0.333005,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":423606,"millis":0.423606,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":385606,"millis":0.385606,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":32400,"millis":0.0324,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":3202546,"millis":3.202546,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":347705,"millis":0.347705,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":284204,"millis":0.284204,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":56801,"millis":0.056801,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":192503,"millis":0.192503,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:18.630 [print] https:\/\/haleconnect.com\/ows\/services\/org.874.cb9ca55e-f4e7-4bd8-a02e-75d528e22118_wfs\/org.874.9934d92c-25d3-4fb8-9269-cf1ddbf9def0?SERVICE=WFS&Request=GetCapabilities \n"},{"result":{"nanos":1977129,"millis":1.977129,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":257004,"millis":0.257004,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:18.632 [print] #notpresent \n"},{"result":{"nanos":397506,"millis":0.397506,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":81401,"millis":0.081401,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:18.635 [print] #notpresent \n"},{"result":{"nanos":27100,"millis":0.0271,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":29600,"millis":0.0296,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:18.635 [print] #notpresent \n"},{"result":{"nanos":798611,"millis":0.798611,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":63601,"millis":0.063601,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:18.636 [print] Koninklijk Nederlands Meteorologisch Instituut (KNMI) \n"},{"result":{"nanos":26001,"millis":0.026001,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:18.636 [print] https:\/\/haleconnect.com\/services\/bsp\/org.874.9934d92c-25d3-4fb8-9269-cf1ddbf9def0\/md\/dataset\/dataset1#xpointer%28%2F%2Fgmd%3AidentificationInfo%5B1%5D%2Fgmd%3AMD_DataIdentification%29 \n"},{"result":{"nanos":1051215,"millis":1.051215,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":581209,"millis":0.581209,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"35546103-58eb-4f61-a858-a6fbc5a7e814\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":334905,"millis":0.334905,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"35546103-58eb-4f61-a858-a6fbc5a7e814\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":554.860907,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"35546103-58eb-4f61-a858-a6fbc5a7e814","startTime":1629213738080,"refId":"[1.292:67]","endTime":1629213738638,"exampleData":{"datasetIdentifierCode":"35546103-58eb-4f61-a858-a6fbc5a7e814"},"exampleIndex":291},{"sectionIndex":0,"stepResults":[{"result":{"nanos":18000,"millis":0.018,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:18.260 karate.env system property was: null \n"},{"result":{"nanos":28300,"millis":0.0283,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":41100,"millis":0.0411,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":40701,"millis":0.040701,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":199203,"millis":0.199203,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":46301,"millis":0.046301,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":356705,"millis":0.356705,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":26800,"millis":0.0268,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":41600,"millis":0.0416,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":103102,"millis":0.103102,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":317204,"millis":0.317204,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":14700,"millis":0.0147,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18900,"millis":0.0189,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":41900,"millis":0.0419,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'wt-f297898-2640-44c2-bbe9-c0480df83794'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":5500,"millis":0.0055,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":555786618,"millis":555.786618,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1500,"millis":0.0015,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":552508,"millis":0.552508,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'wt-f297898-2640-44c2-bbe9-c0480df83794'"}},{"result":{"nanos":532308,"millis":0.532308,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":486707,"millis":0.486707,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":464607,"millis":0.464607,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":539308,"millis":0.539308,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":486807,"millis":0.486807,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":24201,"millis":0.024201,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":368205,"millis":0.368205,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":348305,"millis":0.348305,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":368205,"millis":0.368205,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":63501,"millis":0.063501,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":123602,"millis":0.123602,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:18.822 [print] https:\\\/\\\/haleconnect.com\\\/ows\\\/services\\\/org.292.c3955762-73a3-4c16-a15c-f3869487a1e3_wfs?service=WFS&version=2.0.0&request=GetCapabilities \n"},{"result":{"nanos":1337119,"millis":1.337119,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":80601,"millis":0.080601,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:18.824 [print] [\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":635809,"millis":0.635809,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":62901,"millis":0.062901,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:18.825 [print] #notpresent \n"},{"result":{"nanos":24101,"millis":0.024101,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":33200,"millis":0.0332,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:18.825 [print] [\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":837912,"millis":0.837912,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":57100,"millis":0.0571,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:18.825 [print] Rijkswaterstaat \n"},{"result":{"nanos":43300,"millis":0.0433,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:18.826 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=eu-f297898-2640-44c2-bbe9-c0480da83794#MD_DataIdentification \n"},{"result":{"nanos":758611,"millis":0.758611,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":508908,"millis":0.508908,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"wt-f297898-2640-44c2-bbe9-c0480df83794\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":289604,"millis":0.289604,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"wt-f297898-2640-44c2-bbe9-c0480df83794\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":566.128464,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"wt-f297898-2640-44c2-bbe9-c0480df83794","startTime":1629213738260,"refId":"[1.293:67]","endTime":1629213738827,"exampleData":{"datasetIdentifierCode":"wt-f297898-2640-44c2-bbe9-c0480df83794"},"exampleIndex":292},{"sectionIndex":0,"stepResults":[{"result":{"nanos":100502,"millis":0.100502,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:18.512 karate.env system property was: null \n"},{"result":{"nanos":29300,"millis":0.0293,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":39001,"millis":0.039001,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":40701,"millis":0.040701,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":211603,"millis":0.211603,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":32200,"millis":0.0322,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":381106,"millis":0.381106,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":27301,"millis":0.027301,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":72801,"millis":0.072801,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":118601,"millis":0.118601,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":143802,"millis":0.143802,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":14700,"millis":0.0147,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19400,"millis":0.0194,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5301,"millis":0.005301,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":52100,"millis":0.0521,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '6c62e0a5-c215-4e47-94b0-a239e264417d'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":547295395,"millis":547.295395,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1600,"millis":0.0016,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":1342020,"millis":1.34202,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '6c62e0a5-c215-4e47-94b0-a239e264417d'"}},{"result":{"nanos":1540222,"millis":1.540222,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":1517522,"millis":1.517522,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":1510122,"millis":1.510122,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":1456021,"millis":1.456021,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":1361319,"millis":1.361319,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":22701,"millis":0.022701,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":854612,"millis":0.854612,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":840812,"millis":0.840812,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":930613,"millis":0.930613,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":148402,"millis":0.148402,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":145803,"millis":0.145803,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:19.073 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/plu\\\/wms?request=GetCapabilities&service=WMS \n"},{"result":{"nanos":928913,"millis":0.928913,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":86402,"millis":0.086402,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:19.074 [print] [\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":913013,"millis":0.913013,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":81201,"millis":0.081201,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:19.075 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":24600,"millis":0.0246,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":27700,"millis":0.0277,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:19.075 [print] [\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":1344519,"millis":1.344519,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":64801,"millis":0.064801,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:19.077 [print] Beheer PDOK \n"},{"result":{"nanos":27201,"millis":0.027201,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:19.077 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=17716ed7-ce0d-4bfd-8868-a398e5578a36#MD_DataIdentification \n"},{"result":{"nanos":1348919,"millis":1.348919,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":519608,"millis":0.519608,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"6c62e0a5-c215-4e47-94b0-a239e264417d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":291604,"millis":0.291604,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"6c62e0a5-c215-4e47-94b0-a239e264417d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":565.926564,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"6c62e0a5-c215-4e47-94b0-a239e264417d","startTime":1629213738512,"refId":"[1.294:67]","endTime":1629213739079,"exampleData":{"datasetIdentifierCode":"6c62e0a5-c215-4e47-94b0-a239e264417d"},"exampleIndex":293},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15000,"millis":0.015,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:18.587 karate.env system property was: null \n"},{"result":{"nanos":24901,"millis":0.024901,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":40800,"millis":0.0408,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":39300,"millis":0.0393,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":209603,"millis":0.209603,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":34701,"millis":0.034701,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":378005,"millis":0.378005,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":25200,"millis":0.0252,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":48701,"millis":0.048701,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":109301,"millis":0.109301,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":128102,"millis":0.128102,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":14401,"millis":0.014401,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19300,"millis":0.0193,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3700,"millis":0.0037,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":38201,"millis":0.038201,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '635bdc85-c596-4afb-ab07-de20c662310c'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":559868877,"millis":559.868877,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1500,"millis":0.0015,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":572208,"millis":0.572208,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '635bdc85-c596-4afb-ab07-de20c662310c'"}},{"result":{"nanos":507508,"millis":0.507508,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":425906,"millis":0.425906,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":400206,"millis":0.400206,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":467807,"millis":0.467807,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":425006,"millis":0.425006,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":20201,"millis":0.020201,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":341705,"millis":0.341705,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":318604,"millis":0.318604,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":328204,"millis":0.328204,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":60601,"millis":0.060601,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":104402,"millis":0.104402,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:19.153 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/inspire\\\/sr\\\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":364905,"millis":0.364905,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":58100,"millis":0.0581,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:19.153 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":330104,"millis":0.330104,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":55601,"millis":0.055601,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:19.154 [print] #notpresent \n"},{"result":{"nanos":23501,"millis":0.023501,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":23100,"millis":0.0231,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:19.154 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":437907,"millis":0.437907,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":48800,"millis":0.0488,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:19.154 [print] Beheer PDOK \n"},{"result":{"nanos":22401,"millis":0.022401,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:19.154 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=791adbe3-772f-42cb-a3be-5a617bcecef0#MD_DataIdentification \n"},{"result":{"nanos":422706,"millis":0.422706,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":471707,"millis":0.471707,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"635bdc85-c596-4afb-ab07-de20c662310c\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":272404,"millis":0.272404,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"635bdc85-c596-4afb-ab07-de20c662310c\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":567.515687,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"635bdc85-c596-4afb-ab07-de20c662310c","startTime":1629213738587,"refId":"[1.295:67]","endTime":1629213739156,"exampleData":{"datasetIdentifierCode":"635bdc85-c596-4afb-ab07-de20c662310c"},"exampleIndex":294},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15800,"millis":0.0158,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:18.640 karate.env system property was: null \n"},{"result":{"nanos":38601,"millis":0.038601,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":42101,"millis":0.042101,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":41000,"millis":0.041,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":214703,"millis":0.214703,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":35900,"millis":0.0359,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":385506,"millis":0.385506,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":28400,"millis":0.0284,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":51801,"millis":0.051801,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":111902,"millis":0.111902,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":350105,"millis":0.350105,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":15000,"millis":0.015,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20000,"millis":0.02,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5100,"millis":0.0051,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":41201,"millis":0.041201,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '2f12ef7d-3eb4-46a9-8b45-702a0f054d57'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":539580384,"millis":539.580384,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2600,"millis":0.0026,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":526608,"millis":0.526608,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '2f12ef7d-3eb4-46a9-8b45-702a0f054d57'"}},{"result":{"nanos":517807,"millis":0.517807,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":486407,"millis":0.486407,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":467106,"millis":0.467106,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":514508,"millis":0.514508,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":496007,"millis":0.496007,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":22901,"millis":0.022901,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":347205,"millis":0.347205,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":386606,"millis":0.386606,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":406806,"millis":0.406806,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":61301,"millis":0.061301,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":1657424,"millis":1.657424,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:19.188 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/inspire\\\/sr\\\/wfs?request=GetCapabilities&service=wfs \n"},{"result":{"nanos":425806,"millis":0.425806,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":1029115,"millis":1.029115,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:19.189 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":413106,"millis":0.413106,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":874412,"millis":0.874412,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:19.190 [print] #notpresent \n"},{"result":{"nanos":36201,"millis":0.036201,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":913013,"millis":0.913013,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:19.191 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":442607,"millis":0.442607,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":704710,"millis":0.70471,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:19.193 [print] Beheer PDOK \n"},{"result":{"nanos":1864027,"millis":1.864027,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:19.194 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=791adbe3-772f-42cb-a3be-5a617bcecef0#MD_DataIdentification \n"},{"result":{"nanos":427707,"millis":0.427707,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":427706,"millis":0.427706,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"2f12ef7d-3eb4-46a9-8b45-702a0f054d57\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":301004,"millis":0.301004,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"2f12ef7d-3eb4-46a9-8b45-702a0f054d57\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":554.743304,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"2f12ef7d-3eb4-46a9-8b45-702a0f054d57","startTime":1629213738640,"refId":"[1.296:67]","endTime":1629213739196,"exampleData":{"datasetIdentifierCode":"2f12ef7d-3eb4-46a9-8b45-702a0f054d57"},"exampleIndex":295},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15800,"millis":0.0158,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:18.829 karate.env system property was: null \n"},{"result":{"nanos":25500,"millis":0.0255,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":40200,"millis":0.0402,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":38801,"millis":0.038801,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":213503,"millis":0.213503,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":32901,"millis":0.032901,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":336605,"millis":0.336605,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":25400,"millis":0.0254,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":43301,"millis":0.043301,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":108701,"millis":0.108701,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":138702,"millis":0.138702,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13300,"millis":0.0133,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17200,"millis":0.0172,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5001,"millis":0.005001,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":36300,"millis":0.0363,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '7d641d0e-c04b-4191-833e-c578ac2abe5f'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":529046732,"millis":529.046732,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1900,"millis":0.0019,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":495708,"millis":0.495708,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '7d641d0e-c04b-4191-833e-c578ac2abe5f'"}},{"result":{"nanos":419406,"millis":0.419406,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":373705,"millis":0.373705,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":407306,"millis":0.407306,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":444306,"millis":0.444306,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":402206,"millis":0.402206,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":23501,"millis":0.023501,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":296004,"millis":0.296004,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":287504,"millis":0.287504,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":293604,"millis":0.293604,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":63201,"millis":0.063201,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":111302,"millis":0.111302,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:19.363 [print] https:\/\/haleconnect.com\/ows\/services\/org.874.cb9ca55e-f4e7-4bd8-a02e-75d528e22118_wfs\/org.874.83f948b1-9293-4926-b64d-40857c792f1e?SERVICE=WFS&Request=GetCapabilities \n"},{"result":{"nanos":333505,"millis":0.333505,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":56901,"millis":0.056901,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:19.364 [print] #notpresent \n"},{"result":{"nanos":301704,"millis":0.301704,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":47101,"millis":0.047101,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:19.364 [print] #notpresent \n"},{"result":{"nanos":21700,"millis":0.0217,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":21001,"millis":0.021001,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:19.364 [print] #notpresent \n"},{"result":{"nanos":357705,"millis":0.357705,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":51901,"millis":0.051901,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:19.365 [print] Koninklijk Nederlands Meteorologisch Instituut (KNMI) \n"},{"result":{"nanos":21200,"millis":0.0212,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:19.365 [print] https:\/\/haleconnect.com\/services\/bsp\/org.874.83f948b1-9293-4926-b64d-40857c792f1e\/md\/dataset\/dataset1#xpointer%28%2F%2Fgmd%3AidentificationInfo%5B1%5D%2Fgmd%3AMD_DataIdentification%29 \n"},{"result":{"nanos":354306,"millis":0.354306,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":815211,"millis":0.815211,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"7d641d0e-c04b-4191-833e-c578ac2abe5f\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":286504,"millis":0.286504,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"7d641d0e-c04b-4191-833e-c578ac2abe5f\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":536.438939,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"7d641d0e-c04b-4191-833e-c578ac2abe5f","startTime":1629213738829,"refId":"[1.297:67]","endTime":1629213739366,"exampleData":{"datasetIdentifierCode":"7d641d0e-c04b-4191-833e-c578ac2abe5f"},"exampleIndex":296},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14700,"millis":0.0147,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:19.081 karate.env system property was: null \n"},{"result":{"nanos":26000,"millis":0.026,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":36501,"millis":0.036501,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":39500,"millis":0.0395,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":223904,"millis":0.223904,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":34700,"millis":0.0347,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":340205,"millis":0.340205,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":26001,"millis":0.026001,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":40200,"millis":0.0402,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":112901,"millis":0.112901,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":51401,"millis":0.051401,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":11400,"millis":0.0114,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19601,"millis":0.019601,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":38301,"millis":0.038301,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'ef2a7962-8bb4-483f-ca52-85123f579'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":536210836,"millis":536.210836,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1200,"millis":0.0012,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":448907,"millis":0.448907,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'ef2a7962-8bb4-483f-ca52-85123f579'"}},{"result":{"nanos":407006,"millis":0.407006,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":343605,"millis":0.343605,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":346605,"millis":0.346605,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":380806,"millis":0.380806,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":327305,"millis":0.327305,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":22800,"millis":0.0228,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":243304,"millis":0.243304,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":235403,"millis":0.235403,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":263103,"millis":0.263103,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":59701,"millis":0.059701,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":90602,"millis":0.090602,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:19.622 [print] http:\/\/data.waterkwaliteitsportaal.nl\/inspire\/ds\/nl.xml \n"},{"result":{"nanos":1005614,"millis":1.005614,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":78201,"millis":0.078201,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:19.623 [print] #notpresent \n"},{"result":{"nanos":658509,"millis":0.658509,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":60000,"millis":0.06,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:19.623 [print] INSPIRE Atom \n"},{"result":{"nanos":68701,"millis":0.068701,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":326405,"millis":0.326405,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:19.624 [print] #notpresent \n"},{"result":{"nanos":506207,"millis":0.506207,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":56001,"millis":0.056001,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:19.624 [print] Informatiehuis Water \n"},{"result":{"nanos":41701,"millis":0.041701,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:19.625 [print] [\"http:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/nl\\\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=110f9ec6-4464-462e-9765-83d90cefbeab&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full\",\"http:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/nl\\\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=891ddc2d-8949-4a45-be96-c65b87c41f13&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full\"] \n"},{"result":{"nanos":518907,"millis":0.518907,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":611108,"millis":0.611108,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"ef2a7962-8bb4-483f-ca52-85123f579\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":307504,"millis":0.307504,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"ef2a7962-8bb4-483f-ca52-85123f579\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":544.651956,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"ef2a7962-8bb4-483f-ca52-85123f579","startTime":1629213739081,"refId":"[1.298:67]","endTime":1629213739626,"exampleData":{"datasetIdentifierCode":"ef2a7962-8bb4-483f-ca52-85123f579"},"exampleIndex":297},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14500,"millis":0.0145,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:19.157 karate.env system property was: null \n"},{"result":{"nanos":26101,"millis":0.026101,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":40100,"millis":0.0401,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":37601,"millis":0.037601,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":213003,"millis":0.213003,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":32401,"millis":0.032401,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":342605,"millis":0.342605,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":23700,"millis":0.0237,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":36501,"millis":0.036501,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":107602,"millis":0.107602,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":53800,"millis":0.0538,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":11800,"millis":0.0118,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18000,"millis":0.018,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":37401,"millis":0.037401,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'caeb52a3-cbaa-4e9b-a23e-d4dc0335b506'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":542840732,"millis":542.840732,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2400,"millis":0.0024,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":386206,"millis":0.386206,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'caeb52a3-cbaa-4e9b-a23e-d4dc0335b506'"}},{"result":{"nanos":337905,"millis":0.337905,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":302804,"millis":0.302804,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":287404,"millis":0.287404,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":318805,"millis":0.318805,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":400105,"millis":0.400105,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":33200,"millis":0.0332,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":316005,"millis":0.316005,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":263904,"millis":0.263904,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":324205,"millis":0.324205,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":123402,"millis":0.123402,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":117002,"millis":0.117002,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:19.705 [print] https:\/\/geodata.nationaalgeoregister.nl\/wijkenbuurten2020\/wfs?request=GetCapabilities&service=WFS \n"},{"result":{"nanos":318705,"millis":0.318705,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":89901,"millis":0.089901,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:19.705 [print] OGC:WFS \n"},{"result":{"nanos":482007,"millis":0.482007,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":95102,"millis":0.095102,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:19.706 [print] #notpresent \n"},{"result":{"nanos":28200,"millis":0.0282,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":46700,"millis":0.0467,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:19.706 [print] OGC:WFS \n"},{"result":{"nanos":364106,"millis":0.364106,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":82001,"millis":0.082001,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:19.706 [print] Beheer PDOK \n"},{"result":{"nanos":47501,"millis":0.047501,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:19.707 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=f1859b4d-93be-4fc8-9e91-0ecc2fa0f3b3#MD_DataIdentification \n"},{"result":{"nanos":367305,"millis":0.367305,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":529608,"millis":0.529608,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"caeb52a3-cbaa-4e9b-a23e-d4dc0335b506\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":319905,"millis":0.319905,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"caeb52a3-cbaa-4e9b-a23e-d4dc0335b506\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":549.838235,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"caeb52a3-cbaa-4e9b-a23e-d4dc0335b506","startTime":1629213739157,"refId":"[1.299:67]","endTime":1629213739708,"exampleData":{"datasetIdentifierCode":"caeb52a3-cbaa-4e9b-a23e-d4dc0335b506"},"exampleIndex":298},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14700,"millis":0.0147,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:19.198 karate.env system property was: null \n"},{"result":{"nanos":31101,"millis":0.031101,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":57301,"millis":0.057301,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":40000,"millis":0.04,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":232304,"millis":0.232304,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":37801,"millis":0.037801,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":326304,"millis":0.326304,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":25901,"millis":0.025901,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":402306,"millis":0.402306,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":110401,"millis":0.110401,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":51800,"millis":0.0518,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":14101,"millis":0.014101,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18100,"millis":0.0181,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":36701,"millis":0.036701,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '0bb27a13-76f1-4374-8d44-76e937198e8d'"}},{"result":{"nanos":5400,"millis":0.0054,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":5400,"millis":0.0054,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":548314110,"millis":548.31411,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1800,"millis":0.0018,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":476707,"millis":0.476707,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '0bb27a13-76f1-4374-8d44-76e937198e8d'"}},{"result":{"nanos":426606,"millis":0.426606,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":353406,"millis":0.353406,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":339605,"millis":0.339605,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":540708,"millis":0.540708,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":390306,"millis":0.390306,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":33100,"millis":0.0331,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":272304,"millis":0.272304,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":260804,"millis":0.260804,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":269404,"millis":0.269404,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":62301,"millis":0.062301,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":493708,"millis":0.493708,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:19.753 [print] https:\/\/inspire.caris.nl\/atom\/maritieme-grenzen-zones-noordzee-Maritieme-grenzen-Noordzee.gml \n"},{"result":{"nanos":531107,"millis":0.531107,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":260703,"millis":0.260703,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:19.753 [print] #notpresent \n"},{"result":{"nanos":312404,"millis":0.312404,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":255504,"millis":0.255504,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:19.754 [print] INSPIRE Atom \n"},{"result":{"nanos":40401,"millis":0.040401,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":156702,"millis":0.156702,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:19.754 [print] #notpresent \n"},{"result":{"nanos":346605,"millis":0.346605,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":77601,"millis":0.077601,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:19.755 [print] Ministerie van Defensie, Koninklijke Marine, Dienst der Hydrografie \n"},{"result":{"nanos":225704,"millis":0.225704,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:19.755 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=a5241416-8401-4623-be61-57ef50447a41&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full#MD_DataIdentification \n"},{"result":{"nanos":496007,"millis":0.496007,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":496307,"millis":0.496307,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"0bb27a13-76f1-4374-8d44-76e937198e8d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":282604,"millis":0.282604,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"0bb27a13-76f1-4374-8d44-76e937198e8d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":557.135139,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"0bb27a13-76f1-4374-8d44-76e937198e8d","startTime":1629213739197,"refId":"[1.300:67]","endTime":1629213739756,"exampleData":{"datasetIdentifierCode":"0bb27a13-76f1-4374-8d44-76e937198e8d"},"exampleIndex":299},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14900,"millis":0.0149,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:19.368 karate.env system property was: null \n"},{"result":{"nanos":25901,"millis":0.025901,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":45400,"millis":0.0454,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":37200,"millis":0.0372,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":203703,"millis":0.203703,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":31101,"millis":0.031101,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":352805,"millis":0.352805,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":24800,"millis":0.0248,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":38000,"millis":0.038,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":104202,"millis":0.104202,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":55801,"millis":0.055801,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12600,"millis":0.0126,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":22200,"millis":0.0222,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5300,"millis":0.0053,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":36800,"millis":0.0368,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'e222648d-d19e-4a99-a67d-2af1c9aabd75'"}},{"result":{"nanos":4501,"millis":0.004501,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":536556640,"millis":536.55664,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2000,"millis":0.002,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":487907,"millis":0.487907,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'e222648d-d19e-4a99-a67d-2af1c9aabd75'"}},{"result":{"nanos":426706,"millis":0.426706,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":4095659,"millis":4.095659,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":378605,"millis":0.378605,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":403206,"millis":0.403206,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":372006,"millis":0.372006,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":24300,"millis":0.0243,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":290505,"millis":0.290505,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":263003,"millis":0.263003,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":473006,"millis":0.473006,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":69001,"millis":0.069001,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":952313,"millis":0.952313,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:19.915 [print] https:\/\/service.pdok.nl\/kadaster\/cp\/atom\/v1_0\/index.xml \n"},{"result":{"nanos":340805,"millis":0.340805,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":71601,"millis":0.071601,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:19.915 [print] INSPIRE Atom \n"},{"result":{"nanos":545308,"millis":0.545308,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":64201,"millis":0.064201,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:19.916 [print] #notpresent \n"},{"result":{"nanos":155802,"millis":0.155802,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":72201,"millis":0.072201,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:19.916 [print] INSPIRE Atom \n"},{"result":{"nanos":417007,"millis":0.417007,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":190202,"millis":0.190202,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:19.917 [print] Beheer PDOK \n"},{"result":{"nanos":114602,"millis":0.114602,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:19.917 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=e80ad426-1392-4349-9f80-14dae5f1bf57#MD_DataIdentification \n"},{"result":{"nanos":362905,"millis":0.362905,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":636110,"millis":0.63611,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"e222648d-d19e-4a99-a67d-2af1c9aabd75\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":291504,"millis":0.291504,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"e222648d-d19e-4a99-a67d-2af1c9aabd75\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":549.080619,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"e222648d-d19e-4a99-a67d-2af1c9aabd75","startTime":1629213739368,"refId":"[1.301:67]","endTime":1629213739918,"exampleData":{"datasetIdentifierCode":"e222648d-d19e-4a99-a67d-2af1c9aabd75"},"exampleIndex":300},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14600,"millis":0.0146,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:19.628 karate.env system property was: null \n"},{"result":{"nanos":25200,"millis":0.0252,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":39001,"millis":0.039001,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":40600,"millis":0.0406,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":210503,"millis":0.210503,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":31100,"millis":0.0311,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":339705,"millis":0.339705,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":23601,"millis":0.023601,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":73901,"millis":0.073901,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":342305,"millis":0.342305,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":57301,"millis":0.057301,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":15700,"millis":0.0157,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18600,"millis":0.0186,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":36900,"millis":0.0369,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'wt-83730-e750-485a-9c0c-39bf9bf72cf8_'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3600,"millis":0.0036,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":532102176,"millis":532.102176,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2300,"millis":0.0023,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":444506,"millis":0.444506,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'wt-83730-e750-485a-9c0c-39bf9bf72cf8_'"}},{"result":{"nanos":378106,"millis":0.378106,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":316604,"millis":0.316604,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":311404,"millis":0.311404,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":374206,"millis":0.374206,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":323904,"millis":0.323904,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":21700,"millis":0.0217,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":241304,"millis":0.241304,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":232403,"millis":0.232403,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":243204,"millis":0.243204,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":59601,"millis":0.059601,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":412106,"millis":0.412106,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:20.165 [print] https:\/\/haleconnect.com\/ows\/services\/org.292.504afbe6-0069-411b-b69b-2aae3728f735_wfs?SERVICE=WFS&Request=GetCapabilities \n"},{"result":{"nanos":447606,"millis":0.447606,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":250804,"millis":0.250804,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:20.166 [print] #notpresent \n"},{"result":{"nanos":384506,"millis":0.384506,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":56500,"millis":0.0565,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:20.167 [print] #notpresent \n"},{"result":{"nanos":188102,"millis":0.188102,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":160003,"millis":0.160003,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:20.167 [print] #notpresent \n"},{"result":{"nanos":347505,"millis":0.347505,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":58001,"millis":0.058001,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:20.167 [print] Rijkswaterstaat \n"},{"result":{"nanos":395706,"millis":0.395706,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:20.168 [print] https:\/\/haleconnect.com\/services\/bsp\/org.292.504afbe6-0069-411b-b69b-2aae3728f735\/md\/dataset\/dataset1#xpointer%28%2F%2Fgmd%3AidentificationInfo%5B1%5D%2Fgmd%3AMD_DataIdentification%29 \n"},{"result":{"nanos":354405,"millis":0.354405,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":1117617,"millis":1.117617,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"wt-83730-e750-485a-9c0c-39bf9bf72cf8_\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":298404,"millis":0.298404,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"wt-83730-e750-485a-9c0c-39bf9bf72cf8_\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":540.8086,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"wt-83730-e750-485a-9c0c-39bf9bf72cf8_","startTime":1629213739628,"refId":"[1.302:67]","endTime":1629213740170,"exampleData":{"datasetIdentifierCode":"wt-83730-e750-485a-9c0c-39bf9bf72cf8_"},"exampleIndex":301},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15200,"millis":0.0152,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:19.710 karate.env system property was: null \n"},{"result":{"nanos":27400,"millis":0.0274,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":44601,"millis":0.044601,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":42100,"millis":0.0421,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":289304,"millis":0.289304,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":38301,"millis":0.038301,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":518407,"millis":0.518407,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":64001,"millis":0.064001,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":106602,"millis":0.106602,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":157302,"millis":0.157302,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":122802,"millis":0.122802,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":18101,"millis":0.018101,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20800,"millis":0.0208,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":42600,"millis":0.0426,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'KKHRN250-DXU9-167I-W6SO-8566T16B30VE'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":5601,"millis":0.005601,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":517545266,"millis":517.545266,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1300,"millis":0.0013,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":617008,"millis":0.617008,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'KKHRN250-DXU9-167I-W6SO-8566T16B30VE'"}},{"result":{"nanos":373005,"millis":0.373005,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":312505,"millis":0.312505,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":309104,"millis":0.309104,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":358505,"millis":0.358505,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":318505,"millis":0.318505,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":22000,"millis":0.022,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":243904,"millis":0.243904,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":235603,"millis":0.235603,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":388106,"millis":0.388106,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":79501,"millis":0.079501,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":145702,"millis":0.145702,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:20.233 [print] https:\/\/www.broinspireservices.nl\/arcgis\/services\/inspire\/inspire_geotop_rd\/MapServer\/WMSServer?request=GetCapabilities&service=WMS \n"},{"result":{"nanos":361505,"millis":0.361505,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":99702,"millis":0.099702,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:20.234 [print] #notpresent \n"},{"result":{"nanos":404306,"millis":0.404306,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":92901,"millis":0.092901,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:20.234 [print] OGC:WMS \n"},{"result":{"nanos":29201,"millis":0.029201,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":147902,"millis":0.147902,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:20.234 [print] #notpresent \n"},{"result":{"nanos":325905,"millis":0.325905,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":81801,"millis":0.081801,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:20.235 [print] TNO Geologische Dienst Nederland \n"},{"result":{"nanos":36501,"millis":0.036501,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:20.235 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire?SERVICE=CSW&version=2.0.2&REQUEST=GetRecordById&ID=7D35598D-DFBF-C64D-0F1A-92A80A45EB14&OUTPUTSCHEMA=http:\/\/www.isotc211.org\/2005\/gmd&ELEMENTSETNAME=full#MD_DataIdentification \n"},{"result":{"nanos":314405,"millis":0.314405,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":467206,"millis":0.467206,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"KKHRN250-DXU9-167I-W6SO-8566T16B30VE\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":286104,"millis":0.286104,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"KKHRN250-DXU9-167I-W6SO-8566T16B30VE\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":525.124275,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"KKHRN250-DXU9-167I-W6SO-8566T16B30VE","startTime":1629213739710,"refId":"[1.303:67]","endTime":1629213740236,"exampleData":{"datasetIdentifierCode":"KKHRN250-DXU9-167I-W6SO-8566T16B30VE"},"exampleIndex":302},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15400,"millis":0.0154,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:19.758 karate.env system property was: null \n"},{"result":{"nanos":26200,"millis":0.0262,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":43701,"millis":0.043701,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":39001,"millis":0.039001,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":211803,"millis":0.211803,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":32001,"millis":0.032001,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":378005,"millis":0.378005,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":26601,"millis":0.026601,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":74101,"millis":0.074101,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":297204,"millis":0.297204,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":80001,"millis":0.080001,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":17400,"millis":0.0174,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18700,"millis":0.0187,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":35200,"millis":0.0352,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'a301ddc7-c26f-42d8-b367-509ae5ae47d0'"}},{"result":{"nanos":5400,"millis":0.0054,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":5301,"millis":0.005301,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":541557612,"millis":541.557612,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2500,"millis":0.0025,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":514407,"millis":0.514407,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'a301ddc7-c26f-42d8-b367-509ae5ae47d0'"}},{"result":{"nanos":515107,"millis":0.515107,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":461107,"millis":0.461107,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":472707,"millis":0.472707,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":524708,"millis":0.524708,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":474707,"millis":0.474707,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":22100,"millis":0.0221,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":340805,"millis":0.340805,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":357606,"millis":0.357606,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":375005,"millis":0.375005,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":99802,"millis":0.099802,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":155602,"millis":0.155602,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:20.306 [print] https:\\\/\\\/service.pdok.nl\\\/hwh\\\/luchtfotorgb\\\/wms\\\/v1_0?request=GetCapabilities&service=wms \n"},{"result":{"nanos":334305,"millis":0.334305,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":101402,"millis":0.101402,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:20.307 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":320705,"millis":0.320705,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":66901,"millis":0.066901,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:20.307 [print] #notpresent \n"},{"result":{"nanos":20800,"millis":0.0208,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":35501,"millis":0.035501,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:20.307 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":414406,"millis":0.414406,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":87501,"millis":0.087501,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:20.308 [print] Beheer PDOK \n"},{"result":{"nanos":53301,"millis":0.053301,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:20.308 [print] [\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=74aca3eb-c38b-4214-9537-e0abc69e11b5#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=5b274449-b6c2-4672-a32f-e0bd40975a53#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=df15af6e-0d21-4437-a69f-802be3479bba#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=64ff8561-5c56-4cc1-ae0e-94366fb70b7e#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=4e2bb25e-a5a9-43a7-986a-40e7aea32e38#MD_DataIdentification\"] \n"},{"result":{"nanos":403706,"millis":0.403706,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":496107,"millis":0.496107,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"a301ddc7-c26f-42d8-b367-509ae5ae47d0\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":309905,"millis":0.309905,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"a301ddc7-c26f-42d8-b367-509ae5ae47d0\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":549.832634,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"a301ddc7-c26f-42d8-b367-509ae5ae47d0","startTime":1629213739758,"refId":"[1.304:67]","endTime":1629213740309,"exampleData":{"datasetIdentifierCode":"a301ddc7-c26f-42d8-b367-509ae5ae47d0"},"exampleIndex":303},{"sectionIndex":0,"stepResults":[{"result":{"nanos":26101,"millis":0.026101,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:19.920 karate.env system property was: null \n"},{"result":{"nanos":28600,"millis":0.0286,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":40501,"millis":0.040501,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":37701,"millis":0.037701,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":211603,"millis":0.211603,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":33900,"millis":0.0339,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":374106,"millis":0.374106,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":27100,"millis":0.0271,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":72902,"millis":0.072902,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":275704,"millis":0.275704,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":70301,"millis":0.070301,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13900,"millis":0.0139,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18000,"millis":0.018,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":38601,"millis":0.038601,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '32b1eb9e-c54f-4598-92d2-328eb77fa0d3'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":531867473,"millis":531.867473,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2200,"millis":0.0022,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":597908,"millis":0.597908,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '32b1eb9e-c54f-4598-92d2-328eb77fa0d3'"}},{"result":{"nanos":445306,"millis":0.445306,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":380006,"millis":0.380006,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":369005,"millis":0.369005,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":578109,"millis":0.578109,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":493207,"millis":0.493207,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":131602,"millis":0.131602,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":369606,"millis":0.369606,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":359405,"millis":0.359405,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":350605,"millis":0.350605,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":111201,"millis":0.111201,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":783012,"millis":0.783012,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:20.459 [print] https:\/\/geodata.nationaalgeoregister.nl\/natura2000\/wfs?service=WFS&request=GetCapabilities \n"},{"result":{"nanos":722610,"millis":0.72261,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":123402,"millis":0.123402,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:20.460 [print] OGC:WFS \n"},{"result":{"nanos":593109,"millis":0.593109,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":109102,"millis":0.109102,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:20.460 [print] #notpresent \n"},{"result":{"nanos":60901,"millis":0.060901,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":350205,"millis":0.350205,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:20.461 [print] OGC:WFS \n"},{"result":{"nanos":618909,"millis":0.618909,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":108802,"millis":0.108802,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:20.462 [print] Beheer PDOK \n"},{"result":{"nanos":95801,"millis":0.095801,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:20.462 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=8829e5dd-c861-4639-a6c8-fdbb6e3440d2#MD_DataIdentification \n"},{"result":{"nanos":956514,"millis":0.956514,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":379206,"millis":0.379206,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"32b1eb9e-c54f-4598-92d2-328eb77fa0d3\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":259404,"millis":0.259404,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"32b1eb9e-c54f-4598-92d2-328eb77fa0d3\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":542.50323,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"32b1eb9e-c54f-4598-92d2-328eb77fa0d3","startTime":1629213739920,"refId":"[1.305:67]","endTime":1629213740463,"exampleData":{"datasetIdentifierCode":"32b1eb9e-c54f-4598-92d2-328eb77fa0d3"},"exampleIndex":304},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15000,"millis":0.015,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:20.172 karate.env system property was: null \n"},{"result":{"nanos":24601,"millis":0.024601,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":40900,"millis":0.0409,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":39600,"millis":0.0396,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":218703,"millis":0.218703,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":33000,"millis":0.033,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":370906,"millis":0.370906,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":27200,"millis":0.0272,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":38401,"millis":0.038401,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":272104,"millis":0.272104,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":54601,"millis":0.054601,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13700,"millis":0.0137,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":34101,"millis":0.034101,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":6200,"millis":0.0062,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":50401,"millis":0.050401,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'd94b1eca-8a7d-4dc4-b979-36257878758f'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":558117851,"millis":558.117851,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2800,"millis":0.0028,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":505507,"millis":0.505507,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'd94b1eca-8a7d-4dc4-b979-36257878758f'"}},{"result":{"nanos":561108,"millis":0.561108,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":347105,"millis":0.347105,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":559508,"millis":0.559508,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":1397420,"millis":1.39742,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":1392420,"millis":1.39242,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":97401,"millis":0.097401,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":891913,"millis":0.891913,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":348905,"millis":0.348905,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":987414,"millis":0.987414,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":402506,"millis":0.402506,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":477007,"millis":0.477007,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:20.740 [print] https:\/\/geodata.nationaalgeoregister.nl\/cbsgebiedsindelingen\/wfs?request=GetCapabilities&service=WFS \n"},{"result":{"nanos":298504,"millis":0.298504,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":278304,"millis":0.278304,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:20.741 [print] OGC:WFS \n"},{"result":{"nanos":369405,"millis":0.369405,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":253404,"millis":0.253404,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:20.741 [print] #notpresent \n"},{"result":{"nanos":76501,"millis":0.076501,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":258604,"millis":0.258604,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:20.742 [print] OGC:WFS \n"},{"result":{"nanos":376106,"millis":0.376106,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":271904,"millis":0.271904,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:20.743 [print] Beheer PDOK \n"},{"result":{"nanos":654609,"millis":0.654609,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:20.743 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=effe1ab0-073d-437c-af13-df5c5e07d6cd#MD_DataIdentification \n"},{"result":{"nanos":361006,"millis":0.361006,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":402906,"millis":0.402906,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"d94b1eca-8a7d-4dc4-b979-36257878758f\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":266104,"millis":0.266104,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"d94b1eca-8a7d-4dc4-b979-36257878758f\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":571.20874,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"d94b1eca-8a7d-4dc4-b979-36257878758f","startTime":1629213740172,"refId":"[1.306:67]","endTime":1629213740744,"exampleData":{"datasetIdentifierCode":"d94b1eca-8a7d-4dc4-b979-36257878758f"},"exampleIndex":305},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13101,"millis":0.013101,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:20.238 karate.env system property was: null \n"},{"result":{"nanos":25100,"millis":0.0251,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":39601,"millis":0.039601,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":39500,"millis":0.0395,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":219003,"millis":0.219003,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":28900,"millis":0.0289,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":328305,"millis":0.328305,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":21801,"millis":0.021801,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":38100,"millis":0.0381,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":100102,"millis":0.100102,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":49701,"millis":0.049701,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":11800,"millis":0.0118,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18500,"millis":0.0185,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":35400,"millis":0.0354,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '598c4109-21d2-4a6c-b083-9975a6736853'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":593704966,"millis":593.704966,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2400,"millis":0.0024,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":601009,"millis":0.601009,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '598c4109-21d2-4a6c-b083-9975a6736853'"}},{"result":{"nanos":508607,"millis":0.508607,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":442906,"millis":0.442906,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":430106,"millis":0.430106,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":687809,"millis":0.687809,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":594608,"millis":0.594608,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":77402,"millis":0.077402,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":389105,"millis":0.389105,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":346905,"millis":0.346905,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":367505,"millis":0.367505,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":143202,"millis":0.143202,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":144602,"millis":0.144602,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:20.838 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/weggeg\\\/wms?request=getcapabilities&service=wms \n"},{"result":{"nanos":560808,"millis":0.560808,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":251903,"millis":0.251903,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:20.838 [print] OGC:WMS \n"},{"result":{"nanos":353505,"millis":0.353505,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":98501,"millis":0.098501,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:20.839 [print] OGC:WMS \n"},{"result":{"nanos":56701,"millis":0.056701,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":2358734,"millis":2.358734,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:20.839 [print] OGC:WMS \n"},{"result":{"nanos":546008,"millis":0.546008,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":381505,"millis":0.381505,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:20.842 [print] Beheer PDOK \n"},{"result":{"nanos":945714,"millis":0.945714,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:20.843 [print] [\"http:\\\/\\\/nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementsetname=full&id=27df6b33-194c-46d6-ac94-257c306c91f2#MD_DataIdentification\",\"http:\\\/\\\/nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementsetname=full&id=abaf1e22-55aa-4a11-a855-7ac963e4a82b#MD_DataIdentification\"] \n"},{"result":{"nanos":479707,"millis":0.479707,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":422806,"millis":0.422806,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"598c4109-21d2-4a6c-b083-9975a6736853\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":294404,"millis":0.294404,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"598c4109-21d2-4a6c-b083-9975a6736853\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":606.178042,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"598c4109-21d2-4a6c-b083-9975a6736853","startTime":1629213740238,"refId":"[1.307:67]","endTime":1629213740844,"exampleData":{"datasetIdentifierCode":"598c4109-21d2-4a6c-b083-9975a6736853"},"exampleIndex":306},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13000,"millis":0.013,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:20.311 karate.env system property was: null \n"},{"result":{"nanos":26100,"millis":0.0261,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":39900,"millis":0.0399,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":38101,"millis":0.038101,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":196303,"millis":0.196303,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":33300,"millis":0.0333,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":365405,"millis":0.365405,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":26400,"millis":0.0264,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":58301,"millis":0.058301,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":106702,"millis":0.106702,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":50201,"millis":0.050201,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12400,"millis":0.0124,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18000,"millis":0.018,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":34600,"millis":0.0346,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'ac3a9efe-2154-4a4c-aae3-ea269044945d'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3700,"millis":0.0037,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":573175168,"millis":573.175168,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2700,"millis":0.0027,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":2956243,"millis":2.956243,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'ac3a9efe-2154-4a4c-aae3-ea269044945d'"}},{"result":{"nanos":435706,"millis":0.435706,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":734011,"millis":0.734011,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":681010,"millis":0.68101,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":829512,"millis":0.829512,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":461107,"millis":0.461107,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":67901,"millis":0.067901,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":320005,"millis":0.320005,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":342305,"millis":0.342305,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":329605,"millis":0.329605,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":108002,"millis":0.108002,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":502207,"millis":0.502207,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:20.893 [print] https:\/\/geodata.nationaalgeoregister.nl\/bzk\/bro-bodemkaart\/wms\/v1_0?request=GetCapabilities&service=wms \n"},{"result":{"nanos":640910,"millis":0.64091,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":121802,"millis":0.121802,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:20.894 [print] OGC:WMS \n"},{"result":{"nanos":359205,"millis":0.359205,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":104201,"millis":0.104201,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:20.895 [print] #notpresent \n"},{"result":{"nanos":72501,"millis":0.072501,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":81502,"millis":0.081502,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:20.895 [print] OGC:WMS \n"},{"result":{"nanos":536308,"millis":0.536308,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":115202,"millis":0.115202,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:20.896 [print] Beheer PDOK \n"},{"result":{"nanos":1055015,"millis":1.055015,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:20.897 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=ed960299-a147-4c1a-bc57-41ff83a2264f#MD_DataIdentification \n"},{"result":{"nanos":846612,"millis":0.846612,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":394806,"millis":0.394806,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"ac3a9efe-2154-4a4c-aae3-ea269044945d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":276604,"millis":0.276604,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"ac3a9efe-2154-4a4c-aae3-ea269044945d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":586.584863,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"ac3a9efe-2154-4a4c-aae3-ea269044945d","startTime":1629213740311,"refId":"[1.308:67]","endTime":1629213740899,"exampleData":{"datasetIdentifierCode":"ac3a9efe-2154-4a4c-aae3-ea269044945d"},"exampleIndex":307},{"sectionIndex":0,"stepResults":[{"result":{"nanos":42701,"millis":0.042701,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:20.466 karate.env system property was: null \n"},{"result":{"nanos":38000,"millis":0.038,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":127302,"millis":0.127302,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":87102,"millis":0.087102,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":255403,"millis":0.255403,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":83801,"millis":0.083801,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":358905,"millis":0.358905,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":62601,"millis":0.062601,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":83501,"millis":0.083501,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":408606,"millis":0.408606,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":139302,"millis":0.139302,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":34600,"millis":0.0346,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":24501,"millis":0.024501,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":9500,"millis":0.0095,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":8800,"millis":0.0088,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":8700,"millis":0.0087,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '3ebe56dc-5f09-4fb3-b224-55c2db4ca2fd'"}},{"result":{"nanos":8801,"millis":0.008801,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":8500,"millis":0.0085,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":536454339,"millis":536.454339,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1500,"millis":0.0015,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":509107,"millis":0.509107,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '3ebe56dc-5f09-4fb3-b224-55c2db4ca2fd'"}},{"result":{"nanos":520508,"millis":0.520508,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":422706,"millis":0.422706,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":357305,"millis":0.357305,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":412006,"millis":0.412006,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":382606,"millis":0.382606,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":20100,"millis":0.0201,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":307404,"millis":0.307404,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":283204,"millis":0.283204,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":286905,"millis":0.286905,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":102201,"millis":0.102201,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":147402,"millis":0.147402,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:21.008 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/rdinfo\\\/wfs?request=GetCapabilities&service=WFS \n"},{"result":{"nanos":325004,"millis":0.325004,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":87302,"millis":0.087302,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:21.009 [print] [\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":297704,"millis":0.297704,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":58101,"millis":0.058101,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:21.009 [print] #notpresent \n"},{"result":{"nanos":47301,"millis":0.047301,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":42800,"millis":0.0428,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:21.009 [print] [\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":392205,"millis":0.392205,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":72701,"millis":0.072701,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:21.010 [print] Beheer PDOK \n"},{"result":{"nanos":33700,"millis":0.0337,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:21.010 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=29c17585-e702-463f-a5dc-99d34b17d333#MD_DataIdentification \n"},{"result":{"nanos":383106,"millis":0.383106,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":476507,"millis":0.476507,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"3ebe56dc-5f09-4fb3-b224-55c2db4ca2fd\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":269004,"millis":0.269004,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"3ebe56dc-5f09-4fb3-b224-55c2db4ca2fd\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":544.483354,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"3ebe56dc-5f09-4fb3-b224-55c2db4ca2fd","startTime":1629213740465,"refId":"[1.309:67]","endTime":1629213741011,"exampleData":{"datasetIdentifierCode":"3ebe56dc-5f09-4fb3-b224-55c2db4ca2fd"},"exampleIndex":308},{"sectionIndex":0,"stepResults":[{"result":{"nanos":40701,"millis":0.040701,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:20.747 karate.env system property was: null \n"},{"result":{"nanos":34900,"millis":0.0349,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":123602,"millis":0.123602,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":89001,"millis":0.089001,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":256503,"millis":0.256503,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":87602,"millis":0.087602,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":457006,"millis":0.457006,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":77701,"millis":0.077701,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":93201,"millis":0.093201,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":339405,"millis":0.339405,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":121302,"millis":0.121302,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":34901,"millis":0.034901,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":23600,"millis":0.0236,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":9700,"millis":0.0097,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":9100,"millis":0.0091,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":10200,"millis":0.0102,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'f917ffa9-1531-48ea-867e-0d413d85b05a'"}},{"result":{"nanos":9300,"millis":0.0093,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":8900,"millis":0.0089,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":522841243,"millis":522.841243,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1700,"millis":0.0017,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":441206,"millis":0.441206,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'f917ffa9-1531-48ea-867e-0d413d85b05a'"}},{"result":{"nanos":385006,"millis":0.385006,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":334205,"millis":0.334205,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":364305,"millis":0.364305,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":396306,"millis":0.396306,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":334905,"millis":0.334905,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":21601,"millis":0.021601,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":256004,"millis":0.256004,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":258203,"millis":0.258203,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":260203,"millis":0.260203,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":63400,"millis":0.0634,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":91901,"millis":0.091901,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:21.275 [print] https:\/\/geodata.nationaalgeoregister.nl\/digitaaltopografischbestand\/wms?request=GetCapabilities&service=WMS \n"},{"result":{"nanos":326504,"millis":0.326504,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":276704,"millis":0.276704,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:21.277 [print] OGC:WMS \n"},{"result":{"nanos":256603,"millis":0.256603,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":54500,"millis":0.0545,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:21.277 [print] #notpresent \n"},{"result":{"nanos":21700,"millis":0.0217,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":48101,"millis":0.048101,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:21.277 [print] OGC:WMS \n"},{"result":{"nanos":451006,"millis":0.451006,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":102602,"millis":0.102602,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:21.278 [print] Beheer PDOK \n"},{"result":{"nanos":63401,"millis":0.063401,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:21.278 [print] [\"https:\\\/\\\/nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?SERVICE=CSW&version=2.0.2&REQUEST=GetRecordById&ID=c4b137b8-2317-42c2-aced-204c4216d68d&OUTPUTSCHEMA=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&ELEMENTSETNAME=full#MD_DataIdentification\",\"https:\\\/\\\/nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?SERVICE=CSW&version=2.0.2&REQUEST=GetRecordById&ID=c4bed072-0fda-47b8-96fa-457a938b88fc&OUTPUTSCHEMA=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&ELEMENTSETNAME=full#MD_DataIdentification\",\"https:\\\/\\\/nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?SERVICE=CSW&version=2.0.2&REQUEST=GetRecordById&ID=3229e4d7-4bcd-4b94-819d-8e62de69ce2e&OUTPUTSCHEMA=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&ELEMENTSETNAME=full#MD_DataIdentification\"] \n"},{"result":{"nanos":357305,"millis":0.357305,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":598809,"millis":0.598809,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"f917ffa9-1531-48ea-867e-0d413d85b05a\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":10945858,"millis":10.945858,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"f917ffa9-1531-48ea-867e-0d413d85b05a\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":541.379906,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"f917ffa9-1531-48ea-867e-0d413d85b05a","startTime":1629213740746,"refId":"[1.310:67]","endTime":1629213741290,"exampleData":{"datasetIdentifierCode":"f917ffa9-1531-48ea-867e-0d413d85b05a"},"exampleIndex":309},{"sectionIndex":0,"stepResults":[{"result":{"nanos":38700,"millis":0.0387,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:20.847 karate.env system property was: null \n"},{"result":{"nanos":34801,"millis":0.034801,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":100801,"millis":0.100801,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":90902,"millis":0.090902,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":252204,"millis":0.252204,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":84801,"millis":0.084801,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":333605,"millis":0.333605,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":60601,"millis":0.060601,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":83401,"millis":0.083401,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":380706,"millis":0.380706,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":121002,"millis":0.121002,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":33100,"millis":0.0331,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":25601,"millis":0.025601,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":9400,"millis":0.0094,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":8900,"millis":0.0089,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":9400,"millis":0.0094,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '539ec652-482d-4806-a830-0458cf8be477'"}},{"result":{"nanos":9000,"millis":0.009,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":8800,"millis":0.0088,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":532615284,"millis":532.615284,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2600,"millis":0.0026,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":408606,"millis":0.408606,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '539ec652-482d-4806-a830-0458cf8be477'"}},{"result":{"nanos":360605,"millis":0.360605,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":301304,"millis":0.301304,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":298105,"millis":0.298105,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":364005,"millis":0.364005,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":316005,"millis":0.316005,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":18200,"millis":0.0182,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":235704,"millis":0.235704,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":251903,"millis":0.251903,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":244503,"millis":0.244503,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":62201,"millis":0.062201,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":797512,"millis":0.797512,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:21.386 [print] http:\/\/data.waterkwaliteitsportaal.nl\/inspire\/vs\/EF \n"},{"result":{"nanos":299804,"millis":0.299804,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":63301,"millis":0.063301,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:21.386 [print] #notpresent \n"},{"result":{"nanos":407306,"millis":0.407306,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":50601,"millis":0.050601,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:21.386 [print] OGC:WMS \n"},{"result":{"nanos":155002,"millis":0.155002,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":205303,"millis":0.205303,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:21.387 [print] #notpresent \n"},{"result":{"nanos":344605,"millis":0.344605,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":214903,"millis":0.214903,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:21.387 [print] Informatiehuis Water \n"},{"result":{"nanos":517107,"millis":0.517107,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:21.388 [print] http:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/nl\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=891ddc2d-8949-4a45-be96-c65b87c41f13&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full \n"},{"result":{"nanos":358906,"millis":0.358906,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":497107,"millis":0.497107,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"539ec652-482d-4806-a830-0458cf8be477\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":289304,"millis":0.289304,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"539ec652-482d-4806-a830-0458cf8be477\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":541.365511,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"539ec652-482d-4806-a830-0458cf8be477","startTime":1629213740846,"refId":"[1.311:67]","endTime":1629213741389,"exampleData":{"datasetIdentifierCode":"539ec652-482d-4806-a830-0458cf8be477"},"exampleIndex":310},{"sectionIndex":0,"stepResults":[{"result":{"nanos":44200,"millis":0.0442,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:20.901 karate.env system property was: null \n"},{"result":{"nanos":39601,"millis":0.039601,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":113502,"millis":0.113502,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":95101,"millis":0.095101,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":345605,"millis":0.345605,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":96901,"millis":0.096901,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":392706,"millis":0.392706,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":73101,"millis":0.073101,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":93602,"millis":0.093602,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":455206,"millis":0.455206,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":138302,"millis":0.138302,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":35800,"millis":0.0358,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":26901,"millis":0.026901,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":11100,"millis":0.0111,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":10500,"millis":0.0105,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":10600,"millis":0.0106,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '609d0c9e-173f-4f90-b020-c91ab3a0b6ef'"}},{"result":{"nanos":14001,"millis":0.014001,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":9900,"millis":0.0099,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":544648257,"millis":544.648257,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2200,"millis":0.0022,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":496007,"millis":0.496007,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '609d0c9e-173f-4f90-b020-c91ab3a0b6ef'"}},{"result":{"nanos":488907,"millis":0.488907,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":445906,"millis":0.445906,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":393706,"millis":0.393706,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":469207,"millis":0.469207,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":359905,"millis":0.359905,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":24301,"millis":0.024301,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":254904,"millis":0.254904,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":248903,"millis":0.248903,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":270504,"millis":0.270504,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":50701,"millis":0.050701,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":114302,"millis":0.114302,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:21.452 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/rdinfo\\\/wms?service=WMS&request=GetCapabilities \n"},{"result":{"nanos":282204,"millis":0.282204,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":92702,"millis":0.092702,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:21.453 [print] [\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":274404,"millis":0.274404,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":74801,"millis":0.074801,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:21.453 [print] #notpresent \n"},{"result":{"nanos":25100,"millis":0.0251,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":46200,"millis":0.0462,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:21.453 [print] [\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":376206,"millis":0.376206,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":86101,"millis":0.086101,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:21.454 [print] Beheer PDOK \n"},{"result":{"nanos":38801,"millis":0.038801,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:21.454 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=29c17585-e702-463f-a5dc-99d34b17d333#MD_DataIdentification \n"},{"result":{"nanos":366105,"millis":0.366105,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":488307,"millis":0.488307,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"609d0c9e-173f-4f90-b020-c91ab3a0b6ef\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":280404,"millis":0.280404,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"609d0c9e-173f-4f90-b020-c91ab3a0b6ef\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":552.705674,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"609d0c9e-173f-4f90-b020-c91ab3a0b6ef","startTime":1629213740901,"refId":"[1.312:67]","endTime":1629213741455,"exampleData":{"datasetIdentifierCode":"609d0c9e-173f-4f90-b020-c91ab3a0b6ef"},"exampleIndex":311},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13700,"millis":0.0137,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:21.013 karate.env system property was: null \n"},{"result":{"nanos":24600,"millis":0.0246,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":38400,"millis":0.0384,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":40701,"millis":0.040701,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":450006,"millis":0.450006,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":35500,"millis":0.0355,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":313705,"millis":0.313705,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":23800,"millis":0.0238,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":64301,"millis":0.064301,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":103202,"millis":0.103202,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":48400,"millis":0.0484,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":11900,"millis":0.0119,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18000,"millis":0.018,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5500,"millis":0.0055,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":35400,"millis":0.0354,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '037e55bd-a1dc-4fde-adfe-4610d3a3d5cb'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3400,"millis":0.0034,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":533737800,"millis":533.7378,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2200,"millis":0.0022,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":439306,"millis":0.439306,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '037e55bd-a1dc-4fde-adfe-4610d3a3d5cb'"}},{"result":{"nanos":427907,"millis":0.427907,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":367805,"millis":0.367805,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":351105,"millis":0.351105,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":416606,"millis":0.416606,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":363605,"millis":0.363605,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":30101,"millis":0.030101,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":273904,"millis":0.273904,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":293504,"millis":0.293504,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":286804,"millis":0.286804,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":62501,"millis":0.062501,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":281604,"millis":0.281604,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:21.552 [print] https:\/\/service.pdok.nl\/cbs\/pd\/atom\/v1_0\/index.xml \n"},{"result":{"nanos":331805,"millis":0.331805,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":59601,"millis":0.059601,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:21.553 [print] INSPIRE Atom \n"},{"result":{"nanos":278704,"millis":0.278704,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":48301,"millis":0.048301,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:21.553 [print] #notpresent \n"},{"result":{"nanos":18100,"millis":0.0181,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":34101,"millis":0.034101,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:21.553 [print] INSPIRE Atom \n"},{"result":{"nanos":494807,"millis":0.494807,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":83101,"millis":0.083101,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:21.554 [print] Beheer PDOK \n"},{"result":{"nanos":38701,"millis":0.038701,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:21.554 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=76541ebb-a554-4540-a017-399d4bb4a860#MD_DataIdentification \n"},{"result":{"nanos":329405,"millis":0.329405,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":467407,"millis":0.467407,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"037e55bd-a1dc-4fde-adfe-4610d3a3d5cb\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":3224646,"millis":3.224646,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"037e55bd-a1dc-4fde-adfe-4610d3a3d5cb\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":543.982046,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"037e55bd-a1dc-4fde-adfe-4610d3a3d5cb","startTime":1629213741013,"refId":"[1.313:67]","endTime":1629213741558,"exampleData":{"datasetIdentifierCode":"037e55bd-a1dc-4fde-adfe-4610d3a3d5cb"},"exampleIndex":312},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15600,"millis":0.0156,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:21.293 karate.env system property was: null \n"},{"result":{"nanos":725910,"millis":0.72591,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":43901,"millis":0.043901,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":44101,"millis":0.044101,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":1275418,"millis":1.275418,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":43501,"millis":0.043501,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":331005,"millis":0.331005,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":25600,"millis":0.0256,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":266403,"millis":0.266403,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":117501,"millis":0.117501,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":54401,"millis":0.054401,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":15700,"millis":0.0157,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18200,"millis":0.0182,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5200,"millis":0.0052,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":49401,"millis":0.049401,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '1c0dcc64-91aa-4d44-a9e3-54355556f5e7'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":565273355,"millis":565.273355,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1600,"millis":0.0016,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":552908,"millis":0.552908,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '1c0dcc64-91aa-4d44-a9e3-54355556f5e7'"}},{"result":{"nanos":497307,"millis":0.497307,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":451607,"millis":0.451607,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":459307,"millis":0.459307,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":527607,"millis":0.527607,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":476606,"millis":0.476606,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":27600,"millis":0.0276,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":346405,"millis":0.346405,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":346105,"millis":0.346105,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":501408,"millis":0.501408,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":74001,"millis":0.074001,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":240103,"millis":0.240103,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:21.866 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/bag\\\/wfs\\\/v1_1?request=getCapabilities&service=WFS \n"},{"result":{"nanos":5445378,"millis":5.445378,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":116002,"millis":0.116002,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:21.872 [print] #notpresent \n"},{"result":{"nanos":412806,"millis":0.412806,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":91002,"millis":0.091002,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:21.872 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":32400,"millis":0.0324,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":42201,"millis":0.042201,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:21.872 [print] #notpresent \n"},{"result":{"nanos":532608,"millis":0.532608,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":60401,"millis":0.060401,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:21.873 [print] Beheer PDOK \n"},{"result":{"nanos":50201,"millis":0.050201,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:21.873 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=aa3b5e6e-7baa-40c0-8972-3353e927ec2f#MD_DataIdentification \n"},{"result":{"nanos":539308,"millis":0.539308,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":554108,"millis":0.554108,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"1c0dcc64-91aa-4d44-a9e3-54355556f5e7\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":305604,"millis":0.305604,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"1c0dcc64-91aa-4d44-a9e3-54355556f5e7\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":581.00248,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"1c0dcc64-91aa-4d44-a9e3-54355556f5e7","startTime":1629213741292,"refId":"[1.314:67]","endTime":1629213741875,"exampleData":{"datasetIdentifierCode":"1c0dcc64-91aa-4d44-a9e3-54355556f5e7"},"exampleIndex":313},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13601,"millis":0.013601,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:21.391 karate.env system property was: null \n"},{"result":{"nanos":25400,"millis":0.0254,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":40001,"millis":0.040001,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":38701,"millis":0.038701,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":197902,"millis":0.197902,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":33500,"millis":0.0335,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":319505,"millis":0.319505,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":23200,"millis":0.0232,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":40001,"millis":0.040001,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":264104,"millis":0.264104,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":49001,"millis":0.049001,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12700,"millis":0.0127,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19700,"millis":0.0197,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":34100,"millis":0.0341,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '9e2e977a-16a6-42a4-a208-c4f70704f383'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":547250394,"millis":547.250394,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2400,"millis":0.0024,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":560708,"millis":0.560708,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '9e2e977a-16a6-42a4-a208-c4f70704f383'"}},{"result":{"nanos":570209,"millis":0.570209,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":557808,"millis":0.557808,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":458807,"millis":0.458807,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":495607,"millis":0.495607,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":442506,"millis":0.442506,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":19700,"millis":0.0197,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":314005,"millis":0.314005,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":314704,"millis":0.314704,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":331405,"millis":0.331405,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":56901,"millis":0.056901,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":122602,"millis":0.122602,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:21.944 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/bag\\\/wms\\\/v1_1?request=getCapabilities&service=WMS \n"},{"result":{"nanos":740811,"millis":0.740811,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":149102,"millis":0.149102,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:21.945 [print] #notpresent \n"},{"result":{"nanos":399306,"millis":0.399306,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":61301,"millis":0.061301,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:21.946 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":130402,"millis":0.130402,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":144902,"millis":0.144902,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:21.946 [print] #notpresent \n"},{"result":{"nanos":602709,"millis":0.602709,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":60501,"millis":0.060501,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:21.947 [print] Beheer PDOK \n"},{"result":{"nanos":158702,"millis":0.158702,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:21.947 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputschema=http:\/\/www.isotc211.org\/2005\/gmd&elementsetname=full&id=aa3b5e6e-7baa-40c0-8972-3353e927ec2f#MD_DataIdentification \n"},{"result":{"nanos":899313,"millis":0.899313,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":469007,"millis":0.469007,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"9e2e977a-16a6-42a4-a208-c4f70704f383\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":270804,"millis":0.270804,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"9e2e977a-16a6-42a4-a208-c4f70704f383\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":556.713832,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"9e2e977a-16a6-42a4-a208-c4f70704f383","startTime":1629213741391,"refId":"[1.315:67]","endTime":1629213741948,"exampleData":{"datasetIdentifierCode":"9e2e977a-16a6-42a4-a208-c4f70704f383"},"exampleIndex":314},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13300,"millis":0.0133,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:21.457 karate.env system property was: null \n"},{"result":{"nanos":23401,"millis":0.023401,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":37800,"millis":0.0378,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":38101,"millis":0.038101,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":200803,"millis":0.200803,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":31201,"millis":0.031201,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":338405,"millis":0.338405,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":24700,"millis":0.0247,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":39501,"millis":0.039501,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":101701,"millis":0.101701,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":47001,"millis":0.047001,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":10900,"millis":0.0109,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18001,"millis":0.018001,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3700,"millis":0.0037,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":34700,"millis":0.0347,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'adn573b0-bd3b-4d7b-a97d-e65841e6e0b3'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3700,"millis":0.0037,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":542212822,"millis":542.212822,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1600,"millis":0.0016,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":493307,"millis":0.493307,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'adn573b0-bd3b-4d7b-a97d-e65841e6e0b3'"}},{"result":{"nanos":497107,"millis":0.497107,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":491707,"millis":0.491707,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":459707,"millis":0.459707,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":514408,"millis":0.514408,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":485707,"millis":0.485707,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":19500,"millis":0.0195,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":274204,"millis":0.274204,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":264503,"millis":0.264503,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":274003,"millis":0.274003,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":57000,"millis":0.057,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":325104,"millis":0.325104,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:22.004 [print] https:\/\/inspire.caris.nl\/geoserver3\/rws\/wms?service=WMS&version=1.3.0&request=GetCapabilities \n"},{"result":{"nanos":436206,"millis":0.436206,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":79701,"millis":0.079701,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:22.005 [print] OGC:WMS \n"},{"result":{"nanos":584608,"millis":0.584608,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":122702,"millis":0.122702,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:22.006 [print] #notpresent \n"},{"result":{"nanos":117001,"millis":0.117001,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":59601,"millis":0.059601,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:22.006 [print] OGC:WMS \n"},{"result":{"nanos":571809,"millis":0.571809,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":52600,"millis":0.0526,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:22.007 [print] Rijkswaterstaat \n"},{"result":{"nanos":130501,"millis":0.130501,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:22.007 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=adn73c4a-ef03-4785-b7f6-942e86b385f5#MD_DataIdentification \n"},{"result":{"nanos":439206,"millis":0.439206,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":531907,"millis":0.531907,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"adn573b0-bd3b-4d7b-a97d-e65841e6e0b3\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":277804,"millis":0.277804,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"adn573b0-bd3b-4d7b-a97d-e65841e6e0b3\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":550.74944,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"adn573b0-bd3b-4d7b-a97d-e65841e6e0b3","startTime":1629213741456,"refId":"[1.316:67]","endTime":1629213742008,"exampleData":{"datasetIdentifierCode":"adn573b0-bd3b-4d7b-a97d-e65841e6e0b3"},"exampleIndex":315},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16900,"millis":0.0169,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:21.560 karate.env system property was: null \n"},{"result":{"nanos":28701,"millis":0.028701,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":42100,"millis":0.0421,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":45501,"millis":0.045501,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":217003,"millis":0.217003,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":35100,"millis":0.0351,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":364805,"millis":0.364805,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":66601,"millis":0.066601,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":586208,"millis":0.586208,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":127002,"millis":0.127002,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":58401,"millis":0.058401,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":17301,"millis":0.017301,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18300,"millis":0.0183,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5200,"millis":0.0052,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":42301,"millis":0.042301,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '7a914681-61bd-4f67-902b-45037a00c469'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":530313934,"millis":530.313934,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1700,"millis":0.0017,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":536808,"millis":0.536808,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '7a914681-61bd-4f67-902b-45037a00c469'"}},{"result":{"nanos":547208,"millis":0.547208,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":471807,"millis":0.471807,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":388706,"millis":0.388706,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":455406,"millis":0.455406,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":412806,"millis":0.412806,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":18601,"millis":0.018601,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":302904,"millis":0.302904,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":283904,"millis":0.283904,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":301905,"millis":0.301905,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":58301,"millis":0.058301,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":110301,"millis":0.110301,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:22.097 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/ahn2\\\/wms?service=WMS&request=GetCapabilities \n"},{"result":{"nanos":720611,"millis":0.720611,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":108201,"millis":0.108201,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:22.097 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":606508,"millis":0.606508,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":95202,"millis":0.095202,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:22.098 [print] #notpresent \n"},{"result":{"nanos":23300,"millis":0.0233,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":35201,"millis":0.035201,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:22.098 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":501507,"millis":0.501507,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":76501,"millis":0.076501,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:22.099 [print] Beheer PDOK \n"},{"result":{"nanos":33201,"millis":0.033201,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:22.099 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=7939fd42-cf88-42c5-ab3b-232cf232a3ac#MD_DataIdentification \n"},{"result":{"nanos":729310,"millis":0.72931,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":533107,"millis":0.533107,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"7a914681-61bd-4f67-902b-45037a00c469\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":302505,"millis":0.302505,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"7a914681-61bd-4f67-902b-45037a00c469\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":539.654369,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"7a914681-61bd-4f67-902b-45037a00c469","startTime":1629213741559,"refId":"[1.317:67]","endTime":1629213742100,"exampleData":{"datasetIdentifierCode":"7a914681-61bd-4f67-902b-45037a00c469"},"exampleIndex":316},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13200,"millis":0.0132,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:21.879 karate.env system property was: null \n"},{"result":{"nanos":26001,"millis":0.026001,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":39800,"millis":0.0398,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":38401,"millis":0.038401,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":204003,"millis":0.204003,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":32501,"millis":0.032501,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":320904,"millis":0.320904,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":24401,"millis":0.024401,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":403106,"millis":0.403106,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":118902,"millis":0.118902,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":49700,"millis":0.0497,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":15300,"millis":0.0153,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18900,"millis":0.0189,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":40201,"millis":0.040201,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'fff9d7cf-9929-4dde-98b8-06ceda7e5610'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":548662333,"millis":548.662333,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2500,"millis":0.0025,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":541108,"millis":0.541108,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'fff9d7cf-9929-4dde-98b8-06ceda7e5610'"}},{"result":{"nanos":519007,"millis":0.519007,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":474007,"millis":0.474007,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":449607,"millis":0.449607,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":470307,"millis":0.470307,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":411006,"millis":0.411006,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":20900,"millis":0.0209,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":333505,"millis":0.333505,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":292704,"millis":0.292704,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":300405,"millis":0.300405,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":54201,"millis":0.054201,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":113601,"millis":0.113601,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:22.433 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/ahn2\\\/wcs?request=GetCapabilities&service=WCS \n"},{"result":{"nanos":323004,"millis":0.323004,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":90602,"millis":0.090602,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:22.434 [print] #notpresent \n"},{"result":{"nanos":662909,"millis":0.662909,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":277704,"millis":0.277704,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:22.435 [print] [\"OGC:WCS\",\"OGC:WCS\",\"OGC:WCS\",\"OGC:WCS\"] \n"},{"result":{"nanos":30000,"millis":0.03,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":198703,"millis":0.198703,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:22.435 [print] #notpresent \n"},{"result":{"nanos":422806,"millis":0.422806,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":52301,"millis":0.052301,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:22.435 [print] Beheer PDOK \n"},{"result":{"nanos":630509,"millis":0.630509,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:22.436 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=7939fd42-cf88-42c5-ab3b-232cf232a3ac#MD_DataIdentification \n"},{"result":{"nanos":456507,"millis":0.456507,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":504307,"millis":0.504307,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"fff9d7cf-9929-4dde-98b8-06ceda7e5610\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":306305,"millis":0.306305,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"fff9d7cf-9929-4dde-98b8-06ceda7e5610\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":557.963268,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"fff9d7cf-9929-4dde-98b8-06ceda7e5610","startTime":1629213741878,"refId":"[1.318:67]","endTime":1629213742437,"exampleData":{"datasetIdentifierCode":"fff9d7cf-9929-4dde-98b8-06ceda7e5610"},"exampleIndex":317},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14500,"millis":0.0145,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:21.950 karate.env system property was: null \n"},{"result":{"nanos":27800,"millis":0.0278,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":41300,"millis":0.0413,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":37001,"millis":0.037001,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":203803,"millis":0.203803,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":33200,"millis":0.0332,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":310904,"millis":0.310904,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":23500,"millis":0.0235,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":41100,"millis":0.0411,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":263404,"millis":0.263404,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":60801,"millis":0.060801,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12800,"millis":0.0128,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18701,"millis":0.018701,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":45201,"millis":0.045201,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'f20e948e-9e22-4b5a-96a1-f3cc1d16b808'"}},{"result":{"nanos":3600,"millis":0.0036,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3100,"millis":0.0031,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":532488089,"millis":532.488089,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1400,"millis":0.0014,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":450206,"millis":0.450206,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'f20e948e-9e22-4b5a-96a1-f3cc1d16b808'"}},{"result":{"nanos":508107,"millis":0.508107,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":462106,"millis":0.462106,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":448007,"millis":0.448007,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":496007,"millis":0.496007,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":458607,"millis":0.458607,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":22200,"millis":0.0222,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":325405,"millis":0.325405,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":330605,"millis":0.330605,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":329705,"millis":0.329705,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":59001,"millis":0.059001,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":108801,"millis":0.108801,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:22.489 [print] https:\/\/geodata.nationaalgeoregister.nl\/ahn1\/wcs?request=GetCapabilities&service=wcs \n"},{"result":{"nanos":366905,"millis":0.366905,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":84201,"millis":0.084201,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:22.489 [print] OGC:WCS \n"},{"result":{"nanos":381806,"millis":0.381806,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":87701,"millis":0.087701,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:22.490 [print] #notpresent \n"},{"result":{"nanos":28601,"millis":0.028601,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":46700,"millis":0.0467,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:22.490 [print] OGC:WCS \n"},{"result":{"nanos":494307,"millis":0.494307,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":83401,"millis":0.083401,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:22.490 [print] Beheer PDOK \n"},{"result":{"nanos":54601,"millis":0.054601,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:22.490 [print] http:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=5a1adb58-0bbe-425d-b0fe-577a6c0a4228#MD_DataIdentification \n"},{"result":{"nanos":480407,"millis":0.480407,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":459007,"millis":0.459007,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"f20e948e-9e22-4b5a-96a1-f3cc1d16b808\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":294704,"millis":0.294704,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"f20e948e-9e22-4b5a-96a1-f3cc1d16b808\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":540.499302,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"f20e948e-9e22-4b5a-96a1-f3cc1d16b808","startTime":1629213741950,"refId":"[1.319:67]","endTime":1629213742492,"exampleData":{"datasetIdentifierCode":"f20e948e-9e22-4b5a-96a1-f3cc1d16b808"},"exampleIndex":318},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13900,"millis":0.0139,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:22.010 karate.env system property was: null \n"},{"result":{"nanos":27600,"millis":0.0276,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":39601,"millis":0.039601,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":40400,"millis":0.0404,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":203003,"millis":0.203003,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":29801,"millis":0.029801,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":307304,"millis":0.307304,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":24101,"millis":0.024101,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":37600,"millis":0.0376,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":259804,"millis":0.259804,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":69001,"millis":0.069001,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13301,"millis":0.013301,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18300,"millis":0.0183,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":49801,"millis":0.049801,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '94e5b115-bece-4140-99ed-93b8f363948e'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":11201,"millis":0.011201,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":535659824,"millis":535.659824,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1600,"millis":0.0016,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":557408,"millis":0.557408,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '94e5b115-bece-4140-99ed-93b8f363948e'"}},{"result":{"nanos":635610,"millis":0.63561,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":542207,"millis":0.542207,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":585408,"millis":0.585408,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":597709,"millis":0.597709,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":591909,"millis":0.591909,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":26400,"millis":0.0264,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":387706,"millis":0.387706,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":421706,"millis":0.421706,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":437406,"millis":0.437406,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":66801,"millis":0.066801,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":104101,"millis":0.104101,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:22.553 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/ahn3\\\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":405206,"millis":0.405206,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":74301,"millis":0.074301,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:22.554 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":683210,"millis":0.68321,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":59601,"millis":0.059601,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:22.555 [print] #notpresent \n"},{"result":{"nanos":23100,"millis":0.0231,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":52601,"millis":0.052601,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:22.555 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":885113,"millis":0.885113,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":58801,"millis":0.058801,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:22.556 [print] Beheer PDOK \n"},{"result":{"nanos":47500,"millis":0.0475,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:22.556 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=41daef8b-155e-4608-b49c-c87ea45d931c#MD_DataIdentification \n"},{"result":{"nanos":1110315,"millis":1.110315,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":600108,"millis":0.600108,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"94e5b115-bece-4140-99ed-93b8f363948e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":291304,"millis":0.291304,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"94e5b115-bece-4140-99ed-93b8f363948e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":546.065373,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"94e5b115-bece-4140-99ed-93b8f363948e","startTime":1629213742010,"refId":"[1.320:67]","endTime":1629213742558,"exampleData":{"datasetIdentifierCode":"94e5b115-bece-4140-99ed-93b8f363948e"},"exampleIndex":319},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14201,"millis":0.014201,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:22.102 karate.env system property was: null \n"},{"result":{"nanos":25900,"millis":0.0259,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":48701,"millis":0.048701,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":36201,"millis":0.036201,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":218103,"millis":0.218103,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":32900,"millis":0.0329,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":313705,"millis":0.313705,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":21100,"millis":0.0211,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":37701,"millis":0.037701,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":285404,"millis":0.285404,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":75101,"millis":0.075101,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13401,"millis":0.013401,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18800,"millis":0.0188,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":31800,"millis":0.0318,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'bfcc588f-9393-4c70-b989-d9e92ac2f493'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":527474308,"millis":527.474308,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1900,"millis":0.0019,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":574808,"millis":0.574808,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'bfcc588f-9393-4c70-b989-d9e92ac2f493'"}},{"result":{"nanos":561408,"millis":0.561408,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":526308,"millis":0.526308,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":539708,"millis":0.539708,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":567108,"millis":0.567108,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":537808,"millis":0.537808,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":22800,"millis":0.0228,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":375806,"millis":0.375806,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":333805,"millis":0.333805,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":425606,"millis":0.425606,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":60801,"millis":0.060801,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":475607,"millis":0.475607,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:22.637 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/ahn3\\\/wcs?&service=wcs&request=GetCapabilities \n"},{"result":{"nanos":485807,"millis":0.485807,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":361005,"millis":0.361005,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:22.637 [print] [\"OGC:WCS\",\"OGC:WCS\",\"OGC:WCS\",\"OGC:WCS\",\"OGC:WCS\"] \n"},{"result":{"nanos":358105,"millis":0.358105,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":222104,"millis":0.222104,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:22.638 [print] #notpresent \n"},{"result":{"nanos":28300,"millis":0.0283,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":183503,"millis":0.183503,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:22.638 [print] [\"OGC:WCS\",\"OGC:WCS\",\"OGC:WCS\",\"OGC:WCS\",\"OGC:WCS\"] \n"},{"result":{"nanos":605109,"millis":0.605109,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":212803,"millis":0.212803,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:22.639 [print] Beheer PDOK \n"},{"result":{"nanos":1285318,"millis":1.285318,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:22.640 [print] [\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=41daef8b-155e-4608-b49c-c87ea45d931c#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=41daef8b-155e-4608-b49c-c87ea45d931c#MD_DataIdentification\"] \n"},{"result":{"nanos":463707,"millis":0.463707,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":519908,"millis":0.519908,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"bfcc588f-9393-4c70-b989-d9e92ac2f493\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":360705,"millis":0.360705,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"bfcc588f-9393-4c70-b989-d9e92ac2f493\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":538.755573,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"bfcc588f-9393-4c70-b989-d9e92ac2f493","startTime":1629213742102,"refId":"[1.321:67]","endTime":1629213742642,"exampleData":{"datasetIdentifierCode":"bfcc588f-9393-4c70-b989-d9e92ac2f493"},"exampleIndex":320},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13800,"millis":0.0138,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:22.439 karate.env system property was: null \n"},{"result":{"nanos":26301,"millis":0.026301,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":39800,"millis":0.0398,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":39501,"millis":0.039501,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":190703,"millis":0.190703,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":30900,"millis":0.0309,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":313504,"millis":0.313504,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":24400,"millis":0.0244,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":40400,"millis":0.0404,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":105002,"millis":0.105002,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":52000,"millis":0.052,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":11900,"millis":0.0119,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18600,"millis":0.0186,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":33101,"millis":0.033101,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '68d14b1c-71ad-4ce7-8267-45787a80c2d4'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":518086274,"millis":518.086274,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1900,"millis":0.0019,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":561308,"millis":0.561308,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '68d14b1c-71ad-4ce7-8267-45787a80c2d4'"}},{"result":{"nanos":576708,"millis":0.576708,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":514907,"millis":0.514907,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":492807,"millis":0.492807,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":566008,"millis":0.566008,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":475106,"millis":0.475106,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":20501,"millis":0.020501,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":323305,"millis":0.323305,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":316704,"millis":0.316704,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":331405,"millis":0.331405,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":57301,"millis":0.057301,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":115302,"millis":0.115302,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:22.963 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/inspire\\\/ad\\\/wfs?request=GetCapabilities&service=WFS \n"},{"result":{"nanos":732810,"millis":0.73281,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":111702,"millis":0.111702,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:22.964 [print] #notpresent \n"},{"result":{"nanos":387106,"millis":0.387106,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":57201,"millis":0.057201,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:22.965 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":21900,"millis":0.0219,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":54201,"millis":0.054201,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:22.965 [print] #notpresent \n"},{"result":{"nanos":452907,"millis":0.452907,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":95401,"millis":0.095401,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:22.965 [print] Beheer PDOK \n"},{"result":{"nanos":39701,"millis":0.039701,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:22.965 [print] https:\/\/www.nationaalgeoregister.nl:443\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=a5f961e9-ebdd-41e2-b8e8-ab33ed340a83#MD_DataIdentification \n"},{"result":{"nanos":447406,"millis":0.447406,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":472207,"millis":0.472207,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"68d14b1c-71ad-4ce7-8267-45787a80c2d4\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":257704,"millis":0.257704,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"68d14b1c-71ad-4ce7-8267-45787a80c2d4\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":526.525994,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"68d14b1c-71ad-4ce7-8267-45787a80c2d4","startTime":1629213742439,"refId":"[1.322:67]","endTime":1629213742966,"exampleData":{"datasetIdentifierCode":"68d14b1c-71ad-4ce7-8267-45787a80c2d4"},"exampleIndex":321},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14200,"millis":0.0142,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:22.493 karate.env system property was: null \n"},{"result":{"nanos":24500,"millis":0.0245,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":38801,"millis":0.038801,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":37001,"millis":0.037001,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":192302,"millis":0.192302,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":31100,"millis":0.0311,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":310405,"millis":0.310405,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":22400,"millis":0.0224,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":38101,"millis":0.038101,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":97901,"millis":0.097901,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":46101,"millis":0.046101,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":11000,"millis":0.011,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18000,"millis":0.018,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":31500,"millis":0.0315,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '5b40b9b4-fcb2-4553-bcab-34824c43c992'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3600,"millis":0.0036,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":541019200,"millis":541.0192,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2300,"millis":0.0023,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":459606,"millis":0.459606,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '5b40b9b4-fcb2-4553-bcab-34824c43c992'"}},{"result":{"nanos":472207,"millis":0.472207,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":403306,"millis":0.403306,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":401606,"millis":0.401606,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":448906,"millis":0.448906,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":406305,"millis":0.406305,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":21300,"millis":0.0213,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":302004,"millis":0.302004,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":288905,"millis":0.288905,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":299304,"millis":0.299304,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":62601,"millis":0.062601,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":88901,"millis":0.088901,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:23.039 [print] https:\/\/geodata.nationaalgeoregister.nl\/inspire\/ad\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":355905,"millis":0.355905,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":266104,"millis":0.266104,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:23.040 [print] OGC:WMS \n"},{"result":{"nanos":368405,"millis":0.368405,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":83801,"millis":0.083801,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:23.041 [print] #notpresent \n"},{"result":{"nanos":24701,"millis":0.024701,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":38100,"millis":0.0381,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:23.041 [print] OGC:WMS \n"},{"result":{"nanos":414505,"millis":0.414505,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":181002,"millis":0.181002,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:23.041 [print] Beheer PDOK \n"},{"result":{"nanos":492307,"millis":0.492307,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:23.042 [print] https:\/\/www.nationaalgeoregister.nl:443\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=a5f961e9-ebdd-41e2-b8e8-ab33ed340a83#MD_DataIdentification \n"},{"result":{"nanos":388705,"millis":0.388705,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":589609,"millis":0.589609,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"5b40b9b4-fcb2-4553-bcab-34824c43c992\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":332005,"millis":0.332005,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"5b40b9b4-fcb2-4553-bcab-34824c43c992\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":549.140612,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"5b40b9b4-fcb2-4553-bcab-34824c43c992","startTime":1629213742493,"refId":"[1.323:67]","endTime":1629213743043,"exampleData":{"datasetIdentifierCode":"5b40b9b4-fcb2-4553-bcab-34824c43c992"},"exampleIndex":322},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15101,"millis":0.015101,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:22.560 karate.env system property was: null \n"},{"result":{"nanos":28200,"millis":0.0282,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":39501,"millis":0.039501,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":38100,"millis":0.0381,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":212904,"millis":0.212904,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":33300,"millis":0.0333,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":336805,"millis":0.336805,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":24800,"millis":0.0248,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":55900,"millis":0.0559,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":108902,"millis":0.108902,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":52301,"millis":0.052301,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12000,"millis":0.012,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19901,"millis":0.019901,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":68001,"millis":0.068001,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'c3ee15e4-38bf-4d54-9c0b-cfe0e609d448'"}},{"result":{"nanos":5300,"millis":0.0053,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":542345020,"millis":542.34502,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2400,"millis":0.0024,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":618409,"millis":0.618409,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'c3ee15e4-38bf-4d54-9c0b-cfe0e609d448'"}},{"result":{"nanos":606909,"millis":0.606909,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":488007,"millis":0.488007,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":440107,"millis":0.440107,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":512307,"millis":0.512307,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":455307,"millis":0.455307,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":20100,"millis":0.0201,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":328405,"millis":0.328405,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":313704,"millis":0.313704,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":341504,"millis":0.341504,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":63701,"millis":0.063701,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":113401,"millis":0.113401,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:23.108 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/ahn1\\\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":363706,"millis":0.363706,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":96501,"millis":0.096501,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:23.109 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":349105,"millis":0.349105,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":87202,"millis":0.087202,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:23.109 [print] #notpresent \n"},{"result":{"nanos":23500,"millis":0.0235,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":37101,"millis":0.037101,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:23.109 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":482207,"millis":0.482207,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":73101,"millis":0.073101,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:23.110 [print] Beheer PDOK \n"},{"result":{"nanos":34200,"millis":0.0342,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:23.110 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=5a1adb58-0bbe-425d-b0fe-577a6c0a4228#MD_DataIdentification \n"},{"result":{"nanos":452307,"millis":0.452307,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":481807,"millis":0.481807,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"c3ee15e4-38bf-4d54-9c0b-cfe0e609d448\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":270704,"millis":0.270704,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"c3ee15e4-38bf-4d54-9c0b-cfe0e609d448\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":550.464138,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"c3ee15e4-38bf-4d54-9c0b-cfe0e609d448","startTime":1629213742560,"refId":"[1.324:67]","endTime":1629213743111,"exampleData":{"datasetIdentifierCode":"c3ee15e4-38bf-4d54-9c0b-cfe0e609d448"},"exampleIndex":323},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14401,"millis":0.014401,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:22.644 karate.env system property was: null \n"},{"result":{"nanos":27500,"millis":0.0275,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":37901,"millis":0.037901,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":38500,"millis":0.0385,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":210403,"millis":0.210403,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":33600,"millis":0.0336,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":308205,"millis":0.308205,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":24900,"millis":0.0249,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":413906,"millis":0.413906,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":118102,"millis":0.118102,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":51101,"millis":0.051101,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":14300,"millis":0.0143,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20500,"millis":0.0205,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5600,"millis":0.0056,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":34200,"millis":0.0342,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'e258f171-6f56-4d4d-8311-027b30213c2d'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3500,"millis":0.0035,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":533950899,"millis":533.950899,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2900,"millis":0.0029,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":531008,"millis":0.531008,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'e258f171-6f56-4d4d-8311-027b30213c2d'"}},{"result":{"nanos":412306,"millis":0.412306,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":376905,"millis":0.376905,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":393706,"millis":0.393706,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":448407,"millis":0.448407,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":395705,"millis":0.395705,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":22900,"millis":0.0229,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":295904,"millis":0.295904,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":296704,"millis":0.296704,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":291104,"millis":0.291104,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":165703,"millis":0.165703,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":134002,"millis":0.134002,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:23.183 [print] https:\/\/service.pdok.nl\/kadaster\/cp\/wms\/v1_0?request=GetCapabilities&service=WMS \n"},{"result":{"nanos":354005,"millis":0.354005,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":84801,"millis":0.084801,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:23.184 [print] OGC:WMS \n"},{"result":{"nanos":321005,"millis":0.321005,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":104102,"millis":0.104102,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:23.184 [print] #notpresent \n"},{"result":{"nanos":27400,"millis":0.0274,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":39501,"millis":0.039501,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:23.184 [print] OGC:WMS \n"},{"result":{"nanos":402706,"millis":0.402706,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":72101,"millis":0.072101,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:23.185 [print] Beheer PDOK \n"},{"result":{"nanos":39900,"millis":0.0399,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:23.185 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=e80ad426-1392-4349-9f80-14dae5f1bf57#MD_DataIdentification \n"},{"result":{"nanos":421706,"millis":0.421706,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":505107,"millis":0.505107,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"e258f171-6f56-4d4d-8311-027b30213c2d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":291504,"millis":0.291504,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"e258f171-6f56-4d4d-8311-027b30213c2d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":541.74811,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"e258f171-6f56-4d4d-8311-027b30213c2d","startTime":1629213742643,"refId":"[1.325:67]","endTime":1629213743186,"exampleData":{"datasetIdentifierCode":"e258f171-6f56-4d4d-8311-027b30213c2d"},"exampleIndex":324},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13100,"millis":0.0131,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:22.968 karate.env system property was: null \n"},{"result":{"nanos":42201,"millis":0.042201,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":40301,"millis":0.040301,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":51900,"millis":0.0519,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":213403,"millis":0.213403,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":31800,"millis":0.0318,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":352905,"millis":0.352905,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":26301,"millis":0.026301,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":42800,"millis":0.0428,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":110001,"millis":0.110001,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":51101,"millis":0.051101,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12500,"millis":0.0125,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19401,"millis":0.019401,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3500,"millis":0.0035,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":37601,"millis":0.037601,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '008d85d1-460d-46f6-9af4-98afdedbc4dc'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":545344062,"millis":545.344062,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1900,"millis":0.0019,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":482106,"millis":0.482106,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '008d85d1-460d-46f6-9af4-98afdedbc4dc'"}},{"result":{"nanos":436606,"millis":0.436606,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":380605,"millis":0.380605,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":364105,"millis":0.364105,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":432606,"millis":0.432606,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":397205,"millis":0.397205,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":22801,"millis":0.022801,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":284804,"millis":0.284804,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":276404,"millis":0.276404,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":282504,"millis":0.282504,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":73601,"millis":0.073601,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":727510,"millis":0.72751,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:23.519 [print] https:\/\/service.pdok.nl\/cbs\/pd\/wfs\/v1_0?service=WFS&request=GetCapabilities&service=wfs \n"},{"result":{"nanos":368305,"millis":0.368305,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":112901,"millis":0.112901,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:23.520 [print] OGC:WFS \n"},{"result":{"nanos":319805,"millis":0.319805,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":54001,"millis":0.054001,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:23.520 [print] #notpresent \n"},{"result":{"nanos":25200,"millis":0.0252,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":52101,"millis":0.052101,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:23.520 [print] OGC:WFS \n"},{"result":{"nanos":402906,"millis":0.402906,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":57001,"millis":0.057001,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:23.521 [print] Beheer PDOK \n"},{"result":{"nanos":54701,"millis":0.054701,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:23.521 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=76541ebb-a554-4540-a017-399d4bb4a860#MD_DataIdentification \n"},{"result":{"nanos":407706,"millis":0.407706,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":542808,"millis":0.542808,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"008d85d1-460d-46f6-9af4-98afdedbc4dc\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":325105,"millis":0.325105,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"008d85d1-460d-46f6-9af4-98afdedbc4dc\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":553.291074,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"008d85d1-460d-46f6-9af4-98afdedbc4dc","startTime":1629213742968,"refId":"[1.326:67]","endTime":1629213743522,"exampleData":{"datasetIdentifierCode":"008d85d1-460d-46f6-9af4-98afdedbc4dc"},"exampleIndex":325},{"sectionIndex":0,"stepResults":[{"result":{"nanos":15100,"millis":0.0151,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:23.045 karate.env system property was: null \n"},{"result":{"nanos":28901,"millis":0.028901,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":71501,"millis":0.071501,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":41001,"millis":0.041001,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":215303,"millis":0.215303,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":34100,"millis":0.0341,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":344704,"millis":0.344704,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":26000,"millis":0.026,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":42001,"millis":0.042001,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":106501,"millis":0.106501,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":53301,"millis":0.053301,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12400,"millis":0.0124,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":21201,"millis":0.021201,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":5500,"millis":0.0055,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":34301,"millis":0.034301,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '0898d4a9-8fe6-46e9-8855-1242d8028970'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3700,"millis":0.0037,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":524609267,"millis":524.609267,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1900,"millis":0.0019,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":430806,"millis":0.430806,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '0898d4a9-8fe6-46e9-8855-1242d8028970'"}},{"result":{"nanos":387405,"millis":0.387405,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":339204,"millis":0.339204,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":322704,"millis":0.322704,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":388306,"millis":0.388306,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":369805,"millis":0.369805,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":31900,"millis":0.0319,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":275804,"millis":0.275804,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":249104,"millis":0.249104,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":257904,"millis":0.257904,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":460106,"millis":0.460106,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":350305,"millis":0.350305,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:23.575 [print] https:\/\/geodata.nationaalgeoregister.nl\/rws\/richtlijnoverstromingsrisico2018\/atom\/v1_0\/index.xml \n"},{"result":{"nanos":320004,"millis":0.320004,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":311505,"millis":0.311505,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:23.576 [print] #notpresent \n"},{"result":{"nanos":300604,"millis":0.300604,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":251703,"millis":0.251703,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:23.576 [print] INSPIRE Atom \n"},{"result":{"nanos":29201,"millis":0.029201,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":157302,"millis":0.157302,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:23.576 [print] #notpresent \n"},{"result":{"nanos":325005,"millis":0.325005,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":246504,"millis":0.246504,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:23.577 [print] Beheer PDOK \n"},{"result":{"nanos":933713,"millis":0.933713,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:23.578 [print] [\"https:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=ror-9d8e-4758-83fx-28b057f185f1#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=ror-9d8e-4758-83fx-28b057f185e1#MD_DataIdentification\"] \n"},{"result":{"nanos":326705,"millis":0.326705,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":546808,"millis":0.546808,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"0898d4a9-8fe6-46e9-8855-1242d8028970\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":346605,"millis":0.346605,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"0898d4a9-8fe6-46e9-8855-1242d8028970\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":533.633894,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"0898d4a9-8fe6-46e9-8855-1242d8028970","startTime":1629213743045,"refId":"[1.327:67]","endTime":1629213743579,"exampleData":{"datasetIdentifierCode":"0898d4a9-8fe6-46e9-8855-1242d8028970"},"exampleIndex":326},{"sectionIndex":0,"stepResults":[{"result":{"nanos":12100,"millis":0.0121,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:23.113 karate.env system property was: null \n"},{"result":{"nanos":26600,"millis":0.0266,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":39101,"millis":0.039101,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":39201,"millis":0.039201,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":246503,"millis":0.246503,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":35301,"millis":0.035301,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":318405,"millis":0.318405,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":23700,"millis":0.0237,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":55401,"millis":0.055401,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":108202,"millis":0.108202,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":47000,"millis":0.047,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12001,"millis":0.012001,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19100,"millis":0.0191,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":37601,"millis":0.037601,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '37308f90-e619-4b62-ae9e-e656bb3f1649'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":539819984,"millis":539.819984,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1600,"millis":0.0016,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":522108,"millis":0.522108,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '37308f90-e619-4b62-ae9e-e656bb3f1649'"}},{"result":{"nanos":518907,"millis":0.518907,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":407906,"millis":0.407906,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":402506,"millis":0.402506,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":492007,"millis":0.492007,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":393406,"millis":0.393406,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":21401,"millis":0.021401,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":244803,"millis":0.244803,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":277804,"millis":0.277804,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":283304,"millis":0.283304,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":57500,"millis":0.0575,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":124802,"millis":0.124802,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:23.658 [print] https:\\\/\\\/inspire.rivm.nl\\\/geoserver\\\/wfs?request=GetCapabilities \n"},{"result":{"nanos":685810,"millis":0.68581,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":96302,"millis":0.096302,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:23.659 [print] OGC:WFS \n"},{"result":{"nanos":559308,"millis":0.559308,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":57901,"millis":0.057901,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:23.659 [print] INSPIRE Atom \n"},{"result":{"nanos":23300,"millis":0.0233,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":55201,"millis":0.055201,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:23.659 [print] OGC:WFS \n"},{"result":{"nanos":732511,"millis":0.732511,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":61301,"millis":0.061301,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:23.660 [print] Rijksinstituut voor Volksgezondheid en Milieu \n"},{"result":{"nanos":57201,"millis":0.057201,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:23.660 [print] http:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=8b0b02a0-1e1b-4cda-bcfe-6fa0f738e38f#MD_DataIdentification \n"},{"result":{"nanos":354505,"millis":0.354505,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":1085215,"millis":1.085215,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"37308f90-e619-4b62-ae9e-e656bb3f1649\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":283404,"millis":0.283404,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"37308f90-e619-4b62-ae9e-e656bb3f1649\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":548.656613,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"37308f90-e619-4b62-ae9e-e656bb3f1649","startTime":1629213743113,"refId":"[1.328:67]","endTime":1629213743662,"exampleData":{"datasetIdentifierCode":"37308f90-e619-4b62-ae9e-e656bb3f1649"},"exampleIndex":327},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13100,"millis":0.0131,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:23.188 karate.env system property was: null \n"},{"result":{"nanos":26300,"millis":0.0263,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":36801,"millis":0.036801,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":38201,"millis":0.038201,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":208803,"millis":0.208803,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":32700,"millis":0.0327,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":317805,"millis":0.317805,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":25100,"millis":0.0251,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":57501,"millis":0.057501,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":104502,"millis":0.104502,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":47401,"millis":0.047401,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12300,"millis":0.0123,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19101,"millis":0.019101,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":34300,"millis":0.0343,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '68ebd5c9-0ea1-4f22-9907-ec4c06mcd3e2'"}},{"result":{"nanos":3901,"millis":0.003901,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":553353076,"millis":553.353076,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1900,"millis":0.0019,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":567708,"millis":0.567708,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '68ebd5c9-0ea1-4f22-9907-ec4c06mcd3e2'"}},{"result":{"nanos":556308,"millis":0.556308,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":489407,"millis":0.489407,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":473907,"millis":0.473907,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":614809,"millis":0.614809,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":519807,"millis":0.519807,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":24201,"millis":0.024201,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":357505,"millis":0.357505,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":349205,"millis":0.349205,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":378006,"millis":0.378006,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":102901,"millis":0.102901,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":130302,"millis":0.130302,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:23.747 [print] https:\\\/\\\/waterwebservices.rijkswaterstaat.nl\\\/services\\\/distributielaagWFS\\\/distributielaag_dbo?service=WMS&version=1.3.0&request=GetCapabilities \n"},{"result":{"nanos":394606,"millis":0.394606,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":649809,"millis":0.649809,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:23.749 [print] [\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":573308,"millis":0.573308,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":62301,"millis":0.062301,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:23.749 [print] #notpresent \n"},{"result":{"nanos":40701,"millis":0.040701,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":73501,"millis":0.073501,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:23.749 [print] [\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":802611,"millis":0.802611,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":58300,"millis":0.0583,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:23.750 [print] Rijkswaterstaat \n"},{"result":{"nanos":46901,"millis":0.046901,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:23.750 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire?SERVICE=CSW&version=2.0.2&request=GetRecordById&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=68ebd5c9-0ea1-4f22-9907-ec4c063cd3e2#MD_DataIdentification \n"},{"result":{"nanos":981514,"millis":0.981514,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":601509,"millis":0.601509,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"68ebd5c9-0ea1-4f22-9907-ec4c06mcd3e2\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":302904,"millis":0.302904,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"68ebd5c9-0ea1-4f22-9907-ec4c06mcd3e2\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":563.497423,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"68ebd5c9-0ea1-4f22-9907-ec4c06mcd3e2","startTime":1629213743188,"refId":"[1.329:67]","endTime":1629213743752,"exampleData":{"datasetIdentifierCode":"68ebd5c9-0ea1-4f22-9907-ec4c06mcd3e2"},"exampleIndex":328},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16200,"millis":0.0162,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:23.524 karate.env system property was: null \n"},{"result":{"nanos":28500,"millis":0.0285,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":41401,"millis":0.041401,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":53601,"millis":0.053601,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":249504,"millis":0.249504,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":33200,"millis":0.0332,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":365606,"millis":0.365606,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":27800,"millis":0.0278,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":75201,"millis":0.075201,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":128902,"millis":0.128902,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":48701,"millis":0.048701,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12800,"millis":0.0128,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17501,"millis":0.017501,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":70601,"millis":0.070601,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'c6fa88ab-e440-414b-a773-793c4ce6d8df'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":554198088,"millis":554.198088,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2000,"millis":0.002,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":663409,"millis":0.663409,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'c6fa88ab-e440-414b-a773-793c4ce6d8df'"}},{"result":{"nanos":599608,"millis":0.599608,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":500808,"millis":0.500808,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":483707,"millis":0.483707,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":664909,"millis":0.664909,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":596509,"millis":0.596509,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":71501,"millis":0.071501,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":374006,"millis":0.374006,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":351605,"millis":0.351605,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":366405,"millis":0.366405,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":94902,"millis":0.094902,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":147602,"millis":0.147602,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:24.085 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/bestuurlijkegrenzen\\\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":351905,"millis":0.351905,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":239704,"millis":0.239704,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:24.086 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":458606,"millis":0.458606,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":118102,"millis":0.118102,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:24.086 [print] #notpresent \n"},{"result":{"nanos":60601,"millis":0.060601,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":160602,"millis":0.160602,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:24.087 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":525707,"millis":0.525707,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":93002,"millis":0.093002,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:24.087 [print] Beheer PDOK \n"},{"result":{"nanos":80801,"millis":0.080801,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:24.087 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=fe24c2a7-b121-4177-887a-fa16d943729b#MD_DataIdentification \n"},{"result":{"nanos":492207,"millis":0.492207,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":422906,"millis":0.422906,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"c6fa88ab-e440-414b-a773-793c4ce6d8df\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":232004,"millis":0.232004,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"c6fa88ab-e440-414b-a773-793c4ce6d8df\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":563.537124,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"c6fa88ab-e440-414b-a773-793c4ce6d8df","startTime":1629213743524,"refId":"[1.330:67]","endTime":1629213744089,"exampleData":{"datasetIdentifierCode":"c6fa88ab-e440-414b-a773-793c4ce6d8df"},"exampleIndex":329},{"sectionIndex":0,"stepResults":[{"result":{"nanos":17800,"millis":0.0178,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:23.582 karate.env system property was: null \n"},{"result":{"nanos":32800,"millis":0.0328,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":43200,"millis":0.0432,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":44301,"millis":0.044301,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":239503,"millis":0.239503,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":37800,"millis":0.0378,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":320105,"millis":0.320105,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":24100,"millis":0.0241,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":436706,"millis":0.436706,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":126901,"millis":0.126901,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":51900,"millis":0.0519,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":16401,"millis":0.016401,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":18600,"millis":0.0186,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":63901,"millis":0.063901,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '49ff0584-a173-4098-824c-119edf8447f7'"}},{"result":{"nanos":3901,"millis":0.003901,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":554093586,"millis":554.093586,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1600,"millis":0.0016,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":519907,"millis":0.519907,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '49ff0584-a173-4098-824c-119edf8447f7'"}},{"result":{"nanos":452707,"millis":0.452707,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":396006,"millis":0.396006,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":443506,"millis":0.443506,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":586809,"millis":0.586809,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":571208,"millis":0.571208,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":71801,"millis":0.071801,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":370506,"millis":0.370506,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":376705,"millis":0.376705,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":387605,"millis":0.387605,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":123302,"millis":0.123302,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":392106,"millis":0.392106,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:24.142 [print] https:\\\/\\\/services.rce.geovoorziening.nl\\\/rce\\\/wms? \n"},{"result":{"nanos":453506,"millis":0.453506,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":290004,"millis":0.290004,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:24.143 [print] #notpresent \n"},{"result":{"nanos":404206,"millis":0.404206,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":448006,"millis":0.448006,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:24.144 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":65901,"millis":0.065901,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":77401,"millis":0.077401,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:24.144 [print] #notpresent \n"},{"result":{"nanos":456906,"millis":0.456906,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":97701,"millis":0.097701,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:24.145 [print] Rijksdienst voor het Cultureel Erfgoed \n"},{"result":{"nanos":96701,"millis":0.096701,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:24.145 [print] [\"http:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/nl\\\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=6f84efeb-fc1d-4565-a721-80735ea57dbd&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full\",\"http:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/nl\\\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=dfe5b146-354f-4bc7-99b1-6713817afac9&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full\",\"http:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/nl\\\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=4e2ef670-cddd-11dd-ad8b-0800200c9a66&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full\",\"http:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/nl\\\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=88a3c1ae-902e-4efa-8663-ddd836101929&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full\"] \n"},{"result":{"nanos":374305,"millis":0.374305,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":363405,"millis":0.363405,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"49ff0584-a173-4098-824c-119edf8447f7\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":299905,"millis":0.299905,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"49ff0584-a173-4098-824c-119edf8447f7\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":563.70642,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"49ff0584-a173-4098-824c-119edf8447f7","startTime":1629213743581,"refId":"[1.331:67]","endTime":1629213744146,"exampleData":{"datasetIdentifierCode":"49ff0584-a173-4098-824c-119edf8447f7"},"exampleIndex":330},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16500,"millis":0.0165,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:23.664 karate.env system property was: null \n"},{"result":{"nanos":31500,"millis":0.0315,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":150802,"millis":0.150802,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":51301,"millis":0.051301,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":272204,"millis":0.272204,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":39500,"millis":0.0395,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":510508,"millis":0.510508,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":39101,"millis":0.039101,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":90301,"millis":0.090301,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":138402,"millis":0.138402,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":59901,"millis":0.059901,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":17800,"millis":0.0178,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":25501,"millis":0.025501,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":104201,"millis":0.104201,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":46100,"millis":0.0461,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":86502,"millis":0.086502,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'd4e573b0-bd3b-4d7b-a97d-e65841e6e0b4'"}},{"result":{"nanos":5700,"millis":0.0057,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":5300,"millis":0.0053,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":533329191,"millis":533.329191,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1900,"millis":0.0019,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":580509,"millis":0.580509,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'd4e573b0-bd3b-4d7b-a97d-e65841e6e0b4'"}},{"result":{"nanos":542908,"millis":0.542908,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":500007,"millis":0.500007,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":582808,"millis":0.582808,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":659309,"millis":0.659309,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":583109,"millis":0.583109,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":66701,"millis":0.066701,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":418006,"millis":0.418006,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":416006,"millis":0.416006,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":437606,"millis":0.437606,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":109601,"millis":0.109601,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":146802,"millis":0.146802,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:24.205 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/rws\\\/kaderrichtlijnwateractueel\\\/wms\\\/v1_0?service=WMS&request=GetCapabilities \n"},{"result":{"nanos":509708,"millis":0.509708,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":156802,"millis":0.156802,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:24.205 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":451007,"millis":0.451007,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":136702,"millis":0.136702,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:24.206 [print] #notpresent \n"},{"result":{"nanos":71801,"millis":0.071801,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":102802,"millis":0.102802,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:24.206 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":510807,"millis":0.510807,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":94702,"millis":0.094702,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:24.207 [print] Beheer PDOK \n"},{"result":{"nanos":94401,"millis":0.094401,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:24.207 [print] [\"https:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=622a632a-c57b-44a2-83a4-e51223d5f15g#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=782cab20-8328-45f1-a9b2-c27d07c14066#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=f7bb2351-9788-42ea-a58b-a5ee1842304e#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=2e31680f-68b5-4ff3-94a4-9c24109ffd5e#MD_DataIdentification\"] \n"},{"result":{"nanos":427606,"millis":0.427606,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":352705,"millis":0.352705,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"d4e573b0-bd3b-4d7b-a97d-e65841e6e0b4\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":277603,"millis":0.277603,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"d4e573b0-bd3b-4d7b-a97d-e65841e6e0b4\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":543.252233,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"d4e573b0-bd3b-4d7b-a97d-e65841e6e0b4","startTime":1629213743664,"refId":"[1.332:67]","endTime":1629213744208,"exampleData":{"datasetIdentifierCode":"d4e573b0-bd3b-4d7b-a97d-e65841e6e0b4"},"exampleIndex":331},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13600,"millis":0.0136,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:23.754 karate.env system property was: null \n"},{"result":{"nanos":25001,"millis":0.025001,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":41100,"millis":0.0411,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":41501,"millis":0.041501,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":521408,"millis":0.521408,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":40300,"millis":0.0403,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":338804,"millis":0.338804,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":23600,"millis":0.0236,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":42001,"millis":0.042001,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":109101,"millis":0.109101,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":320305,"millis":0.320305,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":15100,"millis":0.0151,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":41601,"millis":0.041601,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5500,"millis":0.0055,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":39401,"millis":0.039401,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'ef2a7962-8bb4-483f-ac78-851b619f357f'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3401,"millis":0.003401,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":535894327,"millis":535.894327,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1600,"millis":0.0016,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":511907,"millis":0.511907,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'ef2a7962-8bb4-483f-ac78-851b619f357f'"}},{"result":{"nanos":438106,"millis":0.438106,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":378105,"millis":0.378105,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":357405,"millis":0.357405,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":515108,"millis":0.515108,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":450806,"millis":0.450806,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":68801,"millis":0.068801,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":333904,"millis":0.333904,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":336304,"millis":0.336304,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":385005,"millis":0.385005,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":1136816,"millis":1.136816,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":1478721,"millis":1.478721,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:24.298 [print] https:\/\/services.rce.geovoorziening.nl\/www\/download\/nl.xml \n"},{"result":{"nanos":273904,"millis":0.273904,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":2789540,"millis":2.78954,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:24.302 [print] #notpresent \n"},{"result":{"nanos":329905,"millis":0.329905,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":890612,"millis":0.890612,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:24.303 [print] INSPIRE Atom \n"},{"result":{"nanos":72902,"millis":0.072902,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":709710,"millis":0.70971,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:24.304 [print] #notpresent \n"},{"result":{"nanos":447506,"millis":0.447506,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":149203,"millis":0.149203,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:24.304 [print] Rijksdienst voor het Cultureel Erfgoed \n"},{"result":{"nanos":92401,"millis":0.092401,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:24.304 [print] [\"http:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/nl\\\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=6f84efeb-fc1d-4565-a721-80735ea57dbd&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full\",\"http:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/nl\\\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=dfe5b146-354f-4bc7-99b1-6713817afac9&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full\",\"http:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/nl\\\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=4e2ef670-cddd-11dd-ad8b-0800200c9a66&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full\",\"http:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/nl\\\/csw?Service=CSW&Request=GetRecordById&Version=2.0.2&id=88a3c1ae-902e-4efa-8663-ddd836101929&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full\"] \n"},{"result":{"nanos":387006,"millis":0.387006,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":465707,"millis":0.465707,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"ef2a7962-8bb4-483f-ac78-851b619f357f\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":385105,"millis":0.385105,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"ef2a7962-8bb4-483f-ac78-851b619f357f\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":550.91084,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"ef2a7962-8bb4-483f-ac78-851b619f357f","startTime":1629213743754,"refId":"[1.333:67]","endTime":1629213744306,"exampleData":{"datasetIdentifierCode":"ef2a7962-8bb4-483f-ac78-851b619f357f"},"exampleIndex":332},{"sectionIndex":0,"stepResults":[{"result":{"nanos":36201,"millis":0.036201,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:24.091 karate.env system property was: null \n"},{"result":{"nanos":33100,"millis":0.0331,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":112301,"millis":0.112301,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":90702,"millis":0.090702,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":235903,"millis":0.235903,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":78201,"millis":0.078201,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":320705,"millis":0.320705,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":56001,"millis":0.056001,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":80201,"millis":0.080201,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":149402,"millis":0.149402,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":107202,"millis":0.107202,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":27301,"millis":0.027301,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":24500,"millis":0.0245,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":8000,"millis":0.008,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":8200,"millis":0.0082,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":8401,"millis":0.008401,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '35359958-c40a-486f-9cf5-567a94de905e'"}},{"result":{"nanos":7200,"millis":0.0072,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":7500,"millis":0.0075,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":565645451,"millis":565.645451,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2600,"millis":0.0026,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":492107,"millis":0.492107,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '35359958-c40a-486f-9cf5-567a94de905e'"}},{"result":{"nanos":470206,"millis":0.470206,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":417706,"millis":0.417706,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":600208,"millis":0.600208,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":481706,"millis":0.481706,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":1006914,"millis":1.006914,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":28300,"millis":0.0283,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":318204,"millis":0.318204,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":318305,"millis":0.318305,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":364605,"millis":0.364605,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":81302,"millis":0.081302,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":110701,"millis":0.110701,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:24.663 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/bestuurlijkegrenzen\\\/wfs?request=GetCapabilities&service=wfs \n"},{"result":{"nanos":1370520,"millis":1.37052,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":83901,"millis":0.083901,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:24.665 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":341905,"millis":0.341905,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":78401,"millis":0.078401,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:24.665 [print] #notpresent \n"},{"result":{"nanos":24600,"millis":0.0246,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":27200,"millis":0.0272,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:24.665 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":429206,"millis":0.429206,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":51201,"millis":0.051201,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:24.666 [print] Beheer PDOK \n"},{"result":{"nanos":20700,"millis":0.0207,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:24.666 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=fe24c2a7-b121-4177-887a-fa16d943729b#MD_DataIdentification \n"},{"result":{"nanos":411806,"millis":0.411806,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":2291133,"millis":2.291133,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"35359958-c40a-486f-9cf5-567a94de905e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":375305,"millis":0.375305,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"35359958-c40a-486f-9cf5-567a94de905e\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":577.235214,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"35359958-c40a-486f-9cf5-567a94de905e","startTime":1629213744090,"refId":"[1.334:67]","endTime":1629213744669,"exampleData":{"datasetIdentifierCode":"35359958-c40a-486f-9cf5-567a94de905e"},"exampleIndex":333},{"sectionIndex":0,"stepResults":[{"result":{"nanos":34700,"millis":0.0347,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:24.149 karate.env system property was: null \n"},{"result":{"nanos":31700,"millis":0.0317,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":117102,"millis":0.117102,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":78501,"millis":0.078501,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":237304,"millis":0.237304,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":75601,"millis":0.075601,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":326405,"millis":0.326405,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":58900,"millis":0.0589,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":110901,"millis":0.110901,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":220503,"millis":0.220503,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":129701,"millis":0.129701,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":27200,"millis":0.0272,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":22000,"millis":0.022,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":8601,"millis":0.008601,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":7400,"millis":0.0074,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":7900,"millis":0.0079,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'c6308500-3439-4840-88cb-7532cabbfcb4'"}},{"result":{"nanos":7100,"millis":0.0071,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":11400,"millis":0.0114,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":553518079,"millis":553.518079,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1400,"millis":0.0014,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":439307,"millis":0.439307,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'c6308500-3439-4840-88cb-7532cabbfcb4'"}},{"result":{"nanos":418506,"millis":0.418506,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":415706,"millis":0.415706,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":370705,"millis":0.370705,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":428506,"millis":0.428506,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":392805,"millis":0.392805,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":22301,"millis":0.022301,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":298904,"millis":0.298904,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":318905,"millis":0.318905,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":321705,"millis":0.321705,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":62201,"millis":0.062201,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":83301,"millis":0.083301,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:24.708 [print] https:\/\/haleconnect.com\/ows\/services\/org.874.512633c0-2899-4f9d-b2d1-1bd51cb2315a_wms?SERVICE=WMS&Request=GetCapabilities \n"},{"result":{"nanos":876813,"millis":0.876813,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":68301,"millis":0.068301,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:24.709 [print] #notpresent \n"},{"result":{"nanos":533108,"millis":0.533108,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":59301,"millis":0.059301,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:24.710 [print] #notpresent \n"},{"result":{"nanos":21300,"millis":0.0213,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":22200,"millis":0.0222,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:24.710 [print] #notpresent \n"},{"result":{"nanos":658810,"millis":0.65881,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":52001,"millis":0.052001,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:24.710 [print] KNMI \n"},{"result":{"nanos":22800,"millis":0.0228,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:24.710 [print] https:\/\/haleconnect.com\/services\/bsp\/org.874.512633c0-2899-4f9d-b2d1-1bd51cb2315a\/md\/dataset\/dataset1#xpointer%28%2F%2Fgmd%3AidentificationInfo%5B1%5D%2Fgmd%3AMD_DataIdentification%29 \n"},{"result":{"nanos":541308,"millis":0.541308,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":415306,"millis":0.415306,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"c6308500-3439-4840-88cb-7532cabbfcb4\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":248904,"millis":0.248904,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"c6308500-3439-4840-88cb-7532cabbfcb4\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":562.125402,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"c6308500-3439-4840-88cb-7532cabbfcb4","startTime":1629213744148,"refId":"[1.335:67]","endTime":1629213744712,"exampleData":{"datasetIdentifierCode":"c6308500-3439-4840-88cb-7532cabbfcb4"},"exampleIndex":334},{"sectionIndex":0,"stepResults":[{"result":{"nanos":38400,"millis":0.0384,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:24.210 karate.env system property was: null \n"},{"result":{"nanos":31501,"millis":0.031501,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":94701,"millis":0.094701,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":74202,"millis":0.074202,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":233503,"millis":0.233503,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":79301,"millis":0.079301,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":324805,"millis":0.324805,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":55901,"millis":0.055901,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":82201,"millis":0.082201,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":136902,"millis":0.136902,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":98402,"millis":0.098402,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":27300,"millis":0.0273,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":25701,"millis":0.025701,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":8800,"millis":0.0088,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":7800,"millis":0.0078,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":8000,"millis":0.008,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'f2437a92-ddd3-4777-a1bc-fdf4b4a7fcb8'"}},{"result":{"nanos":7601,"millis":0.007601,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":7300,"millis":0.0073,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":553921584,"millis":553.921584,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1400,"millis":0.0014,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":470607,"millis":0.470607,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'f2437a92-ddd3-4777-a1bc-fdf4b4a7fcb8'"}},{"result":{"nanos":485607,"millis":0.485607,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":444007,"millis":0.444007,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":452406,"millis":0.452406,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":489507,"millis":0.489507,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":456906,"millis":0.456906,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":22601,"millis":0.022601,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":401305,"millis":0.401305,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":362805,"millis":0.362805,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":350705,"millis":0.350705,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":46301,"millis":0.046301,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":91001,"millis":0.091001,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:24.770 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/nwbwegen\\\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":310405,"millis":0.310405,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":43700,"millis":0.0437,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:24.770 [print] [\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":294904,"millis":0.294904,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":44501,"millis":0.044501,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:24.771 [print] #notpresent \n"},{"result":{"nanos":19800,"millis":0.0198,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":22800,"millis":0.0228,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:24.771 [print] [\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":380506,"millis":0.380506,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":40301,"millis":0.040301,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:24.771 [print] Beheer PDOK \n"},{"result":{"nanos":30700,"millis":0.0307,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:24.771 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=a9b7026e-0a81-4813-93bd-ba49e6f28502#MD_DataIdentification \n"},{"result":{"nanos":386706,"millis":0.386706,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":411706,"millis":0.411706,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"f2437a92-ddd3-4777-a1bc-fdf4b4a7fcb8\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":237403,"millis":0.237403,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"f2437a92-ddd3-4777-a1bc-fdf4b4a7fcb8\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":561.562495,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"f2437a92-ddd3-4777-a1bc-fdf4b4a7fcb8","startTime":1629213744210,"refId":"[1.336:67]","endTime":1629213744772,"exampleData":{"datasetIdentifierCode":"f2437a92-ddd3-4777-a1bc-fdf4b4a7fcb8"},"exampleIndex":335},{"sectionIndex":0,"stepResults":[{"result":{"nanos":37400,"millis":0.0374,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:24.310 karate.env system property was: null \n"},{"result":{"nanos":35001,"millis":0.035001,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":104001,"millis":0.104001,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":83801,"millis":0.083801,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":251203,"millis":0.251203,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":82901,"millis":0.082901,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":349905,"millis":0.349905,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":61601,"millis":0.061601,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":83701,"millis":0.083701,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":150202,"millis":0.150202,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":114401,"millis":0.114401,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":30001,"millis":0.030001,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":24900,"millis":0.0249,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":9400,"millis":0.0094,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":9000,"millis":0.009,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":9000,"millis":0.009,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'adn573b0-bd3b-4d7b-a97d-e65841e6e0b1'"}},{"result":{"nanos":8700,"millis":0.0087,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":8200,"millis":0.0082,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":546546679,"millis":546.546679,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2200,"millis":0.0022,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":485307,"millis":0.485307,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'adn573b0-bd3b-4d7b-a97d-e65841e6e0b1'"}},{"result":{"nanos":441206,"millis":0.441206,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":402705,"millis":0.402705,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":376605,"millis":0.376605,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":440506,"millis":0.440506,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":429107,"millis":0.429107,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":22100,"millis":0.0221,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":298604,"millis":0.298604,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":284704,"millis":0.284704,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":291804,"millis":0.291804,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":63201,"millis":0.063201,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":87101,"millis":0.087101,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:24.862 [print] https:\/\/inspire.caris.nl\/geoserver3\/rws\/wcs?service=WCS&version=2.0.1&request=GetCapabilities \n"},{"result":{"nanos":313105,"millis":0.313105,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":54501,"millis":0.054501,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:24.863 [print] OGC:WCS \n"},{"result":{"nanos":913513,"millis":0.913513,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":66601,"millis":0.066601,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:24.864 [print] #notpresent \n"},{"result":{"nanos":23100,"millis":0.0231,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":23200,"millis":0.0232,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:24.864 [print] OGC:WCS \n"},{"result":{"nanos":700610,"millis":0.70061,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":56401,"millis":0.056401,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:24.865 [print] Rijkswaterstaat \n"},{"result":{"nanos":22900,"millis":0.0229,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:24.865 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=adn73c4a-ef03-4785-b7f6-942e86b385f5#MD_DataIdentification \n"},{"result":{"nanos":723410,"millis":0.72341,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":481107,"millis":0.481107,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"adn573b0-bd3b-4d7b-a97d-e65841e6e0b1\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":291404,"millis":0.291404,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"adn573b0-bd3b-4d7b-a97d-e65841e6e0b1\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":555.294999,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"adn573b0-bd3b-4d7b-a97d-e65841e6e0b1","startTime":1629213744308,"refId":"[1.337:67]","endTime":1629213744866,"exampleData":{"datasetIdentifierCode":"adn573b0-bd3b-4d7b-a97d-e65841e6e0b1"},"exampleIndex":336},{"sectionIndex":0,"stepResults":[{"result":{"nanos":18000,"millis":0.018,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:24.671 karate.env system property was: null \n"},{"result":{"nanos":27000,"millis":0.027,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":37200,"millis":0.0372,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":39701,"millis":0.039701,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":211603,"millis":0.211603,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":32600,"millis":0.0326,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":319904,"millis":0.319904,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":27301,"millis":0.027301,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":41000,"millis":0.041,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":108402,"millis":0.108402,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":48301,"millis":0.048301,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":11400,"millis":0.0114,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17800,"millis":0.0178,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":302104,"millis":0.302104,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '42f5363b-cea7-4163-a4e9-bc2d1a7a243c'"}},{"result":{"nanos":8100,"millis":0.0081,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":530448750,"millis":530.44875,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1600,"millis":0.0016,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":487607,"millis":0.487607,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '42f5363b-cea7-4163-a4e9-bc2d1a7a243c'"}},{"result":{"nanos":469207,"millis":0.469207,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":424106,"millis":0.424106,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":409006,"millis":0.409006,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":501807,"millis":0.501807,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":443706,"millis":0.443706,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":22600,"millis":0.0226,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":316404,"millis":0.316404,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":306605,"millis":0.306605,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":324905,"millis":0.324905,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":63101,"millis":0.063101,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":139702,"millis":0.139702,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:25.207 [print] https:\/\/geodata.nationaalgeoregister.nl\/ienw\/geluidskaartspoorwegennacht\/v1\/wfs?service=WFS&request=GetCapabilities \n"},{"result":{"nanos":364505,"millis":0.364505,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":196403,"millis":0.196403,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:25.208 [print] #notpresent \n"},{"result":{"nanos":453807,"millis":0.453807,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":63601,"millis":0.063601,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:25.208 [print] OGC:WFS \n"},{"result":{"nanos":22500,"millis":0.0225,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":37201,"millis":0.037201,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:25.209 [print] #notpresent \n"},{"result":{"nanos":505507,"millis":0.505507,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":72401,"millis":0.072401,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:25.209 [print] Beheer PDOK \n"},{"result":{"nanos":51701,"millis":0.051701,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:25.209 [print] https:\/\/www.nationaalgeoregister.nl:443\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=002d9127-c16d-4b8d-9f5e-102a8c8e36c4#MD_DataIdentification \n"},{"result":{"nanos":372505,"millis":0.372505,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":466006,"millis":0.466006,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"42f5363b-cea7-4163-a4e9-bc2d1a7a243c\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":259304,"millis":0.259304,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"42f5363b-cea7-4163-a4e9-bc2d1a7a243c\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":538.487663,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"42f5363b-cea7-4163-a4e9-bc2d1a7a243c","startTime":1629213744671,"refId":"[1.338:67]","endTime":1629213745210,"exampleData":{"datasetIdentifierCode":"42f5363b-cea7-4163-a4e9-bc2d1a7a243c"},"exampleIndex":337},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13300,"millis":0.0133,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:24.713 karate.env system property was: null \n"},{"result":{"nanos":25801,"millis":0.025801,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":38100,"millis":0.0381,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":37400,"millis":0.0374,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":195703,"millis":0.195703,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":29401,"millis":0.029401,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":308904,"millis":0.308904,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":22500,"millis":0.0225,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":38200,"millis":0.0382,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":101902,"millis":0.101902,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":48100,"millis":0.0481,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12200,"millis":0.0122,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17000,"millis":0.017,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4400,"millis":0.0044,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3600,"millis":0.0036,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":33801,"millis":0.033801,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'd1cb16ca-2029-454f-b3f1-f70bceaf62c1'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":541915913,"millis":541.915913,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2300,"millis":0.0023,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":500007,"millis":0.500007,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'd1cb16ca-2029-454f-b3f1-f70bceaf62c1'"}},{"result":{"nanos":413406,"millis":0.413406,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":332104,"millis":0.332104,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":309105,"millis":0.309105,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":375805,"millis":0.375805,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":372406,"millis":0.372406,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":32400,"millis":0.0324,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":248903,"millis":0.248903,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":244904,"millis":0.244904,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":260504,"millis":0.260504,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":60901,"millis":0.060901,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":890913,"millis":0.890913,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:25.261 [print] https:\\\/\\\/service.pdok.nl\\\/bzk\\\/bro-geomorfologischekaart\\\/wms\\\/v1_0?request=GetCapabilities&service=WMS \n"},{"result":{"nanos":292304,"millis":0.292304,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":564408,"millis":0.564408,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:25.262 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":274904,"millis":0.274904,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":405706,"millis":0.405706,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:25.262 [print] #notpresent \n"},{"result":{"nanos":29101,"millis":0.029101,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":400105,"millis":0.400105,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:25.263 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":304504,"millis":0.304504,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":394806,"millis":0.394806,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:25.263 [print] Beheer PDOK \n"},{"result":{"nanos":1351019,"millis":1.351019,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:25.265 [print] [\"https:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=8f52e76f-c96d-4df3-a778-279c2164372b#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=459231d0-7379-4f26-a444-7616e1d888f0#MD_DataIdentification\"] \n"},{"result":{"nanos":305605,"millis":0.305605,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":496707,"millis":0.496707,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"d1cb16ca-2029-454f-b3f1-f70bceaf62c1\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":276004,"millis":0.276004,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"d1cb16ca-2029-454f-b3f1-f70bceaf62c1\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":551.993056,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"d1cb16ca-2029-454f-b3f1-f70bceaf62c1","startTime":1629213744713,"refId":"[1.339:67]","endTime":1629213745266,"exampleData":{"datasetIdentifierCode":"d1cb16ca-2029-454f-b3f1-f70bceaf62c1"},"exampleIndex":338},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13000,"millis":0.013,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:24.774 karate.env system property was: null \n"},{"result":{"nanos":23401,"millis":0.023401,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":37200,"millis":0.0372,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":37101,"millis":0.037101,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":198703,"millis":0.198703,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":33400,"millis":0.0334,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":314704,"millis":0.314704,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":23200,"millis":0.0232,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":35701,"millis":0.035701,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":94801,"millis":0.094801,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":45200,"millis":0.0452,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":27201,"millis":0.027201,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17900,"millis":0.0179,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":29301,"millis":0.029301,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '3c47e1a8-a6a2-45e4-bfec-0f334c9fbc9d'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3500,"millis":0.0035,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":555595808,"millis":555.595808,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2200,"millis":0.0022,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":443106,"millis":0.443106,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '3c47e1a8-a6a2-45e4-bfec-0f334c9fbc9d'"}},{"result":{"nanos":368105,"millis":0.368105,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":277504,"millis":0.277504,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":265703,"millis":0.265703,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":311705,"millis":0.311705,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":271004,"millis":0.271004,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":23800,"millis":0.0238,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":229603,"millis":0.229603,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":238003,"millis":0.238003,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":230803,"millis":0.230803,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":56401,"millis":0.056401,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":693710,"millis":0.69371,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:25.334 [print] https:\/\/geodata.nationaalgeoregister.nl\/wijkenbuurten2020\/wms?request=GetCapabilities&service=WMS \n"},{"result":{"nanos":301804,"millis":0.301804,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":177403,"millis":0.177403,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:25.335 [print] OGC:WMS \n"},{"result":{"nanos":277904,"millis":0.277904,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":48901,"millis":0.048901,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:25.335 [print] #notpresent \n"},{"result":{"nanos":27900,"millis":0.0279,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":141702,"millis":0.141702,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:25.336 [print] OGC:WMS \n"},{"result":{"nanos":308405,"millis":0.308405,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":60401,"millis":0.060401,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:25.336 [print] Beheer PDOK \n"},{"result":{"nanos":566108,"millis":0.566108,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:25.337 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=f1859b4d-93be-4fc8-9e91-0ecc2fa0f3b3#MD_DataIdentification \n"},{"result":{"nanos":308605,"millis":0.308605,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":468206,"millis":0.468206,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"3c47e1a8-a6a2-45e4-bfec-0f334c9fbc9d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":254504,"millis":0.254504,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"3c47e1a8-a6a2-45e4-bfec-0f334c9fbc9d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":562.896011,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"3c47e1a8-a6a2-45e4-bfec-0f334c9fbc9d","startTime":1629213744774,"refId":"[1.340:67]","endTime":1629213745338,"exampleData":{"datasetIdentifierCode":"3c47e1a8-a6a2-45e4-bfec-0f334c9fbc9d"},"exampleIndex":339},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13000,"millis":0.013,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:24.868 karate.env system property was: null \n"},{"result":{"nanos":26801,"millis":0.026801,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":41100,"millis":0.0411,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":38100,"millis":0.0381,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":203203,"millis":0.203203,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":30001,"millis":0.030001,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":309704,"millis":0.309704,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":21501,"millis":0.021501,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":40000,"millis":0.04,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":103502,"millis":0.103502,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":48701,"millis":0.048701,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":10700,"millis":0.0107,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19300,"millis":0.0193,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":20901,"millis":0.020901,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":31200,"millis":0.0312,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '4b6752ae-65d6-44b5-98ef-1fc30f4fd92d'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3500,"millis":0.0035,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":540708596,"millis":540.708596,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2400,"millis":0.0024,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":513307,"millis":0.513307,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '4b6752ae-65d6-44b5-98ef-1fc30f4fd92d'"}},{"result":{"nanos":541707,"millis":0.541707,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":1198417,"millis":1.198417,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":573508,"millis":0.573508,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":602509,"millis":0.602509,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":481707,"millis":0.481707,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":21700,"millis":0.0217,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":310005,"millis":0.310005,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":316405,"millis":0.316405,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":338705,"millis":0.338705,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":56501,"millis":0.056501,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":328105,"millis":0.328105,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:25.415 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/rwsgeluidskaarten\\\/wms?request=GetCapabilities&service=wms \n"},{"result":{"nanos":357305,"millis":0.357305,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":290004,"millis":0.290004,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:25.416 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":430206,"millis":0.430206,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":53001,"millis":0.053001,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:25.417 [print] [\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":22401,"millis":0.022401,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":54700,"millis":0.0547,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:25.417 [print] [\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":619108,"millis":0.619108,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":53000,"millis":0.053,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:25.417 [print] Beheer PDOK \n"},{"result":{"nanos":59001,"millis":0.059001,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:25.417 [print] [\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=9b583730-e750-485a-9c0c-39bf9be72cf8#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=a57cb859-c4fe-444c-adc6-be14cb2bbf36#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=9b583730-e750-485a-9c0c-39bf9be72cf9#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=a57cb859-c4fe-444c-adc6-be14cb2bbf38#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=50eef6be-619d-4e16-9b92-48971109b636#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=8de2f5eb-b09f-4f6d-8397-8878a1b86238#MD_DataIdentification\"] \n"},{"result":{"nanos":444207,"millis":0.444207,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":452006,"millis":0.452006,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"4b6752ae-65d6-44b5-98ef-1fc30f4fd92d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":292505,"millis":0.292505,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"4b6752ae-65d6-44b5-98ef-1fc30f4fd92d\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":550.09073,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"4b6752ae-65d6-44b5-98ef-1fc30f4fd92d","startTime":1629213744868,"refId":"[1.341:67]","endTime":1629213745419,"exampleData":{"datasetIdentifierCode":"4b6752ae-65d6-44b5-98ef-1fc30f4fd92d"},"exampleIndex":340},{"sectionIndex":0,"stepResults":[{"result":{"nanos":88501,"millis":0.088501,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:25.212 karate.env system property was: null \n"},{"result":{"nanos":27300,"millis":0.0273,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":38600,"millis":0.0386,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":39801,"millis":0.039801,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":230303,"millis":0.230303,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":30501,"millis":0.030501,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":325904,"millis":0.325904,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":24300,"millis":0.0243,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":36401,"millis":0.036401,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":106201,"millis":0.106201,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":48401,"millis":0.048401,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":11600,"millis":0.0116,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17501,"millis":0.017501,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":33201,"millis":0.033201,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '9ff1a13c-d1e0-4150-8523-91cb489ae1a4'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3400,"millis":0.0034,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":536684339,"millis":536.684339,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1400,"millis":0.0014,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":575508,"millis":0.575508,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '9ff1a13c-d1e0-4150-8523-91cb489ae1a4'"}},{"result":{"nanos":524707,"millis":0.524707,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":453207,"millis":0.453207,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":447706,"millis":0.447706,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":510908,"millis":0.510908,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":492107,"millis":0.492107,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":20000,"millis":0.02,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":337305,"millis":0.337305,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":320905,"millis":0.320905,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":330505,"millis":0.330505,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":57101,"millis":0.057101,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":561108,"millis":0.561108,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:25.755 [print] https:\/\/geodata.nationaalgeoregister.nl\/atom\/index.xml \n"},{"result":{"nanos":373205,"millis":0.373205,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":58101,"millis":0.058101,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:25.756 [print] #notpresent \n"},{"result":{"nanos":425406,"millis":0.425406,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":50300,"millis":0.0503,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:25.756 [print] INSPIRE Atom \n"},{"result":{"nanos":21101,"millis":0.021101,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":44400,"millis":0.0444,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:25.756 [print] #notpresent \n"},{"result":{"nanos":697509,"millis":0.697509,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":68601,"millis":0.068601,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:25.757 [print] Beheer PDOK \n"},{"result":{"nanos":235403,"millis":0.235403,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:25.757 [print] [\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=5a1adb58-0bbe-425d-b0fe-577a6c0a4228#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=76091be7-358a-4a44-8182-b4139c96c6a4#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=8829e5dd-c861-4639-a6c8-fdbb6e3440d2#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=710c381c-ab2d-45d5-a45d-af2eba811e5f#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=a9b7026e-0a81-4813-93bd-ba49e6f28502#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=00d8c7c8-98ff-4b06-8f53-b44216e6e75c#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=701d4eb8-8aae-4708-bba5-3edf6987676d#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=17716ed7-ce0d-4bfd-8868-a398e5578a36#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=29d5310f-dd0d-45ba-abad-b4ffc6b8785f#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=831f7bd7-c2ae-4336-bd2f-47ab20d7cdb7#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=abaf1e22-55aa-4a11-a855-7ac963e4a82b#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=07d73b60-dfd6-4c54-9c82-9fac70c6c48e#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=d25fe199-2430-48fd-ad57-5b5f79f73cdf#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=e536d943-ecff-4d7a-9500-cc31a263a6af#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=bbece924-9aab-4e00-8392-bce36b8f494e#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=c935f2ab-9b65-4dc4-94a0-73aeb840a941#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=81ff84ec-42a4-4481-840b-12713bbb5d38#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=af0c582f-9e6b-46e6-865a-fc3a2d5289b9#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=3eebf700-5abf-42e4-826c-03cfb497e366#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=9d9f1738-aced-47c9-aaa0-c62474a2dcfb#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=8eee71f9-9365-490d-9484-00263c6fa35c#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=4961d305-fbb5-426a-9ba3-53e1ca5f3b18#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=2af8df10-81ba-434a-8125-34fe8f127cf9#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=6cde2ce7-3ecd-4785-b7b8-d62c3381efe9#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=3229e4d7-4bcd-4b94-819d-8e62de69ce2e#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl:443\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=bffcd5d9-02b4-4e7d-991f-a386611cad84#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=2d3dd6d2-2d2b-4b5f-9e30-86e19ed77a56#MD_DataIdentification\"] \n"},{"result":{"nanos":480307,"millis":0.480307,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":719010,"millis":0.71901,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"9ff1a13c-d1e0-4150-8523-91cb489ae1a4\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":7053100,"millis":7.0531,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"9ff1a13c-d1e0-4150-8523-91cb489ae1a4\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":552.617464,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"9ff1a13c-d1e0-4150-8523-91cb489ae1a4","startTime":1629213745212,"refId":"[1.342:67]","endTime":1629213745766,"exampleData":{"datasetIdentifierCode":"9ff1a13c-d1e0-4150-8523-91cb489ae1a4"},"exampleIndex":341},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13500,"millis":0.0135,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:25.268 karate.env system property was: null \n"},{"result":{"nanos":25501,"millis":0.025501,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":39200,"millis":0.0392,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":72901,"millis":0.072901,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":211003,"millis":0.211003,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":31600,"millis":0.0316,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":312805,"millis":0.312805,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":23300,"millis":0.0233,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":428306,"millis":0.428306,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":112001,"millis":0.112001,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":50301,"millis":0.050301,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":14800,"millis":0.0148,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":17501,"millis":0.017501,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3500,"millis":0.0035,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":35801,"millis":0.035801,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'tn-2c7040b-c448-451b-bf15-f2416efaadd1'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":15700,"millis":0.0157,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":555107401,"millis":555.107401,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2200,"millis":0.0022,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":712310,"millis":0.71231,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'tn-2c7040b-c448-451b-bf15-f2416efaadd1'"}},{"result":{"nanos":776111,"millis":0.776111,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":737111,"millis":0.737111,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":741811,"millis":0.741811,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":787511,"millis":0.787511,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":756911,"millis":0.756911,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":23300,"millis":0.0233,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":489507,"millis":0.489507,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":486807,"millis":0.486807,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":537507,"millis":0.537507,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":89001,"millis":0.089001,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":100101,"millis":0.100101,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:25.831 [print] https:\\\/\\\/haleconnect.com\\\/ows\\\/services\\\/org.292.2885ef73-e044-4da4-b9b6-8a461a5353aa_wfs?service=WFS&version=2.0.0&request=GetCapabilities \n"},{"result":{"nanos":1080915,"millis":1.080915,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":76301,"millis":0.076301,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:25.833 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":802111,"millis":0.802111,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":54301,"millis":0.054301,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:25.833 [print] #notpresent \n"},{"result":{"nanos":22000,"millis":0.022,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":53101,"millis":0.053101,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:25.834 [print] [\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\",\"OGC:WFS\"] \n"},{"result":{"nanos":1020215,"millis":1.020215,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":65401,"millis":0.065401,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:25.835 [print] Rijkswaterstaat \n"},{"result":{"nanos":55901,"millis":0.055901,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:25.835 [print] https:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&version=2.0.2&request=GetRecordById&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=eu-2c7040b-c448-451b-bf15-f2416ecaadd1#MD_DataIdentification \n"},{"result":{"nanos":1176517,"millis":1.176517,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":532007,"millis":0.532007,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"tn-2c7040b-c448-451b-bf15-f2416efaadd1\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":277004,"millis":0.277004,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"tn-2c7040b-c448-451b-bf15-f2416efaadd1\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":567.978883,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"tn-2c7040b-c448-451b-bf15-f2416efaadd1","startTime":1629213745268,"refId":"[1.343:67]","endTime":1629213745837,"exampleData":{"datasetIdentifierCode":"tn-2c7040b-c448-451b-bf15-f2416efaadd1"},"exampleIndex":342},{"sectionIndex":0,"stepResults":[{"result":{"nanos":13801,"millis":0.013801,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:25.340 karate.env system property was: null \n"},{"result":{"nanos":25800,"millis":0.0258,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":40401,"millis":0.040401,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":38400,"millis":0.0384,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":200503,"millis":0.200503,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":29701,"millis":0.029701,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":317104,"millis":0.317104,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":22900,"millis":0.0229,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":204203,"millis":0.204203,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":104001,"millis":0.104001,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":50700,"millis":0.0507,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":12701,"millis":0.012701,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":20600,"millis":0.0206,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4700,"millis":0.0047,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":31801,"millis":0.031801,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '6d2fce74-fb25-4322-ab25-1be8a3bc7fd0'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":547969500,"millis":547.9695,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2400,"millis":0.0024,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":488307,"millis":0.488307,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '6d2fce74-fb25-4322-ab25-1be8a3bc7fd0'"}},{"result":{"nanos":369606,"millis":0.369606,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":316404,"millis":0.316404,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":318305,"millis":0.318305,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":384806,"millis":0.384806,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":338205,"millis":0.338205,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":21700,"millis":0.0217,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":255204,"millis":0.255204,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":244404,"millis":0.244404,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":250403,"millis":0.250403,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":74601,"millis":0.074601,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":113201,"millis":0.113201,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:25.892 [print] https:\/\/inspire.caris.nl\/geoserver3\/bathy_wcs\/wcs?request=GetCapabilities&service=WCS&version=2.0.0 \n"},{"result":{"nanos":301305,"millis":0.301305,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":100201,"millis":0.100201,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:25.893 [print] OGC:WCS \n"},{"result":{"nanos":294205,"millis":0.294205,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":119401,"millis":0.119401,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:25.893 [print] #notpresent \n"},{"result":{"nanos":30700,"millis":0.0307,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":42801,"millis":0.042801,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:25.893 [print] OGC:WCS \n"},{"result":{"nanos":373005,"millis":0.373005,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":74101,"millis":0.074101,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:25.894 [print] Ministerie van Defensie, Koninklijke Marine, Dienst der Hydrografie \n"},{"result":{"nanos":38900,"millis":0.0389,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:25.894 [print] https:\/\/www.nationaalgeoregister.nl\/geonetwork\/srv\/dut\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\/\/www.isotc211.org\/2005\/gmd&elementSetName=full&id=a322184d-6285-4856-bb78-f450b30ffc0e#MD_DataIdentification \n"},{"result":{"nanos":358705,"millis":0.358705,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":530307,"millis":0.530307,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"6d2fce74-fb25-4322-ab25-1be8a3bc7fd0\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":302705,"millis":0.302705,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"6d2fce74-fb25-4322-ab25-1be8a3bc7fd0\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":554.843198,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"6d2fce74-fb25-4322-ab25-1be8a3bc7fd0","startTime":1629213745339,"refId":"[1.344:67]","endTime":1629213745895,"exampleData":{"datasetIdentifierCode":"6d2fce74-fb25-4322-ab25-1be8a3bc7fd0"},"exampleIndex":343},{"sectionIndex":0,"stepResults":[{"result":{"nanos":16001,"millis":0.016001,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:25.422 karate.env system property was: null \n"},{"result":{"nanos":27800,"millis":0.0278,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":40501,"millis":0.040501,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":38001,"millis":0.038001,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":193602,"millis":0.193602,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":41400,"millis":0.0414,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":317405,"millis":0.317405,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":21300,"millis":0.0213,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":37701,"millis":0.037701,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":97401,"millis":0.097401,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":81001,"millis":0.081001,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":13400,"millis":0.0134,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":16400,"millis":0.0164,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":3700,"millis":0.0037,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":31401,"millis":0.031401,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '7e450110-f643-4b73-9262-4f13966cffc6'"}},{"result":{"nanos":3600,"millis":0.0036,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3200,"millis":0.0032,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":540983700,"millis":540.9837,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":1901,"millis":0.001901,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":571708,"millis":0.571708,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '7e450110-f643-4b73-9262-4f13966cffc6'"}},{"result":{"nanos":488607,"millis":0.488607,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":372706,"millis":0.372706,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":368805,"millis":0.368805,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":432006,"millis":0.432006,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":396106,"millis":0.396106,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":18700,"millis":0.0187,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":276903,"millis":0.276903,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":270803,"millis":0.270803,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":281204,"millis":0.281204,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":57201,"millis":0.057201,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":119201,"millis":0.119201,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:25.969 [print] https:\\\/\\\/geodata.nationaalgeoregister.nl\\\/rws\\\/kaderrichtlijnwater2009\\\/wms\\\/v1_0?service=WMS&request=GetCapabilities \n"},{"result":{"nanos":311104,"millis":0.311104,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":77501,"millis":0.077501,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:25.969 [print] [\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":314305,"millis":0.314305,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":64901,"millis":0.064901,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:25.970 [print] #notpresent \n"},{"result":{"nanos":21600,"millis":0.0216,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":38301,"millis":0.038301,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:25.970 [print] [\"OGC:WMS\",\"OGC:WMS\"] \n"},{"result":{"nanos":399906,"millis":0.399906,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":639409,"millis":0.639409,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:25.971 [print] Beheer PDOK \n"},{"result":{"nanos":309004,"millis":0.309004,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:25.971 [print] [\"https:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=krw2006-c57b-44a2-83a4-e51223d5f15g#MD_DataIdentification\",\"https:\\\/\\\/www.nationaalgeoregister.nl\\\/geonetwork\\\/srv\\\/dut\\\/csw?service=CSW&request=GetRecordById&version=2.0.2&outputSchema=http:\\\/\\\/www.isotc211.org\\\/2005\\\/gmd&elementSetName=full&id=krw2006-68b5-4ff3-94a4-9c24109ffd5e#MD_DataIdentification\"] \n"},{"result":{"nanos":1242017,"millis":1.242017,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":853912,"millis":0.853912,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"7e450110-f643-4b73-9262-4f13966cffc6\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":346505,"millis":0.346505,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"7e450110-f643-4b73-9262-4f13966cffc6\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":550.24573,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"7e450110-f643-4b73-9262-4f13966cffc6","startTime":1629213745422,"refId":"[1.345:67]","endTime":1629213745973,"exampleData":{"datasetIdentifierCode":"7e450110-f643-4b73-9262-4f13966cffc6"},"exampleIndex":344},{"sectionIndex":0,"stepResults":[{"result":{"nanos":14200,"millis":0.0142,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:25.771 karate.env system property was: null \n"},{"result":{"nanos":26800,"millis":0.0268,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":44301,"millis":0.044301,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":38901,"millis":0.038901,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":204103,"millis":0.204103,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":34600,"millis":0.0346,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":313305,"millis":0.313305,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":24700,"millis":0.0247,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":56001,"millis":0.056001,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":110702,"millis":0.110702,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":51601,"millis":0.051601,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":11200,"millis":0.0112,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19400,"millis":0.0194,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4100,"millis":0.0041,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":36500,"millis":0.0365,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '7af7b20d-3f8a-4d7f-8124-73980535a4f6'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3700,"millis":0.0037,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":531967571,"millis":531.967571,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2000,"millis":0.002,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":413606,"millis":0.413606,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '7af7b20d-3f8a-4d7f-8124-73980535a4f6'"}},{"result":{"nanos":343005,"millis":0.343005,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":310404,"millis":0.310404,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":275804,"millis":0.275804,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":341505,"millis":0.341505,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":297905,"millis":0.297905,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":18200,"millis":0.0182,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":220803,"millis":0.220803,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":216204,"millis":0.216204,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":215403,"millis":0.215403,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":62601,"millis":0.062601,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":95401,"millis":0.095401,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:26.307 [print] https:\/\/www.broinspireservices.nl\/arcgis\/services\/inspire\/inspire_dgm_rd\/MapServer\/WMSServer?request=GetCapabilities&service=WMS \n"},{"result":{"nanos":273404,"millis":0.273404,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":81602,"millis":0.081602,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:26.308 [print] #notpresent \n"},{"result":{"nanos":255203,"millis":0.255203,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":59301,"millis":0.059301,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:26.308 [print] OGC:WMS \n"},{"result":{"nanos":21301,"millis":0.021301,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":34200,"millis":0.0342,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:26.308 [print] #notpresent \n"},{"result":{"nanos":686310,"millis":0.68631,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":77101,"millis":0.077101,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:26.309 [print] TNO Geologische Dienst Nederland \n"},{"result":{"nanos":33300,"millis":0.0333,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:26.309 [print] http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire?SERVICE=CSW&version=2.0.2&REQUEST=GetRecordById&ID=F646DFB9-5BF6-EAB9-042B-CAB6FF2DC275&OUTPUTSCHEMA=http:\/\/www.isotc211.org\/2005\/gmd&ELEMENTSETNAME=full#MD_DataIdentification \n"},{"result":{"nanos":338605,"millis":0.338605,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":493707,"millis":0.493707,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"7af7b20d-3f8a-4d7f-8124-73980535a4f6\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":261104,"millis":0.261104,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"7af7b20d-3f8a-4d7f-8124-73980535a4f6\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":538.398364,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-3","name":"7af7b20d-3f8a-4d7f-8124-73980535a4f6","startTime":1629213745767,"refId":"[1.346:67]","endTime":1629213746310,"exampleData":{"datasetIdentifierCode":"7af7b20d-3f8a-4d7f-8124-73980535a4f6"},"exampleIndex":345},{"sectionIndex":0,"stepResults":[{"result":{"nanos":12500,"millis":0.0125,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:25.839 karate.env system property was: null \n"},{"result":{"nanos":25900,"millis":0.0259,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":40201,"millis":0.040201,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":47300,"millis":0.0473,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":478807,"millis":0.478807,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":37401,"millis":0.037401,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":324105,"millis":0.324105,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":25000,"millis":0.025,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":38601,"millis":0.038601,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":103301,"millis":0.103301,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":299405,"millis":0.299405,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":15500,"millis":0.0155,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19700,"millis":0.0197,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":5000,"millis":0.005,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4500,"millis":0.0045,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":43500,"millis":0.0435,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '8a772a52-d659-47b3-a131-82398fb78664'"}},{"result":{"nanos":3800,"millis":0.0038,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":541882812,"millis":541.882812,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2200,"millis":0.0022,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":400606,"millis":0.400606,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '8a772a52-d659-47b3-a131-82398fb78664'"}},{"result":{"nanos":369005,"millis":0.369005,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":293504,"millis":0.293504,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":277004,"millis":0.277004,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":352105,"millis":0.352105,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":305104,"millis":0.305104,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":18900,"millis":0.0189,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":241003,"millis":0.241003,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":225603,"millis":0.225603,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":256703,"millis":0.256703,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":58901,"millis":0.058901,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":84001,"millis":0.084001,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:26.385 [print] https:\/\/haleconnect.com\/services\/bsp\/org.874.28716afd-1e98-4623-9239-8abbd9249408\/service\/atom\/id_predefined_dataset \n"},{"result":{"nanos":314004,"millis":0.314004,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":217303,"millis":0.217303,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:26.386 [print] #notpresent \n"},{"result":{"nanos":279904,"millis":0.279904,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":52600,"millis":0.0526,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:26.387 [print] #notpresent \n"},{"result":{"nanos":156802,"millis":0.156802,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":144402,"millis":0.144402,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:26.387 [print] #notpresent \n"},{"result":{"nanos":437406,"millis":0.437406,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":63801,"millis":0.063801,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:26.388 [print] Koninklijk Nederlands Meteorologisch Instituut (KNMI) \n"},{"result":{"nanos":317805,"millis":0.317805,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:26.388 [print] https:\/\/haleconnect.com\/services\/bsp\/org.874.28716afd-1e98-4623-9239-8abbd9249408\/md\/dataset\/dataset1#xpointer%28%2F%2Fgmd%3AidentificationInfo%5B1%5D%2Fgmd%3AMD_DataIdentification%29 \n"},{"result":{"nanos":336505,"millis":0.336505,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":479807,"millis":0.479807,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"8a772a52-d659-47b3-a131-82398fb78664\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":273804,"millis":0.273804,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"8a772a52-d659-47b3-a131-82398fb78664\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":549.370115,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-2","name":"8a772a52-d659-47b3-a131-82398fb78664","startTime":1629213745838,"refId":"[1.347:67]","endTime":1629213746389,"exampleData":{"datasetIdentifierCode":"8a772a52-d659-47b3-a131-82398fb78664"},"exampleIndex":346},{"sectionIndex":0,"stepResults":[{"result":{"nanos":18500,"millis":0.0185,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:25.897 karate.env system property was: null \n"},{"result":{"nanos":29601,"millis":0.029601,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":46601,"millis":0.046601,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":43900,"millis":0.0439,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":249604,"millis":0.249604,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":36201,"millis":0.036201,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":370505,"millis":0.370505,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":25301,"millis":0.025301,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":41500,"millis":0.0415,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":113602,"millis":0.113602,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":47701,"millis":0.047701,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":11800,"millis":0.0118,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":21000,"millis":0.021,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":4600,"millis":0.0046,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4800,"millis":0.0048,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":60201,"millis":0.060201,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = '12505d53-a942-467e-a462-ddbe5ac6467f'"}},{"result":{"nanos":4000,"millis":0.004,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":3500,"millis":0.0035,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":535136317,"millis":535.136317,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2400,"millis":0.0024,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":659709,"millis":0.659709,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == '12505d53-a942-467e-a462-ddbe5ac6467f'"}},{"result":{"nanos":735310,"millis":0.73531,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":368406,"millis":0.368406,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":607508,"millis":0.607508,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":396205,"millis":0.396205,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":356305,"millis":0.356305,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":20900,"millis":0.0209,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":321005,"millis":0.321005,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":380105,"millis":0.380105,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":280904,"millis":0.280904,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":69101,"millis":0.069101,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":106701,"millis":0.106701,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:26.438 [print] https:\/\/haleconnect.com\/ows\/services\/org.874.28716afd-1e98-4623-9239-8abbd9249408_wfs?SERVICE=WFS&Request=GetCapabilities \n"},{"result":{"nanos":284204,"millis":0.284204,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":72601,"millis":0.072601,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:26.439 [print] #notpresent \n"},{"result":{"nanos":281004,"millis":0.281004,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":71201,"millis":0.071201,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:26.439 [print] #notpresent \n"},{"result":{"nanos":24100,"millis":0.0241,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":35400,"millis":0.0354,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:26.439 [print] #notpresent \n"},{"result":{"nanos":345205,"millis":0.345205,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":75701,"millis":0.075701,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:26.439 [print] Koninklijk Nederlands Meteorologisch Instituut (KNMI) \n"},{"result":{"nanos":35601,"millis":0.035601,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:26.439 [print] https:\/\/haleconnect.com\/services\/bsp\/org.874.28716afd-1e98-4623-9239-8abbd9249408\/md\/dataset\/dataset1#xpointer%28%2F%2Fgmd%3AidentificationInfo%5B1%5D%2Fgmd%3AMD_DataIdentification%29 \n"},{"result":{"nanos":356305,"millis":0.356305,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":2549236,"millis":2.549236,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"12505d53-a942-467e-a462-ddbe5ac6467f\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":321504,"millis":0.321504,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"12505d53-a942-467e-a462-ddbe5ac6467f\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":545.025855,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-1","name":"12505d53-a942-467e-a462-ddbe5ac6467f","startTime":1629213745897,"refId":"[1.348:67]","endTime":1629213746443,"exampleData":{"datasetIdentifierCode":"12505d53-a942-467e-a462-ddbe5ac6467f"},"exampleIndex":347},{"sectionIndex":0,"stepResults":[{"result":{"nanos":18300,"millis":0.0183,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/'"},"stepLog":"15:22:25.975 karate.env system property was: null \n"},{"result":{"nanos":32201,"millis":0.032201,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def mystorage = Java.type('storage.DataStorage')"}},{"result":{"nanos":43200,"millis":0.0432,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def db = new mystorage"}},{"result":{"nanos":42501,"millis":0.042501,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def db = db.setfeature(karate.info.featureFileName)"}},{"result":{"nanos":1081015,"millis":1.081015,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def separator = java.lang.System.getProperty(\"file.separator\")"}},{"result":{"nanos":46200,"millis":0.0462,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def idfile = \"file:\" + db.outputpath(\"T01_ids\").getAbsolutePath() + separator + 'idsService.json'"}},{"result":{"nanos":369106,"millis":0.369106,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":6,"text":"def list = karate.read(idfile)"}},{"result":{"nanos":31700,"millis":0.0317,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":7,"text":"def outputpath = db.outputpath()"}},{"result":{"nanos":51400,"millis":0.0514,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":8,"text":"eval db.ensureDirectory(outputpath)"}},{"result":{"nanos":118102,"millis":0.118102,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":9,"text":"eval db.writeheaderservice(outputpath + separator  + \"services.csv\" )"}},{"result":{"nanos":49301,"millis":0.049301,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":10,"text":"eval db.writeheaderservice(outputpath + separator  + \"services-Beheer PDOK.csv\" )"}},{"result":{"nanos":11900,"millis":0.0119,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"url 'http:\/\/nationaalgeoregister.nl\/geonetwork\/srv\/dut\/inspire'"}},{"result":{"nanos":19600,"millis":0.0196,"status":"passed"},"step":{"line":23,"prefix":"And","index":1,"text":"param service = 'CSW'"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":24,"prefix":"And","index":2,"text":"param version = '2.0.2'"}},{"result":{"nanos":4900,"millis":0.0049,"status":"passed"},"step":{"line":25,"prefix":"And","index":3,"text":"param request = 'GetRecordById'"}},{"result":{"nanos":63401,"millis":0.063401,"status":"passed"},"step":{"line":26,"prefix":"And","index":4,"text":"param id = 'c1ea0e3f-e8e2-4f25-aae8-f24ec6ee8217'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":27,"prefix":"And","index":5,"text":"param elementsetname = 'full'"}},{"result":{"nanos":4200,"millis":0.0042,"status":"passed"},"step":{"line":28,"prefix":"And","index":6,"text":"param outputSchema = 'http:\/\/www.isotc211.org\/2005\/gmd'"}},{"result":{"nanos":523707754,"millis":523.707754,"status":"passed"},"step":{"line":29,"prefix":"When","index":7,"text":"method get"}},{"result":{"nanos":2300,"millis":0.0023,"status":"passed"},"step":{"line":30,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":438506,"millis":0.438506,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"match \/GetRecordByIdResponse\/MD_Metadata\/fileIdentifier\/CharacterString == 'c1ea0e3f-e8e2-4f25-aae8-f24ec6ee8217'"}},{"result":{"nanos":418006,"millis":0.418006,"status":"passed"},"step":{"line":33,"prefix":"*","index":10,"text":"def scopecode = get response \/\/MD_Metadata\/hierarchyLevel\/MD_ScopeCode\/@codeListValue"}},{"result":{"nanos":371606,"millis":0.371606,"status":"passed"},"step":{"line":34,"prefix":"*","index":11,"text":"def title =  get response \/\/citation\/CI_Citation\/title\/CharacterString"}},{"result":{"nanos":374205,"millis":0.374205,"status":"passed"},"step":{"line":35,"prefix":"*","index":12,"text":"def email = get response \/\/electronicMailAddress\/CharacterString"}},{"result":{"nanos":423206,"millis":0.423206,"status":"passed"},"step":{"line":36,"prefix":"*","index":13,"text":"def organisationpath1 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/Anchor')"}},{"result":{"nanos":392406,"millis":0.392406,"status":"passed"},"step":{"line":37,"prefix":"*","index":14,"text":"def organisationpath2 = karate.get('\/\/MD_Metadata\/contact\/CI_ResponsibleParty\/organisationName\/CharacterString')"}},{"result":{"nanos":24100,"millis":0.0241,"status":"passed"},"step":{"line":38,"prefix":"*","index":15,"text":"def organisationpath = organisationpath1 !== \"#notpresent\" ? organisationpath1 : organisationpath2"}},{"result":{"nanos":288104,"millis":0.288104,"status":"passed"},"step":{"line":39,"prefix":"*","index":16,"text":"def metadataStandardVersionpath = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/metadataStandardVersion\/CharacterString')"}},{"result":{"nanos":284004,"millis":0.284004,"status":"passed"},"step":{"line":40,"prefix":"*","index":17,"text":"def MD_DataIdentificationCitationAnchor = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/identificationInfo\/MD_DataIdentification\/citation\/CI_Citation\/identifier\/\/@href')"}},{"result":{"nanos":293904,"millis":0.293904,"status":"passed"},"step":{"line":43,"prefix":"*","index":18,"text":"string connectrawUrl = karate.get ('\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/linkage\/URL')"}},{"result":{"nanos":63301,"millis":0.063301,"status":"passed"},"step":{"line":44,"prefix":"*","index":19,"text":"string connectUrl = db.getCorrectedUrl(connectrawUrl)"}},{"result":{"nanos":87002,"millis":0.087002,"status":"passed"},"step":{"line":45,"prefix":"*","index":20,"text":"print connectUrl"},"stepLog":"15:22:26.505 [print] https:\/\/haleconnect.com\/ows\/services\/org.874.28716afd-1e98-4623-9239-8abbd9249408_wms?SERVICE=WMS&Request=GetCapabilities \n"},{"result":{"nanos":371505,"millis":0.371505,"status":"passed"},"step":{"line":49,"prefix":"*","index":21,"text":"string protocol1 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/Anchor')"}},{"result":{"nanos":75801,"millis":0.075801,"status":"passed"},"step":{"line":50,"prefix":"*","index":22,"text":"print protocol1"},"stepLog":"15:22:26.507 [print] #notpresent \n"},{"result":{"nanos":627509,"millis":0.627509,"status":"passed"},"step":{"line":51,"prefix":"*","index":23,"text":"string protocol2 = karate.get  ( '\/GetRecordByIdResponse\/MD_Metadata\/distributionInfo\/MD_Distribution\/transferOptions\/MD_DigitalTransferOptions\/onLine\/CI_OnlineResource\/protocol\/CharacterString')"}},{"result":{"nanos":61000,"millis":0.061,"status":"passed"},"step":{"line":52,"prefix":"*","index":24,"text":"print protocol2"},"stepLog":"15:22:26.507 [print] #notpresent \n"},{"result":{"nanos":26600,"millis":0.0266,"status":"passed"},"step":{"line":53,"prefix":"*","index":25,"text":"string protocol = protocol1 ? protocol1 : protocol2"}},{"result":{"nanos":63501,"millis":0.063501,"status":"passed"},"step":{"line":54,"prefix":"*","index":26,"text":"print protocol"},"stepLog":"15:22:26.508 [print] #notpresent \n"},{"result":{"nanos":827812,"millis":0.827812,"status":"passed"},"step":{"line":55,"prefix":"*","index":27,"text":"string operateson = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/operatesOn\/@href"}},{"result":{"nanos":67701,"millis":0.067701,"status":"passed"},"step":{"line":56,"prefix":"*","index":28,"text":"print organisationpath"},"stepLog":"15:22:26.509 [print] Koninklijk Nederlands Meteorologisch Instituut (KNMI) \n"},{"result":{"nanos":47401,"millis":0.047401,"status":"passed"},"step":{"line":57,"prefix":"*","index":29,"text":"print operateson"},"stepLog":"15:22:26.509 [print] https:\/\/haleconnect.com\/services\/bsp\/org.874.28716afd-1e98-4623-9239-8abbd9249408\/md\/dataset\/dataset1#xpointer%28%2F%2Fgmd%3AidentificationInfo%5B1%5D%2Fgmd%3AMD_DataIdentification%29 \n"},{"result":{"nanos":335305,"millis":0.335305,"status":"passed"},"step":{"line":59,"prefix":"*","index":30,"text":"string servicetype = get response \/\/MD_Metadata\/identificationInfo\/SV_ServiceIdentification\/serviceType\/LocalName"}},{"result":{"nanos":503107,"millis":0.503107,"status":"passed"},"step":{"line":62,"prefix":"*","index":31,"text":"eval db.writeln('\"c1ea0e3f-e8e2-4f25-aae8-f24ec6ee8217\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's.csv')"}},{"result":{"nanos":249604,"millis":0.249604,"status":"passed"},"step":{"line":63,"prefix":"*","index":32,"text":"eval db.writeln('\"c1ea0e3f-e8e2-4f25-aae8-f24ec6ee8217\",\"'+ title + '\",\"' + connectUrl + '\",\"' + protocol + '\",\"' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '\",\"'+ email + '\",\"' + (metadataStandardVersionpath ?  metadataStandardVersionpath  : 'no metadatastandard path found') + '\",\"' + operateson + '\",\"' + db.getdatasetuuid(operateson) + '\",\"' + servicetype + '\"', db.outputpath() + separator + scopecode + 's-' + (organisationpath ? organisationpath : 'no organisationName found in dataset record') + '.csv')"}}],"line":67,"description":"","durationMillis":532.420377,"failed":false,"tags":["step1"],"executorName":"pool-5-thread-4","name":"c1ea0e3f-e8e2-4f25-aae8-f24ec6ee8217","startTime":1629213745975,"refId":"[1.349:67]","endTime":1629213746510,"exampleData":{"datasetIdentifierCode":"c1ea0e3f-e8e2-4f25-aae8-f24ec6ee8217"},"exampleIndex":348}],"callDepth":0,"name":"get details","description":"","resultDate":"2021-08-17 03:22:26 PM","durationMillis":197499.066227,"passedCount":349}