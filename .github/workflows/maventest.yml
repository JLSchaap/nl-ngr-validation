name: NGR validatie

on:
  # Trigger the workflow on push or pull request,
  # but only for the master branch
  push:
    branches:
      - master
  pull_request:
    branches:
      - master
 # schedule:
 #   - cron: "04 04 * * *"

jobs:
  build:
    runs-on: ubuntu-latest
    timeout-minutes: 15
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 13
        uses: actions/setup-java@v1
        with:
          java-version: 13

      - name: Build with Maven step 1
        run: mvn -B --file pom.xml -Dkarate.options="--tags @step1" test

      - name: Deploy step 1 
        uses: peaceiris/actions-gh-pages@v3
        if: always()
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./target/surefire-reports

      - name: Build with Maven step 2
        run: mvn -B --file pom.xml -Dkarate.options="--tags @step2" test

      - name: Build with Maven step extra
        run: mvn -B --file pom.xml -Dkarate.options="--tags @extra" test

      - name: Deploy step2 + extra 
        uses: peaceiris/actions-gh-pages@v3
        if: always()
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./target/surefire-reports
